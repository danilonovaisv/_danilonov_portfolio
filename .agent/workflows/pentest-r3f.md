---
description: Next.js R3F Section Pentest Builder
---

# Next.js R3F Section Pentest Workflow

This workflow executes a multi-agent simulation to build, refine, and stress-test a high-performance 3D/Motion section in Next.js.
It follows the "Antgravity" pentest specification.

## ðŸŽ¯ AGENTS & RESPONSIBILITIES

### 1. ARCHITECT (Structure & Logic)

- **Role**: Template Parser + Code Generator
- **Focus**: `page.tsx`, `layout.tsx`, `components/` structure.
- **Constraints**:
  - `use client` boundary management.
  - TypeScript strict typing (Interfaces/Types).
  - Tailwind implementation using Design System tokens.
  - Error Boundaries & Suspense.

### 2. 3D-ENGINEER (WebGL & Performance)

- **Role**: R3F/Three.js Scene Builder
- **Focus**: `Canvas3D.tsx`, `Experience.tsx`, Shaders.
- **Constraints**:
  - **Performance**: 60fps target (monitor calls).
  - **Loading**: Use `useGLTF`, `useTexture` with Preload.
  - **Controls**: Disable OrbitControls in production.
  - **Responsiveness**: `useThree` for viewport-aware scaling.

### 3. MOTION-DESIGNER (Interaction & Feel)

- **Role**: Animation Specialist
- **Focus**: `framer-motion` variants, `GSAP` timelines.
- **Constraints**:
  - **Stagger**: Orchestrate elements entering.
  - **Feedback**: Immediate hover/tap response.
  - **Smoothness**: Use `layoutId` for morphing.
  - **Reduced Motion**: Respect system preferences.

### 4. QA-VALIDATOR (Security & Quality)

- **Role**: Filter & Auditor
- **Focus**: Tests, Linting, Accessibility.
- **Checklist**:
  - [ ] TypeScript Compilation (`npm run typecheck`)
  - [ ] Linting (`npm run lint`)
  - [ ] Accessibility Audit (WCAG AA)
  - [ ] Responsive behavior (320px to 4k)

### 5. DEPLOYER (Production Readiness)

- **Role**: Build & Optimization
- **Focus**: Bundle size, Vercel config.
- **Checklist**:
  - [ ] Bundle Size (< 500kb critical path)
  - [ ] `og:image` automation
  - [ ] Production Build (`npm run build`)

---

## ðŸš€ EXECUTION STEPS

### STEP 1: Initialization

Define the scope of the section (e.g., "Hero Section", "Features Grid").
_User Code:_ `Input: Section Name and Requirements`

### STEP 2: Architecture

**Agent: ARCHITECT**

1. Create the directory structure: `src/components/[SectionName]`.
2. Generate `SectionWrapper.tsx` and `types.ts`.
3. Scaffold `page.tsx` for testing isolation.

### STEP 3: 3D Core

**Agent: 3D-ENGINEER**

1. Create `Scene.tsx` inside the component folder.
2. Setup lighting, environment, and geometry.
3. Optimize for mobile (conditionally render heavy effects).

### STEP 4: Animation Layer

**Agent: MOTION-DESIGNER**

1. Create `animations.ts` or `variants.ts`.
2. Wrap elements in `<motion.div>`.
3. Integration with 3D (Ref-based animation).

### STEP 5: Validation Loop

**Agent: QA-VALIDATOR**
// turbo

1. Run static analysis: `npm run typecheck && npm run lint`
2. Manually verify responsiveness.

### STEP 6: Build Verification

**Agent: DEPLOYER**
// turbo

1. Run build: `npm run build`
2. Report status.

---

## ðŸ› ï¸ USAGE

To execute this workflow, provide the **Section Name** and **Context** to the agent:

> "Run pentest-r3f workflow for a new 'HolographicInterface' section."

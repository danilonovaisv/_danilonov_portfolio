module.exports = [
  43230,
  (a) => {
    'use strict';
    var b = a.i(81184);
    let c = { fadeGhost: b.ghostFade, riseSoft: b.riseSoft },
      d = { ghost: b.MOTION_TOKENS.spring.ghost };
    a.s(['motionSprings', 0, d, 'motionTokens', 0, c]);
  },
  12926,
  (a) => {
    'use strict';
    var b = a.i(59465),
      c = a.i(60788),
      d = a.i(29474),
      e = a.i(26118),
      f = a.i(43538),
      g = a.i(4531),
      h = a.i(48635),
      i = a.i(57283),
      j = a.i(43230),
      k = a.i(84755),
      l = a.i(70349);
    function m() {
      let a = (0, e.useReducedMotion)(),
        m = (0, c.useRef)(null),
        { scrollYProgress: n } = (0, f.useScroll)({
          target: m,
          offset: ['start end', 'end start'],
        }),
        o = (0, c.useRef)(null),
        p = (0, c.useRef)(null);
      (0, c.useEffect)(() => {
        (o.current && (o.current.playbackRate = 0.4),
          p.current && (p.current.playbackRate = 0.4));
      }, []);
      let q = (0, g.useSpring)(n, j.motionSprings.ghost),
        r = (0, h.useTransform)(q, [0, 1], a ? [0, 0] : [48, -48]),
        s = (0, k.useSiteAssetUrl)(
          l.SITE_ASSET_KEYS.heroVideos.aboutDesktop,
          i.ABOUT_CONTENT.hero.videos.desktop ||
            '/public/videos/about.hero.desktop_video.mp4'
        ),
        t = (0, k.useSiteAssetUrl)(
          l.SITE_ASSET_KEYS.heroVideos.aboutMobile,
          i.ABOUT_CONTENT.hero.videos.mobile ||
            '/public/videos/about.hero.mobile_video.mp4'
        );
      return (0, b.jsxs)('section', {
        ref: m,
        className: 'relative min-h-screen bg-background overflow-hidden',
        'aria-label': 'Hero - Manifesto',
        children: [
          (0, b.jsx)(d.motion.video, {
            ref: o,
            src: s || '/public/videos/about.hero.desktop_video.mp4',
            autoPlay: !0,
            muted: !0,
            loop: !0,
            playsInline: !0,
            preload: 'metadata',
            className:
              'hidden lg:block absolute inset-0 w-full h-full object-cover opacity-[0.55]',
            'aria-hidden': 'true',
          }),
          (0, b.jsx)('div', {
            className:
              'hidden lg:block absolute inset-0 bg-background/60 bg-linear-to-r from-background via-background/40 to-background/80 pointer-events-none z-1',
            'aria-hidden': 'true',
          }),
          (0, b.jsx)('div', {
            className:
              'relative z-10 hidden lg:flex h-screen items-center overflow-hidden w-full',
            children: (0, b.jsx)('div', {
              className: 'std-grid w-full',
              children: (0, b.jsxs)('div', {
                className: 'grid grid-cols-12 w-full gap-8',
                children: [
                  (0, b.jsx)('div', {
                    className: 'col-span-6',
                    'aria-hidden': 'true',
                  }),
                  (0, b.jsx)(d.motion.div, {
                    initial: 'hidden',
                    whileInView: 'visible',
                    viewport: { once: !0, amount: 0.3 },
                    className:
                      'col-span-6 flex flex-col items-end text-right -translate-y-[10%]',
                    children: (0, b.jsxs)('div', {
                      className:
                        'w-full flex flex-col items-end max-w-[750px] ml-auto',
                      children: [
                        (0, b.jsxs)(d.motion.div, {
                          initial: { opacity: 0, y: 24, filter: 'blur(10px)' },
                          whileInView: {
                            opacity: 1,
                            y: 0,
                            filter: 'blur(0px)',
                          },
                          transition: {
                            duration: 1.2,
                            ease: [0.22, 1, 0.36, 1],
                            delay: 0,
                          },
                          className: 'mb-12 flex flex-col items-end gap-1',
                          children: [
                            (0, b.jsxs)('h1', {
                              className:
                                'text-[clamp(44px,4.5vw,64px)] font-medium leading-[1.08] tracking-[-0.02em] text-text-light text-right',
                              children: [
                                i.ABOUT_CONTENT.hero.title.text,
                                i.ABOUT_CONTENT.hero.title.highlight &&
                                  (0, b.jsx)('span', {
                                    className:
                                      'text-bluePrimary font-semibold ml-2',
                                    children:
                                      i.ABOUT_CONTENT.hero.title.highlight,
                                  }),
                              ],
                            }),
                            (0, b.jsx)('div', {
                              className: 'flex flex-col items-end',
                              children: i.ABOUT_CONTENT.hero.manifesto.map(
                                (a, c) =>
                                  (0, b.jsxs)(
                                    'p',
                                    {
                                      className:
                                        'text-[clamp(44px,4.5vw,64px)] font-medium leading-[1.08] tracking-[-0.02em] text-text-light text-right',
                                      children: [
                                        a.text,
                                        a.highlight &&
                                          (0, b.jsx)('span', {
                                            className:
                                              'text-bluePrimary font-semibold ml-2',
                                            children: a.highlight,
                                          }),
                                        a.textEnd,
                                      ],
                                    },
                                    c
                                  )
                              ),
                            }),
                          ],
                        }),
                        (0, b.jsx)(d.motion.div, {
                          initial: { opacity: 0, y: 24 },
                          whileInView: { opacity: 1, y: 0 },
                          transition: {
                            duration: 1.2,
                            ease: [0.22, 1, 0.36, 1],
                            delay: 0.4,
                          },
                          children: (0, b.jsx)('h3', {
                            className:
                              'type-h3 text-white text-right font-medium max-w-[620px]',
                            children:
                              i.ABOUT_CONTENT.hero.description.join(' '),
                          }),
                        }),
                      ],
                    }),
                  }),
                ],
              }),
            }),
          }),
          (0, b.jsx)('div', {
            className:
              'absolute bottom-0 left-0 w-full h-[30vh] md:h-[40vh] bg-linear-to-t from-background via-background/80 to-transparent pointer-events-none z-20',
          }),
          (0, b.jsxs)('div', {
            className: 'lg:hidden',
            children: [
              (0, b.jsxs)('div', {
                className: 'relative aspect-square w-full overflow-hidden',
                children: [
                  (0, b.jsx)(d.motion.video, {
                    ref: p,
                    src: t,
                    autoPlay: !0,
                    muted: !0,
                    loop: !0,
                    playsInline: !0,
                    preload: 'metadata',
                    className:
                      'absolute inset-0 w-full h-full object-cover object-top opacity-[0.78]',
                    style: { y: r },
                    'aria-hidden': 'true',
                  }),
                  (0, b.jsx)('div', {
                    className:
                      'absolute inset-0 bg-linear-to-t from-background via-transparent to-transparent z-10',
                  }),
                ],
              }),
              (0, b.jsx)('div', {
                className: 'relative z-10 px-6 pt-10 pb-20 text-center',
                children: (0, b.jsxs)(d.motion.div, {
                  initial: a ? 'visible' : 'hidden',
                  animate: 'visible',
                  variants: {
                    visible: {
                      transition: { staggerChildren: 0.2, delayChildren: 0.3 },
                    },
                  },
                  className: 'space-y-6',
                  children: [
                    (0, b.jsx)(d.motion.div, {
                      variants: {
                        hidden: { opacity: 0, filter: 'blur(10px)' },
                        visible: {
                          opacity: 1,
                          filter: 'blur(0px)',
                          transition: {
                            duration: 1.4,
                            ease: [0.22, 1, 0.36, 1],
                          },
                        },
                      },
                      className: 'space-y-4',
                      children: (0, b.jsxs)('h1', {
                        className:
                          'type-h2 text-white leading-tight flex flex-col gap-1',
                        children: [
                          (0, b.jsxs)('span', {
                            children: [
                              'Sou ',
                              (0, b.jsx)('span', {
                                className: 'text-bluePrimary',
                                children: 'Danilo Novais.',
                              }),
                            ],
                          }),
                          (0, b.jsxs)('span', {
                            children: [
                              'Você ',
                              (0, b.jsx)('span', {
                                className: 'text-bluePrimary',
                                children: 'não vê tudo',
                              }),
                              ' o que eu faço.',
                            ],
                          }),
                          (0, b.jsxs)('span', {
                            children: [
                              'Mas sente quando',
                              ' ',
                              (0, b.jsx)('span', {
                                className: 'text-bluePrimary',
                                children: 'funciona.',
                              }),
                            ],
                          }),
                        ],
                      }),
                    }),
                    (0, b.jsx)(d.motion.div, {
                      variants: j.motionTokens.fadeGhost,
                      className:
                        'type-h3 text-white leading-snug tracking-tight max-w-[98%] mx-auto font-medium',
                      children: i.ABOUT_CONTENT.hero.description.map((a, c) =>
                        (0, b.jsx)(
                          'span',
                          { className: 'block', children: a },
                          c
                        )
                      ),
                    }),
                  ],
                }),
              }),
            ],
          }),
        ],
      });
    }
    a.s(['AboutHero', () => m]);
  },
  24844,
  (a) => {
    'use strict';
    var b = a.i(59465),
      c = a.i(60788),
      d = a.i(86066),
      e = a.i(8909),
      f = a.i(38328),
      g = a.i(68335),
      h = a.i(84755),
      i = a.i(70349),
      j = a.i(59944);
    e.default.registerPlugin(f.ScrollTrigger);
    let k = [
      {
        id: '1',
        title: 'O que permanece',
        desc: 'Desde cedo, sempre prestei atenção no que ficava — não só no que aparecia. Enquanto muitos olhavam para o brilho imediato, eu era atraído pelos vestígios, pelos detalhes que sobreviviam ao tempo. A essência das coisas sempre falou mais alto do que a superfície.',
        fallback: 'about/origin/about.origin_image.1.webp',
        alt: 'O que permanece - essência que sobrevive ao tempo',
      },
      {
        id: '2',
        title: 'Do traço à intenção',
        desc: 'Rabiscos viraram ideias. Ideias viraram projetos. E os projetos começaram a deixar rastros. Meu processo criativo nasceu do improviso, do lápis na margem do caderno. Aos poucos, aquilo que era instinto virou direção. Com cada tentativa, aprendi a dar forma ao invisível — até que os conceitos começaram a falar por si.',
        fallback: 'about/origin/about.origin_image.2.webp',
        alt: 'Do traço à intenção - processo criativo emergente',
      },
      {
        id: '3',
        title: 'A descoberta do invisível',
        desc: 'Foi ali que entendi: design não é enfeite. É ferramenta invisível de transformação. Por trás de cada escolha visual, existe intenção. Descobri que o design verdadeiro não grita — ele conduz. Ele está presente nos detalhes que ninguém percebe, mas que todos sentem. Transformar sem que se perceba a transformação: isso é potência.',
        fallback: 'about/origin/about.origin_image.3.webp',
        alt: 'Descoberta do invisível - design como transformação',
      },
      {
        id: '4',
        title: 'Expansão com propósito',
        desc: 'Estudei Comunicação, mergulhei no design, no branding e hoje uso inteligência artificial para expandir o alcance sem perder a essência humana da criação. Minha trajetória uniu intuição com método, arte com estratégia. O futuro pede novas ferramentas — e eu as abracei. Mas nunca deixei que a tecnologia apagasse o que me move: a sensibilidade, o olhar atento, a busca pelo significado.',
        fallback: 'about/origin/about.origin_image.4.webp',
        alt: 'Expansão com propósito - intuição + tecnologia',
      },
    ];
    a.s([
      'default',
      0,
      function () {
        let a = (0, c.useRef)(null),
          l = (0, c.useRef)(null),
          m = (0, c.useRef)(null),
          [n, o] = (0, c.useState)(!1),
          p = (a) => (0, j.buildSupabaseStorageUrl)('site-assets', a) ?? void 0,
          q =
            (0, h.useSiteAssetUrl)(
              i.SITE_ASSET_KEYS.about.originImages[0],
              p(k[0].fallback)
            ) ?? p(k[0].fallback),
          r =
            (0, h.useSiteAssetUrl)(
              i.SITE_ASSET_KEYS.about.originImages[1],
              p(k[1].fallback)
            ) ?? p(k[1].fallback),
          s =
            (0, h.useSiteAssetUrl)(
              i.SITE_ASSET_KEYS.about.originImages[2],
              p(k[2].fallback)
            ) ?? p(k[2].fallback),
          t =
            (0, h.useSiteAssetUrl)(
              i.SITE_ASSET_KEYS.about.originImages[3],
              p(k[3].fallback)
            ) ?? p(k[3].fallback),
          u = [
            { ...k[0], img: q },
            { ...k[1], img: r },
            { ...k[2], img: s },
            { ...k[3], img: t },
          ];
        return ((0, c.useEffect)(() => {
          o(!0);
        }, []),
        (0, c.useEffect)(() => {
          if (!n) return;
          let a = 0,
            b = new g.default({
              duration: 1.2,
              easing: (a) => Math.min(1, 1.001 - Math.pow(2, -10 * a)),
              touchMultiplier: 2,
            }),
            c = (d) => {
              (b.raf(d), (a = requestAnimationFrame(c)));
            };
          ((a = requestAnimationFrame(c)),
            b.on('scroll', f.ScrollTrigger.update));
          let d = e.default.matchMedia();
          (d.add('(min-width: 1024px)', () => {
            if (!l.current || !m.current) return;
            let a = e.default.utils.toArray('.img-wrapper'),
              b = e.default.utils.toArray('.img-wrapper img'),
              c = e.default.utils.toArray('.arch__info'),
              d = ['#040013', '#060018', '#08001e', '#0a001a'],
              f = e.default.timeline({
                scrollTrigger: {
                  trigger: l.current,
                  start: 'top top',
                  end: 'bottom bottom',
                  pin: m.current,
                  scrub: !0,
                  invalidateOnRefresh: !0,
                },
              });
            (e.default.set(b, {
              clipPath: 'inset(0% 0% 0% 0%)',
              objectPosition: '0px 0%',
              scale: 1.15,
              filter: 'blur(12px)',
              opacity: 0,
              yPercent: 0,
            }),
              a.forEach((a, b) => {
                a.style.zIndex = (u.length - b).toString();
              }),
              e.default.to(b[0], {
                filter: 'blur(0px)',
                opacity: 1,
                duration: 0.8,
                ease: 'power2.out',
                scrollTrigger: {
                  trigger: l.current,
                  start: 'top 75%',
                  toggleActions: 'play none none reverse',
                },
              }),
              u.forEach((c, e) => {
                let g = a[e],
                  h = b[e],
                  i = b[e + 1];
                if (e < u.length - 1) {
                  let a = 1.5 * e;
                  (f.to(
                    'body',
                    { backgroundColor: d[e + 1], duration: 1.5, ease: 'none' },
                    a
                  ),
                    f.to(
                      g,
                      {
                        clipPath: 'inset(0px 0px 100% 0px)',
                        duration: 1.5,
                        ease: 'none',
                      },
                      a
                    ),
                    f.to(
                      h,
                      {
                        objectPosition: '0px 60%',
                        yPercent: 15,
                        duration: 1.5,
                        ease: 'none',
                      },
                      a
                    ),
                    f.to(
                      i,
                      {
                        objectPosition: '0px 0%',
                        yPercent: -15,
                        filter: 'blur(0px)',
                        opacity: 1,
                        duration: 1.5,
                        ease: 'none',
                      },
                      a
                    ));
                }
              }),
              c.forEach((a) => {
                let b = a.querySelector('h2'),
                  c = a.querySelector('p');
                (b &&
                  e.default.fromTo(
                    b,
                    { y: 40, opacity: 0, filter: 'blur(12px)' },
                    {
                      y: 0,
                      opacity: 1,
                      filter: 'blur(0px)',
                      duration: 0.8,
                      ease: 'cubic-bezier(0.22, 1, 0.36, 1)',
                      scrollTrigger: {
                        trigger: a,
                        start: 'top 80%',
                        toggleActions: 'play none none reverse',
                      },
                    }
                  ),
                  c &&
                    e.default.fromTo(
                      c,
                      { y: 30, opacity: 0, filter: 'blur(8px)' },
                      {
                        y: 0,
                        opacity: 1,
                        filter: 'blur(0px)',
                        duration: 0.8,
                        delay: 0.1,
                        ease: 'cubic-bezier(0.22, 1, 0.36, 1)',
                        scrollTrigger: {
                          trigger: a,
                          start: 'top 80%',
                          toggleActions: 'play none none reverse',
                        },
                      }
                    ));
              }));
          }),
            d.add('(max-width: 1023px)', () => {
              let a = e.default.utils.toArray('.mobile-img-container'),
                b = e.default.utils.toArray('.mobile-text-container'),
                c = ['#040013', '#060018', '#08001e', '#0a001a'];
              (a.forEach((a, b) => {
                let d = a.querySelector('img');
                d &&
                  e.default
                    .timeline({
                      scrollTrigger: {
                        trigger: a,
                        start: 'top bottom',
                        end: 'bottom top',
                        scrub: !0,
                      },
                    })
                    .fromTo(
                      d,
                      { y: -40, scale: 1.1 },
                      { y: 40, scale: 1, ease: 'none' }
                    )
                    .to(
                      'body',
                      {
                        backgroundColor: c[b],
                        duration: 0.5,
                        ease: 'power2.inOut',
                      },
                      0
                    );
              }),
                b.forEach((a) => {
                  e.default.fromTo(
                    a,
                    { y: 80, opacity: 0, filter: 'blur(10px)' },
                    {
                      y: 0,
                      opacity: 1,
                      filter: 'blur(0px)',
                      duration: 1,
                      ease: 'power2.out',
                      scrollTrigger: {
                        trigger: a,
                        start: 'top 85%',
                        toggleActions: 'play none none reverse',
                      },
                    }
                  );
                }));
            }));
          let h = () => f.ScrollTrigger.refresh();
          return (
            window.addEventListener('load', h),
            setTimeout(h, 500),
            () => {
              (window.removeEventListener('load', h),
                a && cancelAnimationFrame(a),
                d.revert(),
                b.destroy(),
                f.ScrollTrigger.getAll().forEach((a) => a.kill()));
            }
          );
        }, [n]),
        n)
          ? (0, b.jsx)('section', {
              className:
                'relative w-full overflow-hidden transition-colors duration-1000',
              ref: a,
              children: (0, b.jsxs)('div', {
                className:
                  'max-w-420 mx-auto px-6 md:px-12 lg:px-16 xl:px-24 py-24',
                children: [
                  (0, b.jsx)('div', {
                    className: 'mb-24 text-center select-none',
                    children: (0, b.jsx)('h1', {
                      className:
                        'text-[1.75rem] font-bold leading-none text-bluePrimary tracking-[0.2em] uppercase',
                      children: 'ORIGEM',
                    }),
                  }),
                  (0, b.jsxs)('div', {
                    className:
                      'arch relative grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12 gap-8 md:gap-12 max-w-360 mx-auto',
                    ref: l,
                    children: [
                      (0, b.jsx)('div', {
                        className:
                          'col-span-4 md:col-span-8 lg:col-span-6 flex flex-col',
                        children: u.map((a) =>
                          (0, b.jsx)(
                            'div',
                            {
                              className:
                                'arch__info min-h-screen lg:h-[120vh] flex flex-col justify-center mb-24 lg:mb-0 items-center text-center lg:items-end lg:text-right',
                              children: (0, b.jsxs)('div', {
                                className:
                                  'content w-full lg:max-w-130 flex flex-col gap-8 lg:transform lg:-translate-y-[15%]',
                                children: [
                                  (0, b.jsxs)('div', {
                                    className:
                                      'mobile-text-container space-y-6',
                                    children: [
                                      (0, b.jsx)('h2', {
                                        className:
                                          'text-h1 font-bold leading-[1.1] text-bluePrimary normal-case',
                                        children: a.title,
                                      }),
                                      (0, b.jsx)('p', {
                                        className:
                                          'text-[16px] md:text-[18px] lg:text-[20px] font-normal leading-[1.7] text-[#fcffff] opacity-75',
                                        children: a.desc,
                                      }),
                                    ],
                                  }),
                                  (0, b.jsx)('div', {
                                    className:
                                      'mobile-img-container lg:hidden relative mt-8 w-full aspect-square min-h-60 rounded-3xl overflow-hidden bg-[#060018] shadow-2xl',
                                    children: (0, b.jsx)(d.default, {
                                      src: a.img || '/placeholder-image.jpg',
                                      alt: a.alt,
                                      fill: !0,
                                      className:
                                        'w-full h-full object-cover will-change-transform',
                                      sizes: '(max-width: 1024px) 100vw, 560px',
                                      priority: '1' === a.id,
                                    }),
                                  }),
                                ],
                              }),
                            },
                            a.id
                          )
                        ),
                      }),
                      (0, b.jsx)('div', {
                        className:
                          'arch__right hidden lg:flex col-span-6 h-screen sticky top-0 items-center justify-center',
                        ref: m,
                        children: (0, b.jsx)('div', {
                          className: 'relative w-full aspect-square max-w-140',
                          children: u.map((a) =>
                            (0, b.jsx)(
                              'div',
                              {
                                className:
                                  'img-wrapper absolute inset-0 rounded-3xl overflow-hidden shadow-[0_40px_100px_-20px_rgba(0,0,0,1)] bg-[#040013]',
                                children: (0, b.jsx)(d.default, {
                                  src: a.img || '/placeholder-image.jpg',
                                  alt: a.alt,
                                  fill: !0,
                                  className:
                                    'w-full h-full object-cover will-change-transform',
                                  sizes: '(min-width: 1024px) 560px, 100vw',
                                  priority: '1' === a.id,
                                }),
                              },
                              `desktop-img-${a.id}`
                            )
                          ),
                        }),
                      }),
                    ],
                  }),
                ],
              }),
            })
          : (0, b.jsx)('section', {
              className:
                'relative w-full overflow-hidden transition-colors duration-1000',
              children: (0, b.jsx)('div', {
                className:
                  'max-w-420 mx-auto px-6 md:px-12 lg:px-16 xl:px-24 py-24',
                children: (0, b.jsx)('div', {
                  className: 'mb-24 text-center select-none',
                  children: (0, b.jsx)('h1', {
                    className:
                      "text-[1.75rem] font-['CustomLight'] font-light leading-none text-[#4fe6ff] tracking-[0.2em] uppercase",
                    children: 'LOADING...',
                  }),
                }),
              }),
            });
      },
    ]);
  },
  92294,
  (a) => {
    'use strict';
    var b = a.i(59465),
      c = a.i(60788),
      d = a.i(29474),
      e = a.i(43538),
      f = a.i(48635),
      g = a.i(4531),
      h = a.i(26118);
    let i = [
        {
          id: '01',
          keyword: 'Direção',
          description: 'criativa que organiza o caos',
        },
        {
          id: '02',
          keyword: 'Design',
          description: 'estratégico que guia decisões',
        },
        {
          id: '03',
          keyword: 'Identidades',
          description: 'que permanecem na memória',
        },
        {
          id: '04',
          keyword: 'Campanhas',
          description: 'multicanais com lógica e emoção',
        },
        {
          id: '05',
          keyword: 'Branding',
          description: 'que não grita — mas marca',
        },
        {
          id: '06',
          keyword: 'Inteligência Artificial',
          description: 'aplicada à criação',
        },
        {
          id: '07',
          keyword: 'Liderança Criativa',
          description: 'com visão e método',
        },
      ],
      j = [
        'Branding',
        'Identidade Visual',
        'Motion Design',
        'Campanhas',
        'UI/UX',
        'Direção de Arte',
        'Creative Coding',
        'AI Design',
      ],
      k = [0.22, 1, 0.36, 1];
    function l() {
      let a = (0, c.useRef)(null),
        l = !!(0, h.useReducedMotion)(),
        { scrollYProgress: m } = (0, e.useScroll)({
          target: a,
          offset: ['start start', 'end end'],
        }),
        n = (0, g.useSpring)(m, {
          stiffness: 100,
          damping: 30,
          restDelta: 0.001,
        }),
        o = (0, f.useTransform)(n, [0, 1], ['120vw', '-120%']),
        p = (0, f.useTransform)(n, [0, 0.05, 0.95, 1], [0, 1, 1, 0]);
      return (0, b.jsxs)('section', {
        ref: a,
        className: 'relative z-10 w-full bg-[#040013] text-white',
        'aria-labelledby': 'what-i-do-heading',
        children: [
          (0, b.jsx)('div', {
            className: 'hidden lg:block lg:h-[300vh]',
            children: (0, b.jsxs)('div', {
              className:
                'sticky top-0 flex h-screen w-full flex-col items-center justify-center overflow-hidden',
              children: [
                (0, b.jsx)('div', {
                  className:
                    'absolute top-0 z-20 flex w-full justify-center pt-20',
                  children: (0, b.jsxs)('div', {
                    className: 'max-w-[900px] text-center',
                    children: [
                      (0, b.jsxs)('h2', {
                        id: 'what-i-do-heading',
                        className:
                          'font-display text-5xl font-black leading-[1.15] tracking-tight text-white md:text-6xl',
                        children: [
                          'Do ',
                          (0, b.jsx)('span', {
                            className: 'text-[#0048ff]',
                            children: 'insight',
                          }),
                          ' ao',
                          ' ',
                          (0, b.jsx)('span', {
                            className: 'text-[#0048ff]',
                            children: 'impacto',
                          }),
                          '.',
                        ],
                      }),
                      (0, b.jsx)('p', {
                        className:
                          'mt-3 font-display text-4xl font-black leading-[1.15] tracking-tight text-white/90 md:text-5xl',
                        children: 'Mesmo quando você não percebe.',
                      }),
                    ],
                  }),
                }),
                (0, b.jsx)(d.motion.div, {
                  style: { x: l ? 0 : o, opacity: l ? 1 : p },
                  className: 'flex gap-6 will-change-transform pt-32',
                  children: i.map((a, c) =>
                    (0, b.jsxs)(
                      d.motion.article,
                      {
                        initial: { opacity: 0, scale: 0.95 },
                        whileInView: { opacity: 1, scale: 1 },
                        viewport: { once: !0, margin: '-5%' },
                        transition: { duration: 0.4, delay: 0.06 * c, ease: k },
                        className:
                          'group flex min-h-[140px] min-w-[380px] items-center gap-5 rounded-2xl bg-[#0048ff] p-6 shadow-[0_25px_50px_-12px_rgba(0,72,255,0.5)] transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_30px_60px_-12px_rgba(0,72,255,0.65)]',
                        children: [
                          (0, b.jsx)('span', {
                            className:
                              'shrink-0 font-display text-5xl font-black text-[#8705f2] transition-transform duration-300 group-hover:scale-110',
                            'aria-hidden': 'true',
                            children: a.id,
                          }),
                          (0, b.jsxs)('p', {
                            className:
                              'font-display text-xl font-bold leading-tight text-white',
                            children: [
                              (0, b.jsx)('strong', {
                                className: 'text-[#4fe6ff]',
                                children: a.keyword,
                              }),
                              ' ',
                              a.description,
                            ],
                          }),
                        ],
                      },
                      a.id
                    )
                  ),
                }),
                (0, b.jsx)('div', {
                  className:
                    'pointer-events-none absolute inset-y-0 left-0 w-32 bg-linear-to-r from-[#040013] to-transparent',
                }),
                (0, b.jsx)('div', {
                  className:
                    'pointer-events-none absolute inset-y-0 right-0 w-32 bg-linear-to-l from-[#040013] to-transparent',
                }),
              ],
            }),
          }),
          (0, b.jsx)('div', {
            className: 'block py-16 lg:hidden',
            children: (0, b.jsxs)('div', {
              className: 'std-grid',
              children: [
                (0, b.jsxs)('header', {
                  className: 'mb-12 text-center',
                  children: [
                    (0, b.jsxs)('h2', {
                      id: 'what-i-do-heading-mobile',
                      className:
                        'font-display text-[2.5rem] font-black leading-[1.1] tracking-tight text-white',
                      children: [
                        'Do ',
                        (0, b.jsx)('span', {
                          className: 'text-[#0048ff]',
                          children: 'insight',
                        }),
                        ' ao',
                        ' ',
                        (0, b.jsx)('span', {
                          className: 'text-[#0048ff]',
                          children: 'impacto',
                        }),
                        '.',
                      ],
                    }),
                    (0, b.jsx)('p', {
                      className:
                        'mt-2 font-display text-[1.75rem] font-black leading-[1.1] tracking-tight text-white/90',
                      children: 'Mesmo quando você não percebe.',
                    }),
                  ],
                }),
                (0, b.jsx)('div', {
                  className: 'flex flex-col gap-3',
                  children: i.map((a, c) =>
                    (0, b.jsxs)(
                      d.motion.article,
                      {
                        initial: l
                          ? { opacity: 1, x: 0 }
                          : { opacity: 0, x: 80 },
                        whileInView: { opacity: 1, x: 0 },
                        viewport: { once: !0, margin: '-10%' },
                        transition: { duration: 0.4, delay: 0.08 * c, ease: k },
                        className:
                          'group flex min-h-[76px] w-full items-center gap-4 rounded-xl bg-[#0048ff] px-5 py-4 shadow-[0_16px_40px_-12px_rgba(0,72,255,0.4)] transition-all duration-300 active:scale-[0.98]',
                        children: [
                          (0, b.jsx)('span', {
                            className:
                              'shrink-0 font-display text-2xl font-black text-[#8705f2]',
                            'aria-hidden': 'true',
                            children: a.id,
                          }),
                          (0, b.jsxs)('p', {
                            className:
                              'text-sm font-semibold leading-snug text-white',
                            children: [
                              (0, b.jsx)('strong', {
                                className: 'text-[#4fe6ff]',
                                children: a.keyword,
                              }),
                              ' ',
                              a.description,
                            ],
                          }),
                        ],
                      },
                      a.id
                    )
                  ),
                }),
              ],
            }),
          }),
          (0, b.jsxs)('div', {
            className:
              'relative overflow-hidden border-t border-white/5 bg-[#040013] py-6',
            children: [
              (0, b.jsxs)('div', {
                className: 'flex w-max animate-marquee gap-12',
                children: [
                  j.map((a, c) =>
                    (0, b.jsx)(
                      'span',
                      {
                        className:
                          'text-sm font-medium uppercase tracking-[0.2em] text-white/30',
                        children: a,
                      },
                      `a-${c}`
                    )
                  ),
                  j.map((a, c) =>
                    (0, b.jsx)(
                      'span',
                      {
                        className:
                          'text-sm font-medium uppercase tracking-[0.2em] text-white/30',
                        children: a,
                      },
                      `b-${c}`
                    )
                  ),
                ],
              }),
              (0, b.jsx)('div', {
                className:
                  'pointer-events-none absolute inset-y-0 left-0 w-16 bg-linear-to-r from-[#040013] to-transparent',
              }),
              (0, b.jsx)('div', {
                className:
                  'pointer-events-none absolute inset-y-0 right-0 w-16 bg-linear-to-l from-[#040013] to-transparent',
              }),
            ],
          }),
        ],
      });
    }
    a.s(['AboutWhatIDo', () => l, 'default', 0, l]);
  },
  39155,
  (a) => {
    'use strict';
    var b = a.i(59465),
      c = a.i(60788),
      d = a.i(29474),
      e = a.i(43538),
      f = a.i(4531),
      g = a.i(48635),
      h = a.i(5502),
      i = a.i(55977),
      j = a.i(57283),
      k = a.i(43230);
    function l() {
      let a = (0, c.useRef)(null),
        l = (0, h.useReducedMotion)(),
        m = (0, i.useMediaQuery)('(max-width: 768px)'),
        { scrollYProgress: n } = (0, e.useScroll)({
          target: a,
          offset: ['start end', 'end start'],
        }),
        o = (0, f.useSpring)(n, k.motionSprings.ghost),
        p = l ? n : o,
        q = (0, g.useTransform)(p, [0, 1], l ? [0, 0] : [16, -16]),
        r = (0, g.useTransform)(p, [0, 1], l ? ['0%', '0%'] : ['-10%', '10%']);
      return (0, b.jsxs)('section', {
        ref: a,
        className:
          'relative w-full bg-background flex flex-col min-h-screen lg:min-h-[120vh]',
        'aria-label': 'Como Eu Trabalho',
        children: [
          (0, b.jsxs)('div', {
            className:
              'absolute top-0 left-0 w-full h-full z-0 overflow-hidden',
            children: [
              (0, b.jsx)(d.motion.div, {
                style: { y: m ? 0 : r },
                className: 'w-full h-full lg:h-[120%]',
                children: (0, b.jsx)(
                  'video',
                  {
                    src:
                      (m
                        ? j.ABOUT_CONTENT.method.videos.mobile
                        : j.ABOUT_CONTENT.method.videos.desktop) || '',
                    autoPlay: !0,
                    loop: !0,
                    muted: !0,
                    playsInline: !0,
                    className: `w-full h-full ${m ? 'object-cover object-center opacity-55' : 'object-cover object-right opacity-55'}`,
                    'aria-hidden': 'true',
                  },
                  m ? 'mobile' : 'desktop'
                ),
              }),
              (0, b.jsx)('div', {
                className:
                  'absolute inset-0 z-1 bg-linear-to-b from-background via-background/40 to-background md:bg-linear-to-r md:from-background md:via-background/60 md:to-transparent',
                'aria-hidden': 'true',
              }),
            ],
          }),
          (0, b.jsx)('div', {
            className: 'std-grid relative z-10 w-full h-full',
            children: (0, b.jsxs)('div', {
              className:
                'flex flex-col lg:grid lg:grid-cols-12 w-full h-full pt-[50vh] md:pt-[100px]',
              children: [
                (0, b.jsx)('div', {
                  className:
                    'w-full lg:col-span-8 flex flex-col justify-center px-0 lg:pr-20 py-20 lg:py-32',
                  children: (0, b.jsxs)(d.motion.div, {
                    style: { y: q },
                    className:
                      'w-full flex flex-col items-center lg:items-start',
                    children: [
                      (0, b.jsx)(d.motion.div, {
                        variants: k.motionTokens.fadeGhost,
                        initial: l ? 'visible' : 'hidden',
                        whileInView: 'visible',
                        viewport: { once: !0, margin: '-20%' },
                        className: 'mb-8 lg:mb-12 text-center lg:text-left',
                        children: (0, b.jsxs)('h2', {
                          className:
                            'font-display leading-[1.08] tracking-[-0.02em] text-[clamp(32px,5vw,64px)] font-bold',
                          children: [
                            (0, b.jsxs)('div', {
                              className: 'text-white leading-tight',
                              children: [
                                (0, b.jsx)('span', {
                                  className: 'text-bluePrimary',
                                  children: 'Criatividade',
                                }),
                                ' com',
                                ' ',
                                (0, b.jsx)('span', {
                                  className: 'text-bluePrimary',
                                  children: 'método',
                                }),
                                '.',
                              ],
                            }),
                            (0, b.jsx)('div', {
                              className: 'text-white leading-tight',
                              children: 'Impacto sem ruído.',
                            }),
                          ],
                        }),
                      }),
                      (0, b.jsx)(d.motion.div, {
                        variants: k.motionTokens.fadeGhost,
                        initial: l ? 'visible' : 'hidden',
                        whileInView: 'visible',
                        viewport: { once: !0, margin: '-20%' },
                        className:
                          'text-white type-h3 mb-12 lg:mb-16 text-center lg:text-left max-w-full lg:max-w-[550px]',
                        children: j.ABOUT_CONTENT.method.intro.map((a, c) =>
                          (0, b.jsx)('p', { children: a }, c)
                        ),
                      }),
                      (0, b.jsx)(d.motion.div, {
                        variants: {
                          visible: { transition: { staggerChildren: 0.1 } },
                        },
                        initial: l ? 'visible' : 'hidden',
                        whileInView: 'visible',
                        viewport: { once: !0, margin: '-10%' },
                        className:
                          'flex flex-col w-full border-t border-primary/40',
                        children: j.ABOUT_CONTENT.method.steps.map((a) =>
                          (0, b.jsxs)(
                            d.motion.div,
                            {
                              variants: k.motionTokens.riseSoft,
                              className:
                                ' group flex items-center gap-4 lg:gap-6  bg-[rgba(26,26,46,0.85)] lg:bg-transparent p-5 lg:py-6 lg:px-0 mb-4 lg:mb-0 rounded-xl lg:rounded-none lg:border-b lg:border-primary/40 transition-all duration-300 hover:bg-primary/5 ',
                              children: [
                                (0, b.jsx)('span', {
                                  className:
                                    'text-primary font-bold text-[16px] lg:text-[20px] tabular-nums',
                                  children: a.id,
                                }),
                                (0, b.jsx)('p', {
                                  className:
                                    'text-white group-hover:text-primary transition-colors font-medium text-left text-[14px] md:text-[16px] lg:text-[20px] leading-[1.4]',
                                  children: a.text,
                                }),
                              ],
                            },
                            a.id
                          )
                        ),
                      }),
                    ],
                  }),
                }),
                (0, b.jsx)('div', {
                  className: 'hidden lg:block lg:col-span-4',
                }),
              ],
            }),
          }),
        ],
      });
    }
    a.s(['default', () => l]);
  },
  31187,
  (a, b, c) => {
    'use strict';
    var d = a.r(60788);
    (d.useState,
      d.useEffect,
      d.useLayoutEffect,
      d.useDebugValue,
      (c.useSyncExternalStore =
        void 0 !== d.useSyncExternalStore
          ? d.useSyncExternalStore
          : function (a, b) {
              return b();
            }));
  },
  7108,
  (a, b, c) => {
    'use strict';
    b.exports = a.r(31187);
  },
  39687,
  (a, b, c) => {
    'use strict';
    var d = a.r(60788),
      e = a.r(7108),
      f =
        'function' == typeof Object.is
          ? Object.is
          : function (a, b) {
              return (
                (a === b && (0 !== a || 1 / a == 1 / b)) || (a != a && b != b)
              );
            },
      g = e.useSyncExternalStore,
      h = d.useRef,
      i = d.useEffect,
      j = d.useMemo,
      k = d.useDebugValue;
    c.useSyncExternalStoreWithSelector = function (a, b, c, d, e) {
      var l = h(null);
      if (null === l.current) {
        var m = { hasValue: !1, value: null };
        l.current = m;
      } else m = l.current;
      var n = g(
        a,
        (l = j(
          function () {
            function a(a) {
              if (!i) {
                if (
                  ((i = !0), (g = a), (a = d(a)), void 0 !== e && m.hasValue)
                ) {
                  var b = m.value;
                  if (e(b, a)) return (h = b);
                }
                return (h = a);
              }
              if (((b = h), f(g, a))) return b;
              var c = d(a);
              return void 0 !== e && e(b, c)
                ? ((g = a), b)
                : ((g = a), (h = c));
            }
            var g,
              h,
              i = !1,
              j = void 0 === c ? null : c;
            return [
              function () {
                return a(b());
              },
              null === j
                ? void 0
                : function () {
                    return a(j());
                  },
            ];
          },
          [b, c, d, e]
        ))[0],
        l[1]
      );
      return (
        i(
          function () {
            ((m.hasValue = !0), (m.value = n));
          },
          [n]
        ),
        k(n),
        n
      );
    };
  },
  11456,
  (a, b, c) => {
    'use strict';
    b.exports = a.r(39687);
  },
  54601,
  (a, b, c) => {
    'use strict';
    function d(a, b) {
      var c = a.length;
      for (a.push(b); 0 < c; ) {
        var d = (c - 1) >>> 1,
          e = a[d];
        if (0 < g(e, b)) ((a[d] = b), (a[c] = e), (c = d));
        else break;
      }
    }
    function e(a) {
      return 0 === a.length ? null : a[0];
    }
    function f(a) {
      if (0 === a.length) return null;
      var b = a[0],
        c = a.pop();
      if (c !== b) {
        a[0] = c;
        for (var d = 0, e = a.length, f = e >>> 1; d < f; ) {
          var h = 2 * (d + 1) - 1,
            i = a[h],
            j = h + 1,
            k = a[j];
          if (0 > g(i, c))
            j < e && 0 > g(k, i)
              ? ((a[d] = k), (a[j] = c), (d = j))
              : ((a[d] = i), (a[h] = c), (d = h));
          else if (j < e && 0 > g(k, c)) ((a[d] = k), (a[j] = c), (d = j));
          else break;
        }
      }
      return b;
    }
    function g(a, b) {
      var c = a.sortIndex - b.sortIndex;
      return 0 !== c ? c : a.id - b.id;
    }
    if (
      ((c.unstable_now = void 0),
      'object' == typeof performance && 'function' == typeof performance.now)
    ) {
      var h,
        i = performance;
      c.unstable_now = function () {
        return i.now();
      };
    } else {
      var j = Date,
        k = j.now();
      c.unstable_now = function () {
        return j.now() - k;
      };
    }
    var l = [],
      m = [],
      n = 1,
      o = null,
      p = 3,
      q = !1,
      r = !1,
      s = !1,
      t = !1,
      u = 'function' == typeof setTimeout ? setTimeout : null,
      v = 'function' == typeof clearTimeout ? clearTimeout : null,
      w = 'u' > typeof setImmediate ? setImmediate : null;
    function x(a) {
      for (var b = e(m); null !== b; ) {
        if (null === b.callback) f(m);
        else if (b.startTime <= a)
          (f(m), (b.sortIndex = b.expirationTime), d(l, b));
        else break;
        b = e(m);
      }
    }
    function y(a) {
      if (((s = !1), x(a), !r))
        if (null !== e(l)) ((r = !0), z || ((z = !0), h()));
        else {
          var b = e(m);
          null !== b && H(y, b.startTime - a);
        }
    }
    var z = !1,
      A = -1,
      B = 5,
      C = -1;
    function D() {
      return !!t || !(c.unstable_now() - C < B);
    }
    function E() {
      if (((t = !1), z)) {
        var a = c.unstable_now();
        C = a;
        var b = !0;
        try {
          a: {
            ((r = !1), s && ((s = !1), v(A), (A = -1)), (q = !0));
            var d = p;
            try {
              b: {
                for (
                  x(a), o = e(l);
                  null !== o && !(o.expirationTime > a && D());
                ) {
                  var g = o.callback;
                  if ('function' == typeof g) {
                    ((o.callback = null), (p = o.priorityLevel));
                    var i = g(o.expirationTime <= a);
                    if (((a = c.unstable_now()), 'function' == typeof i)) {
                      ((o.callback = i), x(a), (b = !0));
                      break b;
                    }
                    (o === e(l) && f(l), x(a));
                  } else f(l);
                  o = e(l);
                }
                if (null !== o) b = !0;
                else {
                  var j = e(m);
                  (null !== j && H(y, j.startTime - a), (b = !1));
                }
              }
              break a;
            } finally {
              ((o = null), (p = d), (q = !1));
            }
          }
        } finally {
          b ? h() : (z = !1);
        }
      }
    }
    if ('function' == typeof w)
      h = function () {
        w(E);
      };
    else if ('u' > typeof MessageChannel) {
      var F = new MessageChannel(),
        G = F.port2;
      ((F.port1.onmessage = E),
        (h = function () {
          G.postMessage(null);
        }));
    } else
      h = function () {
        u(E, 0);
      };
    function H(a, b) {
      A = u(function () {
        a(c.unstable_now());
      }, b);
    }
    ((c.unstable_IdlePriority = 5),
      (c.unstable_ImmediatePriority = 1),
      (c.unstable_LowPriority = 4),
      (c.unstable_NormalPriority = 3),
      (c.unstable_Profiling = null),
      (c.unstable_UserBlockingPriority = 2),
      (c.unstable_cancelCallback = function (a) {
        a.callback = null;
      }),
      (c.unstable_forceFrameRate = function (a) {
        0 > a || 125 < a
          ? console.error(
              'forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported'
            )
          : (B = 0 < a ? Math.floor(1e3 / a) : 5);
      }),
      (c.unstable_getCurrentPriorityLevel = function () {
        return p;
      }),
      (c.unstable_next = function (a) {
        switch (p) {
          case 1:
          case 2:
          case 3:
            var b = 3;
            break;
          default:
            b = p;
        }
        var c = p;
        p = b;
        try {
          return a();
        } finally {
          p = c;
        }
      }),
      (c.unstable_requestPaint = function () {
        t = !0;
      }),
      (c.unstable_runWithPriority = function (a, b) {
        switch (a) {
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
            break;
          default:
            a = 3;
        }
        var c = p;
        p = a;
        try {
          return b();
        } finally {
          p = c;
        }
      }),
      (c.unstable_scheduleCallback = function (a, b, f) {
        var g = c.unstable_now();
        switch (
          ((f =
            'object' == typeof f &&
            null !== f &&
            'number' == typeof (f = f.delay) &&
            0 < f
              ? g + f
              : g),
          a)
        ) {
          case 1:
            var i = -1;
            break;
          case 2:
            i = 250;
            break;
          case 5:
            i = 0x3fffffff;
            break;
          case 4:
            i = 1e4;
            break;
          default:
            i = 5e3;
        }
        return (
          (i = f + i),
          (a = {
            id: n++,
            callback: b,
            priorityLevel: a,
            startTime: f,
            expirationTime: i,
            sortIndex: -1,
          }),
          f > g
            ? ((a.sortIndex = f),
              d(m, a),
              null === e(l) &&
                a === e(m) &&
                (s ? (v(A), (A = -1)) : (s = !0), H(y, f - g)))
            : ((a.sortIndex = i),
              d(l, a),
              r || q || ((r = !0), z || ((z = !0), h()))),
          a
        );
      }),
      (c.unstable_shouldYield = D),
      (c.unstable_wrapCallback = function (a) {
        var b = p;
        return function () {
          var c = p;
          p = b;
          try {
            return a.apply(this, arguments);
          } finally {
            p = c;
          }
        };
      }));
  },
  14386,
  (a, b, c) => {
    'use strict';
    b.exports = a.r(54601);
  },
  62562,
  (a, b, c) => {
    b.exports = a.x('module', () => require('module'));
  },
  30717,
  (a) => {
    'use strict';
    let b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s;
    var t,
      u,
      v,
      w,
      x,
      y = a.i(59465),
      z = a.i(60788),
      A = a.i(15812),
      B = a.i(43538),
      C = a.i(48635),
      D = z;
    let E = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 },
      F = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 },
      G = 'attached',
      H = 'detached',
      I = 'srgb',
      J = 'srgb-linear',
      K = 'linear',
      L = 'srgb',
      M = '300 es',
      N = { COMPUTE: 'compute', RENDER: 'render' },
      O = { PERSPECTIVE: 'perspective', LINEAR: 'linear', FLAT: 'flat' },
      P = {
        NORMAL: 'normal',
        CENTROID: 'centroid',
        SAMPLE: 'sample',
        FIRST: 'first',
        EITHER: 'either',
      };
    function Q(a) {
      for (let b = a.length - 1; b >= 0; --b) if (a[b] >= 65535) return !0;
      return !1;
    }
    let R = {
      Int8Array: Int8Array,
      Uint8Array: Uint8Array,
      Uint8ClampedArray: Uint8ClampedArray,
      Int16Array: Int16Array,
      Uint16Array: Uint16Array,
      Int32Array: Int32Array,
      Uint32Array: Uint32Array,
      Float32Array: Float32Array,
      Float64Array: Float64Array,
    };
    function S(a, b) {
      return new R[a](b);
    }
    function T(a) {
      return ArrayBuffer.isView(a) && !(a instanceof DataView);
    }
    function U(a) {
      return document.createElementNS('http://www.w3.org/1999/xhtml', a);
    }
    function V() {
      let a = U('canvas');
      return ((a.style.display = 'block'), a);
    }
    let W = {},
      X = null;
    function Y(a) {
      X = a;
    }
    function Z() {
      return X;
    }
    function $(...a) {
      let b = 'THREE.' + a.shift();
      X ? X('log', b, ...a) : console.log(b, ...a);
    }
    function _(...a) {
      let b = 'THREE.' + a.shift();
      X ? X('warn', b, ...a) : console.warn(b, ...a);
    }
    function aa(...a) {
      let b = 'THREE.' + a.shift();
      X ? X('error', b, ...a) : console.error(b, ...a);
    }
    function ab(...a) {
      let b = a.join(' ');
      b in W || ((W[b] = !0), _(...a));
    }
    class ac {
      addEventListener(a, b) {
        void 0 === this._listeners && (this._listeners = {});
        let c = this._listeners;
        (void 0 === c[a] && (c[a] = []),
          -1 === c[a].indexOf(b) && c[a].push(b));
      }
      hasEventListener(a, b) {
        let c = this._listeners;
        return void 0 !== c && void 0 !== c[a] && -1 !== c[a].indexOf(b);
      }
      removeEventListener(a, b) {
        let c = this._listeners;
        if (void 0 === c) return;
        let d = c[a];
        if (void 0 !== d) {
          let a = d.indexOf(b);
          -1 !== a && d.splice(a, 1);
        }
      }
      dispatchEvent(a) {
        let b = this._listeners;
        if (void 0 === b) return;
        let c = b[a.type];
        if (void 0 !== c) {
          a.target = this;
          let b = c.slice(0);
          for (let c = 0, d = b.length; c < d; c++) b[c].call(this, a);
          a.target = null;
        }
      }
    }
    let ad = [
        '00',
        '01',
        '02',
        '03',
        '04',
        '05',
        '06',
        '07',
        '08',
        '09',
        '0a',
        '0b',
        '0c',
        '0d',
        '0e',
        '0f',
        '10',
        '11',
        '12',
        '13',
        '14',
        '15',
        '16',
        '17',
        '18',
        '19',
        '1a',
        '1b',
        '1c',
        '1d',
        '1e',
        '1f',
        '20',
        '21',
        '22',
        '23',
        '24',
        '25',
        '26',
        '27',
        '28',
        '29',
        '2a',
        '2b',
        '2c',
        '2d',
        '2e',
        '2f',
        '30',
        '31',
        '32',
        '33',
        '34',
        '35',
        '36',
        '37',
        '38',
        '39',
        '3a',
        '3b',
        '3c',
        '3d',
        '3e',
        '3f',
        '40',
        '41',
        '42',
        '43',
        '44',
        '45',
        '46',
        '47',
        '48',
        '49',
        '4a',
        '4b',
        '4c',
        '4d',
        '4e',
        '4f',
        '50',
        '51',
        '52',
        '53',
        '54',
        '55',
        '56',
        '57',
        '58',
        '59',
        '5a',
        '5b',
        '5c',
        '5d',
        '5e',
        '5f',
        '60',
        '61',
        '62',
        '63',
        '64',
        '65',
        '66',
        '67',
        '68',
        '69',
        '6a',
        '6b',
        '6c',
        '6d',
        '6e',
        '6f',
        '70',
        '71',
        '72',
        '73',
        '74',
        '75',
        '76',
        '77',
        '78',
        '79',
        '7a',
        '7b',
        '7c',
        '7d',
        '7e',
        '7f',
        '80',
        '81',
        '82',
        '83',
        '84',
        '85',
        '86',
        '87',
        '88',
        '89',
        '8a',
        '8b',
        '8c',
        '8d',
        '8e',
        '8f',
        '90',
        '91',
        '92',
        '93',
        '94',
        '95',
        '96',
        '97',
        '98',
        '99',
        '9a',
        '9b',
        '9c',
        '9d',
        '9e',
        '9f',
        'a0',
        'a1',
        'a2',
        'a3',
        'a4',
        'a5',
        'a6',
        'a7',
        'a8',
        'a9',
        'aa',
        'ab',
        'ac',
        'ad',
        'ae',
        'af',
        'b0',
        'b1',
        'b2',
        'b3',
        'b4',
        'b5',
        'b6',
        'b7',
        'b8',
        'b9',
        'ba',
        'bb',
        'bc',
        'bd',
        'be',
        'bf',
        'c0',
        'c1',
        'c2',
        'c3',
        'c4',
        'c5',
        'c6',
        'c7',
        'c8',
        'c9',
        'ca',
        'cb',
        'cc',
        'cd',
        'ce',
        'cf',
        'd0',
        'd1',
        'd2',
        'd3',
        'd4',
        'd5',
        'd6',
        'd7',
        'd8',
        'd9',
        'da',
        'db',
        'dc',
        'dd',
        'de',
        'df',
        'e0',
        'e1',
        'e2',
        'e3',
        'e4',
        'e5',
        'e6',
        'e7',
        'e8',
        'e9',
        'ea',
        'eb',
        'ec',
        'ed',
        'ee',
        'ef',
        'f0',
        'f1',
        'f2',
        'f3',
        'f4',
        'f5',
        'f6',
        'f7',
        'f8',
        'f9',
        'fa',
        'fb',
        'fc',
        'fd',
        'fe',
        'ff',
      ],
      ae = 1234567,
      af = Math.PI / 180,
      ag = 180 / Math.PI;
    function ah() {
      let a = (0xffffffff * Math.random()) | 0,
        b = (0xffffffff * Math.random()) | 0,
        c = (0xffffffff * Math.random()) | 0,
        d = (0xffffffff * Math.random()) | 0;
      return (
        ad[255 & a] +
        ad[(a >> 8) & 255] +
        ad[(a >> 16) & 255] +
        ad[(a >> 24) & 255] +
        '-' +
        ad[255 & b] +
        ad[(b >> 8) & 255] +
        '-' +
        ad[((b >> 16) & 15) | 64] +
        ad[(b >> 24) & 255] +
        '-' +
        ad[(63 & c) | 128] +
        ad[(c >> 8) & 255] +
        '-' +
        ad[(c >> 16) & 255] +
        ad[(c >> 24) & 255] +
        ad[255 & d] +
        ad[(d >> 8) & 255] +
        ad[(d >> 16) & 255] +
        ad[(d >> 24) & 255]
      ).toLowerCase();
    }
    function ai(a, b, c) {
      return Math.max(b, Math.min(c, a));
    }
    function aj(a, b) {
      return ((a % b) + b) % b;
    }
    function ak(a, b, c) {
      return (1 - c) * a + c * b;
    }
    function al(a, b) {
      switch (b.constructor) {
        case Float32Array:
          return a;
        case Uint32Array:
          return a / 0xffffffff;
        case Uint16Array:
          return a / 65535;
        case Uint8Array:
          return a / 255;
        case Int32Array:
          return Math.max(a / 0x7fffffff, -1);
        case Int16Array:
          return Math.max(a / 32767, -1);
        case Int8Array:
          return Math.max(a / 127, -1);
        default:
          throw Error('Invalid component type.');
      }
    }
    function am(a, b) {
      switch (b.constructor) {
        case Float32Array:
          return a;
        case Uint32Array:
          return Math.round(0xffffffff * a);
        case Uint16Array:
          return Math.round(65535 * a);
        case Uint8Array:
          return Math.round(255 * a);
        case Int32Array:
          return Math.round(0x7fffffff * a);
        case Int16Array:
          return Math.round(32767 * a);
        case Int8Array:
          return Math.round(127 * a);
        default:
          throw Error('Invalid component type.');
      }
    }
    let an = {
      DEG2RAD: af,
      RAD2DEG: ag,
      generateUUID: ah,
      clamp: ai,
      euclideanModulo: aj,
      mapLinear: function (a, b, c, d, e) {
        return d + ((a - b) * (e - d)) / (c - b);
      },
      inverseLerp: function (a, b, c) {
        return a !== b ? (c - a) / (b - a) : 0;
      },
      lerp: ak,
      damp: function (a, b, c, d) {
        return ak(a, b, 1 - Math.exp(-c * d));
      },
      pingpong: function (a, b = 1) {
        return b - Math.abs(aj(a, 2 * b) - b);
      },
      smoothstep: function (a, b, c) {
        return a <= b
          ? 0
          : a >= c
            ? 1
            : (a = (a - b) / (c - b)) * a * (3 - 2 * a);
      },
      smootherstep: function (a, b, c) {
        return a <= b
          ? 0
          : a >= c
            ? 1
            : (a = (a - b) / (c - b)) * a * a * (a * (6 * a - 15) + 10);
      },
      randInt: function (a, b) {
        return a + Math.floor(Math.random() * (b - a + 1));
      },
      randFloat: function (a, b) {
        return a + Math.random() * (b - a);
      },
      randFloatSpread: function (a) {
        return a * (0.5 - Math.random());
      },
      seededRandom: function (a) {
        void 0 !== a && (ae = a);
        let b = (ae += 0x6d2b79f5);
        return (
          (b = Math.imul(b ^ (b >>> 15), 1 | b)),
          (((b ^= b + Math.imul(b ^ (b >>> 7), 61 | b)) ^ (b >>> 14)) >>> 0) /
            0x100000000
        );
      },
      degToRad: function (a) {
        return a * af;
      },
      radToDeg: function (a) {
        return a * ag;
      },
      isPowerOfTwo: function (a) {
        return (a & (a - 1)) == 0 && 0 !== a;
      },
      ceilPowerOfTwo: function (a) {
        return Math.pow(2, Math.ceil(Math.log(a) / Math.LN2));
      },
      floorPowerOfTwo: function (a) {
        return Math.pow(2, Math.floor(Math.log(a) / Math.LN2));
      },
      setQuaternionFromProperEuler: function (a, b, c, d, e) {
        let f = Math.cos,
          g = Math.sin,
          h = f(c / 2),
          i = g(c / 2),
          j = f((b + d) / 2),
          k = g((b + d) / 2),
          l = f((b - d) / 2),
          m = g((b - d) / 2),
          n = f((d - b) / 2),
          o = g((d - b) / 2);
        switch (e) {
          case 'XYX':
            a.set(h * k, i * l, i * m, h * j);
            break;
          case 'YZY':
            a.set(i * m, h * k, i * l, h * j);
            break;
          case 'ZXZ':
            a.set(i * l, i * m, h * k, h * j);
            break;
          case 'XZX':
            a.set(h * k, i * o, i * n, h * j);
            break;
          case 'YXY':
            a.set(i * n, h * k, i * o, h * j);
            break;
          case 'ZYZ':
            a.set(i * o, i * n, h * k, h * j);
            break;
          default:
            _(
              'MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' +
                e
            );
        }
      },
      normalize: am,
      denormalize: al,
    };
    class ao {
      constructor(a = 0, b = 0) {
        ((ao.prototype.isVector2 = !0), (this.x = a), (this.y = b));
      }
      get width() {
        return this.x;
      }
      set width(a) {
        this.x = a;
      }
      get height() {
        return this.y;
      }
      set height(a) {
        this.y = a;
      }
      set(a, b) {
        return ((this.x = a), (this.y = b), this);
      }
      setScalar(a) {
        return ((this.x = a), (this.y = a), this);
      }
      setX(a) {
        return ((this.x = a), this);
      }
      setY(a) {
        return ((this.y = a), this);
      }
      setComponent(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;
          case 1:
            this.y = b;
            break;
          default:
            throw Error('index is out of range: ' + a);
        }
        return this;
      }
      getComponent(a) {
        switch (a) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          default:
            throw Error('index is out of range: ' + a);
        }
      }
      clone() {
        return new this.constructor(this.x, this.y);
      }
      copy(a) {
        return ((this.x = a.x), (this.y = a.y), this);
      }
      add(a) {
        return ((this.x += a.x), (this.y += a.y), this);
      }
      addScalar(a) {
        return ((this.x += a), (this.y += a), this);
      }
      addVectors(a, b) {
        return ((this.x = a.x + b.x), (this.y = a.y + b.y), this);
      }
      addScaledVector(a, b) {
        return ((this.x += a.x * b), (this.y += a.y * b), this);
      }
      sub(a) {
        return ((this.x -= a.x), (this.y -= a.y), this);
      }
      subScalar(a) {
        return ((this.x -= a), (this.y -= a), this);
      }
      subVectors(a, b) {
        return ((this.x = a.x - b.x), (this.y = a.y - b.y), this);
      }
      multiply(a) {
        return ((this.x *= a.x), (this.y *= a.y), this);
      }
      multiplyScalar(a) {
        return ((this.x *= a), (this.y *= a), this);
      }
      divide(a) {
        return ((this.x /= a.x), (this.y /= a.y), this);
      }
      divideScalar(a) {
        return this.multiplyScalar(1 / a);
      }
      applyMatrix3(a) {
        let b = this.x,
          c = this.y,
          d = a.elements;
        return (
          (this.x = d[0] * b + d[3] * c + d[6]),
          (this.y = d[1] * b + d[4] * c + d[7]),
          this
        );
      }
      min(a) {
        return (
          (this.x = Math.min(this.x, a.x)),
          (this.y = Math.min(this.y, a.y)),
          this
        );
      }
      max(a) {
        return (
          (this.x = Math.max(this.x, a.x)),
          (this.y = Math.max(this.y, a.y)),
          this
        );
      }
      clamp(a, b) {
        return (
          (this.x = ai(this.x, a.x, b.x)),
          (this.y = ai(this.y, a.y, b.y)),
          this
        );
      }
      clampScalar(a, b) {
        return ((this.x = ai(this.x, a, b)), (this.y = ai(this.y, a, b)), this);
      }
      clampLength(a, b) {
        let c = this.length();
        return this.divideScalar(c || 1).multiplyScalar(ai(c, a, b));
      }
      floor() {
        return (
          (this.x = Math.floor(this.x)),
          (this.y = Math.floor(this.y)),
          this
        );
      }
      ceil() {
        return (
          (this.x = Math.ceil(this.x)),
          (this.y = Math.ceil(this.y)),
          this
        );
      }
      round() {
        return (
          (this.x = Math.round(this.x)),
          (this.y = Math.round(this.y)),
          this
        );
      }
      roundToZero() {
        return (
          (this.x = Math.trunc(this.x)),
          (this.y = Math.trunc(this.y)),
          this
        );
      }
      negate() {
        return ((this.x = -this.x), (this.y = -this.y), this);
      }
      dot(a) {
        return this.x * a.x + this.y * a.y;
      }
      cross(a) {
        return this.x * a.y - this.y * a.x;
      }
      lengthSq() {
        return this.x * this.x + this.y * this.y;
      }
      length() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
      }
      manhattanLength() {
        return Math.abs(this.x) + Math.abs(this.y);
      }
      normalize() {
        return this.divideScalar(this.length() || 1);
      }
      angle() {
        return Math.atan2(-this.y, -this.x) + Math.PI;
      }
      angleTo(a) {
        let b = Math.sqrt(this.lengthSq() * a.lengthSq());
        return 0 === b ? Math.PI / 2 : Math.acos(ai(this.dot(a) / b, -1, 1));
      }
      distanceTo(a) {
        return Math.sqrt(this.distanceToSquared(a));
      }
      distanceToSquared(a) {
        let b = this.x - a.x,
          c = this.y - a.y;
        return b * b + c * c;
      }
      manhattanDistanceTo(a) {
        return Math.abs(this.x - a.x) + Math.abs(this.y - a.y);
      }
      setLength(a) {
        return this.normalize().multiplyScalar(a);
      }
      lerp(a, b) {
        return (
          (this.x += (a.x - this.x) * b),
          (this.y += (a.y - this.y) * b),
          this
        );
      }
      lerpVectors(a, b, c) {
        return (
          (this.x = a.x + (b.x - a.x) * c),
          (this.y = a.y + (b.y - a.y) * c),
          this
        );
      }
      equals(a) {
        return a.x === this.x && a.y === this.y;
      }
      fromArray(a, b = 0) {
        return ((this.x = a[b]), (this.y = a[b + 1]), this);
      }
      toArray(a = [], b = 0) {
        return ((a[b] = this.x), (a[b + 1] = this.y), a);
      }
      fromBufferAttribute(a, b) {
        return ((this.x = a.getX(b)), (this.y = a.getY(b)), this);
      }
      rotateAround(a, b) {
        let c = Math.cos(b),
          d = Math.sin(b),
          e = this.x - a.x,
          f = this.y - a.y;
        return (
          (this.x = e * c - f * d + a.x),
          (this.y = e * d + f * c + a.y),
          this
        );
      }
      random() {
        return ((this.x = Math.random()), (this.y = Math.random()), this);
      }
      *[Symbol.iterator]() {
        (yield this.x, yield this.y);
      }
    }
    class ap {
      constructor(a = 0, b = 0, c = 0, d = 1) {
        ((this.isQuaternion = !0),
          (this._x = a),
          (this._y = b),
          (this._z = c),
          (this._w = d));
      }
      static slerpFlat(a, b, c, d, e, f, g) {
        let h = c[d + 0],
          i = c[d + 1],
          j = c[d + 2],
          k = c[d + 3],
          l = e[f + 0],
          m = e[f + 1],
          n = e[f + 2],
          o = e[f + 3];
        if (g <= 0) {
          ((a[b + 0] = h), (a[b + 1] = i), (a[b + 2] = j), (a[b + 3] = k));
          return;
        }
        if (g >= 1) {
          ((a[b + 0] = l), (a[b + 1] = m), (a[b + 2] = n), (a[b + 3] = o));
          return;
        }
        if (k !== o || h !== l || i !== m || j !== n) {
          let a = h * l + i * m + j * n + k * o;
          a < 0 && ((l = -l), (m = -m), (n = -n), (o = -o), (a = -a));
          let b = 1 - g;
          if (a < 0.9995) {
            let c = Math.acos(a),
              d = Math.sin(c);
            ((h =
              h * (b = Math.sin(b * c) / d) + l * (g = Math.sin(g * c) / d)),
              (i = i * b + m * g),
              (j = j * b + n * g),
              (k = k * b + o * g));
          } else {
            let a =
              1 /
              Math.sqrt(
                (h = h * b + l * g) * h +
                  (i = i * b + m * g) * i +
                  (j = j * b + n * g) * j +
                  (k = k * b + o * g) * k
              );
            ((h *= a), (i *= a), (j *= a), (k *= a));
          }
        }
        ((a[b] = h), (a[b + 1] = i), (a[b + 2] = j), (a[b + 3] = k));
      }
      static multiplyQuaternionsFlat(a, b, c, d, e, f) {
        let g = c[d],
          h = c[d + 1],
          i = c[d + 2],
          j = c[d + 3],
          k = e[f],
          l = e[f + 1],
          m = e[f + 2],
          n = e[f + 3];
        return (
          (a[b] = g * n + j * k + h * m - i * l),
          (a[b + 1] = h * n + j * l + i * k - g * m),
          (a[b + 2] = i * n + j * m + g * l - h * k),
          (a[b + 3] = j * n - g * k - h * l - i * m),
          a
        );
      }
      get x() {
        return this._x;
      }
      set x(a) {
        ((this._x = a), this._onChangeCallback());
      }
      get y() {
        return this._y;
      }
      set y(a) {
        ((this._y = a), this._onChangeCallback());
      }
      get z() {
        return this._z;
      }
      set z(a) {
        ((this._z = a), this._onChangeCallback());
      }
      get w() {
        return this._w;
      }
      set w(a) {
        ((this._w = a), this._onChangeCallback());
      }
      set(a, b, c, d) {
        return (
          (this._x = a),
          (this._y = b),
          (this._z = c),
          (this._w = d),
          this._onChangeCallback(),
          this
        );
      }
      clone() {
        return new this.constructor(this._x, this._y, this._z, this._w);
      }
      copy(a) {
        return (
          (this._x = a.x),
          (this._y = a.y),
          (this._z = a.z),
          (this._w = a.w),
          this._onChangeCallback(),
          this
        );
      }
      setFromEuler(a, b = !0) {
        let c = a._x,
          d = a._y,
          e = a._z,
          f = a._order,
          g = Math.cos,
          h = Math.sin,
          i = g(c / 2),
          j = g(d / 2),
          k = g(e / 2),
          l = h(c / 2),
          m = h(d / 2),
          n = h(e / 2);
        switch (f) {
          case 'XYZ':
            ((this._x = l * j * k + i * m * n),
              (this._y = i * m * k - l * j * n),
              (this._z = i * j * n + l * m * k),
              (this._w = i * j * k - l * m * n));
            break;
          case 'YXZ':
            ((this._x = l * j * k + i * m * n),
              (this._y = i * m * k - l * j * n),
              (this._z = i * j * n - l * m * k),
              (this._w = i * j * k + l * m * n));
            break;
          case 'ZXY':
            ((this._x = l * j * k - i * m * n),
              (this._y = i * m * k + l * j * n),
              (this._z = i * j * n + l * m * k),
              (this._w = i * j * k - l * m * n));
            break;
          case 'ZYX':
            ((this._x = l * j * k - i * m * n),
              (this._y = i * m * k + l * j * n),
              (this._z = i * j * n - l * m * k),
              (this._w = i * j * k + l * m * n));
            break;
          case 'YZX':
            ((this._x = l * j * k + i * m * n),
              (this._y = i * m * k + l * j * n),
              (this._z = i * j * n - l * m * k),
              (this._w = i * j * k - l * m * n));
            break;
          case 'XZY':
            ((this._x = l * j * k - i * m * n),
              (this._y = i * m * k - l * j * n),
              (this._z = i * j * n + l * m * k),
              (this._w = i * j * k + l * m * n));
            break;
          default:
            _('Quaternion: .setFromEuler() encountered an unknown order: ' + f);
        }
        return (!0 === b && this._onChangeCallback(), this);
      }
      setFromAxisAngle(a, b) {
        let c = b / 2,
          d = Math.sin(c);
        return (
          (this._x = a.x * d),
          (this._y = a.y * d),
          (this._z = a.z * d),
          (this._w = Math.cos(c)),
          this._onChangeCallback(),
          this
        );
      }
      setFromRotationMatrix(a) {
        let b = a.elements,
          c = b[0],
          d = b[4],
          e = b[8],
          f = b[1],
          g = b[5],
          h = b[9],
          i = b[2],
          j = b[6],
          k = b[10],
          l = c + g + k;
        if (l > 0) {
          let a = 0.5 / Math.sqrt(l + 1);
          ((this._w = 0.25 / a),
            (this._x = (j - h) * a),
            (this._y = (e - i) * a),
            (this._z = (f - d) * a));
        } else if (c > g && c > k) {
          let a = 2 * Math.sqrt(1 + c - g - k);
          ((this._w = (j - h) / a),
            (this._x = 0.25 * a),
            (this._y = (d + f) / a),
            (this._z = (e + i) / a));
        } else if (g > k) {
          let a = 2 * Math.sqrt(1 + g - c - k);
          ((this._w = (e - i) / a),
            (this._x = (d + f) / a),
            (this._y = 0.25 * a),
            (this._z = (h + j) / a));
        } else {
          let a = 2 * Math.sqrt(1 + k - c - g);
          ((this._w = (f - d) / a),
            (this._x = (e + i) / a),
            (this._y = (h + j) / a),
            (this._z = 0.25 * a));
        }
        return (this._onChangeCallback(), this);
      }
      setFromUnitVectors(a, b) {
        let c = a.dot(b) + 1;
        return (
          c < 1e-8
            ? ((c = 0),
              Math.abs(a.x) > Math.abs(a.z)
                ? ((this._x = -a.y), (this._y = a.x), (this._z = 0))
                : ((this._x = 0), (this._y = -a.z), (this._z = a.y)))
            : ((this._x = a.y * b.z - a.z * b.y),
              (this._y = a.z * b.x - a.x * b.z),
              (this._z = a.x * b.y - a.y * b.x)),
          (this._w = c),
          this.normalize()
        );
      }
      angleTo(a) {
        return 2 * Math.acos(Math.abs(ai(this.dot(a), -1, 1)));
      }
      rotateTowards(a, b) {
        let c = this.angleTo(a);
        if (0 === c) return this;
        let d = Math.min(1, b / c);
        return (this.slerp(a, d), this);
      }
      identity() {
        return this.set(0, 0, 0, 1);
      }
      invert() {
        return this.conjugate();
      }
      conjugate() {
        return (
          (this._x *= -1),
          (this._y *= -1),
          (this._z *= -1),
          this._onChangeCallback(),
          this
        );
      }
      dot(a) {
        return (
          this._x * a._x + this._y * a._y + this._z * a._z + this._w * a._w
        );
      }
      lengthSq() {
        return (
          this._x * this._x +
          this._y * this._y +
          this._z * this._z +
          this._w * this._w
        );
      }
      length() {
        return Math.sqrt(
          this._x * this._x +
            this._y * this._y +
            this._z * this._z +
            this._w * this._w
        );
      }
      normalize() {
        let a = this.length();
        return (
          0 === a
            ? ((this._x = 0), (this._y = 0), (this._z = 0), (this._w = 1))
            : ((a = 1 / a),
              (this._x = this._x * a),
              (this._y = this._y * a),
              (this._z = this._z * a),
              (this._w = this._w * a)),
          this._onChangeCallback(),
          this
        );
      }
      multiply(a) {
        return this.multiplyQuaternions(this, a);
      }
      premultiply(a) {
        return this.multiplyQuaternions(a, this);
      }
      multiplyQuaternions(a, b) {
        let c = a._x,
          d = a._y,
          e = a._z,
          f = a._w,
          g = b._x,
          h = b._y,
          i = b._z,
          j = b._w;
        return (
          (this._x = c * j + f * g + d * i - e * h),
          (this._y = d * j + f * h + e * g - c * i),
          (this._z = e * j + f * i + c * h - d * g),
          (this._w = f * j - c * g - d * h - e * i),
          this._onChangeCallback(),
          this
        );
      }
      slerp(a, b) {
        if (b <= 0) return this;
        if (b >= 1) return this.copy(a);
        let c = a._x,
          d = a._y,
          e = a._z,
          f = a._w,
          g = this.dot(a);
        g < 0 && ((c = -c), (d = -d), (e = -e), (f = -f), (g = -g));
        let h = 1 - b;
        if (g < 0.9995) {
          let a = Math.acos(g),
            i = Math.sin(a);
          ((h = Math.sin(h * a) / i),
            (b = Math.sin(b * a) / i),
            (this._x = this._x * h + c * b),
            (this._y = this._y * h + d * b),
            (this._z = this._z * h + e * b),
            (this._w = this._w * h + f * b),
            this._onChangeCallback());
        } else
          ((this._x = this._x * h + c * b),
            (this._y = this._y * h + d * b),
            (this._z = this._z * h + e * b),
            (this._w = this._w * h + f * b),
            this.normalize());
        return this;
      }
      slerpQuaternions(a, b, c) {
        return this.copy(a).slerp(b, c);
      }
      random() {
        let a = 2 * Math.PI * Math.random(),
          b = 2 * Math.PI * Math.random(),
          c = Math.random(),
          d = Math.sqrt(1 - c),
          e = Math.sqrt(c);
        return this.set(
          d * Math.sin(a),
          d * Math.cos(a),
          e * Math.sin(b),
          e * Math.cos(b)
        );
      }
      equals(a) {
        return (
          a._x === this._x &&
          a._y === this._y &&
          a._z === this._z &&
          a._w === this._w
        );
      }
      fromArray(a, b = 0) {
        return (
          (this._x = a[b]),
          (this._y = a[b + 1]),
          (this._z = a[b + 2]),
          (this._w = a[b + 3]),
          this._onChangeCallback(),
          this
        );
      }
      toArray(a = [], b = 0) {
        return (
          (a[b] = this._x),
          (a[b + 1] = this._y),
          (a[b + 2] = this._z),
          (a[b + 3] = this._w),
          a
        );
      }
      fromBufferAttribute(a, b) {
        return (
          (this._x = a.getX(b)),
          (this._y = a.getY(b)),
          (this._z = a.getZ(b)),
          (this._w = a.getW(b)),
          this._onChangeCallback(),
          this
        );
      }
      toJSON() {
        return this.toArray();
      }
      _onChange(a) {
        return ((this._onChangeCallback = a), this);
      }
      _onChangeCallback() {}
      *[Symbol.iterator]() {
        (yield this._x, yield this._y, yield this._z, yield this._w);
      }
    }
    class aq {
      constructor(a = 0, b = 0, c = 0) {
        ((aq.prototype.isVector3 = !0),
          (this.x = a),
          (this.y = b),
          (this.z = c));
      }
      set(a, b, c) {
        return (
          void 0 === c && (c = this.z),
          (this.x = a),
          (this.y = b),
          (this.z = c),
          this
        );
      }
      setScalar(a) {
        return ((this.x = a), (this.y = a), (this.z = a), this);
      }
      setX(a) {
        return ((this.x = a), this);
      }
      setY(a) {
        return ((this.y = a), this);
      }
      setZ(a) {
        return ((this.z = a), this);
      }
      setComponent(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;
          case 1:
            this.y = b;
            break;
          case 2:
            this.z = b;
            break;
          default:
            throw Error('index is out of range: ' + a);
        }
        return this;
      }
      getComponent(a) {
        switch (a) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          case 2:
            return this.z;
          default:
            throw Error('index is out of range: ' + a);
        }
      }
      clone() {
        return new this.constructor(this.x, this.y, this.z);
      }
      copy(a) {
        return ((this.x = a.x), (this.y = a.y), (this.z = a.z), this);
      }
      add(a) {
        return ((this.x += a.x), (this.y += a.y), (this.z += a.z), this);
      }
      addScalar(a) {
        return ((this.x += a), (this.y += a), (this.z += a), this);
      }
      addVectors(a, b) {
        return (
          (this.x = a.x + b.x),
          (this.y = a.y + b.y),
          (this.z = a.z + b.z),
          this
        );
      }
      addScaledVector(a, b) {
        return (
          (this.x += a.x * b),
          (this.y += a.y * b),
          (this.z += a.z * b),
          this
        );
      }
      sub(a) {
        return ((this.x -= a.x), (this.y -= a.y), (this.z -= a.z), this);
      }
      subScalar(a) {
        return ((this.x -= a), (this.y -= a), (this.z -= a), this);
      }
      subVectors(a, b) {
        return (
          (this.x = a.x - b.x),
          (this.y = a.y - b.y),
          (this.z = a.z - b.z),
          this
        );
      }
      multiply(a) {
        return ((this.x *= a.x), (this.y *= a.y), (this.z *= a.z), this);
      }
      multiplyScalar(a) {
        return ((this.x *= a), (this.y *= a), (this.z *= a), this);
      }
      multiplyVectors(a, b) {
        return (
          (this.x = a.x * b.x),
          (this.y = a.y * b.y),
          (this.z = a.z * b.z),
          this
        );
      }
      applyEuler(a) {
        return this.applyQuaternion(as.setFromEuler(a));
      }
      applyAxisAngle(a, b) {
        return this.applyQuaternion(as.setFromAxisAngle(a, b));
      }
      applyMatrix3(a) {
        let b = this.x,
          c = this.y,
          d = this.z,
          e = a.elements;
        return (
          (this.x = e[0] * b + e[3] * c + e[6] * d),
          (this.y = e[1] * b + e[4] * c + e[7] * d),
          (this.z = e[2] * b + e[5] * c + e[8] * d),
          this
        );
      }
      applyNormalMatrix(a) {
        return this.applyMatrix3(a).normalize();
      }
      applyMatrix4(a) {
        let b = this.x,
          c = this.y,
          d = this.z,
          e = a.elements,
          f = 1 / (e[3] * b + e[7] * c + e[11] * d + e[15]);
        return (
          (this.x = (e[0] * b + e[4] * c + e[8] * d + e[12]) * f),
          (this.y = (e[1] * b + e[5] * c + e[9] * d + e[13]) * f),
          (this.z = (e[2] * b + e[6] * c + e[10] * d + e[14]) * f),
          this
        );
      }
      applyQuaternion(a) {
        let b = this.x,
          c = this.y,
          d = this.z,
          e = a.x,
          f = a.y,
          g = a.z,
          h = a.w,
          i = 2 * (f * d - g * c),
          j = 2 * (g * b - e * d),
          k = 2 * (e * c - f * b);
        return (
          (this.x = b + h * i + f * k - g * j),
          (this.y = c + h * j + g * i - e * k),
          (this.z = d + h * k + e * j - f * i),
          this
        );
      }
      project(a) {
        return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(
          a.projectionMatrix
        );
      }
      unproject(a) {
        return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(
          a.matrixWorld
        );
      }
      transformDirection(a) {
        let b = this.x,
          c = this.y,
          d = this.z,
          e = a.elements;
        return (
          (this.x = e[0] * b + e[4] * c + e[8] * d),
          (this.y = e[1] * b + e[5] * c + e[9] * d),
          (this.z = e[2] * b + e[6] * c + e[10] * d),
          this.normalize()
        );
      }
      divide(a) {
        return ((this.x /= a.x), (this.y /= a.y), (this.z /= a.z), this);
      }
      divideScalar(a) {
        return this.multiplyScalar(1 / a);
      }
      min(a) {
        return (
          (this.x = Math.min(this.x, a.x)),
          (this.y = Math.min(this.y, a.y)),
          (this.z = Math.min(this.z, a.z)),
          this
        );
      }
      max(a) {
        return (
          (this.x = Math.max(this.x, a.x)),
          (this.y = Math.max(this.y, a.y)),
          (this.z = Math.max(this.z, a.z)),
          this
        );
      }
      clamp(a, b) {
        return (
          (this.x = ai(this.x, a.x, b.x)),
          (this.y = ai(this.y, a.y, b.y)),
          (this.z = ai(this.z, a.z, b.z)),
          this
        );
      }
      clampScalar(a, b) {
        return (
          (this.x = ai(this.x, a, b)),
          (this.y = ai(this.y, a, b)),
          (this.z = ai(this.z, a, b)),
          this
        );
      }
      clampLength(a, b) {
        let c = this.length();
        return this.divideScalar(c || 1).multiplyScalar(ai(c, a, b));
      }
      floor() {
        return (
          (this.x = Math.floor(this.x)),
          (this.y = Math.floor(this.y)),
          (this.z = Math.floor(this.z)),
          this
        );
      }
      ceil() {
        return (
          (this.x = Math.ceil(this.x)),
          (this.y = Math.ceil(this.y)),
          (this.z = Math.ceil(this.z)),
          this
        );
      }
      round() {
        return (
          (this.x = Math.round(this.x)),
          (this.y = Math.round(this.y)),
          (this.z = Math.round(this.z)),
          this
        );
      }
      roundToZero() {
        return (
          (this.x = Math.trunc(this.x)),
          (this.y = Math.trunc(this.y)),
          (this.z = Math.trunc(this.z)),
          this
        );
      }
      negate() {
        return (
          (this.x = -this.x),
          (this.y = -this.y),
          (this.z = -this.z),
          this
        );
      }
      dot(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z;
      }
      lengthSq() {
        return this.x * this.x + this.y * this.y + this.z * this.z;
      }
      length() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
      }
      manhattanLength() {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
      }
      normalize() {
        return this.divideScalar(this.length() || 1);
      }
      setLength(a) {
        return this.normalize().multiplyScalar(a);
      }
      lerp(a, b) {
        return (
          (this.x += (a.x - this.x) * b),
          (this.y += (a.y - this.y) * b),
          (this.z += (a.z - this.z) * b),
          this
        );
      }
      lerpVectors(a, b, c) {
        return (
          (this.x = a.x + (b.x - a.x) * c),
          (this.y = a.y + (b.y - a.y) * c),
          (this.z = a.z + (b.z - a.z) * c),
          this
        );
      }
      cross(a) {
        return this.crossVectors(this, a);
      }
      crossVectors(a, b) {
        let c = a.x,
          d = a.y,
          e = a.z,
          f = b.x,
          g = b.y,
          h = b.z;
        return (
          (this.x = d * h - e * g),
          (this.y = e * f - c * h),
          (this.z = c * g - d * f),
          this
        );
      }
      projectOnVector(a) {
        let b = a.lengthSq();
        if (0 === b) return this.set(0, 0, 0);
        let c = a.dot(this) / b;
        return this.copy(a).multiplyScalar(c);
      }
      projectOnPlane(a) {
        return (ar.copy(this).projectOnVector(a), this.sub(ar));
      }
      reflect(a) {
        return this.sub(ar.copy(a).multiplyScalar(2 * this.dot(a)));
      }
      angleTo(a) {
        let b = Math.sqrt(this.lengthSq() * a.lengthSq());
        return 0 === b ? Math.PI / 2 : Math.acos(ai(this.dot(a) / b, -1, 1));
      }
      distanceTo(a) {
        return Math.sqrt(this.distanceToSquared(a));
      }
      distanceToSquared(a) {
        let b = this.x - a.x,
          c = this.y - a.y,
          d = this.z - a.z;
        return b * b + c * c + d * d;
      }
      manhattanDistanceTo(a) {
        return (
          Math.abs(this.x - a.x) +
          Math.abs(this.y - a.y) +
          Math.abs(this.z - a.z)
        );
      }
      setFromSpherical(a) {
        return this.setFromSphericalCoords(a.radius, a.phi, a.theta);
      }
      setFromSphericalCoords(a, b, c) {
        let d = Math.sin(b) * a;
        return (
          (this.x = d * Math.sin(c)),
          (this.y = Math.cos(b) * a),
          (this.z = d * Math.cos(c)),
          this
        );
      }
      setFromCylindrical(a) {
        return this.setFromCylindricalCoords(a.radius, a.theta, a.y);
      }
      setFromCylindricalCoords(a, b, c) {
        return (
          (this.x = a * Math.sin(b)),
          (this.y = c),
          (this.z = a * Math.cos(b)),
          this
        );
      }
      setFromMatrixPosition(a) {
        let b = a.elements;
        return ((this.x = b[12]), (this.y = b[13]), (this.z = b[14]), this);
      }
      setFromMatrixScale(a) {
        let b = this.setFromMatrixColumn(a, 0).length(),
          c = this.setFromMatrixColumn(a, 1).length(),
          d = this.setFromMatrixColumn(a, 2).length();
        return ((this.x = b), (this.y = c), (this.z = d), this);
      }
      setFromMatrixColumn(a, b) {
        return this.fromArray(a.elements, 4 * b);
      }
      setFromMatrix3Column(a, b) {
        return this.fromArray(a.elements, 3 * b);
      }
      setFromEuler(a) {
        return ((this.x = a._x), (this.y = a._y), (this.z = a._z), this);
      }
      setFromColor(a) {
        return ((this.x = a.r), (this.y = a.g), (this.z = a.b), this);
      }
      equals(a) {
        return a.x === this.x && a.y === this.y && a.z === this.z;
      }
      fromArray(a, b = 0) {
        return (
          (this.x = a[b]),
          (this.y = a[b + 1]),
          (this.z = a[b + 2]),
          this
        );
      }
      toArray(a = [], b = 0) {
        return ((a[b] = this.x), (a[b + 1] = this.y), (a[b + 2] = this.z), a);
      }
      fromBufferAttribute(a, b) {
        return (
          (this.x = a.getX(b)),
          (this.y = a.getY(b)),
          (this.z = a.getZ(b)),
          this
        );
      }
      random() {
        return (
          (this.x = Math.random()),
          (this.y = Math.random()),
          (this.z = Math.random()),
          this
        );
      }
      randomDirection() {
        let a = Math.random() * Math.PI * 2,
          b = 2 * Math.random() - 1,
          c = Math.sqrt(1 - b * b);
        return (
          (this.x = c * Math.cos(a)),
          (this.y = b),
          (this.z = c * Math.sin(a)),
          this
        );
      }
      *[Symbol.iterator]() {
        (yield this.x, yield this.y, yield this.z);
      }
    }
    let ar = new aq(),
      as = new ap();
    class at {
      constructor(a, b, c, d, e, f, g, h, i) {
        ((at.prototype.isMatrix3 = !0),
          (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
          void 0 !== a && this.set(a, b, c, d, e, f, g, h, i));
      }
      set(a, b, c, d, e, f, g, h, i) {
        let j = this.elements;
        return (
          (j[0] = a),
          (j[1] = d),
          (j[2] = g),
          (j[3] = b),
          (j[4] = e),
          (j[5] = h),
          (j[6] = c),
          (j[7] = f),
          (j[8] = i),
          this
        );
      }
      identity() {
        return (this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this);
      }
      copy(a) {
        let b = this.elements,
          c = a.elements;
        return (
          (b[0] = c[0]),
          (b[1] = c[1]),
          (b[2] = c[2]),
          (b[3] = c[3]),
          (b[4] = c[4]),
          (b[5] = c[5]),
          (b[6] = c[6]),
          (b[7] = c[7]),
          (b[8] = c[8]),
          this
        );
      }
      extractBasis(a, b, c) {
        return (
          a.setFromMatrix3Column(this, 0),
          b.setFromMatrix3Column(this, 1),
          c.setFromMatrix3Column(this, 2),
          this
        );
      }
      setFromMatrix4(a) {
        let b = a.elements;
        return (
          this.set(b[0], b[4], b[8], b[1], b[5], b[9], b[2], b[6], b[10]),
          this
        );
      }
      multiply(a) {
        return this.multiplyMatrices(this, a);
      }
      premultiply(a) {
        return this.multiplyMatrices(a, this);
      }
      multiplyMatrices(a, b) {
        let c = a.elements,
          d = b.elements,
          e = this.elements,
          f = c[0],
          g = c[3],
          h = c[6],
          i = c[1],
          j = c[4],
          k = c[7],
          l = c[2],
          m = c[5],
          n = c[8],
          o = d[0],
          p = d[3],
          q = d[6],
          r = d[1],
          s = d[4],
          t = d[7],
          u = d[2],
          v = d[5],
          w = d[8];
        return (
          (e[0] = f * o + g * r + h * u),
          (e[3] = f * p + g * s + h * v),
          (e[6] = f * q + g * t + h * w),
          (e[1] = i * o + j * r + k * u),
          (e[4] = i * p + j * s + k * v),
          (e[7] = i * q + j * t + k * w),
          (e[2] = l * o + m * r + n * u),
          (e[5] = l * p + m * s + n * v),
          (e[8] = l * q + m * t + n * w),
          this
        );
      }
      multiplyScalar(a) {
        let b = this.elements;
        return (
          (b[0] *= a),
          (b[3] *= a),
          (b[6] *= a),
          (b[1] *= a),
          (b[4] *= a),
          (b[7] *= a),
          (b[2] *= a),
          (b[5] *= a),
          (b[8] *= a),
          this
        );
      }
      determinant() {
        let a = this.elements,
          b = a[0],
          c = a[1],
          d = a[2],
          e = a[3],
          f = a[4],
          g = a[5],
          h = a[6],
          i = a[7],
          j = a[8];
        return (
          b * f * j - b * g * i - c * e * j + c * g * h + d * e * i - d * f * h
        );
      }
      invert() {
        let a = this.elements,
          b = a[0],
          c = a[1],
          d = a[2],
          e = a[3],
          f = a[4],
          g = a[5],
          h = a[6],
          i = a[7],
          j = a[8],
          k = j * f - g * i,
          l = g * h - j * e,
          m = i * e - f * h,
          n = b * k + c * l + d * m;
        if (0 === n) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
        let o = 1 / n;
        return (
          (a[0] = k * o),
          (a[1] = (d * i - j * c) * o),
          (a[2] = (g * c - d * f) * o),
          (a[3] = l * o),
          (a[4] = (j * b - d * h) * o),
          (a[5] = (d * e - g * b) * o),
          (a[6] = m * o),
          (a[7] = (c * h - i * b) * o),
          (a[8] = (f * b - c * e) * o),
          this
        );
      }
      transpose() {
        let a,
          b = this.elements;
        return (
          (a = b[1]),
          (b[1] = b[3]),
          (b[3] = a),
          (a = b[2]),
          (b[2] = b[6]),
          (b[6] = a),
          (a = b[5]),
          (b[5] = b[7]),
          (b[7] = a),
          this
        );
      }
      getNormalMatrix(a) {
        return this.setFromMatrix4(a).invert().transpose();
      }
      transposeIntoArray(a) {
        let b = this.elements;
        return (
          (a[0] = b[0]),
          (a[1] = b[3]),
          (a[2] = b[6]),
          (a[3] = b[1]),
          (a[4] = b[4]),
          (a[5] = b[7]),
          (a[6] = b[2]),
          (a[7] = b[5]),
          (a[8] = b[8]),
          this
        );
      }
      setUvTransform(a, b, c, d, e, f, g) {
        let h = Math.cos(e),
          i = Math.sin(e);
        return (
          this.set(
            c * h,
            c * i,
            -c * (h * f + i * g) + f + a,
            -d * i,
            d * h,
            -d * (-i * f + h * g) + g + b,
            0,
            0,
            1
          ),
          this
        );
      }
      scale(a, b) {
        return (this.premultiply(au.makeScale(a, b)), this);
      }
      rotate(a) {
        return (this.premultiply(au.makeRotation(-a)), this);
      }
      translate(a, b) {
        return (this.premultiply(au.makeTranslation(a, b)), this);
      }
      makeTranslation(a, b) {
        return (
          a.isVector2
            ? this.set(1, 0, a.x, 0, 1, a.y, 0, 0, 1)
            : this.set(1, 0, a, 0, 1, b, 0, 0, 1),
          this
        );
      }
      makeRotation(a) {
        let b = Math.cos(a),
          c = Math.sin(a);
        return (this.set(b, -c, 0, c, b, 0, 0, 0, 1), this);
      }
      makeScale(a, b) {
        return (this.set(a, 0, 0, 0, b, 0, 0, 0, 1), this);
      }
      equals(a) {
        let b = this.elements,
          c = a.elements;
        for (let a = 0; a < 9; a++) if (b[a] !== c[a]) return !1;
        return !0;
      }
      fromArray(a, b = 0) {
        for (let c = 0; c < 9; c++) this.elements[c] = a[c + b];
        return this;
      }
      toArray(a = [], b = 0) {
        let c = this.elements;
        return (
          (a[b] = c[0]),
          (a[b + 1] = c[1]),
          (a[b + 2] = c[2]),
          (a[b + 3] = c[3]),
          (a[b + 4] = c[4]),
          (a[b + 5] = c[5]),
          (a[b + 6] = c[6]),
          (a[b + 7] = c[7]),
          (a[b + 8] = c[8]),
          a
        );
      }
      clone() {
        return new this.constructor().fromArray(this.elements);
      }
    }
    let au = new at(),
      av = new at().set(
        0.4123908,
        0.3575843,
        0.1804808,
        0.212639,
        0.7151687,
        0.0721923,
        0.0193308,
        0.1191948,
        0.9505322
      ),
      aw = new at().set(
        3.2409699,
        -1.5373832,
        -0.4986108,
        -0.9692436,
        1.8759675,
        0.0415551,
        0.0556301,
        -0.203977,
        1.0569715
      ),
      ax =
        ((o = [0.64, 0.33, 0.3, 0.6, 0.15, 0.06]),
        (p = [0.2126, 0.7152, 0.0722]),
        (q = [0.3127, 0.329]),
        (n = {
          enabled: !0,
          workingColorSpace: J,
          spaces: {},
          convert: function (a, b, c) {
            return (
              !1 !== this.enabled &&
                b !== c &&
                b &&
                c &&
                (this.spaces[b].transfer === L &&
                  ((a.r = ay(a.r)), (a.g = ay(a.g)), (a.b = ay(a.b))),
                this.spaces[b].primaries !== this.spaces[c].primaries &&
                  (a.applyMatrix3(this.spaces[b].toXYZ),
                  a.applyMatrix3(this.spaces[c].fromXYZ)),
                this.spaces[c].transfer === L &&
                  ((a.r = az(a.r)), (a.g = az(a.g)), (a.b = az(a.b)))),
              a
            );
          },
          workingToColorSpace: function (a, b) {
            return this.convert(a, this.workingColorSpace, b);
          },
          colorSpaceToWorking: function (a, b) {
            return this.convert(a, b, this.workingColorSpace);
          },
          getPrimaries: function (a) {
            return this.spaces[a].primaries;
          },
          getTransfer: function (a) {
            return '' === a ? K : this.spaces[a].transfer;
          },
          getToneMappingMode: function (a) {
            return (
              this.spaces[a].outputColorSpaceConfig.toneMappingMode ||
              'standard'
            );
          },
          getLuminanceCoefficients: function (a, b = this.workingColorSpace) {
            return a.fromArray(this.spaces[b].luminanceCoefficients);
          },
          define: function (a) {
            Object.assign(this.spaces, a);
          },
          _getMatrix: function (a, b, c) {
            return a
              .copy(this.spaces[b].toXYZ)
              .multiply(this.spaces[c].fromXYZ);
          },
          _getDrawingBufferColorSpace: function (a) {
            return this.spaces[a].outputColorSpaceConfig
              .drawingBufferColorSpace;
          },
          _getUnpackColorSpace: function (a = this.workingColorSpace) {
            return this.spaces[a].workingColorSpaceConfig.unpackColorSpace;
          },
          fromWorkingColorSpace: function (a, b) {
            return (
              ab(
                'ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace().'
              ),
              n.workingToColorSpace(a, b)
            );
          },
          toWorkingColorSpace: function (a, b) {
            return (
              ab(
                'ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking().'
              ),
              n.colorSpaceToWorking(a, b)
            );
          },
        }).define({
          [J]: {
            primaries: o,
            whitePoint: q,
            transfer: K,
            toXYZ: av,
            fromXYZ: aw,
            luminanceCoefficients: p,
            workingColorSpaceConfig: { unpackColorSpace: I },
            outputColorSpaceConfig: { drawingBufferColorSpace: I },
          },
          [I]: {
            primaries: o,
            whitePoint: q,
            transfer: L,
            toXYZ: av,
            fromXYZ: aw,
            luminanceCoefficients: p,
            outputColorSpaceConfig: { drawingBufferColorSpace: I },
          },
        }),
        n);
    function ay(a) {
      return a < 0.04045
        ? 0.0773993808 * a
        : Math.pow(0.9478672986 * a + 0.0521327014, 2.4);
    }
    function az(a) {
      return a < 0.0031308 ? 12.92 * a : 1.055 * Math.pow(a, 0.41666) - 0.055;
    }
    class aA {
      static getDataURL(a, c = 'image/png') {
        let d;
        if (/^data:/i.test(a.src) || 'u' < typeof HTMLCanvasElement)
          return a.src;
        if (a instanceof HTMLCanvasElement) d = a;
        else {
          (void 0 === b && (b = U('canvas')),
            (b.width = a.width),
            (b.height = a.height));
          let c = b.getContext('2d');
          (a instanceof ImageData
            ? c.putImageData(a, 0, 0)
            : c.drawImage(a, 0, 0, a.width, a.height),
            (d = b));
        }
        return d.toDataURL(c);
      }
      static sRGBToLinear(a) {
        if (
          ('u' > typeof HTMLImageElement && a instanceof HTMLImageElement) ||
          ('u' > typeof HTMLCanvasElement && a instanceof HTMLCanvasElement) ||
          ('u' > typeof ImageBitmap && a instanceof ImageBitmap)
        ) {
          let b = U('canvas');
          ((b.width = a.width), (b.height = a.height));
          let c = b.getContext('2d');
          c.drawImage(a, 0, 0, a.width, a.height);
          let d = c.getImageData(0, 0, a.width, a.height),
            e = d.data;
          for (let a = 0; a < e.length; a++) e[a] = 255 * ay(e[a] / 255);
          return (c.putImageData(d, 0, 0), b);
        }
        if (!a.data)
          return (
            _(
              'ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.'
            ),
            a
          );
        {
          let b = a.data.slice(0);
          for (let a = 0; a < b.length; a++)
            b instanceof Uint8Array || b instanceof Uint8ClampedArray
              ? (b[a] = Math.floor(255 * ay(b[a] / 255)))
              : (b[a] = ay(b[a]));
          return { data: b, width: a.width, height: a.height };
        }
      }
    }
    let aB = 0;
    class aC {
      constructor(a = null) {
        ((this.isSource = !0),
          Object.defineProperty(this, 'id', { value: aB++ }),
          (this.uuid = ah()),
          (this.data = a),
          (this.dataReady = !0),
          (this.version = 0));
      }
      getSize(a) {
        let b = this.data;
        return (
          'u' > typeof HTMLVideoElement && b instanceof HTMLVideoElement
            ? a.set(b.videoWidth, b.videoHeight, 0)
            : 'u' > typeof VideoFrame && b instanceof VideoFrame
              ? a.set(b.displayHeight, b.displayWidth, 0)
              : null !== b
                ? a.set(b.width, b.height, b.depth || 0)
                : a.set(0, 0, 0),
          a
        );
      }
      set needsUpdate(a) {
        !0 === a && this.version++;
      }
      toJSON(a) {
        let b = void 0 === a || 'string' == typeof a;
        if (!b && void 0 !== a.images[this.uuid]) return a.images[this.uuid];
        let c = { uuid: this.uuid, url: '' },
          d = this.data;
        if (null !== d) {
          let a;
          if (Array.isArray(d)) {
            a = [];
            for (let b = 0, c = d.length; b < c; b++)
              d[b].isDataTexture ? a.push(aD(d[b].image)) : a.push(aD(d[b]));
          } else a = aD(d);
          c.url = a;
        }
        return (b || (a.images[this.uuid] = c), c);
      }
    }
    function aD(a) {
      return ('u' > typeof HTMLImageElement && a instanceof HTMLImageElement) ||
        ('u' > typeof HTMLCanvasElement && a instanceof HTMLCanvasElement) ||
        ('u' > typeof ImageBitmap && a instanceof ImageBitmap)
        ? aA.getDataURL(a)
        : a.data
          ? {
              data: Array.from(a.data),
              width: a.width,
              height: a.height,
              type: a.data.constructor.name,
            }
          : (_('Texture: Unable to serialize Texture.'), {});
    }
    let aE = 0,
      aF = new aq();
    class aG extends ac {
      constructor(
        a = aG.DEFAULT_IMAGE,
        b = aG.DEFAULT_MAPPING,
        c = 1001,
        d = 1001,
        e = 1006,
        f = 1008,
        g = 1023,
        h = 1009,
        i = aG.DEFAULT_ANISOTROPY,
        j = ''
      ) {
        (super(),
          (this.isTexture = !0),
          Object.defineProperty(this, 'id', { value: aE++ }),
          (this.uuid = ah()),
          (this.name = ''),
          (this.source = new aC(a)),
          (this.mipmaps = []),
          (this.mapping = b),
          (this.channel = 0),
          (this.wrapS = c),
          (this.wrapT = d),
          (this.magFilter = e),
          (this.minFilter = f),
          (this.anisotropy = i),
          (this.format = g),
          (this.internalFormat = null),
          (this.type = h),
          (this.offset = new ao(0, 0)),
          (this.repeat = new ao(1, 1)),
          (this.center = new ao(0, 0)),
          (this.rotation = 0),
          (this.matrixAutoUpdate = !0),
          (this.matrix = new at()),
          (this.generateMipmaps = !0),
          (this.premultiplyAlpha = !1),
          (this.flipY = !0),
          (this.unpackAlignment = 4),
          (this.colorSpace = j),
          (this.userData = {}),
          (this.updateRanges = []),
          (this.version = 0),
          (this.onUpdate = null),
          (this.renderTarget = null),
          (this.isRenderTargetTexture = !1),
          (this.isArrayTexture = !!a && !!a.depth && a.depth > 1),
          (this.pmremVersion = 0));
      }
      get width() {
        return this.source.getSize(aF).x;
      }
      get height() {
        return this.source.getSize(aF).y;
      }
      get depth() {
        return this.source.getSize(aF).z;
      }
      get image() {
        return this.source.data;
      }
      set image(a = null) {
        this.source.data = a;
      }
      updateMatrix() {
        this.matrix.setUvTransform(
          this.offset.x,
          this.offset.y,
          this.repeat.x,
          this.repeat.y,
          this.rotation,
          this.center.x,
          this.center.y
        );
      }
      addUpdateRange(a, b) {
        this.updateRanges.push({ start: a, count: b });
      }
      clearUpdateRanges() {
        this.updateRanges.length = 0;
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        return (
          (this.name = a.name),
          (this.source = a.source),
          (this.mipmaps = a.mipmaps.slice(0)),
          (this.mapping = a.mapping),
          (this.channel = a.channel),
          (this.wrapS = a.wrapS),
          (this.wrapT = a.wrapT),
          (this.magFilter = a.magFilter),
          (this.minFilter = a.minFilter),
          (this.anisotropy = a.anisotropy),
          (this.format = a.format),
          (this.internalFormat = a.internalFormat),
          (this.type = a.type),
          this.offset.copy(a.offset),
          this.repeat.copy(a.repeat),
          this.center.copy(a.center),
          (this.rotation = a.rotation),
          (this.matrixAutoUpdate = a.matrixAutoUpdate),
          this.matrix.copy(a.matrix),
          (this.generateMipmaps = a.generateMipmaps),
          (this.premultiplyAlpha = a.premultiplyAlpha),
          (this.flipY = a.flipY),
          (this.unpackAlignment = a.unpackAlignment),
          (this.colorSpace = a.colorSpace),
          (this.renderTarget = a.renderTarget),
          (this.isRenderTargetTexture = a.isRenderTargetTexture),
          (this.isArrayTexture = a.isArrayTexture),
          (this.userData = JSON.parse(JSON.stringify(a.userData))),
          (this.needsUpdate = !0),
          this
        );
      }
      setValues(a) {
        for (let b in a) {
          let c = a[b];
          if (void 0 === c) {
            _(`Texture.setValues(): parameter '${b}' has value of undefined.`);
            continue;
          }
          let d = this[b];
          if (void 0 === d) {
            _(`Texture.setValues(): property '${b}' does not exist.`);
            continue;
          }
          (d && c && d.isVector2 && c.isVector2) ||
          (d && c && d.isVector3 && c.isVector3) ||
          (d && c && d.isMatrix3 && c.isMatrix3)
            ? d.copy(c)
            : (this[b] = c);
        }
      }
      toJSON(a) {
        let b = void 0 === a || 'string' == typeof a;
        if (!b && void 0 !== a.textures[this.uuid])
          return a.textures[this.uuid];
        let c = {
          metadata: {
            version: 4.7,
            type: 'Texture',
            generator: 'Texture.toJSON',
          },
          uuid: this.uuid,
          name: this.name,
          image: this.source.toJSON(a).uuid,
          mapping: this.mapping,
          channel: this.channel,
          repeat: [this.repeat.x, this.repeat.y],
          offset: [this.offset.x, this.offset.y],
          center: [this.center.x, this.center.y],
          rotation: this.rotation,
          wrap: [this.wrapS, this.wrapT],
          format: this.format,
          internalFormat: this.internalFormat,
          type: this.type,
          colorSpace: this.colorSpace,
          minFilter: this.minFilter,
          magFilter: this.magFilter,
          anisotropy: this.anisotropy,
          flipY: this.flipY,
          generateMipmaps: this.generateMipmaps,
          premultiplyAlpha: this.premultiplyAlpha,
          unpackAlignment: this.unpackAlignment,
        };
        return (
          Object.keys(this.userData).length > 0 && (c.userData = this.userData),
          b || (a.textures[this.uuid] = c),
          c
        );
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
      transformUv(a) {
        if (300 !== this.mapping) return a;
        if ((a.applyMatrix3(this.matrix), a.x < 0 || a.x > 1))
          switch (this.wrapS) {
            case 1e3:
              a.x = a.x - Math.floor(a.x);
              break;
            case 1001:
              a.x = a.x < 0 ? 0 : 1;
              break;
            case 1002:
              1 === Math.abs(Math.floor(a.x) % 2)
                ? (a.x = Math.ceil(a.x) - a.x)
                : (a.x = a.x - Math.floor(a.x));
          }
        if (a.y < 0 || a.y > 1)
          switch (this.wrapT) {
            case 1e3:
              a.y = a.y - Math.floor(a.y);
              break;
            case 1001:
              a.y = a.y < 0 ? 0 : 1;
              break;
            case 1002:
              1 === Math.abs(Math.floor(a.y) % 2)
                ? (a.y = Math.ceil(a.y) - a.y)
                : (a.y = a.y - Math.floor(a.y));
          }
        return (this.flipY && (a.y = 1 - a.y), a);
      }
      set needsUpdate(a) {
        !0 === a && (this.version++, (this.source.needsUpdate = !0));
      }
      set needsPMREMUpdate(a) {
        !0 === a && this.pmremVersion++;
      }
    }
    ((aG.DEFAULT_IMAGE = null),
      (aG.DEFAULT_MAPPING = 300),
      (aG.DEFAULT_ANISOTROPY = 1));
    class aH {
      constructor(a = 0, b = 0, c = 0, d = 1) {
        ((aH.prototype.isVector4 = !0),
          (this.x = a),
          (this.y = b),
          (this.z = c),
          (this.w = d));
      }
      get width() {
        return this.z;
      }
      set width(a) {
        this.z = a;
      }
      get height() {
        return this.w;
      }
      set height(a) {
        this.w = a;
      }
      set(a, b, c, d) {
        return ((this.x = a), (this.y = b), (this.z = c), (this.w = d), this);
      }
      setScalar(a) {
        return ((this.x = a), (this.y = a), (this.z = a), (this.w = a), this);
      }
      setX(a) {
        return ((this.x = a), this);
      }
      setY(a) {
        return ((this.y = a), this);
      }
      setZ(a) {
        return ((this.z = a), this);
      }
      setW(a) {
        return ((this.w = a), this);
      }
      setComponent(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;
          case 1:
            this.y = b;
            break;
          case 2:
            this.z = b;
            break;
          case 3:
            this.w = b;
            break;
          default:
            throw Error('index is out of range: ' + a);
        }
        return this;
      }
      getComponent(a) {
        switch (a) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          case 2:
            return this.z;
          case 3:
            return this.w;
          default:
            throw Error('index is out of range: ' + a);
        }
      }
      clone() {
        return new this.constructor(this.x, this.y, this.z, this.w);
      }
      copy(a) {
        return (
          (this.x = a.x),
          (this.y = a.y),
          (this.z = a.z),
          (this.w = void 0 !== a.w ? a.w : 1),
          this
        );
      }
      add(a) {
        return (
          (this.x += a.x),
          (this.y += a.y),
          (this.z += a.z),
          (this.w += a.w),
          this
        );
      }
      addScalar(a) {
        return (
          (this.x += a),
          (this.y += a),
          (this.z += a),
          (this.w += a),
          this
        );
      }
      addVectors(a, b) {
        return (
          (this.x = a.x + b.x),
          (this.y = a.y + b.y),
          (this.z = a.z + b.z),
          (this.w = a.w + b.w),
          this
        );
      }
      addScaledVector(a, b) {
        return (
          (this.x += a.x * b),
          (this.y += a.y * b),
          (this.z += a.z * b),
          (this.w += a.w * b),
          this
        );
      }
      sub(a) {
        return (
          (this.x -= a.x),
          (this.y -= a.y),
          (this.z -= a.z),
          (this.w -= a.w),
          this
        );
      }
      subScalar(a) {
        return (
          (this.x -= a),
          (this.y -= a),
          (this.z -= a),
          (this.w -= a),
          this
        );
      }
      subVectors(a, b) {
        return (
          (this.x = a.x - b.x),
          (this.y = a.y - b.y),
          (this.z = a.z - b.z),
          (this.w = a.w - b.w),
          this
        );
      }
      multiply(a) {
        return (
          (this.x *= a.x),
          (this.y *= a.y),
          (this.z *= a.z),
          (this.w *= a.w),
          this
        );
      }
      multiplyScalar(a) {
        return (
          (this.x *= a),
          (this.y *= a),
          (this.z *= a),
          (this.w *= a),
          this
        );
      }
      applyMatrix4(a) {
        let b = this.x,
          c = this.y,
          d = this.z,
          e = this.w,
          f = a.elements;
        return (
          (this.x = f[0] * b + f[4] * c + f[8] * d + f[12] * e),
          (this.y = f[1] * b + f[5] * c + f[9] * d + f[13] * e),
          (this.z = f[2] * b + f[6] * c + f[10] * d + f[14] * e),
          (this.w = f[3] * b + f[7] * c + f[11] * d + f[15] * e),
          this
        );
      }
      divide(a) {
        return (
          (this.x /= a.x),
          (this.y /= a.y),
          (this.z /= a.z),
          (this.w /= a.w),
          this
        );
      }
      divideScalar(a) {
        return this.multiplyScalar(1 / a);
      }
      setAxisAngleFromQuaternion(a) {
        this.w = 2 * Math.acos(a.w);
        let b = Math.sqrt(1 - a.w * a.w);
        return (
          b < 1e-4
            ? ((this.x = 1), (this.y = 0), (this.z = 0))
            : ((this.x = a.x / b), (this.y = a.y / b), (this.z = a.z / b)),
          this
        );
      }
      setAxisAngleFromRotationMatrix(a) {
        let b,
          c,
          d,
          e,
          f = a.elements,
          g = f[0],
          h = f[4],
          i = f[8],
          j = f[1],
          k = f[5],
          l = f[9],
          m = f[2],
          n = f[6],
          o = f[10];
        if (
          0.01 > Math.abs(h - j) &&
          0.01 > Math.abs(i - m) &&
          0.01 > Math.abs(l - n)
        ) {
          if (
            0.1 > Math.abs(h + j) &&
            0.1 > Math.abs(i + m) &&
            0.1 > Math.abs(l + n) &&
            0.1 > Math.abs(g + k + o - 3)
          )
            return (this.set(1, 0, 0, 0), this);
          b = Math.PI;
          let a = (g + 1) / 2,
            f = (k + 1) / 2,
            p = (o + 1) / 2,
            q = (h + j) / 4,
            r = (i + m) / 4,
            s = (l + n) / 4;
          return (
            a > f && a > p
              ? a < 0.01
                ? ((c = 0), (d = 0.707106781), (e = 0.707106781))
                : ((d = q / (c = Math.sqrt(a))), (e = r / c))
              : f > p
                ? f < 0.01
                  ? ((c = 0.707106781), (d = 0), (e = 0.707106781))
                  : ((c = q / (d = Math.sqrt(f))), (e = s / d))
                : p < 0.01
                  ? ((c = 0.707106781), (d = 0.707106781), (e = 0))
                  : ((c = r / (e = Math.sqrt(p))), (d = s / e)),
            this.set(c, d, e, b),
            this
          );
        }
        let p = Math.sqrt(
          (n - l) * (n - l) + (i - m) * (i - m) + (j - h) * (j - h)
        );
        return (
          0.001 > Math.abs(p) && (p = 1),
          (this.x = (n - l) / p),
          (this.y = (i - m) / p),
          (this.z = (j - h) / p),
          (this.w = Math.acos((g + k + o - 1) / 2)),
          this
        );
      }
      setFromMatrixPosition(a) {
        let b = a.elements;
        return (
          (this.x = b[12]),
          (this.y = b[13]),
          (this.z = b[14]),
          (this.w = b[15]),
          this
        );
      }
      min(a) {
        return (
          (this.x = Math.min(this.x, a.x)),
          (this.y = Math.min(this.y, a.y)),
          (this.z = Math.min(this.z, a.z)),
          (this.w = Math.min(this.w, a.w)),
          this
        );
      }
      max(a) {
        return (
          (this.x = Math.max(this.x, a.x)),
          (this.y = Math.max(this.y, a.y)),
          (this.z = Math.max(this.z, a.z)),
          (this.w = Math.max(this.w, a.w)),
          this
        );
      }
      clamp(a, b) {
        return (
          (this.x = ai(this.x, a.x, b.x)),
          (this.y = ai(this.y, a.y, b.y)),
          (this.z = ai(this.z, a.z, b.z)),
          (this.w = ai(this.w, a.w, b.w)),
          this
        );
      }
      clampScalar(a, b) {
        return (
          (this.x = ai(this.x, a, b)),
          (this.y = ai(this.y, a, b)),
          (this.z = ai(this.z, a, b)),
          (this.w = ai(this.w, a, b)),
          this
        );
      }
      clampLength(a, b) {
        let c = this.length();
        return this.divideScalar(c || 1).multiplyScalar(ai(c, a, b));
      }
      floor() {
        return (
          (this.x = Math.floor(this.x)),
          (this.y = Math.floor(this.y)),
          (this.z = Math.floor(this.z)),
          (this.w = Math.floor(this.w)),
          this
        );
      }
      ceil() {
        return (
          (this.x = Math.ceil(this.x)),
          (this.y = Math.ceil(this.y)),
          (this.z = Math.ceil(this.z)),
          (this.w = Math.ceil(this.w)),
          this
        );
      }
      round() {
        return (
          (this.x = Math.round(this.x)),
          (this.y = Math.round(this.y)),
          (this.z = Math.round(this.z)),
          (this.w = Math.round(this.w)),
          this
        );
      }
      roundToZero() {
        return (
          (this.x = Math.trunc(this.x)),
          (this.y = Math.trunc(this.y)),
          (this.z = Math.trunc(this.z)),
          (this.w = Math.trunc(this.w)),
          this
        );
      }
      negate() {
        return (
          (this.x = -this.x),
          (this.y = -this.y),
          (this.z = -this.z),
          (this.w = -this.w),
          this
        );
      }
      dot(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w;
      }
      lengthSq() {
        return (
          this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        );
      }
      length() {
        return Math.sqrt(
          this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        );
      }
      manhattanLength() {
        return (
          Math.abs(this.x) +
          Math.abs(this.y) +
          Math.abs(this.z) +
          Math.abs(this.w)
        );
      }
      normalize() {
        return this.divideScalar(this.length() || 1);
      }
      setLength(a) {
        return this.normalize().multiplyScalar(a);
      }
      lerp(a, b) {
        return (
          (this.x += (a.x - this.x) * b),
          (this.y += (a.y - this.y) * b),
          (this.z += (a.z - this.z) * b),
          (this.w += (a.w - this.w) * b),
          this
        );
      }
      lerpVectors(a, b, c) {
        return (
          (this.x = a.x + (b.x - a.x) * c),
          (this.y = a.y + (b.y - a.y) * c),
          (this.z = a.z + (b.z - a.z) * c),
          (this.w = a.w + (b.w - a.w) * c),
          this
        );
      }
      equals(a) {
        return (
          a.x === this.x && a.y === this.y && a.z === this.z && a.w === this.w
        );
      }
      fromArray(a, b = 0) {
        return (
          (this.x = a[b]),
          (this.y = a[b + 1]),
          (this.z = a[b + 2]),
          (this.w = a[b + 3]),
          this
        );
      }
      toArray(a = [], b = 0) {
        return (
          (a[b] = this.x),
          (a[b + 1] = this.y),
          (a[b + 2] = this.z),
          (a[b + 3] = this.w),
          a
        );
      }
      fromBufferAttribute(a, b) {
        return (
          (this.x = a.getX(b)),
          (this.y = a.getY(b)),
          (this.z = a.getZ(b)),
          (this.w = a.getW(b)),
          this
        );
      }
      random() {
        return (
          (this.x = Math.random()),
          (this.y = Math.random()),
          (this.z = Math.random()),
          (this.w = Math.random()),
          this
        );
      }
      *[Symbol.iterator]() {
        (yield this.x, yield this.y, yield this.z, yield this.w);
      }
    }
    class aI extends ac {
      constructor(a = 1, b = 1, c = {}) {
        (super(),
          (c = Object.assign(
            {
              generateMipmaps: !1,
              internalFormat: null,
              minFilter: 1006,
              depthBuffer: !0,
              stencilBuffer: !1,
              resolveDepthBuffer: !0,
              resolveStencilBuffer: !0,
              depthTexture: null,
              samples: 0,
              count: 1,
              depth: 1,
              multiview: !1,
            },
            c
          )),
          (this.isRenderTarget = !0),
          (this.width = a),
          (this.height = b),
          (this.depth = c.depth),
          (this.scissor = new aH(0, 0, a, b)),
          (this.scissorTest = !1),
          (this.viewport = new aH(0, 0, a, b)));
        const d = new aG({ width: a, height: b, depth: c.depth });
        this.textures = [];
        const e = c.count;
        for (let a = 0; a < e; a++)
          ((this.textures[a] = d.clone()),
            (this.textures[a].isRenderTargetTexture = !0),
            (this.textures[a].renderTarget = this));
        (this._setTextureOptions(c),
          (this.depthBuffer = c.depthBuffer),
          (this.stencilBuffer = c.stencilBuffer),
          (this.resolveDepthBuffer = c.resolveDepthBuffer),
          (this.resolveStencilBuffer = c.resolveStencilBuffer),
          (this._depthTexture = null),
          (this.depthTexture = c.depthTexture),
          (this.samples = c.samples),
          (this.multiview = c.multiview));
      }
      _setTextureOptions(a = {}) {
        let b = {
          minFilter: 1006,
          generateMipmaps: !1,
          flipY: !1,
          internalFormat: null,
        };
        (void 0 !== a.mapping && (b.mapping = a.mapping),
          void 0 !== a.wrapS && (b.wrapS = a.wrapS),
          void 0 !== a.wrapT && (b.wrapT = a.wrapT),
          void 0 !== a.wrapR && (b.wrapR = a.wrapR),
          void 0 !== a.magFilter && (b.magFilter = a.magFilter),
          void 0 !== a.minFilter && (b.minFilter = a.minFilter),
          void 0 !== a.format && (b.format = a.format),
          void 0 !== a.type && (b.type = a.type),
          void 0 !== a.anisotropy && (b.anisotropy = a.anisotropy),
          void 0 !== a.colorSpace && (b.colorSpace = a.colorSpace),
          void 0 !== a.flipY && (b.flipY = a.flipY),
          void 0 !== a.generateMipmaps &&
            (b.generateMipmaps = a.generateMipmaps),
          void 0 !== a.internalFormat && (b.internalFormat = a.internalFormat));
        for (let a = 0; a < this.textures.length; a++)
          this.textures[a].setValues(b);
      }
      get texture() {
        return this.textures[0];
      }
      set texture(a) {
        this.textures[0] = a;
      }
      set depthTexture(a) {
        (null !== this._depthTexture &&
          (this._depthTexture.renderTarget = null),
          null !== a && (a.renderTarget = this),
          (this._depthTexture = a));
      }
      get depthTexture() {
        return this._depthTexture;
      }
      setSize(a, b, c = 1) {
        if (this.width !== a || this.height !== b || this.depth !== c) {
          ((this.width = a), (this.height = b), (this.depth = c));
          for (let d = 0, e = this.textures.length; d < e; d++)
            ((this.textures[d].image.width = a),
              (this.textures[d].image.height = b),
              (this.textures[d].image.depth = c),
              !0 !== this.textures[d].isData3DTexture &&
                (this.textures[d].isArrayTexture =
                  this.textures[d].image.depth > 1));
          this.dispose();
        }
        (this.viewport.set(0, 0, a, b), this.scissor.set(0, 0, a, b));
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        ((this.width = a.width),
          (this.height = a.height),
          (this.depth = a.depth),
          this.scissor.copy(a.scissor),
          (this.scissorTest = a.scissorTest),
          this.viewport.copy(a.viewport),
          (this.textures.length = 0));
        for (let b = 0, c = a.textures.length; b < c; b++) {
          ((this.textures[b] = a.textures[b].clone()),
            (this.textures[b].isRenderTargetTexture = !0),
            (this.textures[b].renderTarget = this));
          let c = Object.assign({}, a.textures[b].image);
          this.textures[b].source = new aC(c);
        }
        return (
          (this.depthBuffer = a.depthBuffer),
          (this.stencilBuffer = a.stencilBuffer),
          (this.resolveDepthBuffer = a.resolveDepthBuffer),
          (this.resolveStencilBuffer = a.resolveStencilBuffer),
          null !== a.depthTexture &&
            (this.depthTexture = a.depthTexture.clone()),
          (this.samples = a.samples),
          this
        );
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
    }
    class aJ extends aI {
      constructor(a = 1, b = 1, c = {}) {
        (super(a, b, c), (this.isWebGLRenderTarget = !0));
      }
    }
    class aK extends aG {
      constructor(a = null, b = 1, c = 1, d = 1) {
        (super(null),
          (this.isDataArrayTexture = !0),
          (this.image = { data: a, width: b, height: c, depth: d }),
          (this.magFilter = 1003),
          (this.minFilter = 1003),
          (this.wrapR = 1001),
          (this.generateMipmaps = !1),
          (this.flipY = !1),
          (this.unpackAlignment = 1),
          (this.layerUpdates = new Set()));
      }
      addLayerUpdate(a) {
        this.layerUpdates.add(a);
      }
      clearLayerUpdates() {
        this.layerUpdates.clear();
      }
    }
    class aL extends aJ {
      constructor(a = 1, b = 1, c = 1, d = {}) {
        (super(a, b, d),
          (this.isWebGLArrayRenderTarget = !0),
          (this.depth = c),
          (this.texture = new aK(null, a, b, c)),
          this._setTextureOptions(d),
          (this.texture.isRenderTargetTexture = !0));
      }
    }
    class aM extends aG {
      constructor(a = null, b = 1, c = 1, d = 1) {
        (super(null),
          (this.isData3DTexture = !0),
          (this.image = { data: a, width: b, height: c, depth: d }),
          (this.magFilter = 1003),
          (this.minFilter = 1003),
          (this.wrapR = 1001),
          (this.generateMipmaps = !1),
          (this.flipY = !1),
          (this.unpackAlignment = 1));
      }
    }
    class aN extends aJ {
      constructor(a = 1, b = 1, c = 1, d = {}) {
        (super(a, b, d),
          (this.isWebGL3DRenderTarget = !0),
          (this.depth = c),
          (this.texture = new aM(null, a, b, c)),
          this._setTextureOptions(d),
          (this.texture.isRenderTargetTexture = !0));
      }
    }
    class aO {
      constructor(
        a = new aq(Infinity, Infinity, Infinity),
        b = new aq(-1 / 0, -1 / 0, -1 / 0)
      ) {
        ((this.isBox3 = !0), (this.min = a), (this.max = b));
      }
      set(a, b) {
        return (this.min.copy(a), this.max.copy(b), this);
      }
      setFromArray(a) {
        this.makeEmpty();
        for (let b = 0, c = a.length; b < c; b += 3)
          this.expandByPoint(aQ.fromArray(a, b));
        return this;
      }
      setFromBufferAttribute(a) {
        this.makeEmpty();
        for (let b = 0, c = a.count; b < c; b++)
          this.expandByPoint(aQ.fromBufferAttribute(a, b));
        return this;
      }
      setFromPoints(a) {
        this.makeEmpty();
        for (let b = 0, c = a.length; b < c; b++) this.expandByPoint(a[b]);
        return this;
      }
      setFromCenterAndSize(a, b) {
        let c = aQ.copy(b).multiplyScalar(0.5);
        return (this.min.copy(a).sub(c), this.max.copy(a).add(c), this);
      }
      setFromObject(a, b = !1) {
        return (this.makeEmpty(), this.expandByObject(a, b));
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        return (this.min.copy(a.min), this.max.copy(a.max), this);
      }
      makeEmpty() {
        return (
          (this.min.x = this.min.y = this.min.z = Infinity),
          (this.max.x = this.max.y = this.max.z = -1 / 0),
          this
        );
      }
      isEmpty() {
        return (
          this.max.x < this.min.x ||
          this.max.y < this.min.y ||
          this.max.z < this.min.z
        );
      }
      getCenter(a) {
        return this.isEmpty()
          ? a.set(0, 0, 0)
          : a.addVectors(this.min, this.max).multiplyScalar(0.5);
      }
      getSize(a) {
        return this.isEmpty()
          ? a.set(0, 0, 0)
          : a.subVectors(this.max, this.min);
      }
      expandByPoint(a) {
        return (this.min.min(a), this.max.max(a), this);
      }
      expandByVector(a) {
        return (this.min.sub(a), this.max.add(a), this);
      }
      expandByScalar(a) {
        return (this.min.addScalar(-a), this.max.addScalar(a), this);
      }
      expandByObject(a, b = !1) {
        a.updateWorldMatrix(!1, !1);
        let c = a.geometry;
        if (void 0 !== c) {
          let d = c.getAttribute('position');
          if (!0 === b && void 0 !== d && !0 !== a.isInstancedMesh)
            for (let b = 0, c = d.count; b < c; b++)
              (!0 === a.isMesh
                ? a.getVertexPosition(b, aQ)
                : aQ.fromBufferAttribute(d, b),
                aQ.applyMatrix4(a.matrixWorld),
                this.expandByPoint(aQ));
          else
            (void 0 !== a.boundingBox
              ? (null === a.boundingBox && a.computeBoundingBox(),
                aR.copy(a.boundingBox))
              : (null === c.boundingBox && c.computeBoundingBox(),
                aR.copy(c.boundingBox)),
              aR.applyMatrix4(a.matrixWorld),
              this.union(aR));
        }
        let d = a.children;
        for (let a = 0, c = d.length; a < c; a++) this.expandByObject(d[a], b);
        return this;
      }
      containsPoint(a) {
        return (
          a.x >= this.min.x &&
          a.x <= this.max.x &&
          a.y >= this.min.y &&
          a.y <= this.max.y &&
          a.z >= this.min.z &&
          a.z <= this.max.z
        );
      }
      containsBox(a) {
        return (
          this.min.x <= a.min.x &&
          a.max.x <= this.max.x &&
          this.min.y <= a.min.y &&
          a.max.y <= this.max.y &&
          this.min.z <= a.min.z &&
          a.max.z <= this.max.z
        );
      }
      getParameter(a, b) {
        return b.set(
          (a.x - this.min.x) / (this.max.x - this.min.x),
          (a.y - this.min.y) / (this.max.y - this.min.y),
          (a.z - this.min.z) / (this.max.z - this.min.z)
        );
      }
      intersectsBox(a) {
        return (
          a.max.x >= this.min.x &&
          a.min.x <= this.max.x &&
          a.max.y >= this.min.y &&
          a.min.y <= this.max.y &&
          a.max.z >= this.min.z &&
          a.min.z <= this.max.z
        );
      }
      intersectsSphere(a) {
        return (
          this.clampPoint(a.center, aQ),
          aQ.distanceToSquared(a.center) <= a.radius * a.radius
        );
      }
      intersectsPlane(a) {
        let b, c;
        return (
          a.normal.x > 0
            ? ((b = a.normal.x * this.min.x), (c = a.normal.x * this.max.x))
            : ((b = a.normal.x * this.max.x), (c = a.normal.x * this.min.x)),
          a.normal.y > 0
            ? ((b += a.normal.y * this.min.y), (c += a.normal.y * this.max.y))
            : ((b += a.normal.y * this.max.y), (c += a.normal.y * this.min.y)),
          a.normal.z > 0
            ? ((b += a.normal.z * this.min.z), (c += a.normal.z * this.max.z))
            : ((b += a.normal.z * this.max.z), (c += a.normal.z * this.min.z)),
          b <= -a.constant && c >= -a.constant
        );
      }
      intersectsTriangle(a) {
        if (this.isEmpty()) return !1;
        (this.getCenter(aY),
          aZ.subVectors(this.max, aY),
          aS.subVectors(a.a, aY),
          aT.subVectors(a.b, aY),
          aU.subVectors(a.c, aY),
          aV.subVectors(aT, aS),
          aW.subVectors(aU, aT),
          aX.subVectors(aS, aU));
        let b = [
          0,
          -aV.z,
          aV.y,
          0,
          -aW.z,
          aW.y,
          0,
          -aX.z,
          aX.y,
          aV.z,
          0,
          -aV.x,
          aW.z,
          0,
          -aW.x,
          aX.z,
          0,
          -aX.x,
          -aV.y,
          aV.x,
          0,
          -aW.y,
          aW.x,
          0,
          -aX.y,
          aX.x,
          0,
        ];
        return (
          !!a0(b, aS, aT, aU, aZ) &&
          !!a0((b = [1, 0, 0, 0, 1, 0, 0, 0, 1]), aS, aT, aU, aZ) &&
          (a$.crossVectors(aV, aW),
          a0((b = [a$.x, a$.y, a$.z]), aS, aT, aU, aZ))
        );
      }
      clampPoint(a, b) {
        return b.copy(a).clamp(this.min, this.max);
      }
      distanceToPoint(a) {
        return this.clampPoint(a, aQ).distanceTo(a);
      }
      getBoundingSphere(a) {
        return (
          this.isEmpty()
            ? a.makeEmpty()
            : (this.getCenter(a.center),
              (a.radius = 0.5 * this.getSize(aQ).length())),
          a
        );
      }
      intersect(a) {
        return (
          this.min.max(a.min),
          this.max.min(a.max),
          this.isEmpty() && this.makeEmpty(),
          this
        );
      }
      union(a) {
        return (this.min.min(a.min), this.max.max(a.max), this);
      }
      applyMatrix4(a) {
        return (
          this.isEmpty() ||
            (aP[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(a),
            aP[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(a),
            aP[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(a),
            aP[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(a),
            aP[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(a),
            aP[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(a),
            aP[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(a),
            aP[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(a),
            this.setFromPoints(aP)),
          this
        );
      }
      translate(a) {
        return (this.min.add(a), this.max.add(a), this);
      }
      equals(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
      }
      toJSON() {
        return { min: this.min.toArray(), max: this.max.toArray() };
      }
      fromJSON(a) {
        return (this.min.fromArray(a.min), this.max.fromArray(a.max), this);
      }
    }
    let aP = [
        new aq(),
        new aq(),
        new aq(),
        new aq(),
        new aq(),
        new aq(),
        new aq(),
        new aq(),
      ],
      aQ = new aq(),
      aR = new aO(),
      aS = new aq(),
      aT = new aq(),
      aU = new aq(),
      aV = new aq(),
      aW = new aq(),
      aX = new aq(),
      aY = new aq(),
      aZ = new aq(),
      a$ = new aq(),
      a_ = new aq();
    function a0(a, b, c, d, e) {
      for (let f = 0, g = a.length - 3; f <= g; f += 3) {
        a_.fromArray(a, f);
        let g =
            e.x * Math.abs(a_.x) + e.y * Math.abs(a_.y) + e.z * Math.abs(a_.z),
          h = b.dot(a_),
          i = c.dot(a_),
          j = d.dot(a_);
        if (Math.max(-Math.max(h, i, j), Math.min(h, i, j)) > g) return !1;
      }
      return !0;
    }
    let a1 = new aO(),
      a2 = new aq(),
      a3 = new aq();
    class a4 {
      constructor(a = new aq(), b = -1) {
        ((this.isSphere = !0), (this.center = a), (this.radius = b));
      }
      set(a, b) {
        return (this.center.copy(a), (this.radius = b), this);
      }
      setFromPoints(a, b) {
        let c = this.center;
        void 0 !== b ? c.copy(b) : a1.setFromPoints(a).getCenter(c);
        let d = 0;
        for (let b = 0, e = a.length; b < e; b++)
          d = Math.max(d, c.distanceToSquared(a[b]));
        return ((this.radius = Math.sqrt(d)), this);
      }
      copy(a) {
        return (this.center.copy(a.center), (this.radius = a.radius), this);
      }
      isEmpty() {
        return this.radius < 0;
      }
      makeEmpty() {
        return (this.center.set(0, 0, 0), (this.radius = -1), this);
      }
      containsPoint(a) {
        return a.distanceToSquared(this.center) <= this.radius * this.radius;
      }
      distanceToPoint(a) {
        return a.distanceTo(this.center) - this.radius;
      }
      intersectsSphere(a) {
        let b = this.radius + a.radius;
        return a.center.distanceToSquared(this.center) <= b * b;
      }
      intersectsBox(a) {
        return a.intersectsSphere(this);
      }
      intersectsPlane(a) {
        return Math.abs(a.distanceToPoint(this.center)) <= this.radius;
      }
      clampPoint(a, b) {
        let c = this.center.distanceToSquared(a);
        return (
          b.copy(a),
          c > this.radius * this.radius &&
            (b.sub(this.center).normalize(),
            b.multiplyScalar(this.radius).add(this.center)),
          b
        );
      }
      getBoundingBox(a) {
        return (
          this.isEmpty()
            ? a.makeEmpty()
            : (a.set(this.center, this.center), a.expandByScalar(this.radius)),
          a
        );
      }
      applyMatrix4(a) {
        return (
          this.center.applyMatrix4(a),
          (this.radius = this.radius * a.getMaxScaleOnAxis()),
          this
        );
      }
      translate(a) {
        return (this.center.add(a), this);
      }
      expandByPoint(a) {
        if (this.isEmpty())
          return (this.center.copy(a), (this.radius = 0), this);
        a2.subVectors(a, this.center);
        let b = a2.lengthSq();
        if (b > this.radius * this.radius) {
          let a = Math.sqrt(b),
            c = (a - this.radius) * 0.5;
          (this.center.addScaledVector(a2, c / a), (this.radius += c));
        }
        return this;
      }
      union(a) {
        return (
          a.isEmpty() ||
            (this.isEmpty()
              ? this.copy(a)
              : !0 === this.center.equals(a.center)
                ? (this.radius = Math.max(this.radius, a.radius))
                : (a3.subVectors(a.center, this.center).setLength(a.radius),
                  this.expandByPoint(a2.copy(a.center).add(a3)),
                  this.expandByPoint(a2.copy(a.center).sub(a3)))),
          this
        );
      }
      equals(a) {
        return a.center.equals(this.center) && a.radius === this.radius;
      }
      clone() {
        return new this.constructor().copy(this);
      }
      toJSON() {
        return { radius: this.radius, center: this.center.toArray() };
      }
      fromJSON(a) {
        return (
          (this.radius = a.radius),
          this.center.fromArray(a.center),
          this
        );
      }
    }
    let a5 = new aq(),
      a6 = new aq(),
      a7 = new aq(),
      a8 = new aq(),
      a9 = new aq(),
      ba = new aq(),
      bb = new aq();
    class bc {
      constructor(a = new aq(), b = new aq(0, 0, -1)) {
        ((this.origin = a), (this.direction = b));
      }
      set(a, b) {
        return (this.origin.copy(a), this.direction.copy(b), this);
      }
      copy(a) {
        return (
          this.origin.copy(a.origin),
          this.direction.copy(a.direction),
          this
        );
      }
      at(a, b) {
        return b.copy(this.origin).addScaledVector(this.direction, a);
      }
      lookAt(a) {
        return (this.direction.copy(a).sub(this.origin).normalize(), this);
      }
      recast(a) {
        return (this.origin.copy(this.at(a, a5)), this);
      }
      closestPointToPoint(a, b) {
        b.subVectors(a, this.origin);
        let c = b.dot(this.direction);
        return c < 0
          ? b.copy(this.origin)
          : b.copy(this.origin).addScaledVector(this.direction, c);
      }
      distanceToPoint(a) {
        return Math.sqrt(this.distanceSqToPoint(a));
      }
      distanceSqToPoint(a) {
        let b = a5.subVectors(a, this.origin).dot(this.direction);
        return b < 0
          ? this.origin.distanceToSquared(a)
          : (a5.copy(this.origin).addScaledVector(this.direction, b),
            a5.distanceToSquared(a));
      }
      distanceSqToSegment(a, b, c, d) {
        let e, f, g, h;
        (a6.copy(a).add(b).multiplyScalar(0.5),
          a7.copy(b).sub(a).normalize(),
          a8.copy(this.origin).sub(a6));
        let i = 0.5 * a.distanceTo(b),
          j = -this.direction.dot(a7),
          k = a8.dot(this.direction),
          l = -a8.dot(a7),
          m = a8.lengthSq(),
          n = Math.abs(1 - j * j);
        if (n > 0)
          if (((e = j * l - k), (f = j * k - l), (h = i * n), e >= 0))
            if (f >= -h)
              if (f <= h) {
                let a = 1 / n;
                ((e *= a),
                  (f *= a),
                  (g = e * (e + j * f + 2 * k) + f * (j * e + f + 2 * l) + m));
              } else
                g =
                  -(e = Math.max(0, -(j * (f = i) + k))) * e +
                  f * (f + 2 * l) +
                  m;
            else
              g =
                -(e = Math.max(0, -(j * (f = -i) + k))) * e +
                f * (f + 2 * l) +
                m;
          else
            f <= -h
              ? ((f =
                  (e = Math.max(0, -(-j * i + k))) > 0
                    ? -i
                    : Math.min(Math.max(-i, -l), i)),
                (g = -e * e + f * (f + 2 * l) + m))
              : f <= h
                ? ((e = 0),
                  (g = (f = Math.min(Math.max(-i, -l), i)) * (f + 2 * l) + m))
                : ((f =
                    (e = Math.max(0, -(j * i + k))) > 0
                      ? i
                      : Math.min(Math.max(-i, -l), i)),
                  (g = -e * e + f * (f + 2 * l) + m));
        else
          ((f = j > 0 ? -i : i),
            (g = -(e = Math.max(0, -(j * f + k))) * e + f * (f + 2 * l) + m));
        return (
          c && c.copy(this.origin).addScaledVector(this.direction, e),
          d && d.copy(a6).addScaledVector(a7, f),
          g
        );
      }
      intersectSphere(a, b) {
        a5.subVectors(a.center, this.origin);
        let c = a5.dot(this.direction),
          d = a5.dot(a5) - c * c,
          e = a.radius * a.radius;
        if (d > e) return null;
        let f = Math.sqrt(e - d),
          g = c - f,
          h = c + f;
        return h < 0 ? null : g < 0 ? this.at(h, b) : this.at(g, b);
      }
      intersectsSphere(a) {
        return (
          !(a.radius < 0) &&
          this.distanceSqToPoint(a.center) <= a.radius * a.radius
        );
      }
      distanceToPlane(a) {
        let b = a.normal.dot(this.direction);
        if (0 === b) return 0 === a.distanceToPoint(this.origin) ? 0 : null;
        let c = -(this.origin.dot(a.normal) + a.constant) / b;
        return c >= 0 ? c : null;
      }
      intersectPlane(a, b) {
        let c = this.distanceToPlane(a);
        return null === c ? null : this.at(c, b);
      }
      intersectsPlane(a) {
        let b = a.distanceToPoint(this.origin);
        return !!(0 === b || a.normal.dot(this.direction) * b < 0);
      }
      intersectBox(a, b) {
        let c,
          d,
          e,
          f,
          g,
          h,
          i = 1 / this.direction.x,
          j = 1 / this.direction.y,
          k = 1 / this.direction.z,
          l = this.origin;
        return (i >= 0
          ? ((c = (a.min.x - l.x) * i), (d = (a.max.x - l.x) * i))
          : ((c = (a.max.x - l.x) * i), (d = (a.min.x - l.x) * i)),
        j >= 0
          ? ((e = (a.min.y - l.y) * j), (f = (a.max.y - l.y) * j))
          : ((e = (a.max.y - l.y) * j), (f = (a.min.y - l.y) * j)),
        c > f ||
          e > d ||
          ((e > c || isNaN(c)) && (c = e),
          (f < d || isNaN(d)) && (d = f),
          k >= 0
            ? ((g = (a.min.z - l.z) * k), (h = (a.max.z - l.z) * k))
            : ((g = (a.max.z - l.z) * k), (h = (a.min.z - l.z) * k)),
          c > h ||
            g > d ||
            ((g > c || c != c) && (c = g),
            (h < d || d != d) && (d = h),
            d < 0)))
          ? null
          : this.at(c >= 0 ? c : d, b);
      }
      intersectsBox(a) {
        return null !== this.intersectBox(a, a5);
      }
      intersectTriangle(a, b, c, d, e) {
        let f;
        (a9.subVectors(b, a), ba.subVectors(c, a), bb.crossVectors(a9, ba));
        let g = this.direction.dot(bb);
        if (g > 0) {
          if (d) return null;
          f = 1;
        } else {
          if (!(g < 0)) return null;
          ((f = -1), (g = -g));
        }
        a8.subVectors(this.origin, a);
        let h = f * this.direction.dot(ba.crossVectors(a8, ba));
        if (h < 0) return null;
        let i = f * this.direction.dot(a9.cross(a8));
        if (i < 0 || h + i > g) return null;
        let j = -f * a8.dot(bb);
        return j < 0 ? null : this.at(j / g, e);
      }
      applyMatrix4(a) {
        return (
          this.origin.applyMatrix4(a),
          this.direction.transformDirection(a),
          this
        );
      }
      equals(a) {
        return (
          a.origin.equals(this.origin) && a.direction.equals(this.direction)
        );
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    class bd {
      constructor(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        ((bd.prototype.isMatrix4 = !0),
          (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
          void 0 !== a &&
            this.set(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p));
      }
      set(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        let q = this.elements;
        return (
          (q[0] = a),
          (q[4] = b),
          (q[8] = c),
          (q[12] = d),
          (q[1] = e),
          (q[5] = f),
          (q[9] = g),
          (q[13] = h),
          (q[2] = i),
          (q[6] = j),
          (q[10] = k),
          (q[14] = l),
          (q[3] = m),
          (q[7] = n),
          (q[11] = o),
          (q[15] = p),
          this
        );
      }
      identity() {
        return (this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this);
      }
      clone() {
        return new bd().fromArray(this.elements);
      }
      copy(a) {
        let b = this.elements,
          c = a.elements;
        return (
          (b[0] = c[0]),
          (b[1] = c[1]),
          (b[2] = c[2]),
          (b[3] = c[3]),
          (b[4] = c[4]),
          (b[5] = c[5]),
          (b[6] = c[6]),
          (b[7] = c[7]),
          (b[8] = c[8]),
          (b[9] = c[9]),
          (b[10] = c[10]),
          (b[11] = c[11]),
          (b[12] = c[12]),
          (b[13] = c[13]),
          (b[14] = c[14]),
          (b[15] = c[15]),
          this
        );
      }
      copyPosition(a) {
        let b = this.elements,
          c = a.elements;
        return ((b[12] = c[12]), (b[13] = c[13]), (b[14] = c[14]), this);
      }
      setFromMatrix3(a) {
        let b = a.elements;
        return (
          this.set(
            b[0],
            b[3],
            b[6],
            0,
            b[1],
            b[4],
            b[7],
            0,
            b[2],
            b[5],
            b[8],
            0,
            0,
            0,
            0,
            1
          ),
          this
        );
      }
      extractBasis(a, b, c) {
        return (
          0 === this.determinant()
            ? (a.set(1, 0, 0), b.set(0, 1, 0), c.set(0, 0, 1))
            : (a.setFromMatrixColumn(this, 0),
              b.setFromMatrixColumn(this, 1),
              c.setFromMatrixColumn(this, 2)),
          this
        );
      }
      makeBasis(a, b, c) {
        return (
          this.set(
            a.x,
            b.x,
            c.x,
            0,
            a.y,
            b.y,
            c.y,
            0,
            a.z,
            b.z,
            c.z,
            0,
            0,
            0,
            0,
            1
          ),
          this
        );
      }
      extractRotation(a) {
        if (0 === a.determinant()) return this.identity();
        let b = this.elements,
          c = a.elements,
          d = 1 / be.setFromMatrixColumn(a, 0).length(),
          e = 1 / be.setFromMatrixColumn(a, 1).length(),
          f = 1 / be.setFromMatrixColumn(a, 2).length();
        return (
          (b[0] = c[0] * d),
          (b[1] = c[1] * d),
          (b[2] = c[2] * d),
          (b[3] = 0),
          (b[4] = c[4] * e),
          (b[5] = c[5] * e),
          (b[6] = c[6] * e),
          (b[7] = 0),
          (b[8] = c[8] * f),
          (b[9] = c[9] * f),
          (b[10] = c[10] * f),
          (b[11] = 0),
          (b[12] = 0),
          (b[13] = 0),
          (b[14] = 0),
          (b[15] = 1),
          this
        );
      }
      makeRotationFromEuler(a) {
        let b = this.elements,
          c = a.x,
          d = a.y,
          e = a.z,
          f = Math.cos(c),
          g = Math.sin(c),
          h = Math.cos(d),
          i = Math.sin(d),
          j = Math.cos(e),
          k = Math.sin(e);
        if ('XYZ' === a.order) {
          let a = f * j,
            c = f * k,
            d = g * j,
            e = g * k;
          ((b[0] = h * j),
            (b[4] = -h * k),
            (b[8] = i),
            (b[1] = c + d * i),
            (b[5] = a - e * i),
            (b[9] = -g * h),
            (b[2] = e - a * i),
            (b[6] = d + c * i),
            (b[10] = f * h));
        } else if ('YXZ' === a.order) {
          let a = h * j,
            c = h * k,
            d = i * j,
            e = i * k;
          ((b[0] = a + e * g),
            (b[4] = d * g - c),
            (b[8] = f * i),
            (b[1] = f * k),
            (b[5] = f * j),
            (b[9] = -g),
            (b[2] = c * g - d),
            (b[6] = e + a * g),
            (b[10] = f * h));
        } else if ('ZXY' === a.order) {
          let a = h * j,
            c = h * k,
            d = i * j,
            e = i * k;
          ((b[0] = a - e * g),
            (b[4] = -f * k),
            (b[8] = d + c * g),
            (b[1] = c + d * g),
            (b[5] = f * j),
            (b[9] = e - a * g),
            (b[2] = -f * i),
            (b[6] = g),
            (b[10] = f * h));
        } else if ('ZYX' === a.order) {
          let a = f * j,
            c = f * k,
            d = g * j,
            e = g * k;
          ((b[0] = h * j),
            (b[4] = d * i - c),
            (b[8] = a * i + e),
            (b[1] = h * k),
            (b[5] = e * i + a),
            (b[9] = c * i - d),
            (b[2] = -i),
            (b[6] = g * h),
            (b[10] = f * h));
        } else if ('YZX' === a.order) {
          let a = f * h,
            c = f * i,
            d = g * h,
            e = g * i;
          ((b[0] = h * j),
            (b[4] = e - a * k),
            (b[8] = d * k + c),
            (b[1] = k),
            (b[5] = f * j),
            (b[9] = -g * j),
            (b[2] = -i * j),
            (b[6] = c * k + d),
            (b[10] = a - e * k));
        } else if ('XZY' === a.order) {
          let a = f * h,
            c = f * i,
            d = g * h,
            e = g * i;
          ((b[0] = h * j),
            (b[4] = -k),
            (b[8] = i * j),
            (b[1] = a * k + e),
            (b[5] = f * j),
            (b[9] = c * k - d),
            (b[2] = d * k - c),
            (b[6] = g * j),
            (b[10] = e * k + a));
        }
        return (
          (b[3] = 0),
          (b[7] = 0),
          (b[11] = 0),
          (b[12] = 0),
          (b[13] = 0),
          (b[14] = 0),
          (b[15] = 1),
          this
        );
      }
      makeRotationFromQuaternion(a) {
        return this.compose(bg, a, bh);
      }
      lookAt(a, b, c) {
        let d = this.elements;
        return (
          bk.subVectors(a, b),
          0 === bk.lengthSq() && (bk.z = 1),
          bk.normalize(),
          bi.crossVectors(c, bk),
          0 === bi.lengthSq() &&
            (1 === Math.abs(c.z) ? (bk.x += 1e-4) : (bk.z += 1e-4),
            bk.normalize(),
            bi.crossVectors(c, bk)),
          bi.normalize(),
          bj.crossVectors(bk, bi),
          (d[0] = bi.x),
          (d[4] = bj.x),
          (d[8] = bk.x),
          (d[1] = bi.y),
          (d[5] = bj.y),
          (d[9] = bk.y),
          (d[2] = bi.z),
          (d[6] = bj.z),
          (d[10] = bk.z),
          this
        );
      }
      multiply(a) {
        return this.multiplyMatrices(this, a);
      }
      premultiply(a) {
        return this.multiplyMatrices(a, this);
      }
      multiplyMatrices(a, b) {
        let c = a.elements,
          d = b.elements,
          e = this.elements,
          f = c[0],
          g = c[4],
          h = c[8],
          i = c[12],
          j = c[1],
          k = c[5],
          l = c[9],
          m = c[13],
          n = c[2],
          o = c[6],
          p = c[10],
          q = c[14],
          r = c[3],
          s = c[7],
          t = c[11],
          u = c[15],
          v = d[0],
          w = d[4],
          x = d[8],
          y = d[12],
          z = d[1],
          A = d[5],
          B = d[9],
          C = d[13],
          D = d[2],
          E = d[6],
          F = d[10],
          G = d[14],
          H = d[3],
          I = d[7],
          J = d[11],
          K = d[15];
        return (
          (e[0] = f * v + g * z + h * D + i * H),
          (e[4] = f * w + g * A + h * E + i * I),
          (e[8] = f * x + g * B + h * F + i * J),
          (e[12] = f * y + g * C + h * G + i * K),
          (e[1] = j * v + k * z + l * D + m * H),
          (e[5] = j * w + k * A + l * E + m * I),
          (e[9] = j * x + k * B + l * F + m * J),
          (e[13] = j * y + k * C + l * G + m * K),
          (e[2] = n * v + o * z + p * D + q * H),
          (e[6] = n * w + o * A + p * E + q * I),
          (e[10] = n * x + o * B + p * F + q * J),
          (e[14] = n * y + o * C + p * G + q * K),
          (e[3] = r * v + s * z + t * D + u * H),
          (e[7] = r * w + s * A + t * E + u * I),
          (e[11] = r * x + s * B + t * F + u * J),
          (e[15] = r * y + s * C + t * G + u * K),
          this
        );
      }
      multiplyScalar(a) {
        let b = this.elements;
        return (
          (b[0] *= a),
          (b[4] *= a),
          (b[8] *= a),
          (b[12] *= a),
          (b[1] *= a),
          (b[5] *= a),
          (b[9] *= a),
          (b[13] *= a),
          (b[2] *= a),
          (b[6] *= a),
          (b[10] *= a),
          (b[14] *= a),
          (b[3] *= a),
          (b[7] *= a),
          (b[11] *= a),
          (b[15] *= a),
          this
        );
      }
      determinant() {
        let a = this.elements,
          b = a[0],
          c = a[4],
          d = a[8],
          e = a[12],
          f = a[1],
          g = a[5],
          h = a[9],
          i = a[13],
          j = a[2],
          k = a[6],
          l = a[10],
          m = a[14],
          n = a[3],
          o = a[7],
          p = a[11],
          q = a[15],
          r = h * m - i * l,
          s = g * m - i * k,
          t = g * l - h * k,
          u = f * m - i * j,
          v = f * l - h * j,
          w = f * k - g * j;
        return (
          b * (o * r - p * s + q * t) -
          c * (n * r - p * u + q * v) +
          d * (n * s - o * u + q * w) -
          e * (n * t - o * v + p * w)
        );
      }
      transpose() {
        let a,
          b = this.elements;
        return (
          (a = b[1]),
          (b[1] = b[4]),
          (b[4] = a),
          (a = b[2]),
          (b[2] = b[8]),
          (b[8] = a),
          (a = b[6]),
          (b[6] = b[9]),
          (b[9] = a),
          (a = b[3]),
          (b[3] = b[12]),
          (b[12] = a),
          (a = b[7]),
          (b[7] = b[13]),
          (b[13] = a),
          (a = b[11]),
          (b[11] = b[14]),
          (b[14] = a),
          this
        );
      }
      setPosition(a, b, c) {
        let d = this.elements;
        return (
          a.isVector3
            ? ((d[12] = a.x), (d[13] = a.y), (d[14] = a.z))
            : ((d[12] = a), (d[13] = b), (d[14] = c)),
          this
        );
      }
      invert() {
        let a = this.elements,
          b = a[0],
          c = a[1],
          d = a[2],
          e = a[3],
          f = a[4],
          g = a[5],
          h = a[6],
          i = a[7],
          j = a[8],
          k = a[9],
          l = a[10],
          m = a[11],
          n = a[12],
          o = a[13],
          p = a[14],
          q = a[15],
          r =
            k * p * i -
            o * l * i +
            o * h * m -
            g * p * m -
            k * h * q +
            g * l * q,
          s =
            n * l * i -
            j * p * i -
            n * h * m +
            f * p * m +
            j * h * q -
            f * l * q,
          t =
            j * o * i -
            n * k * i +
            n * g * m -
            f * o * m -
            j * g * q +
            f * k * q,
          u =
            n * k * h -
            j * o * h -
            n * g * l +
            f * o * l +
            j * g * p -
            f * k * p,
          v = b * r + c * s + d * t + e * u;
        if (0 === v)
          return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
        let w = 1 / v;
        return (
          (a[0] = r * w),
          (a[1] =
            (o * l * e -
              k * p * e -
              o * d * m +
              c * p * m +
              k * d * q -
              c * l * q) *
            w),
          (a[2] =
            (g * p * e -
              o * h * e +
              o * d * i -
              c * p * i -
              g * d * q +
              c * h * q) *
            w),
          (a[3] =
            (k * h * e -
              g * l * e -
              k * d * i +
              c * l * i +
              g * d * m -
              c * h * m) *
            w),
          (a[4] = s * w),
          (a[5] =
            (j * p * e -
              n * l * e +
              n * d * m -
              b * p * m -
              j * d * q +
              b * l * q) *
            w),
          (a[6] =
            (n * h * e -
              f * p * e -
              n * d * i +
              b * p * i +
              f * d * q -
              b * h * q) *
            w),
          (a[7] =
            (f * l * e -
              j * h * e +
              j * d * i -
              b * l * i -
              f * d * m +
              b * h * m) *
            w),
          (a[8] = t * w),
          (a[9] =
            (n * k * e -
              j * o * e -
              n * c * m +
              b * o * m +
              j * c * q -
              b * k * q) *
            w),
          (a[10] =
            (f * o * e -
              n * g * e +
              n * c * i -
              b * o * i -
              f * c * q +
              b * g * q) *
            w),
          (a[11] =
            (j * g * e -
              f * k * e -
              j * c * i +
              b * k * i +
              f * c * m -
              b * g * m) *
            w),
          (a[12] = u * w),
          (a[13] =
            (j * o * d -
              n * k * d +
              n * c * l -
              b * o * l -
              j * c * p +
              b * k * p) *
            w),
          (a[14] =
            (n * g * d -
              f * o * d -
              n * c * h +
              b * o * h +
              f * c * p -
              b * g * p) *
            w),
          (a[15] =
            (f * k * d -
              j * g * d +
              j * c * h -
              b * k * h -
              f * c * l +
              b * g * l) *
            w),
          this
        );
      }
      scale(a) {
        let b = this.elements,
          c = a.x,
          d = a.y,
          e = a.z;
        return (
          (b[0] *= c),
          (b[4] *= d),
          (b[8] *= e),
          (b[1] *= c),
          (b[5] *= d),
          (b[9] *= e),
          (b[2] *= c),
          (b[6] *= d),
          (b[10] *= e),
          (b[3] *= c),
          (b[7] *= d),
          (b[11] *= e),
          this
        );
      }
      getMaxScaleOnAxis() {
        let a = this.elements;
        return Math.sqrt(
          Math.max(
            a[0] * a[0] + a[1] * a[1] + a[2] * a[2],
            a[4] * a[4] + a[5] * a[5] + a[6] * a[6],
            a[8] * a[8] + a[9] * a[9] + a[10] * a[10]
          )
        );
      }
      makeTranslation(a, b, c) {
        return (
          a.isVector3
            ? this.set(1, 0, 0, a.x, 0, 1, 0, a.y, 0, 0, 1, a.z, 0, 0, 0, 1)
            : this.set(1, 0, 0, a, 0, 1, 0, b, 0, 0, 1, c, 0, 0, 0, 1),
          this
        );
      }
      makeRotationX(a) {
        let b = Math.cos(a),
          c = Math.sin(a);
        return (
          this.set(1, 0, 0, 0, 0, b, -c, 0, 0, c, b, 0, 0, 0, 0, 1),
          this
        );
      }
      makeRotationY(a) {
        let b = Math.cos(a),
          c = Math.sin(a);
        return (
          this.set(b, 0, c, 0, 0, 1, 0, 0, -c, 0, b, 0, 0, 0, 0, 1),
          this
        );
      }
      makeRotationZ(a) {
        let b = Math.cos(a),
          c = Math.sin(a);
        return (
          this.set(b, -c, 0, 0, c, b, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
          this
        );
      }
      makeRotationAxis(a, b) {
        let c = Math.cos(b),
          d = Math.sin(b),
          e = 1 - c,
          f = a.x,
          g = a.y,
          h = a.z,
          i = e * f,
          j = e * g;
        return (
          this.set(
            i * f + c,
            i * g - d * h,
            i * h + d * g,
            0,
            i * g + d * h,
            j * g + c,
            j * h - d * f,
            0,
            i * h - d * g,
            j * h + d * f,
            e * h * h + c,
            0,
            0,
            0,
            0,
            1
          ),
          this
        );
      }
      makeScale(a, b, c) {
        return (this.set(a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1), this);
      }
      makeShear(a, b, c, d, e, f) {
        return (this.set(1, c, e, 0, a, 1, f, 0, b, d, 1, 0, 0, 0, 0, 1), this);
      }
      compose(a, b, c) {
        let d = this.elements,
          e = b._x,
          f = b._y,
          g = b._z,
          h = b._w,
          i = e + e,
          j = f + f,
          k = g + g,
          l = e * i,
          m = e * j,
          n = e * k,
          o = f * j,
          p = f * k,
          q = g * k,
          r = h * i,
          s = h * j,
          t = h * k,
          u = c.x,
          v = c.y,
          w = c.z;
        return (
          (d[0] = (1 - (o + q)) * u),
          (d[1] = (m + t) * u),
          (d[2] = (n - s) * u),
          (d[3] = 0),
          (d[4] = (m - t) * v),
          (d[5] = (1 - (l + q)) * v),
          (d[6] = (p + r) * v),
          (d[7] = 0),
          (d[8] = (n + s) * w),
          (d[9] = (p - r) * w),
          (d[10] = (1 - (l + o)) * w),
          (d[11] = 0),
          (d[12] = a.x),
          (d[13] = a.y),
          (d[14] = a.z),
          (d[15] = 1),
          this
        );
      }
      decompose(a, b, c) {
        let d = this.elements;
        if (
          ((a.x = d[12]),
          (a.y = d[13]),
          (a.z = d[14]),
          0 === this.determinant())
        )
          return (c.set(1, 1, 1), b.identity(), this);
        let e = be.set(d[0], d[1], d[2]).length(),
          f = be.set(d[4], d[5], d[6]).length(),
          g = be.set(d[8], d[9], d[10]).length();
        (0 > this.determinant() && (e = -e), bf.copy(this));
        let h = 1 / e,
          i = 1 / f,
          j = 1 / g;
        return (
          (bf.elements[0] *= h),
          (bf.elements[1] *= h),
          (bf.elements[2] *= h),
          (bf.elements[4] *= i),
          (bf.elements[5] *= i),
          (bf.elements[6] *= i),
          (bf.elements[8] *= j),
          (bf.elements[9] *= j),
          (bf.elements[10] *= j),
          b.setFromRotationMatrix(bf),
          (c.x = e),
          (c.y = f),
          (c.z = g),
          this
        );
      }
      makePerspective(a, b, c, d, e, f, g = 2e3, h = !1) {
        let i,
          j,
          k = this.elements;
        if (h) ((i = e / (f - e)), (j = (f * e) / (f - e)));
        else if (2e3 === g)
          ((i = -(f + e) / (f - e)), (j = (-2 * f * e) / (f - e)));
        else if (2001 === g) ((i = -f / (f - e)), (j = (-f * e) / (f - e)));
        else
          throw Error(
            'THREE.Matrix4.makePerspective(): Invalid coordinate system: ' + g
          );
        return (
          (k[0] = (2 * e) / (b - a)),
          (k[4] = 0),
          (k[8] = (b + a) / (b - a)),
          (k[12] = 0),
          (k[1] = 0),
          (k[5] = (2 * e) / (c - d)),
          (k[9] = (c + d) / (c - d)),
          (k[13] = 0),
          (k[2] = 0),
          (k[6] = 0),
          (k[10] = i),
          (k[14] = j),
          (k[3] = 0),
          (k[7] = 0),
          (k[11] = -1),
          (k[15] = 0),
          this
        );
      }
      makeOrthographic(a, b, c, d, e, f, g = 2e3, h = !1) {
        let i,
          j,
          k = this.elements;
        if (h) ((i = 1 / (f - e)), (j = f / (f - e)));
        else if (2e3 === g) ((i = -2 / (f - e)), (j = -(f + e) / (f - e)));
        else if (2001 === g) ((i = -1 / (f - e)), (j = -e / (f - e)));
        else
          throw Error(
            'THREE.Matrix4.makeOrthographic(): Invalid coordinate system: ' + g
          );
        return (
          (k[0] = 2 / (b - a)),
          (k[4] = 0),
          (k[8] = 0),
          (k[12] = -(b + a) / (b - a)),
          (k[1] = 0),
          (k[5] = 2 / (c - d)),
          (k[9] = 0),
          (k[13] = -(c + d) / (c - d)),
          (k[2] = 0),
          (k[6] = 0),
          (k[10] = i),
          (k[14] = j),
          (k[3] = 0),
          (k[7] = 0),
          (k[11] = 0),
          (k[15] = 1),
          this
        );
      }
      equals(a) {
        let b = this.elements,
          c = a.elements;
        for (let a = 0; a < 16; a++) if (b[a] !== c[a]) return !1;
        return !0;
      }
      fromArray(a, b = 0) {
        for (let c = 0; c < 16; c++) this.elements[c] = a[c + b];
        return this;
      }
      toArray(a = [], b = 0) {
        let c = this.elements;
        return (
          (a[b] = c[0]),
          (a[b + 1] = c[1]),
          (a[b + 2] = c[2]),
          (a[b + 3] = c[3]),
          (a[b + 4] = c[4]),
          (a[b + 5] = c[5]),
          (a[b + 6] = c[6]),
          (a[b + 7] = c[7]),
          (a[b + 8] = c[8]),
          (a[b + 9] = c[9]),
          (a[b + 10] = c[10]),
          (a[b + 11] = c[11]),
          (a[b + 12] = c[12]),
          (a[b + 13] = c[13]),
          (a[b + 14] = c[14]),
          (a[b + 15] = c[15]),
          a
        );
      }
    }
    let be = new aq(),
      bf = new bd(),
      bg = new aq(0, 0, 0),
      bh = new aq(1, 1, 1),
      bi = new aq(),
      bj = new aq(),
      bk = new aq(),
      bl = new bd(),
      bm = new ap();
    class bn {
      constructor(a = 0, b = 0, c = 0, d = bn.DEFAULT_ORDER) {
        ((this.isEuler = !0),
          (this._x = a),
          (this._y = b),
          (this._z = c),
          (this._order = d));
      }
      get x() {
        return this._x;
      }
      set x(a) {
        ((this._x = a), this._onChangeCallback());
      }
      get y() {
        return this._y;
      }
      set y(a) {
        ((this._y = a), this._onChangeCallback());
      }
      get z() {
        return this._z;
      }
      set z(a) {
        ((this._z = a), this._onChangeCallback());
      }
      get order() {
        return this._order;
      }
      set order(a) {
        ((this._order = a), this._onChangeCallback());
      }
      set(a, b, c, d = this._order) {
        return (
          (this._x = a),
          (this._y = b),
          (this._z = c),
          (this._order = d),
          this._onChangeCallback(),
          this
        );
      }
      clone() {
        return new this.constructor(this._x, this._y, this._z, this._order);
      }
      copy(a) {
        return (
          (this._x = a._x),
          (this._y = a._y),
          (this._z = a._z),
          (this._order = a._order),
          this._onChangeCallback(),
          this
        );
      }
      setFromRotationMatrix(a, b = this._order, c = !0) {
        let d = a.elements,
          e = d[0],
          f = d[4],
          g = d[8],
          h = d[1],
          i = d[5],
          j = d[9],
          k = d[2],
          l = d[6],
          m = d[10];
        switch (b) {
          case 'XYZ':
            ((this._y = Math.asin(ai(g, -1, 1))),
              0.9999999 > Math.abs(g)
                ? ((this._x = Math.atan2(-j, m)), (this._z = Math.atan2(-f, e)))
                : ((this._x = Math.atan2(l, i)), (this._z = 0)));
            break;
          case 'YXZ':
            ((this._x = Math.asin(-ai(j, -1, 1))),
              0.9999999 > Math.abs(j)
                ? ((this._y = Math.atan2(g, m)), (this._z = Math.atan2(h, i)))
                : ((this._y = Math.atan2(-k, e)), (this._z = 0)));
            break;
          case 'ZXY':
            ((this._x = Math.asin(ai(l, -1, 1))),
              0.9999999 > Math.abs(l)
                ? ((this._y = Math.atan2(-k, m)), (this._z = Math.atan2(-f, i)))
                : ((this._y = 0), (this._z = Math.atan2(h, e))));
            break;
          case 'ZYX':
            ((this._y = Math.asin(-ai(k, -1, 1))),
              0.9999999 > Math.abs(k)
                ? ((this._x = Math.atan2(l, m)), (this._z = Math.atan2(h, e)))
                : ((this._x = 0), (this._z = Math.atan2(-f, i))));
            break;
          case 'YZX':
            ((this._z = Math.asin(ai(h, -1, 1))),
              0.9999999 > Math.abs(h)
                ? ((this._x = Math.atan2(-j, i)), (this._y = Math.atan2(-k, e)))
                : ((this._x = 0), (this._y = Math.atan2(g, m))));
            break;
          case 'XZY':
            ((this._z = Math.asin(-ai(f, -1, 1))),
              0.9999999 > Math.abs(f)
                ? ((this._x = Math.atan2(l, i)), (this._y = Math.atan2(g, e)))
                : ((this._x = Math.atan2(-j, m)), (this._y = 0)));
            break;
          default:
            _(
              'Euler: .setFromRotationMatrix() encountered an unknown order: ' +
                b
            );
        }
        return ((this._order = b), !0 === c && this._onChangeCallback(), this);
      }
      setFromQuaternion(a, b, c) {
        return (
          bl.makeRotationFromQuaternion(a),
          this.setFromRotationMatrix(bl, b, c)
        );
      }
      setFromVector3(a, b = this._order) {
        return this.set(a.x, a.y, a.z, b);
      }
      reorder(a) {
        return (bm.setFromEuler(this), this.setFromQuaternion(bm, a));
      }
      equals(a) {
        return (
          a._x === this._x &&
          a._y === this._y &&
          a._z === this._z &&
          a._order === this._order
        );
      }
      fromArray(a) {
        return (
          (this._x = a[0]),
          (this._y = a[1]),
          (this._z = a[2]),
          void 0 !== a[3] && (this._order = a[3]),
          this._onChangeCallback(),
          this
        );
      }
      toArray(a = [], b = 0) {
        return (
          (a[b] = this._x),
          (a[b + 1] = this._y),
          (a[b + 2] = this._z),
          (a[b + 3] = this._order),
          a
        );
      }
      _onChange(a) {
        return ((this._onChangeCallback = a), this);
      }
      _onChangeCallback() {}
      *[Symbol.iterator]() {
        (yield this._x, yield this._y, yield this._z, yield this._order);
      }
    }
    bn.DEFAULT_ORDER = 'XYZ';
    class bo {
      constructor() {
        this.mask = 1;
      }
      set(a) {
        this.mask = (1 << a) >>> 0;
      }
      enable(a) {
        this.mask |= 1 << a;
      }
      enableAll() {
        this.mask = -1;
      }
      toggle(a) {
        this.mask ^= 1 << a;
      }
      disable(a) {
        this.mask &= ~(1 << a);
      }
      disableAll() {
        this.mask = 0;
      }
      test(a) {
        return (this.mask & a.mask) != 0;
      }
      isEnabled(a) {
        return (this.mask & (1 << a)) != 0;
      }
    }
    let bp = 0,
      bq = new aq(),
      br = new ap(),
      bs = new bd(),
      bt = new aq(),
      bu = new aq(),
      bv = new aq(),
      bw = new ap(),
      bx = new aq(1, 0, 0),
      by = new aq(0, 1, 0),
      bz = new aq(0, 0, 1),
      bA = { type: 'added' },
      bB = { type: 'removed' },
      bC = { type: 'childadded', child: null },
      bD = { type: 'childremoved', child: null };
    class bE extends ac {
      constructor() {
        (super(),
          (this.isObject3D = !0),
          Object.defineProperty(this, 'id', { value: bp++ }),
          (this.uuid = ah()),
          (this.name = ''),
          (this.type = 'Object3D'),
          (this.parent = null),
          (this.children = []),
          (this.up = bE.DEFAULT_UP.clone()));
        const a = new aq(),
          b = new bn(),
          c = new ap(),
          d = new aq(1, 1, 1);
        (b._onChange(function () {
          c.setFromEuler(b, !1);
        }),
          c._onChange(function () {
            b.setFromQuaternion(c, void 0, !1);
          }),
          Object.defineProperties(this, {
            position: { configurable: !0, enumerable: !0, value: a },
            rotation: { configurable: !0, enumerable: !0, value: b },
            quaternion: { configurable: !0, enumerable: !0, value: c },
            scale: { configurable: !0, enumerable: !0, value: d },
            modelViewMatrix: { value: new bd() },
            normalMatrix: { value: new at() },
          }),
          (this.matrix = new bd()),
          (this.matrixWorld = new bd()),
          (this.matrixAutoUpdate = bE.DEFAULT_MATRIX_AUTO_UPDATE),
          (this.matrixWorldAutoUpdate = bE.DEFAULT_MATRIX_WORLD_AUTO_UPDATE),
          (this.matrixWorldNeedsUpdate = !1),
          (this.layers = new bo()),
          (this.visible = !0),
          (this.castShadow = !1),
          (this.receiveShadow = !1),
          (this.frustumCulled = !0),
          (this.renderOrder = 0),
          (this.animations = []),
          (this.customDepthMaterial = void 0),
          (this.customDistanceMaterial = void 0),
          (this.userData = {}));
      }
      onBeforeShadow() {}
      onAfterShadow() {}
      onBeforeRender() {}
      onAfterRender() {}
      applyMatrix4(a) {
        (this.matrixAutoUpdate && this.updateMatrix(),
          this.matrix.premultiply(a),
          this.matrix.decompose(this.position, this.quaternion, this.scale));
      }
      applyQuaternion(a) {
        return (this.quaternion.premultiply(a), this);
      }
      setRotationFromAxisAngle(a, b) {
        this.quaternion.setFromAxisAngle(a, b);
      }
      setRotationFromEuler(a) {
        this.quaternion.setFromEuler(a, !0);
      }
      setRotationFromMatrix(a) {
        this.quaternion.setFromRotationMatrix(a);
      }
      setRotationFromQuaternion(a) {
        this.quaternion.copy(a);
      }
      rotateOnAxis(a, b) {
        return (br.setFromAxisAngle(a, b), this.quaternion.multiply(br), this);
      }
      rotateOnWorldAxis(a, b) {
        return (
          br.setFromAxisAngle(a, b),
          this.quaternion.premultiply(br),
          this
        );
      }
      rotateX(a) {
        return this.rotateOnAxis(bx, a);
      }
      rotateY(a) {
        return this.rotateOnAxis(by, a);
      }
      rotateZ(a) {
        return this.rotateOnAxis(bz, a);
      }
      translateOnAxis(a, b) {
        return (
          bq.copy(a).applyQuaternion(this.quaternion),
          this.position.add(bq.multiplyScalar(b)),
          this
        );
      }
      translateX(a) {
        return this.translateOnAxis(bx, a);
      }
      translateY(a) {
        return this.translateOnAxis(by, a);
      }
      translateZ(a) {
        return this.translateOnAxis(bz, a);
      }
      localToWorld(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          a.applyMatrix4(this.matrixWorld)
        );
      }
      worldToLocal(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          a.applyMatrix4(bs.copy(this.matrixWorld).invert())
        );
      }
      lookAt(a, b, c) {
        a.isVector3 ? bt.copy(a) : bt.set(a, b, c);
        let d = this.parent;
        (this.updateWorldMatrix(!0, !1),
          bu.setFromMatrixPosition(this.matrixWorld),
          this.isCamera || this.isLight
            ? bs.lookAt(bu, bt, this.up)
            : bs.lookAt(bt, bu, this.up),
          this.quaternion.setFromRotationMatrix(bs),
          d &&
            (bs.extractRotation(d.matrixWorld),
            br.setFromRotationMatrix(bs),
            this.quaternion.premultiply(br.invert())));
      }
      add(a) {
        if (arguments.length > 1) {
          for (let a = 0; a < arguments.length; a++) this.add(arguments[a]);
          return this;
        }
        return (
          a === this
            ? aa("Object3D.add: object can't be added as a child of itself.", a)
            : a && a.isObject3D
              ? (a.removeFromParent(),
                (a.parent = this),
                this.children.push(a),
                a.dispatchEvent(bA),
                (bC.child = a),
                this.dispatchEvent(bC),
                (bC.child = null))
              : aa(
                  'Object3D.add: object not an instance of THREE.Object3D.',
                  a
                ),
          this
        );
      }
      remove(a) {
        if (arguments.length > 1) {
          for (let a = 0; a < arguments.length; a++) this.remove(arguments[a]);
          return this;
        }
        let b = this.children.indexOf(a);
        return (
          -1 !== b &&
            ((a.parent = null),
            this.children.splice(b, 1),
            a.dispatchEvent(bB),
            (bD.child = a),
            this.dispatchEvent(bD),
            (bD.child = null)),
          this
        );
      }
      removeFromParent() {
        let a = this.parent;
        return (null !== a && a.remove(this), this);
      }
      clear() {
        return this.remove(...this.children);
      }
      attach(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          bs.copy(this.matrixWorld).invert(),
          null !== a.parent &&
            (a.parent.updateWorldMatrix(!0, !1),
            bs.multiply(a.parent.matrixWorld)),
          a.applyMatrix4(bs),
          a.removeFromParent(),
          (a.parent = this),
          this.children.push(a),
          a.updateWorldMatrix(!1, !0),
          a.dispatchEvent(bA),
          (bC.child = a),
          this.dispatchEvent(bC),
          (bC.child = null),
          this
        );
      }
      getObjectById(a) {
        return this.getObjectByProperty('id', a);
      }
      getObjectByName(a) {
        return this.getObjectByProperty('name', a);
      }
      getObjectByProperty(a, b) {
        if (this[a] === b) return this;
        for (let c = 0, d = this.children.length; c < d; c++) {
          let d = this.children[c].getObjectByProperty(a, b);
          if (void 0 !== d) return d;
        }
      }
      getObjectsByProperty(a, b, c = []) {
        this[a] === b && c.push(this);
        let d = this.children;
        for (let e = 0, f = d.length; e < f; e++)
          d[e].getObjectsByProperty(a, b, c);
        return c;
      }
      getWorldPosition(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          a.setFromMatrixPosition(this.matrixWorld)
        );
      }
      getWorldQuaternion(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          this.matrixWorld.decompose(bu, a, bv),
          a
        );
      }
      getWorldScale(a) {
        return (
          this.updateWorldMatrix(!0, !1),
          this.matrixWorld.decompose(bu, bw, a),
          a
        );
      }
      getWorldDirection(a) {
        this.updateWorldMatrix(!0, !1);
        let b = this.matrixWorld.elements;
        return a.set(b[8], b[9], b[10]).normalize();
      }
      raycast() {}
      traverse(a) {
        a(this);
        let b = this.children;
        for (let c = 0, d = b.length; c < d; c++) b[c].traverse(a);
      }
      traverseVisible(a) {
        if (!1 === this.visible) return;
        a(this);
        let b = this.children;
        for (let c = 0, d = b.length; c < d; c++) b[c].traverseVisible(a);
      }
      traverseAncestors(a) {
        let b = this.parent;
        null !== b && (a(b), b.traverseAncestors(a));
      }
      updateMatrix() {
        (this.matrix.compose(this.position, this.quaternion, this.scale),
          (this.matrixWorldNeedsUpdate = !0));
      }
      updateMatrixWorld(a) {
        (this.matrixAutoUpdate && this.updateMatrix(),
          (this.matrixWorldNeedsUpdate || a) &&
            (!0 === this.matrixWorldAutoUpdate &&
              (null === this.parent
                ? this.matrixWorld.copy(this.matrix)
                : this.matrixWorld.multiplyMatrices(
                    this.parent.matrixWorld,
                    this.matrix
                  )),
            (this.matrixWorldNeedsUpdate = !1),
            (a = !0)));
        let b = this.children;
        for (let c = 0, d = b.length; c < d; c++) b[c].updateMatrixWorld(a);
      }
      updateWorldMatrix(a, b) {
        let c = this.parent;
        if (
          (!0 === a && null !== c && c.updateWorldMatrix(!0, !1),
          this.matrixAutoUpdate && this.updateMatrix(),
          !0 === this.matrixWorldAutoUpdate &&
            (null === this.parent
              ? this.matrixWorld.copy(this.matrix)
              : this.matrixWorld.multiplyMatrices(
                  this.parent.matrixWorld,
                  this.matrix
                )),
          !0 === b)
        ) {
          let a = this.children;
          for (let b = 0, c = a.length; b < c; b++)
            a[b].updateWorldMatrix(!1, !0);
        }
      }
      toJSON(a) {
        let b = void 0 === a || 'string' == typeof a,
          c = {};
        b &&
          ((a = {
            geometries: {},
            materials: {},
            textures: {},
            images: {},
            shapes: {},
            skeletons: {},
            animations: {},
            nodes: {},
          }),
          (c.metadata = {
            version: 4.7,
            type: 'Object',
            generator: 'Object3D.toJSON',
          }));
        let d = {};
        function e(b, c) {
          return (void 0 === b[c.uuid] && (b[c.uuid] = c.toJSON(a)), c.uuid);
        }
        if (
          ((d.uuid = this.uuid),
          (d.type = this.type),
          '' !== this.name && (d.name = this.name),
          !0 === this.castShadow && (d.castShadow = !0),
          !0 === this.receiveShadow && (d.receiveShadow = !0),
          !1 === this.visible && (d.visible = !1),
          !1 === this.frustumCulled && (d.frustumCulled = !1),
          0 !== this.renderOrder && (d.renderOrder = this.renderOrder),
          Object.keys(this.userData).length > 0 && (d.userData = this.userData),
          (d.layers = this.layers.mask),
          (d.matrix = this.matrix.toArray()),
          (d.up = this.up.toArray()),
          !1 === this.matrixAutoUpdate && (d.matrixAutoUpdate = !1),
          this.isInstancedMesh &&
            ((d.type = 'InstancedMesh'),
            (d.count = this.count),
            (d.instanceMatrix = this.instanceMatrix.toJSON()),
            null !== this.instanceColor &&
              (d.instanceColor = this.instanceColor.toJSON())),
          this.isBatchedMesh &&
            ((d.type = 'BatchedMesh'),
            (d.perObjectFrustumCulled = this.perObjectFrustumCulled),
            (d.sortObjects = this.sortObjects),
            (d.drawRanges = this._drawRanges),
            (d.reservedRanges = this._reservedRanges),
            (d.geometryInfo = this._geometryInfo.map((a) => ({
              ...a,
              boundingBox: a.boundingBox ? a.boundingBox.toJSON() : void 0,
              boundingSphere: a.boundingSphere
                ? a.boundingSphere.toJSON()
                : void 0,
            }))),
            (d.instanceInfo = this._instanceInfo.map((a) => ({ ...a }))),
            (d.availableInstanceIds = this._availableInstanceIds.slice()),
            (d.availableGeometryIds = this._availableGeometryIds.slice()),
            (d.nextIndexStart = this._nextIndexStart),
            (d.nextVertexStart = this._nextVertexStart),
            (d.geometryCount = this._geometryCount),
            (d.maxInstanceCount = this._maxInstanceCount),
            (d.maxVertexCount = this._maxVertexCount),
            (d.maxIndexCount = this._maxIndexCount),
            (d.geometryInitialized = this._geometryInitialized),
            (d.matricesTexture = this._matricesTexture.toJSON(a)),
            (d.indirectTexture = this._indirectTexture.toJSON(a)),
            null !== this._colorsTexture &&
              (d.colorsTexture = this._colorsTexture.toJSON(a)),
            null !== this.boundingSphere &&
              (d.boundingSphere = this.boundingSphere.toJSON()),
            null !== this.boundingBox &&
              (d.boundingBox = this.boundingBox.toJSON())),
          this.isScene)
        )
          (this.background &&
            (this.background.isColor
              ? (d.background = this.background.toJSON())
              : this.background.isTexture &&
                (d.background = this.background.toJSON(a).uuid)),
            this.environment &&
              this.environment.isTexture &&
              !0 !== this.environment.isRenderTargetTexture &&
              (d.environment = this.environment.toJSON(a).uuid));
        else if (this.isMesh || this.isLine || this.isPoints) {
          d.geometry = e(a.geometries, this.geometry);
          let b = this.geometry.parameters;
          if (void 0 !== b && void 0 !== b.shapes) {
            let c = b.shapes;
            if (Array.isArray(c))
              for (let b = 0, d = c.length; b < d; b++) {
                let d = c[b];
                e(a.shapes, d);
              }
            else e(a.shapes, c);
          }
        }
        if (
          (this.isSkinnedMesh &&
            ((d.bindMode = this.bindMode),
            (d.bindMatrix = this.bindMatrix.toArray()),
            void 0 !== this.skeleton &&
              (e(a.skeletons, this.skeleton),
              (d.skeleton = this.skeleton.uuid))),
          void 0 !== this.material)
        )
          if (Array.isArray(this.material)) {
            let b = [];
            for (let c = 0, d = this.material.length; c < d; c++)
              b.push(e(a.materials, this.material[c]));
            d.material = b;
          } else d.material = e(a.materials, this.material);
        if (this.children.length > 0) {
          d.children = [];
          for (let b = 0; b < this.children.length; b++)
            d.children.push(this.children[b].toJSON(a).object);
        }
        if (this.animations.length > 0) {
          d.animations = [];
          for (let b = 0; b < this.animations.length; b++) {
            let c = this.animations[b];
            d.animations.push(e(a.animations, c));
          }
        }
        if (b) {
          let b = f(a.geometries),
            d = f(a.materials),
            e = f(a.textures),
            g = f(a.images),
            h = f(a.shapes),
            i = f(a.skeletons),
            j = f(a.animations),
            k = f(a.nodes);
          (b.length > 0 && (c.geometries = b),
            d.length > 0 && (c.materials = d),
            e.length > 0 && (c.textures = e),
            g.length > 0 && (c.images = g),
            h.length > 0 && (c.shapes = h),
            i.length > 0 && (c.skeletons = i),
            j.length > 0 && (c.animations = j),
            k.length > 0 && (c.nodes = k));
        }
        return ((c.object = d), c);
        function f(a) {
          let b = [];
          for (let c in a) {
            let d = a[c];
            (delete d.metadata, b.push(d));
          }
          return b;
        }
      }
      clone(a) {
        return new this.constructor().copy(this, a);
      }
      copy(a, b = !0) {
        if (
          ((this.name = a.name),
          this.up.copy(a.up),
          this.position.copy(a.position),
          (this.rotation.order = a.rotation.order),
          this.quaternion.copy(a.quaternion),
          this.scale.copy(a.scale),
          this.matrix.copy(a.matrix),
          this.matrixWorld.copy(a.matrixWorld),
          (this.matrixAutoUpdate = a.matrixAutoUpdate),
          (this.matrixWorldAutoUpdate = a.matrixWorldAutoUpdate),
          (this.matrixWorldNeedsUpdate = a.matrixWorldNeedsUpdate),
          (this.layers.mask = a.layers.mask),
          (this.visible = a.visible),
          (this.castShadow = a.castShadow),
          (this.receiveShadow = a.receiveShadow),
          (this.frustumCulled = a.frustumCulled),
          (this.renderOrder = a.renderOrder),
          (this.animations = a.animations.slice()),
          (this.userData = JSON.parse(JSON.stringify(a.userData))),
          !0 === b)
        )
          for (let b = 0; b < a.children.length; b++) {
            let c = a.children[b];
            this.add(c.clone());
          }
        return this;
      }
    }
    ((bE.DEFAULT_UP = new aq(0, 1, 0)),
      (bE.DEFAULT_MATRIX_AUTO_UPDATE = !0),
      (bE.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = !0));
    let bF = new aq(),
      bG = new aq(),
      bH = new aq(),
      bI = new aq(),
      bJ = new aq(),
      bK = new aq(),
      bL = new aq(),
      bM = new aq(),
      bN = new aq(),
      bO = new aq(),
      bP = new aH(),
      bQ = new aH(),
      bR = new aH();
    class bS {
      constructor(a = new aq(), b = new aq(), c = new aq()) {
        ((this.a = a), (this.b = b), (this.c = c));
      }
      static getNormal(a, b, c, d) {
        (d.subVectors(c, b), bF.subVectors(a, b), d.cross(bF));
        let e = d.lengthSq();
        return e > 0 ? d.multiplyScalar(1 / Math.sqrt(e)) : d.set(0, 0, 0);
      }
      static getBarycoord(a, b, c, d, e) {
        (bF.subVectors(d, b), bG.subVectors(c, b), bH.subVectors(a, b));
        let f = bF.dot(bF),
          g = bF.dot(bG),
          h = bF.dot(bH),
          i = bG.dot(bG),
          j = bG.dot(bH),
          k = f * i - g * g;
        if (0 === k) return (e.set(0, 0, 0), null);
        let l = 1 / k,
          m = (i * h - g * j) * l,
          n = (f * j - g * h) * l;
        return e.set(1 - m - n, n, m);
      }
      static containsPoint(a, b, c, d) {
        return (
          null !== this.getBarycoord(a, b, c, d, bI) &&
          bI.x >= 0 &&
          bI.y >= 0 &&
          bI.x + bI.y <= 1
        );
      }
      static getInterpolation(a, b, c, d, e, f, g, h) {
        return null === this.getBarycoord(a, b, c, d, bI)
          ? ((h.x = 0),
            (h.y = 0),
            'z' in h && (h.z = 0),
            'w' in h && (h.w = 0),
            null)
          : (h.setScalar(0),
            h.addScaledVector(e, bI.x),
            h.addScaledVector(f, bI.y),
            h.addScaledVector(g, bI.z),
            h);
      }
      static getInterpolatedAttribute(a, b, c, d, e, f) {
        return (
          bP.setScalar(0),
          bQ.setScalar(0),
          bR.setScalar(0),
          bP.fromBufferAttribute(a, b),
          bQ.fromBufferAttribute(a, c),
          bR.fromBufferAttribute(a, d),
          f.setScalar(0),
          f.addScaledVector(bP, e.x),
          f.addScaledVector(bQ, e.y),
          f.addScaledVector(bR, e.z),
          f
        );
      }
      static isFrontFacing(a, b, c, d) {
        return (
          bF.subVectors(c, b),
          bG.subVectors(a, b),
          0 > bF.cross(bG).dot(d)
        );
      }
      set(a, b, c) {
        return (this.a.copy(a), this.b.copy(b), this.c.copy(c), this);
      }
      setFromPointsAndIndices(a, b, c, d) {
        return (this.a.copy(a[b]), this.b.copy(a[c]), this.c.copy(a[d]), this);
      }
      setFromAttributeAndIndices(a, b, c, d) {
        return (
          this.a.fromBufferAttribute(a, b),
          this.b.fromBufferAttribute(a, c),
          this.c.fromBufferAttribute(a, d),
          this
        );
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        return (this.a.copy(a.a), this.b.copy(a.b), this.c.copy(a.c), this);
      }
      getArea() {
        return (
          bF.subVectors(this.c, this.b),
          bG.subVectors(this.a, this.b),
          0.5 * bF.cross(bG).length()
        );
      }
      getMidpoint(a) {
        return a
          .addVectors(this.a, this.b)
          .add(this.c)
          .multiplyScalar(1 / 3);
      }
      getNormal(a) {
        return bS.getNormal(this.a, this.b, this.c, a);
      }
      getPlane(a) {
        return a.setFromCoplanarPoints(this.a, this.b, this.c);
      }
      getBarycoord(a, b) {
        return bS.getBarycoord(a, this.a, this.b, this.c, b);
      }
      getInterpolation(a, b, c, d, e) {
        return bS.getInterpolation(a, this.a, this.b, this.c, b, c, d, e);
      }
      containsPoint(a) {
        return bS.containsPoint(a, this.a, this.b, this.c);
      }
      isFrontFacing(a) {
        return bS.isFrontFacing(this.a, this.b, this.c, a);
      }
      intersectsBox(a) {
        return a.intersectsTriangle(this);
      }
      closestPointToPoint(a, b) {
        let c,
          d,
          e = this.a,
          f = this.b,
          g = this.c;
        (bJ.subVectors(f, e), bK.subVectors(g, e), bM.subVectors(a, e));
        let h = bJ.dot(bM),
          i = bK.dot(bM);
        if (h <= 0 && i <= 0) return b.copy(e);
        bN.subVectors(a, f);
        let j = bJ.dot(bN),
          k = bK.dot(bN);
        if (j >= 0 && k <= j) return b.copy(f);
        let l = h * k - j * i;
        if (l <= 0 && h >= 0 && j <= 0)
          return ((c = h / (h - j)), b.copy(e).addScaledVector(bJ, c));
        bO.subVectors(a, g);
        let m = bJ.dot(bO),
          n = bK.dot(bO);
        if (n >= 0 && m <= n) return b.copy(g);
        let o = m * i - h * n;
        if (o <= 0 && i >= 0 && n <= 0)
          return ((d = i / (i - n)), b.copy(e).addScaledVector(bK, d));
        let p = j * n - m * k;
        if (p <= 0 && k - j >= 0 && m - n >= 0)
          return (
            bL.subVectors(g, f),
            (d = (k - j) / (k - j + (m - n))),
            b.copy(f).addScaledVector(bL, d)
          );
        let q = 1 / (p + o + l);
        return (
          (c = o * q),
          (d = l * q),
          b.copy(e).addScaledVector(bJ, c).addScaledVector(bK, d)
        );
      }
      equals(a) {
        return a.a.equals(this.a) && a.b.equals(this.b) && a.c.equals(this.c);
      }
    }
    let bT = {
        aliceblue: 0xf0f8ff,
        antiquewhite: 0xfaebd7,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 0xf0ffff,
        beige: 0xf5f5dc,
        bisque: 0xffe4c4,
        black: 0,
        blanchedalmond: 0xffebcd,
        blue: 255,
        blueviolet: 9055202,
        brown: 0xa52a2a,
        burlywood: 0xdeb887,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 0xd2691e,
        coral: 0xff7f50,
        cornflowerblue: 6591981,
        cornsilk: 0xfff8dc,
        crimson: 0xdc143c,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 0xb8860b,
        darkgray: 0xa9a9a9,
        darkgreen: 25600,
        darkgrey: 0xa9a9a9,
        darkkhaki: 0xbdb76b,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 0xff8c00,
        darkorchid: 0x9932cc,
        darkred: 9109504,
        darksalmon: 0xe9967a,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 0xff1493,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 0xb22222,
        floralwhite: 0xfffaf0,
        forestgreen: 2263842,
        fuchsia: 0xff00ff,
        gainsboro: 0xdcdcdc,
        ghostwhite: 0xf8f8ff,
        gold: 0xffd700,
        goldenrod: 0xdaa520,
        gray: 8421504,
        green: 32768,
        greenyellow: 0xadff2f,
        grey: 8421504,
        honeydew: 0xf0fff0,
        hotpink: 0xff69b4,
        indianred: 0xcd5c5c,
        indigo: 4915330,
        ivory: 0xfffff0,
        khaki: 0xf0e68c,
        lavender: 0xe6e6fa,
        lavenderblush: 0xfff0f5,
        lawngreen: 8190976,
        lemonchiffon: 0xfffacd,
        lightblue: 0xadd8e6,
        lightcoral: 0xf08080,
        lightcyan: 0xe0ffff,
        lightgoldenrodyellow: 0xfafad2,
        lightgray: 0xd3d3d3,
        lightgreen: 9498256,
        lightgrey: 0xd3d3d3,
        lightpink: 0xffb6c1,
        lightsalmon: 0xffa07a,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 0xb0c4de,
        lightyellow: 0xffffe0,
        lime: 65280,
        limegreen: 3329330,
        linen: 0xfaf0e6,
        magenta: 0xff00ff,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 0xba55d3,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 0xc71585,
        midnightblue: 1644912,
        mintcream: 0xf5fffa,
        mistyrose: 0xffe4e1,
        moccasin: 0xffe4b5,
        navajowhite: 0xffdead,
        navy: 128,
        oldlace: 0xfdf5e6,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 0xffa500,
        orangered: 0xff4500,
        orchid: 0xda70d6,
        palegoldenrod: 0xeee8aa,
        palegreen: 0x98fb98,
        paleturquoise: 0xafeeee,
        palevioletred: 0xdb7093,
        papayawhip: 0xffefd5,
        peachpuff: 0xffdab9,
        peru: 0xcd853f,
        pink: 0xffc0cb,
        plum: 0xdda0dd,
        powderblue: 0xb0e0e6,
        purple: 8388736,
        rebeccapurple: 6697881,
        red: 0xff0000,
        rosybrown: 0xbc8f8f,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 0xfa8072,
        sandybrown: 0xf4a460,
        seagreen: 3050327,
        seashell: 0xfff5ee,
        sienna: 0xa0522d,
        silver: 0xc0c0c0,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 0xfffafa,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 0xd2b48c,
        teal: 32896,
        thistle: 0xd8bfd8,
        tomato: 0xff6347,
        turquoise: 4251856,
        violet: 0xee82ee,
        wheat: 0xf5deb3,
        white: 0xffffff,
        whitesmoke: 0xf5f5f5,
        yellow: 0xffff00,
        yellowgreen: 0x9acd32,
      },
      bU = { h: 0, s: 0, l: 0 },
      bV = { h: 0, s: 0, l: 0 };
    function bW(a, b, c) {
      return (c < 0 && (c += 1), c > 1 && (c -= 1), c < 1 / 6)
        ? a + (b - a) * 6 * c
        : c < 0.5
          ? b
          : c < 2 / 3
            ? a + (b - a) * 6 * (2 / 3 - c)
            : a;
    }
    class bX {
      constructor(a, b, c) {
        return (
          (this.isColor = !0),
          (this.r = 1),
          (this.g = 1),
          (this.b = 1),
          this.set(a, b, c)
        );
      }
      set(a, b, c) {
        return (
          void 0 === b && void 0 === c
            ? a && a.isColor
              ? this.copy(a)
              : 'number' == typeof a
                ? this.setHex(a)
                : 'string' == typeof a && this.setStyle(a)
            : this.setRGB(a, b, c),
          this
        );
      }
      setScalar(a) {
        return ((this.r = a), (this.g = a), (this.b = a), this);
      }
      setHex(a, b = I) {
        return (
          (a = Math.floor(a)),
          (this.r = ((a >> 16) & 255) / 255),
          (this.g = ((a >> 8) & 255) / 255),
          (this.b = (255 & a) / 255),
          ax.colorSpaceToWorking(this, b),
          this
        );
      }
      setRGB(a, b, c, d = ax.workingColorSpace) {
        return (
          (this.r = a),
          (this.g = b),
          (this.b = c),
          ax.colorSpaceToWorking(this, d),
          this
        );
      }
      setHSL(a, b, c, d = ax.workingColorSpace) {
        if (((a = aj(a, 1)), (b = ai(b, 0, 1)), (c = ai(c, 0, 1)), 0 === b))
          this.r = this.g = this.b = c;
        else {
          let d = c <= 0.5 ? c * (1 + b) : c + b - c * b,
            e = 2 * c - d;
          ((this.r = bW(e, d, a + 1 / 3)),
            (this.g = bW(e, d, a)),
            (this.b = bW(e, d, a - 1 / 3)));
        }
        return (ax.colorSpaceToWorking(this, d), this);
      }
      setStyle(a, b = I) {
        let c;
        function d(b) {
          void 0 !== b &&
            1 > parseFloat(b) &&
            _('Color: Alpha component of ' + a + ' will be ignored.');
        }
        if ((c = /^(\w+)\(([^\)]*)\)/.exec(a))) {
          let e,
            f = c[1],
            g = c[2];
          switch (f) {
            case 'rgb':
            case 'rgba':
              if (
                (e =
                  /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                    g
                  ))
              )
                return (
                  d(e[4]),
                  this.setRGB(
                    Math.min(255, parseInt(e[1], 10)) / 255,
                    Math.min(255, parseInt(e[2], 10)) / 255,
                    Math.min(255, parseInt(e[3], 10)) / 255,
                    b
                  )
                );
              if (
                (e =
                  /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                    g
                  ))
              )
                return (
                  d(e[4]),
                  this.setRGB(
                    Math.min(100, parseInt(e[1], 10)) / 100,
                    Math.min(100, parseInt(e[2], 10)) / 100,
                    Math.min(100, parseInt(e[3], 10)) / 100,
                    b
                  )
                );
              break;
            case 'hsl':
            case 'hsla':
              if (
                (e =
                  /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                    g
                  ))
              )
                return (
                  d(e[4]),
                  this.setHSL(
                    parseFloat(e[1]) / 360,
                    parseFloat(e[2]) / 100,
                    parseFloat(e[3]) / 100,
                    b
                  )
                );
              break;
            default:
              _('Color: Unknown color model ' + a);
          }
        } else if ((c = /^\#([A-Fa-f\d]+)$/.exec(a))) {
          let d = c[1],
            e = d.length;
          if (3 === e)
            return this.setRGB(
              parseInt(d.charAt(0), 16) / 15,
              parseInt(d.charAt(1), 16) / 15,
              parseInt(d.charAt(2), 16) / 15,
              b
            );
          if (6 === e) return this.setHex(parseInt(d, 16), b);
          _('Color: Invalid hex color ' + a);
        } else if (a && a.length > 0) return this.setColorName(a, b);
        return this;
      }
      setColorName(a, b = I) {
        let c = bT[a.toLowerCase()];
        return (
          void 0 !== c ? this.setHex(c, b) : _('Color: Unknown color ' + a),
          this
        );
      }
      clone() {
        return new this.constructor(this.r, this.g, this.b);
      }
      copy(a) {
        return ((this.r = a.r), (this.g = a.g), (this.b = a.b), this);
      }
      copySRGBToLinear(a) {
        return (
          (this.r = ay(a.r)),
          (this.g = ay(a.g)),
          (this.b = ay(a.b)),
          this
        );
      }
      copyLinearToSRGB(a) {
        return (
          (this.r = az(a.r)),
          (this.g = az(a.g)),
          (this.b = az(a.b)),
          this
        );
      }
      convertSRGBToLinear() {
        return (this.copySRGBToLinear(this), this);
      }
      convertLinearToSRGB() {
        return (this.copyLinearToSRGB(this), this);
      }
      getHex(a = I) {
        return (
          ax.workingToColorSpace(bY.copy(this), a),
          65536 * Math.round(ai(255 * bY.r, 0, 255)) +
            256 * Math.round(ai(255 * bY.g, 0, 255)) +
            Math.round(ai(255 * bY.b, 0, 255))
        );
      }
      getHexString(a = I) {
        return ('000000' + this.getHex(a).toString(16)).slice(-6);
      }
      getHSL(a, b = ax.workingColorSpace) {
        let c, d;
        ax.workingToColorSpace(bY.copy(this), b);
        let e = bY.r,
          f = bY.g,
          g = bY.b,
          h = Math.max(e, f, g),
          i = Math.min(e, f, g),
          j = (i + h) / 2;
        if (i === h) ((c = 0), (d = 0));
        else {
          let a = h - i;
          switch (((d = j <= 0.5 ? a / (h + i) : a / (2 - h - i)), h)) {
            case e:
              c = (f - g) / a + 6 * (f < g);
              break;
            case f:
              c = (g - e) / a + 2;
              break;
            case g:
              c = (e - f) / a + 4;
          }
          c /= 6;
        }
        return ((a.h = c), (a.s = d), (a.l = j), a);
      }
      getRGB(a, b = ax.workingColorSpace) {
        return (
          ax.workingToColorSpace(bY.copy(this), b),
          (a.r = bY.r),
          (a.g = bY.g),
          (a.b = bY.b),
          a
        );
      }
      getStyle(a = I) {
        ax.workingToColorSpace(bY.copy(this), a);
        let b = bY.r,
          c = bY.g,
          d = bY.b;
        return a !== I
          ? `color(${a} ${b.toFixed(3)} ${c.toFixed(3)} ${d.toFixed(3)})`
          : `rgb(${Math.round(255 * b)},${Math.round(255 * c)},${Math.round(255 * d)})`;
      }
      offsetHSL(a, b, c) {
        return (this.getHSL(bU), this.setHSL(bU.h + a, bU.s + b, bU.l + c));
      }
      add(a) {
        return ((this.r += a.r), (this.g += a.g), (this.b += a.b), this);
      }
      addColors(a, b) {
        return (
          (this.r = a.r + b.r),
          (this.g = a.g + b.g),
          (this.b = a.b + b.b),
          this
        );
      }
      addScalar(a) {
        return ((this.r += a), (this.g += a), (this.b += a), this);
      }
      sub(a) {
        return (
          (this.r = Math.max(0, this.r - a.r)),
          (this.g = Math.max(0, this.g - a.g)),
          (this.b = Math.max(0, this.b - a.b)),
          this
        );
      }
      multiply(a) {
        return ((this.r *= a.r), (this.g *= a.g), (this.b *= a.b), this);
      }
      multiplyScalar(a) {
        return ((this.r *= a), (this.g *= a), (this.b *= a), this);
      }
      lerp(a, b) {
        return (
          (this.r += (a.r - this.r) * b),
          (this.g += (a.g - this.g) * b),
          (this.b += (a.b - this.b) * b),
          this
        );
      }
      lerpColors(a, b, c) {
        return (
          (this.r = a.r + (b.r - a.r) * c),
          (this.g = a.g + (b.g - a.g) * c),
          (this.b = a.b + (b.b - a.b) * c),
          this
        );
      }
      lerpHSL(a, b) {
        (this.getHSL(bU), a.getHSL(bV));
        let c = ak(bU.h, bV.h, b),
          d = ak(bU.s, bV.s, b),
          e = ak(bU.l, bV.l, b);
        return (this.setHSL(c, d, e), this);
      }
      setFromVector3(a) {
        return ((this.r = a.x), (this.g = a.y), (this.b = a.z), this);
      }
      applyMatrix3(a) {
        let b = this.r,
          c = this.g,
          d = this.b,
          e = a.elements;
        return (
          (this.r = e[0] * b + e[3] * c + e[6] * d),
          (this.g = e[1] * b + e[4] * c + e[7] * d),
          (this.b = e[2] * b + e[5] * c + e[8] * d),
          this
        );
      }
      equals(a) {
        return a.r === this.r && a.g === this.g && a.b === this.b;
      }
      fromArray(a, b = 0) {
        return (
          (this.r = a[b]),
          (this.g = a[b + 1]),
          (this.b = a[b + 2]),
          this
        );
      }
      toArray(a = [], b = 0) {
        return ((a[b] = this.r), (a[b + 1] = this.g), (a[b + 2] = this.b), a);
      }
      fromBufferAttribute(a, b) {
        return (
          (this.r = a.getX(b)),
          (this.g = a.getY(b)),
          (this.b = a.getZ(b)),
          this
        );
      }
      toJSON() {
        return this.getHex();
      }
      *[Symbol.iterator]() {
        (yield this.r, yield this.g, yield this.b);
      }
    }
    let bY = new bX();
    bX.NAMES = bT;
    let bZ = 0;
    class b$ extends ac {
      constructor() {
        (super(),
          (this.isMaterial = !0),
          Object.defineProperty(this, 'id', { value: bZ++ }),
          (this.uuid = ah()),
          (this.name = ''),
          (this.type = 'Material'),
          (this.blending = 1),
          (this.side = 0),
          (this.vertexColors = !1),
          (this.opacity = 1),
          (this.transparent = !1),
          (this.alphaHash = !1),
          (this.blendSrc = 204),
          (this.blendDst = 205),
          (this.blendEquation = 100),
          (this.blendSrcAlpha = null),
          (this.blendDstAlpha = null),
          (this.blendEquationAlpha = null),
          (this.blendColor = new bX(0, 0, 0)),
          (this.blendAlpha = 0),
          (this.depthFunc = 3),
          (this.depthTest = !0),
          (this.depthWrite = !0),
          (this.stencilWriteMask = 255),
          (this.stencilFunc = 519),
          (this.stencilRef = 0),
          (this.stencilFuncMask = 255),
          (this.stencilFail = 7680),
          (this.stencilZFail = 7680),
          (this.stencilZPass = 7680),
          (this.stencilWrite = !1),
          (this.clippingPlanes = null),
          (this.clipIntersection = !1),
          (this.clipShadows = !1),
          (this.shadowSide = null),
          (this.colorWrite = !0),
          (this.precision = null),
          (this.polygonOffset = !1),
          (this.polygonOffsetFactor = 0),
          (this.polygonOffsetUnits = 0),
          (this.dithering = !1),
          (this.alphaToCoverage = !1),
          (this.premultipliedAlpha = !1),
          (this.forceSinglePass = !1),
          (this.allowOverride = !0),
          (this.visible = !0),
          (this.toneMapped = !0),
          (this.userData = {}),
          (this.version = 0),
          (this._alphaTest = 0));
      }
      get alphaTest() {
        return this._alphaTest;
      }
      set alphaTest(a) {
        (this._alphaTest > 0 != a > 0 && this.version++, (this._alphaTest = a));
      }
      onBeforeRender() {}
      onBeforeCompile() {}
      customProgramCacheKey() {
        return this.onBeforeCompile.toString();
      }
      setValues(a) {
        if (void 0 !== a)
          for (let b in a) {
            let c = a[b];
            if (void 0 === c) {
              _(`Material: parameter '${b}' has value of undefined.`);
              continue;
            }
            let d = this[b];
            if (void 0 === d) {
              _(`Material: '${b}' is not a property of THREE.${this.type}.`);
              continue;
            }
            d && d.isColor
              ? d.set(c)
              : d && d.isVector3 && c && c.isVector3
                ? d.copy(c)
                : (this[b] = c);
          }
      }
      toJSON(a) {
        let b = void 0 === a || 'string' == typeof a;
        b && (a = { textures: {}, images: {} });
        let c = {
          metadata: {
            version: 4.7,
            type: 'Material',
            generator: 'Material.toJSON',
          },
        };
        function d(a) {
          let b = [];
          for (let c in a) {
            let d = a[c];
            (delete d.metadata, b.push(d));
          }
          return b;
        }
        if (
          ((c.uuid = this.uuid),
          (c.type = this.type),
          '' !== this.name && (c.name = this.name),
          this.color && this.color.isColor && (c.color = this.color.getHex()),
          void 0 !== this.roughness && (c.roughness = this.roughness),
          void 0 !== this.metalness && (c.metalness = this.metalness),
          void 0 !== this.sheen && (c.sheen = this.sheen),
          this.sheenColor &&
            this.sheenColor.isColor &&
            (c.sheenColor = this.sheenColor.getHex()),
          void 0 !== this.sheenRoughness &&
            (c.sheenRoughness = this.sheenRoughness),
          this.emissive &&
            this.emissive.isColor &&
            (c.emissive = this.emissive.getHex()),
          void 0 !== this.emissiveIntensity &&
            1 !== this.emissiveIntensity &&
            (c.emissiveIntensity = this.emissiveIntensity),
          this.specular &&
            this.specular.isColor &&
            (c.specular = this.specular.getHex()),
          void 0 !== this.specularIntensity &&
            (c.specularIntensity = this.specularIntensity),
          this.specularColor &&
            this.specularColor.isColor &&
            (c.specularColor = this.specularColor.getHex()),
          void 0 !== this.shininess && (c.shininess = this.shininess),
          void 0 !== this.clearcoat && (c.clearcoat = this.clearcoat),
          void 0 !== this.clearcoatRoughness &&
            (c.clearcoatRoughness = this.clearcoatRoughness),
          this.clearcoatMap &&
            this.clearcoatMap.isTexture &&
            (c.clearcoatMap = this.clearcoatMap.toJSON(a).uuid),
          this.clearcoatRoughnessMap &&
            this.clearcoatRoughnessMap.isTexture &&
            (c.clearcoatRoughnessMap =
              this.clearcoatRoughnessMap.toJSON(a).uuid),
          this.clearcoatNormalMap &&
            this.clearcoatNormalMap.isTexture &&
            ((c.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(a).uuid),
            (c.clearcoatNormalScale = this.clearcoatNormalScale.toArray())),
          this.sheenColorMap &&
            this.sheenColorMap.isTexture &&
            (c.sheenColorMap = this.sheenColorMap.toJSON(a).uuid),
          this.sheenRoughnessMap &&
            this.sheenRoughnessMap.isTexture &&
            (c.sheenRoughnessMap = this.sheenRoughnessMap.toJSON(a).uuid),
          void 0 !== this.dispersion && (c.dispersion = this.dispersion),
          void 0 !== this.iridescence && (c.iridescence = this.iridescence),
          void 0 !== this.iridescenceIOR &&
            (c.iridescenceIOR = this.iridescenceIOR),
          void 0 !== this.iridescenceThicknessRange &&
            (c.iridescenceThicknessRange = this.iridescenceThicknessRange),
          this.iridescenceMap &&
            this.iridescenceMap.isTexture &&
            (c.iridescenceMap = this.iridescenceMap.toJSON(a).uuid),
          this.iridescenceThicknessMap &&
            this.iridescenceThicknessMap.isTexture &&
            (c.iridescenceThicknessMap =
              this.iridescenceThicknessMap.toJSON(a).uuid),
          void 0 !== this.anisotropy && (c.anisotropy = this.anisotropy),
          void 0 !== this.anisotropyRotation &&
            (c.anisotropyRotation = this.anisotropyRotation),
          this.anisotropyMap &&
            this.anisotropyMap.isTexture &&
            (c.anisotropyMap = this.anisotropyMap.toJSON(a).uuid),
          this.map && this.map.isTexture && (c.map = this.map.toJSON(a).uuid),
          this.matcap &&
            this.matcap.isTexture &&
            (c.matcap = this.matcap.toJSON(a).uuid),
          this.alphaMap &&
            this.alphaMap.isTexture &&
            (c.alphaMap = this.alphaMap.toJSON(a).uuid),
          this.lightMap &&
            this.lightMap.isTexture &&
            ((c.lightMap = this.lightMap.toJSON(a).uuid),
            (c.lightMapIntensity = this.lightMapIntensity)),
          this.aoMap &&
            this.aoMap.isTexture &&
            ((c.aoMap = this.aoMap.toJSON(a).uuid),
            (c.aoMapIntensity = this.aoMapIntensity)),
          this.bumpMap &&
            this.bumpMap.isTexture &&
            ((c.bumpMap = this.bumpMap.toJSON(a).uuid),
            (c.bumpScale = this.bumpScale)),
          this.normalMap &&
            this.normalMap.isTexture &&
            ((c.normalMap = this.normalMap.toJSON(a).uuid),
            (c.normalMapType = this.normalMapType),
            (c.normalScale = this.normalScale.toArray())),
          this.displacementMap &&
            this.displacementMap.isTexture &&
            ((c.displacementMap = this.displacementMap.toJSON(a).uuid),
            (c.displacementScale = this.displacementScale),
            (c.displacementBias = this.displacementBias)),
          this.roughnessMap &&
            this.roughnessMap.isTexture &&
            (c.roughnessMap = this.roughnessMap.toJSON(a).uuid),
          this.metalnessMap &&
            this.metalnessMap.isTexture &&
            (c.metalnessMap = this.metalnessMap.toJSON(a).uuid),
          this.emissiveMap &&
            this.emissiveMap.isTexture &&
            (c.emissiveMap = this.emissiveMap.toJSON(a).uuid),
          this.specularMap &&
            this.specularMap.isTexture &&
            (c.specularMap = this.specularMap.toJSON(a).uuid),
          this.specularIntensityMap &&
            this.specularIntensityMap.isTexture &&
            (c.specularIntensityMap = this.specularIntensityMap.toJSON(a).uuid),
          this.specularColorMap &&
            this.specularColorMap.isTexture &&
            (c.specularColorMap = this.specularColorMap.toJSON(a).uuid),
          this.envMap &&
            this.envMap.isTexture &&
            ((c.envMap = this.envMap.toJSON(a).uuid),
            void 0 !== this.combine && (c.combine = this.combine)),
          void 0 !== this.envMapRotation &&
            (c.envMapRotation = this.envMapRotation.toArray()),
          void 0 !== this.envMapIntensity &&
            (c.envMapIntensity = this.envMapIntensity),
          void 0 !== this.reflectivity && (c.reflectivity = this.reflectivity),
          void 0 !== this.refractionRatio &&
            (c.refractionRatio = this.refractionRatio),
          this.gradientMap &&
            this.gradientMap.isTexture &&
            (c.gradientMap = this.gradientMap.toJSON(a).uuid),
          void 0 !== this.transmission && (c.transmission = this.transmission),
          this.transmissionMap &&
            this.transmissionMap.isTexture &&
            (c.transmissionMap = this.transmissionMap.toJSON(a).uuid),
          void 0 !== this.thickness && (c.thickness = this.thickness),
          this.thicknessMap &&
            this.thicknessMap.isTexture &&
            (c.thicknessMap = this.thicknessMap.toJSON(a).uuid),
          void 0 !== this.attenuationDistance &&
            this.attenuationDistance !== 1 / 0 &&
            (c.attenuationDistance = this.attenuationDistance),
          void 0 !== this.attenuationColor &&
            (c.attenuationColor = this.attenuationColor.getHex()),
          void 0 !== this.size && (c.size = this.size),
          null !== this.shadowSide && (c.shadowSide = this.shadowSide),
          void 0 !== this.sizeAttenuation &&
            (c.sizeAttenuation = this.sizeAttenuation),
          1 !== this.blending && (c.blending = this.blending),
          0 !== this.side && (c.side = this.side),
          !0 === this.vertexColors && (c.vertexColors = !0),
          this.opacity < 1 && (c.opacity = this.opacity),
          !0 === this.transparent && (c.transparent = !0),
          204 !== this.blendSrc && (c.blendSrc = this.blendSrc),
          205 !== this.blendDst && (c.blendDst = this.blendDst),
          100 !== this.blendEquation && (c.blendEquation = this.blendEquation),
          null !== this.blendSrcAlpha && (c.blendSrcAlpha = this.blendSrcAlpha),
          null !== this.blendDstAlpha && (c.blendDstAlpha = this.blendDstAlpha),
          null !== this.blendEquationAlpha &&
            (c.blendEquationAlpha = this.blendEquationAlpha),
          this.blendColor &&
            this.blendColor.isColor &&
            (c.blendColor = this.blendColor.getHex()),
          0 !== this.blendAlpha && (c.blendAlpha = this.blendAlpha),
          3 !== this.depthFunc && (c.depthFunc = this.depthFunc),
          !1 === this.depthTest && (c.depthTest = this.depthTest),
          !1 === this.depthWrite && (c.depthWrite = this.depthWrite),
          !1 === this.colorWrite && (c.colorWrite = this.colorWrite),
          255 !== this.stencilWriteMask &&
            (c.stencilWriteMask = this.stencilWriteMask),
          519 !== this.stencilFunc && (c.stencilFunc = this.stencilFunc),
          0 !== this.stencilRef && (c.stencilRef = this.stencilRef),
          255 !== this.stencilFuncMask &&
            (c.stencilFuncMask = this.stencilFuncMask),
          7680 !== this.stencilFail && (c.stencilFail = this.stencilFail),
          7680 !== this.stencilZFail && (c.stencilZFail = this.stencilZFail),
          7680 !== this.stencilZPass && (c.stencilZPass = this.stencilZPass),
          !0 === this.stencilWrite && (c.stencilWrite = this.stencilWrite),
          void 0 !== this.rotation &&
            0 !== this.rotation &&
            (c.rotation = this.rotation),
          !0 === this.polygonOffset && (c.polygonOffset = !0),
          0 !== this.polygonOffsetFactor &&
            (c.polygonOffsetFactor = this.polygonOffsetFactor),
          0 !== this.polygonOffsetUnits &&
            (c.polygonOffsetUnits = this.polygonOffsetUnits),
          void 0 !== this.linewidth &&
            1 !== this.linewidth &&
            (c.linewidth = this.linewidth),
          void 0 !== this.dashSize && (c.dashSize = this.dashSize),
          void 0 !== this.gapSize && (c.gapSize = this.gapSize),
          void 0 !== this.scale && (c.scale = this.scale),
          !0 === this.dithering && (c.dithering = !0),
          this.alphaTest > 0 && (c.alphaTest = this.alphaTest),
          !0 === this.alphaHash && (c.alphaHash = !0),
          !0 === this.alphaToCoverage && (c.alphaToCoverage = !0),
          !0 === this.premultipliedAlpha && (c.premultipliedAlpha = !0),
          !0 === this.forceSinglePass && (c.forceSinglePass = !0),
          !1 === this.allowOverride && (c.allowOverride = !1),
          !0 === this.wireframe && (c.wireframe = !0),
          this.wireframeLinewidth > 1 &&
            (c.wireframeLinewidth = this.wireframeLinewidth),
          'round' !== this.wireframeLinecap &&
            (c.wireframeLinecap = this.wireframeLinecap),
          'round' !== this.wireframeLinejoin &&
            (c.wireframeLinejoin = this.wireframeLinejoin),
          !0 === this.flatShading && (c.flatShading = !0),
          !1 === this.visible && (c.visible = !1),
          !1 === this.toneMapped && (c.toneMapped = !1),
          !1 === this.fog && (c.fog = !1),
          Object.keys(this.userData).length > 0 && (c.userData = this.userData),
          b)
        ) {
          let b = d(a.textures),
            e = d(a.images);
          (b.length > 0 && (c.textures = b), e.length > 0 && (c.images = e));
        }
        return c;
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        ((this.name = a.name),
          (this.blending = a.blending),
          (this.side = a.side),
          (this.vertexColors = a.vertexColors),
          (this.opacity = a.opacity),
          (this.transparent = a.transparent),
          (this.blendSrc = a.blendSrc),
          (this.blendDst = a.blendDst),
          (this.blendEquation = a.blendEquation),
          (this.blendSrcAlpha = a.blendSrcAlpha),
          (this.blendDstAlpha = a.blendDstAlpha),
          (this.blendEquationAlpha = a.blendEquationAlpha),
          this.blendColor.copy(a.blendColor),
          (this.blendAlpha = a.blendAlpha),
          (this.depthFunc = a.depthFunc),
          (this.depthTest = a.depthTest),
          (this.depthWrite = a.depthWrite),
          (this.stencilWriteMask = a.stencilWriteMask),
          (this.stencilFunc = a.stencilFunc),
          (this.stencilRef = a.stencilRef),
          (this.stencilFuncMask = a.stencilFuncMask),
          (this.stencilFail = a.stencilFail),
          (this.stencilZFail = a.stencilZFail),
          (this.stencilZPass = a.stencilZPass),
          (this.stencilWrite = a.stencilWrite));
        let b = a.clippingPlanes,
          c = null;
        if (null !== b) {
          let a = b.length;
          c = Array(a);
          for (let d = 0; d !== a; ++d) c[d] = b[d].clone();
        }
        return (
          (this.clippingPlanes = c),
          (this.clipIntersection = a.clipIntersection),
          (this.clipShadows = a.clipShadows),
          (this.shadowSide = a.shadowSide),
          (this.colorWrite = a.colorWrite),
          (this.precision = a.precision),
          (this.polygonOffset = a.polygonOffset),
          (this.polygonOffsetFactor = a.polygonOffsetFactor),
          (this.polygonOffsetUnits = a.polygonOffsetUnits),
          (this.dithering = a.dithering),
          (this.alphaTest = a.alphaTest),
          (this.alphaHash = a.alphaHash),
          (this.alphaToCoverage = a.alphaToCoverage),
          (this.premultipliedAlpha = a.premultipliedAlpha),
          (this.forceSinglePass = a.forceSinglePass),
          (this.allowOverride = a.allowOverride),
          (this.visible = a.visible),
          (this.toneMapped = a.toneMapped),
          (this.userData = JSON.parse(JSON.stringify(a.userData))),
          this
        );
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
      set needsUpdate(a) {
        !0 === a && this.version++;
      }
    }
    class b_ extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshBasicMaterial = !0),
          (this.type = 'MeshBasicMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.lightMap = null),
          (this.lightMapIntensity = 1),
          (this.aoMap = null),
          (this.aoMapIntensity = 1),
          (this.specularMap = null),
          (this.alphaMap = null),
          (this.envMap = null),
          (this.envMapRotation = new bn()),
          (this.combine = 0),
          (this.reflectivity = 1),
          (this.refractionRatio = 0.98),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.wireframeLinecap = 'round'),
          (this.wireframeLinejoin = 'round'),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.lightMap = a.lightMap),
          (this.lightMapIntensity = a.lightMapIntensity),
          (this.aoMap = a.aoMap),
          (this.aoMapIntensity = a.aoMapIntensity),
          (this.specularMap = a.specularMap),
          (this.alphaMap = a.alphaMap),
          (this.envMap = a.envMap),
          this.envMapRotation.copy(a.envMapRotation),
          (this.combine = a.combine),
          (this.reflectivity = a.reflectivity),
          (this.refractionRatio = a.refractionRatio),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.wireframeLinecap = a.wireframeLinecap),
          (this.wireframeLinejoin = a.wireframeLinejoin),
          (this.fog = a.fog),
          this
        );
      }
    }
    let b0 = (function () {
      let a = new ArrayBuffer(4),
        b = new Float32Array(a),
        c = new Uint32Array(a),
        d = new Uint32Array(512),
        e = new Uint32Array(512);
      for (let a = 0; a < 256; ++a) {
        let b = a - 127;
        b < -27
          ? ((d[a] = 0), (d[256 | a] = 32768), (e[a] = 24), (e[256 | a] = 24))
          : b < -14
            ? ((d[a] = 1024 >> (-b - 14)),
              (d[256 | a] = (1024 >> (-b - 14)) | 32768),
              (e[a] = -b - 1),
              (e[256 | a] = -b - 1))
            : b <= 15
              ? ((d[a] = (b + 15) << 10),
                (d[256 | a] = ((b + 15) << 10) | 32768),
                (e[a] = 13),
                (e[256 | a] = 13))
              : b < 128
                ? ((d[a] = 31744),
                  (d[256 | a] = 64512),
                  (e[a] = 24),
                  (e[256 | a] = 24))
                : ((d[a] = 31744),
                  (d[256 | a] = 64512),
                  (e[a] = 13),
                  (e[256 | a] = 13));
      }
      let f = new Uint32Array(2048),
        g = new Uint32Array(64),
        h = new Uint32Array(64);
      for (let a = 1; a < 1024; ++a) {
        let b = a << 13,
          c = 0;
        for (; (8388608 & b) == 0; ) ((b <<= 1), (c -= 8388608));
        ((b &= -8388609), (c += 0x38800000), (f[a] = b | c));
      }
      for (let a = 1024; a < 2048; ++a) f[a] = 0x38000000 + ((a - 1024) << 13);
      for (let a = 1; a < 31; ++a) g[a] = a << 23;
      ((g[31] = 0x47800000), (g[32] = 0x80000000));
      for (let a = 33; a < 63; ++a) g[a] = 0x80000000 + ((a - 32) << 23);
      g[63] = 0xc7800000;
      for (let a = 1; a < 64; ++a) 32 !== a && (h[a] = 1024);
      return {
        floatView: b,
        uint32View: c,
        baseTable: d,
        shiftTable: e,
        mantissaTable: f,
        exponentTable: g,
        offsetTable: h,
      };
    })();
    function b1(a) {
      (Math.abs(a) > 65504 && _('DataUtils.toHalfFloat(): Value out of range.'),
        (a = ai(a, -65504, 65504)),
        (b0.floatView[0] = a));
      let b = b0.uint32View[0],
        c = (b >> 23) & 511;
      return b0.baseTable[c] + ((8388607 & b) >> b0.shiftTable[c]);
    }
    function b2(a) {
      let b = a >> 10;
      return (
        (b0.uint32View[0] =
          b0.mantissaTable[b0.offsetTable[b] + (1023 & a)] +
          b0.exponentTable[b]),
        b0.floatView[0]
      );
    }
    class b3 {
      static toHalfFloat(a) {
        return b1(a);
      }
      static fromHalfFloat(a) {
        return b2(a);
      }
    }
    let b4 = new aq(),
      b5 = new ao(),
      b6 = 0;
    class b7 {
      constructor(a, b, c = !1) {
        if (Array.isArray(a))
          throw TypeError(
            'THREE.BufferAttribute: array should be a Typed Array.'
          );
        ((this.isBufferAttribute = !0),
          Object.defineProperty(this, 'id', { value: b6++ }),
          (this.name = ''),
          (this.array = a),
          (this.itemSize = b),
          (this.count = void 0 !== a ? a.length / b : 0),
          (this.normalized = c),
          (this.usage = 35044),
          (this.updateRanges = []),
          (this.gpuType = 1015),
          (this.version = 0));
      }
      onUploadCallback() {}
      set needsUpdate(a) {
        !0 === a && this.version++;
      }
      setUsage(a) {
        return ((this.usage = a), this);
      }
      addUpdateRange(a, b) {
        this.updateRanges.push({ start: a, count: b });
      }
      clearUpdateRanges() {
        this.updateRanges.length = 0;
      }
      copy(a) {
        return (
          (this.name = a.name),
          (this.array = new a.array.constructor(a.array)),
          (this.itemSize = a.itemSize),
          (this.count = a.count),
          (this.normalized = a.normalized),
          (this.usage = a.usage),
          (this.gpuType = a.gpuType),
          this
        );
      }
      copyAt(a, b, c) {
        ((a *= this.itemSize), (c *= b.itemSize));
        for (let d = 0, e = this.itemSize; d < e; d++)
          this.array[a + d] = b.array[c + d];
        return this;
      }
      copyArray(a) {
        return (this.array.set(a), this);
      }
      applyMatrix3(a) {
        if (2 === this.itemSize)
          for (let b = 0, c = this.count; b < c; b++)
            (b5.fromBufferAttribute(this, b),
              b5.applyMatrix3(a),
              this.setXY(b, b5.x, b5.y));
        else if (3 === this.itemSize)
          for (let b = 0, c = this.count; b < c; b++)
            (b4.fromBufferAttribute(this, b),
              b4.applyMatrix3(a),
              this.setXYZ(b, b4.x, b4.y, b4.z));
        return this;
      }
      applyMatrix4(a) {
        for (let b = 0, c = this.count; b < c; b++)
          (b4.fromBufferAttribute(this, b),
            b4.applyMatrix4(a),
            this.setXYZ(b, b4.x, b4.y, b4.z));
        return this;
      }
      applyNormalMatrix(a) {
        for (let b = 0, c = this.count; b < c; b++)
          (b4.fromBufferAttribute(this, b),
            b4.applyNormalMatrix(a),
            this.setXYZ(b, b4.x, b4.y, b4.z));
        return this;
      }
      transformDirection(a) {
        for (let b = 0, c = this.count; b < c; b++)
          (b4.fromBufferAttribute(this, b),
            b4.transformDirection(a),
            this.setXYZ(b, b4.x, b4.y, b4.z));
        return this;
      }
      set(a, b = 0) {
        return (this.array.set(a, b), this);
      }
      getComponent(a, b) {
        let c = this.array[a * this.itemSize + b];
        return (this.normalized && (c = al(c, this.array)), c);
      }
      setComponent(a, b, c) {
        return (
          this.normalized && (c = am(c, this.array)),
          (this.array[a * this.itemSize + b] = c),
          this
        );
      }
      getX(a) {
        let b = this.array[a * this.itemSize];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setX(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize] = b),
          this
        );
      }
      getY(a) {
        let b = this.array[a * this.itemSize + 1];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setY(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 1] = b),
          this
        );
      }
      getZ(a) {
        let b = this.array[a * this.itemSize + 2];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setZ(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 2] = b),
          this
        );
      }
      getW(a) {
        let b = this.array[a * this.itemSize + 3];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setW(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 3] = b),
          this
        );
      }
      setXY(a, b, c) {
        return (
          (a *= this.itemSize),
          this.normalized && ((b = am(b, this.array)), (c = am(c, this.array))),
          (this.array[a + 0] = b),
          (this.array[a + 1] = c),
          this
        );
      }
      setXYZ(a, b, c, d) {
        return (
          (a *= this.itemSize),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array))),
          (this.array[a + 0] = b),
          (this.array[a + 1] = c),
          (this.array[a + 2] = d),
          this
        );
      }
      setXYZW(a, b, c, d, e) {
        return (
          (a *= this.itemSize),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array)),
            (e = am(e, this.array))),
          (this.array[a + 0] = b),
          (this.array[a + 1] = c),
          (this.array[a + 2] = d),
          (this.array[a + 3] = e),
          this
        );
      }
      onUpload(a) {
        return ((this.onUploadCallback = a), this);
      }
      clone() {
        return new this.constructor(this.array, this.itemSize).copy(this);
      }
      toJSON() {
        let a = {
          itemSize: this.itemSize,
          type: this.array.constructor.name,
          array: Array.from(this.array),
          normalized: this.normalized,
        };
        return (
          '' !== this.name && (a.name = this.name),
          35044 !== this.usage && (a.usage = this.usage),
          a
        );
      }
    }
    class b8 extends b7 {
      constructor(a, b, c) {
        super(new Int8Array(a), b, c);
      }
    }
    class b9 extends b7 {
      constructor(a, b, c) {
        super(new Uint8Array(a), b, c);
      }
    }
    class ca extends b7 {
      constructor(a, b, c) {
        super(new Uint8ClampedArray(a), b, c);
      }
    }
    class cb extends b7 {
      constructor(a, b, c) {
        super(new Int16Array(a), b, c);
      }
    }
    class cc extends b7 {
      constructor(a, b, c) {
        super(new Uint16Array(a), b, c);
      }
    }
    class cd extends b7 {
      constructor(a, b, c) {
        super(new Int32Array(a), b, c);
      }
    }
    class ce extends b7 {
      constructor(a, b, c) {
        super(new Uint32Array(a), b, c);
      }
    }
    class cf extends b7 {
      constructor(a, b, c) {
        (super(new Uint16Array(a), b, c), (this.isFloat16BufferAttribute = !0));
      }
      getX(a) {
        let b = b2(this.array[a * this.itemSize]);
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setX(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize] = b1(b)),
          this
        );
      }
      getY(a) {
        let b = b2(this.array[a * this.itemSize + 1]);
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setY(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 1] = b1(b)),
          this
        );
      }
      getZ(a) {
        let b = b2(this.array[a * this.itemSize + 2]);
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setZ(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 2] = b1(b)),
          this
        );
      }
      getW(a) {
        let b = b2(this.array[a * this.itemSize + 3]);
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setW(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.array[a * this.itemSize + 3] = b1(b)),
          this
        );
      }
      setXY(a, b, c) {
        return (
          (a *= this.itemSize),
          this.normalized && ((b = am(b, this.array)), (c = am(c, this.array))),
          (this.array[a + 0] = b1(b)),
          (this.array[a + 1] = b1(c)),
          this
        );
      }
      setXYZ(a, b, c, d) {
        return (
          (a *= this.itemSize),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array))),
          (this.array[a + 0] = b1(b)),
          (this.array[a + 1] = b1(c)),
          (this.array[a + 2] = b1(d)),
          this
        );
      }
      setXYZW(a, b, c, d, e) {
        return (
          (a *= this.itemSize),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array)),
            (e = am(e, this.array))),
          (this.array[a + 0] = b1(b)),
          (this.array[a + 1] = b1(c)),
          (this.array[a + 2] = b1(d)),
          (this.array[a + 3] = b1(e)),
          this
        );
      }
    }
    class cg extends b7 {
      constructor(a, b, c) {
        super(new Float32Array(a), b, c);
      }
    }
    let ch = 0,
      ci = new bd(),
      cj = new bE(),
      ck = new aq(),
      cl = new aO(),
      cm = new aO(),
      cn = new aq();
    class co extends ac {
      constructor() {
        (super(),
          (this.isBufferGeometry = !0),
          Object.defineProperty(this, 'id', { value: ch++ }),
          (this.uuid = ah()),
          (this.name = ''),
          (this.type = 'BufferGeometry'),
          (this.index = null),
          (this.indirect = null),
          (this.indirectOffset = 0),
          (this.attributes = {}),
          (this.morphAttributes = {}),
          (this.morphTargetsRelative = !1),
          (this.groups = []),
          (this.boundingBox = null),
          (this.boundingSphere = null),
          (this.drawRange = { start: 0, count: 1 / 0 }),
          (this.userData = {}));
      }
      getIndex() {
        return this.index;
      }
      setIndex(a) {
        return (
          Array.isArray(a)
            ? (this.index = new (Q(a) ? ce : cc)(a, 1))
            : (this.index = a),
          this
        );
      }
      setIndirect(a, b = 0) {
        return ((this.indirect = a), (this.indirectOffset = b), this);
      }
      getIndirect() {
        return this.indirect;
      }
      getAttribute(a) {
        return this.attributes[a];
      }
      setAttribute(a, b) {
        return ((this.attributes[a] = b), this);
      }
      deleteAttribute(a) {
        return (delete this.attributes[a], this);
      }
      hasAttribute(a) {
        return void 0 !== this.attributes[a];
      }
      addGroup(a, b, c = 0) {
        this.groups.push({ start: a, count: b, materialIndex: c });
      }
      clearGroups() {
        this.groups = [];
      }
      setDrawRange(a, b) {
        ((this.drawRange.start = a), (this.drawRange.count = b));
      }
      applyMatrix4(a) {
        let b = this.attributes.position;
        void 0 !== b && (b.applyMatrix4(a), (b.needsUpdate = !0));
        let c = this.attributes.normal;
        if (void 0 !== c) {
          let b = new at().getNormalMatrix(a);
          (c.applyNormalMatrix(b), (c.needsUpdate = !0));
        }
        let d = this.attributes.tangent;
        return (
          void 0 !== d && (d.transformDirection(a), (d.needsUpdate = !0)),
          null !== this.boundingBox && this.computeBoundingBox(),
          null !== this.boundingSphere && this.computeBoundingSphere(),
          this
        );
      }
      applyQuaternion(a) {
        return (ci.makeRotationFromQuaternion(a), this.applyMatrix4(ci), this);
      }
      rotateX(a) {
        return (ci.makeRotationX(a), this.applyMatrix4(ci), this);
      }
      rotateY(a) {
        return (ci.makeRotationY(a), this.applyMatrix4(ci), this);
      }
      rotateZ(a) {
        return (ci.makeRotationZ(a), this.applyMatrix4(ci), this);
      }
      translate(a, b, c) {
        return (ci.makeTranslation(a, b, c), this.applyMatrix4(ci), this);
      }
      scale(a, b, c) {
        return (ci.makeScale(a, b, c), this.applyMatrix4(ci), this);
      }
      lookAt(a) {
        return (
          cj.lookAt(a),
          cj.updateMatrix(),
          this.applyMatrix4(cj.matrix),
          this
        );
      }
      center() {
        return (
          this.computeBoundingBox(),
          this.boundingBox.getCenter(ck).negate(),
          this.translate(ck.x, ck.y, ck.z),
          this
        );
      }
      setFromPoints(a) {
        let b = this.getAttribute('position');
        if (void 0 === b) {
          let b = [];
          for (let c = 0, d = a.length; c < d; c++) {
            let d = a[c];
            b.push(d.x, d.y, d.z || 0);
          }
          this.setAttribute('position', new cg(b, 3));
        } else {
          let c = Math.min(a.length, b.count);
          for (let d = 0; d < c; d++) {
            let c = a[d];
            b.setXYZ(d, c.x, c.y, c.z || 0);
          }
          (a.length > b.count &&
            _(
              'BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.'
            ),
            (b.needsUpdate = !0));
        }
        return this;
      }
      computeBoundingBox() {
        null === this.boundingBox && (this.boundingBox = new aO());
        let a = this.attributes.position,
          b = this.morphAttributes.position;
        if (a && a.isGLBufferAttribute) {
          (aa(
            'BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.',
            this
          ),
            this.boundingBox.set(
              new aq(-1 / 0, -1 / 0, -1 / 0),
              new aq(Infinity, Infinity, Infinity)
            ));
          return;
        }
        if (void 0 !== a) {
          if ((this.boundingBox.setFromBufferAttribute(a), b))
            for (let a = 0, c = b.length; a < c; a++) {
              let c = b[a];
              (cl.setFromBufferAttribute(c),
                this.morphTargetsRelative
                  ? (cn.addVectors(this.boundingBox.min, cl.min),
                    this.boundingBox.expandByPoint(cn),
                    cn.addVectors(this.boundingBox.max, cl.max),
                    this.boundingBox.expandByPoint(cn))
                  : (this.boundingBox.expandByPoint(cl.min),
                    this.boundingBox.expandByPoint(cl.max)));
            }
        } else this.boundingBox.makeEmpty();
        (isNaN(this.boundingBox.min.x) ||
          isNaN(this.boundingBox.min.y) ||
          isNaN(this.boundingBox.min.z)) &&
          aa(
            'BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
            this
          );
      }
      computeBoundingSphere() {
        null === this.boundingSphere && (this.boundingSphere = new a4());
        let a = this.attributes.position,
          b = this.morphAttributes.position;
        if (a && a.isGLBufferAttribute) {
          (aa(
            'BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.',
            this
          ),
            this.boundingSphere.set(new aq(), 1 / 0));
          return;
        }
        if (a) {
          let c = this.boundingSphere.center;
          if ((cl.setFromBufferAttribute(a), b))
            for (let a = 0, c = b.length; a < c; a++) {
              let c = b[a];
              (cm.setFromBufferAttribute(c),
                this.morphTargetsRelative
                  ? (cn.addVectors(cl.min, cm.min),
                    cl.expandByPoint(cn),
                    cn.addVectors(cl.max, cm.max),
                    cl.expandByPoint(cn))
                  : (cl.expandByPoint(cm.min), cl.expandByPoint(cm.max)));
            }
          cl.getCenter(c);
          let d = 0;
          for (let b = 0, e = a.count; b < e; b++)
            (cn.fromBufferAttribute(a, b),
              (d = Math.max(d, c.distanceToSquared(cn))));
          if (b)
            for (let e = 0, f = b.length; e < f; e++) {
              let f = b[e],
                g = this.morphTargetsRelative;
              for (let b = 0, e = f.count; b < e; b++)
                (cn.fromBufferAttribute(f, b),
                  g && (ck.fromBufferAttribute(a, b), cn.add(ck)),
                  (d = Math.max(d, c.distanceToSquared(cn))));
            }
          ((this.boundingSphere.radius = Math.sqrt(d)),
            isNaN(this.boundingSphere.radius) &&
              aa(
                'BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                this
              ));
        }
      }
      computeTangents() {
        let a = this.index,
          b = this.attributes;
        if (
          null === a ||
          void 0 === b.position ||
          void 0 === b.normal ||
          void 0 === b.uv
        )
          return void aa(
            'BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)'
          );
        let c = b.position,
          d = b.normal,
          e = b.uv;
        !1 === this.hasAttribute('tangent') &&
          this.setAttribute(
            'tangent',
            new b7(new Float32Array(4 * c.count), 4)
          );
        let f = this.getAttribute('tangent'),
          g = [],
          h = [];
        for (let a = 0; a < c.count; a++)
          ((g[a] = new aq()), (h[a] = new aq()));
        let i = new aq(),
          j = new aq(),
          k = new aq(),
          l = new ao(),
          m = new ao(),
          n = new ao(),
          o = new aq(),
          p = new aq(),
          q = this.groups;
        0 === q.length && (q = [{ start: 0, count: a.count }]);
        for (let b = 0, d = q.length; b < d; ++b) {
          let d = q[b],
            f = d.start,
            r = d.count;
          for (let b = f, d = f + r; b < d; b += 3)
            !(function (a, b, d) {
              (i.fromBufferAttribute(c, a),
                j.fromBufferAttribute(c, b),
                k.fromBufferAttribute(c, d),
                l.fromBufferAttribute(e, a),
                m.fromBufferAttribute(e, b),
                n.fromBufferAttribute(e, d),
                j.sub(i),
                k.sub(i),
                m.sub(l),
                n.sub(l));
              let f = 1 / (m.x * n.y - n.x * m.y);
              isFinite(f) &&
                (o
                  .copy(j)
                  .multiplyScalar(n.y)
                  .addScaledVector(k, -m.y)
                  .multiplyScalar(f),
                p
                  .copy(k)
                  .multiplyScalar(m.x)
                  .addScaledVector(j, -n.x)
                  .multiplyScalar(f),
                g[a].add(o),
                g[b].add(o),
                g[d].add(o),
                h[a].add(p),
                h[b].add(p),
                h[d].add(p));
            })(a.getX(b + 0), a.getX(b + 1), a.getX(b + 2));
        }
        let r = new aq(),
          s = new aq(),
          t = new aq(),
          u = new aq();
        function v(a) {
          (t.fromBufferAttribute(d, a), u.copy(t));
          let b = g[a];
          (r.copy(b),
            r.sub(t.multiplyScalar(t.dot(b))).normalize(),
            s.crossVectors(u, b));
          let c = s.dot(h[a]);
          f.setXYZW(a, r.x, r.y, r.z, c < 0 ? -1 : 1);
        }
        for (let b = 0, c = q.length; b < c; ++b) {
          let c = q[b],
            d = c.start,
            e = c.count;
          for (let b = d, c = d + e; b < c; b += 3)
            (v(a.getX(b + 0)), v(a.getX(b + 1)), v(a.getX(b + 2)));
        }
      }
      computeVertexNormals() {
        let a = this.index,
          b = this.getAttribute('position');
        if (void 0 !== b) {
          let c = this.getAttribute('normal');
          if (void 0 === c)
            ((c = new b7(new Float32Array(3 * b.count), 3)),
              this.setAttribute('normal', c));
          else for (let a = 0, b = c.count; a < b; a++) c.setXYZ(a, 0, 0, 0);
          let d = new aq(),
            e = new aq(),
            f = new aq(),
            g = new aq(),
            h = new aq(),
            i = new aq(),
            j = new aq(),
            k = new aq();
          if (a)
            for (let l = 0, m = a.count; l < m; l += 3) {
              let m = a.getX(l + 0),
                n = a.getX(l + 1),
                o = a.getX(l + 2);
              (d.fromBufferAttribute(b, m),
                e.fromBufferAttribute(b, n),
                f.fromBufferAttribute(b, o),
                j.subVectors(f, e),
                k.subVectors(d, e),
                j.cross(k),
                g.fromBufferAttribute(c, m),
                h.fromBufferAttribute(c, n),
                i.fromBufferAttribute(c, o),
                g.add(j),
                h.add(j),
                i.add(j),
                c.setXYZ(m, g.x, g.y, g.z),
                c.setXYZ(n, h.x, h.y, h.z),
                c.setXYZ(o, i.x, i.y, i.z));
            }
          else
            for (let a = 0, g = b.count; a < g; a += 3)
              (d.fromBufferAttribute(b, a + 0),
                e.fromBufferAttribute(b, a + 1),
                f.fromBufferAttribute(b, a + 2),
                j.subVectors(f, e),
                k.subVectors(d, e),
                j.cross(k),
                c.setXYZ(a + 0, j.x, j.y, j.z),
                c.setXYZ(a + 1, j.x, j.y, j.z),
                c.setXYZ(a + 2, j.x, j.y, j.z));
          (this.normalizeNormals(), (c.needsUpdate = !0));
        }
      }
      normalizeNormals() {
        let a = this.attributes.normal;
        for (let b = 0, c = a.count; b < c; b++)
          (cn.fromBufferAttribute(a, b),
            cn.normalize(),
            a.setXYZ(b, cn.x, cn.y, cn.z));
      }
      toNonIndexed() {
        function a(a, b) {
          let c = a.array,
            d = a.itemSize,
            e = a.normalized,
            f = new c.constructor(b.length * d),
            g = 0,
            h = 0;
          for (let e = 0, i = b.length; e < i; e++) {
            g = a.isInterleavedBufferAttribute
              ? b[e] * a.data.stride + a.offset
              : b[e] * d;
            for (let a = 0; a < d; a++) f[h++] = c[g++];
          }
          return new b7(f, d, e);
        }
        if (null === this.index)
          return (
            _(
              'BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.'
            ),
            this
          );
        let b = new co(),
          c = this.index.array,
          d = this.attributes;
        for (let e in d) {
          let f = a(d[e], c);
          b.setAttribute(e, f);
        }
        let e = this.morphAttributes;
        for (let d in e) {
          let f = [],
            g = e[d];
          for (let b = 0, d = g.length; b < d; b++) {
            let d = a(g[b], c);
            f.push(d);
          }
          b.morphAttributes[d] = f;
        }
        b.morphTargetsRelative = this.morphTargetsRelative;
        let f = this.groups;
        for (let a = 0, c = f.length; a < c; a++) {
          let c = f[a];
          b.addGroup(c.start, c.count, c.materialIndex);
        }
        return b;
      }
      toJSON() {
        let a = {
          metadata: {
            version: 4.7,
            type: 'BufferGeometry',
            generator: 'BufferGeometry.toJSON',
          },
        };
        if (
          ((a.uuid = this.uuid),
          (a.type = this.type),
          '' !== this.name && (a.name = this.name),
          Object.keys(this.userData).length > 0 && (a.userData = this.userData),
          void 0 !== this.parameters)
        ) {
          let b = this.parameters;
          for (let c in b) void 0 !== b[c] && (a[c] = b[c]);
          return a;
        }
        a.data = { attributes: {} };
        let b = this.index;
        null !== b &&
          (a.data.index = {
            type: b.array.constructor.name,
            array: Array.prototype.slice.call(b.array),
          });
        let c = this.attributes;
        for (let b in c) {
          let d = c[b];
          a.data.attributes[b] = d.toJSON(a.data);
        }
        let d = {},
          e = !1;
        for (let b in this.morphAttributes) {
          let c = this.morphAttributes[b],
            f = [];
          for (let b = 0, d = c.length; b < d; b++) {
            let d = c[b];
            f.push(d.toJSON(a.data));
          }
          f.length > 0 && ((d[b] = f), (e = !0));
        }
        e &&
          ((a.data.morphAttributes = d),
          (a.data.morphTargetsRelative = this.morphTargetsRelative));
        let f = this.groups;
        f.length > 0 && (a.data.groups = JSON.parse(JSON.stringify(f)));
        let g = this.boundingSphere;
        return (null !== g && (a.data.boundingSphere = g.toJSON()), a);
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        ((this.index = null),
          (this.attributes = {}),
          (this.morphAttributes = {}),
          (this.groups = []),
          (this.boundingBox = null),
          (this.boundingSphere = null));
        let b = {};
        this.name = a.name;
        let c = a.index;
        null !== c && this.setIndex(c.clone());
        let d = a.attributes;
        for (let a in d) {
          let c = d[a];
          this.setAttribute(a, c.clone(b));
        }
        let e = a.morphAttributes;
        for (let a in e) {
          let c = [],
            d = e[a];
          for (let a = 0, e = d.length; a < e; a++) c.push(d[a].clone(b));
          this.morphAttributes[a] = c;
        }
        this.morphTargetsRelative = a.morphTargetsRelative;
        let f = a.groups;
        for (let a = 0, b = f.length; a < b; a++) {
          let b = f[a];
          this.addGroup(b.start, b.count, b.materialIndex);
        }
        let g = a.boundingBox;
        null !== g && (this.boundingBox = g.clone());
        let h = a.boundingSphere;
        return (
          null !== h && (this.boundingSphere = h.clone()),
          (this.drawRange.start = a.drawRange.start),
          (this.drawRange.count = a.drawRange.count),
          (this.userData = a.userData),
          this
        );
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
    }
    let cp = new bd(),
      cq = new bc(),
      cr = new a4(),
      cs = new aq(),
      ct = new aq(),
      cu = new aq(),
      cv = new aq(),
      cw = new aq(),
      cx = new aq(),
      cy = new aq(),
      cz = new aq();
    class cA extends bE {
      constructor(a = new co(), b = new b_()) {
        (super(),
          (this.isMesh = !0),
          (this.type = 'Mesh'),
          (this.geometry = a),
          (this.material = b),
          (this.morphTargetDictionary = void 0),
          (this.morphTargetInfluences = void 0),
          (this.count = 1),
          this.updateMorphTargets());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          void 0 !== a.morphTargetInfluences &&
            (this.morphTargetInfluences = a.morphTargetInfluences.slice()),
          void 0 !== a.morphTargetDictionary &&
            (this.morphTargetDictionary = Object.assign(
              {},
              a.morphTargetDictionary
            )),
          (this.material = Array.isArray(a.material)
            ? a.material.slice()
            : a.material),
          (this.geometry = a.geometry),
          this
        );
      }
      updateMorphTargets() {
        let a = this.geometry.morphAttributes,
          b = Object.keys(a);
        if (b.length > 0) {
          let c = a[b[0]];
          if (void 0 !== c) {
            ((this.morphTargetInfluences = []),
              (this.morphTargetDictionary = {}));
            for (let a = 0, b = c.length; a < b; a++) {
              let b = c[a].name || String(a);
              (this.morphTargetInfluences.push(0),
                (this.morphTargetDictionary[b] = a));
            }
          }
        }
      }
      getVertexPosition(a, b) {
        let c = this.geometry,
          d = c.attributes.position,
          e = c.morphAttributes.position,
          f = c.morphTargetsRelative;
        b.fromBufferAttribute(d, a);
        let g = this.morphTargetInfluences;
        if (e && g) {
          cx.set(0, 0, 0);
          for (let c = 0, d = e.length; c < d; c++) {
            let d = g[c],
              h = e[c];
            0 !== d &&
              (cw.fromBufferAttribute(h, a),
              f ? cx.addScaledVector(cw, d) : cx.addScaledVector(cw.sub(b), d));
          }
          b.add(cx);
        }
        return b;
      }
      raycast(a, b) {
        let c = this.geometry,
          d = this.material,
          e = this.matrixWorld;
        void 0 === d ||
          (null === c.boundingSphere && c.computeBoundingSphere(),
          cr.copy(c.boundingSphere),
          cr.applyMatrix4(e),
          cq.copy(a.ray).recast(a.near),
          (!1 === cr.containsPoint(cq.origin) &&
            (null === cq.intersectSphere(cr, cs) ||
              cq.origin.distanceToSquared(cs) > (a.far - a.near) ** 2)) ||
            (cp.copy(e).invert(),
            cq.copy(a.ray).applyMatrix4(cp),
            (null === c.boundingBox ||
              !1 !== cq.intersectsBox(c.boundingBox)) &&
              this._computeIntersections(a, b, cq)));
      }
      _computeIntersections(a, b, c) {
        let d,
          e = this.geometry,
          f = this.material,
          g = e.index,
          h = e.attributes.position,
          i = e.attributes.uv,
          j = e.attributes.uv1,
          k = e.attributes.normal,
          l = e.groups,
          m = e.drawRange;
        if (null !== g)
          if (Array.isArray(f))
            for (let e = 0, h = l.length; e < h; e++) {
              let h = l[e],
                n = f[h.materialIndex],
                o = Math.max(h.start, m.start),
                p = Math.min(
                  g.count,
                  Math.min(h.start + h.count, m.start + m.count)
                );
              for (let e = o; e < p; e += 3)
                (d = cB(
                  this,
                  n,
                  a,
                  c,
                  i,
                  j,
                  k,
                  g.getX(e),
                  g.getX(e + 1),
                  g.getX(e + 2)
                )) &&
                  ((d.faceIndex = Math.floor(e / 3)),
                  (d.face.materialIndex = h.materialIndex),
                  b.push(d));
            }
          else {
            let e = Math.max(0, m.start),
              h = Math.min(g.count, m.start + m.count);
            for (let l = e; l < h; l += 3)
              (d = cB(
                this,
                f,
                a,
                c,
                i,
                j,
                k,
                g.getX(l),
                g.getX(l + 1),
                g.getX(l + 2)
              )) && ((d.faceIndex = Math.floor(l / 3)), b.push(d));
          }
        else if (void 0 !== h)
          if (Array.isArray(f))
            for (let e = 0, g = l.length; e < g; e++) {
              let g = l[e],
                n = f[g.materialIndex],
                o = Math.max(g.start, m.start),
                p = Math.min(
                  h.count,
                  Math.min(g.start + g.count, m.start + m.count)
                );
              for (let e = o; e < p; e += 3)
                (d = cB(this, n, a, c, i, j, k, e, e + 1, e + 2)) &&
                  ((d.faceIndex = Math.floor(e / 3)),
                  (d.face.materialIndex = g.materialIndex),
                  b.push(d));
            }
          else {
            let e = Math.max(0, m.start),
              g = Math.min(h.count, m.start + m.count);
            for (let h = e; h < g; h += 3)
              (d = cB(this, f, a, c, i, j, k, h, h + 1, h + 2)) &&
                ((d.faceIndex = Math.floor(h / 3)), b.push(d));
          }
      }
    }
    function cB(a, b, c, d, e, f, g, h, i, j) {
      (a.getVertexPosition(h, ct),
        a.getVertexPosition(i, cu),
        a.getVertexPosition(j, cv));
      let k = (function (a, b, c, d, e, f, g, h) {
        if (
          null ===
          (1 === b.side
            ? d.intersectTriangle(g, f, e, !0, h)
            : d.intersectTriangle(e, f, g, 0 === b.side, h))
        )
          return null;
        (cz.copy(h), cz.applyMatrix4(a.matrixWorld));
        let i = c.ray.origin.distanceTo(cz);
        return i < c.near || i > c.far
          ? null
          : { distance: i, point: cz.clone(), object: a };
      })(a, b, c, d, ct, cu, cv, cy);
      if (k) {
        let a = new aq();
        (bS.getBarycoord(cy, ct, cu, cv, a),
          e && (k.uv = bS.getInterpolatedAttribute(e, h, i, j, a, new ao())),
          f && (k.uv1 = bS.getInterpolatedAttribute(f, h, i, j, a, new ao())),
          g &&
            ((k.normal = bS.getInterpolatedAttribute(g, h, i, j, a, new aq())),
            k.normal.dot(d.direction) > 0 && k.normal.multiplyScalar(-1)));
        let b = { a: h, b: i, c: j, normal: new aq(), materialIndex: 0 };
        (bS.getNormal(ct, cu, cv, b.normal), (k.face = b), (k.barycoord = a));
      }
      return k;
    }
    class cC extends co {
      constructor(a = 1, b = 1, c = 1, d = 1, e = 1, f = 1) {
        (super(),
          (this.type = 'BoxGeometry'),
          (this.parameters = {
            width: a,
            height: b,
            depth: c,
            widthSegments: d,
            heightSegments: e,
            depthSegments: f,
          }));
        const g = this;
        ((d = Math.floor(d)), (e = Math.floor(e)));
        const h = [],
          i = [],
          j = [],
          k = [];
        let l = 0,
          m = 0;
        function n(a, b, c, d, e, f, n, o, p, q, r) {
          let s = f / p,
            t = n / q,
            u = f / 2,
            v = n / 2,
            w = o / 2,
            x = p + 1,
            y = q + 1,
            z = 0,
            A = 0,
            B = new aq();
          for (let f = 0; f < y; f++) {
            let g = f * t - v;
            for (let h = 0; h < x; h++) {
              let l = h * s - u;
              ((B[a] = l * d),
                (B[b] = g * e),
                (B[c] = w),
                i.push(B.x, B.y, B.z),
                (B[a] = 0),
                (B[b] = 0),
                (B[c] = o > 0 ? 1 : -1),
                j.push(B.x, B.y, B.z),
                k.push(h / p),
                k.push(1 - f / q),
                (z += 1));
            }
          }
          for (let a = 0; a < q; a++)
            for (let b = 0; b < p; b++) {
              let c = l + b + x * a,
                d = l + b + x * (a + 1),
                e = l + (b + 1) + x * (a + 1),
                f = l + (b + 1) + x * a;
              (h.push(c, d, f), h.push(d, e, f), (A += 6));
            }
          (g.addGroup(m, A, r), (m += A), (l += z));
        }
        (n('z', 'y', 'x', -1, -1, c, b, a, (f = Math.floor(f)), e, 0),
          n('z', 'y', 'x', 1, -1, c, b, -a, f, e, 1),
          n('x', 'z', 'y', 1, 1, a, c, b, d, f, 2),
          n('x', 'z', 'y', 1, -1, a, c, -b, d, f, 3),
          n('x', 'y', 'z', 1, -1, a, b, c, d, e, 4),
          n('x', 'y', 'z', -1, -1, a, b, -c, d, e, 5),
          this.setIndex(h),
          this.setAttribute('position', new cg(i, 3)),
          this.setAttribute('normal', new cg(j, 3)),
          this.setAttribute('uv', new cg(k, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new cC(
          a.width,
          a.height,
          a.depth,
          a.widthSegments,
          a.heightSegments,
          a.depthSegments
        );
      }
    }
    function cD(a) {
      let b = {};
      for (let c in a)
        for (let d in ((b[c] = {}), a[c])) {
          let e = a[c][d];
          e &&
          (e.isColor ||
            e.isMatrix3 ||
            e.isMatrix4 ||
            e.isVector2 ||
            e.isVector3 ||
            e.isVector4 ||
            e.isTexture ||
            e.isQuaternion)
            ? e.isRenderTargetTexture
              ? (_(
                  'UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().'
                ),
                (b[c][d] = null))
              : (b[c][d] = e.clone())
            : Array.isArray(e)
              ? (b[c][d] = e.slice())
              : (b[c][d] = e);
        }
      return b;
    }
    function cE(a) {
      let b = {};
      for (let c = 0; c < a.length; c++) {
        let d = cD(a[c]);
        for (let a in d) b[a] = d[a];
      }
      return b;
    }
    function cF(a) {
      let b = a.getRenderTarget();
      return null === b
        ? a.outputColorSpace
        : !0 === b.isXRRenderTarget
          ? b.texture.colorSpace
          : ax.workingColorSpace;
    }
    let cG = { clone: cD, merge: cE };
    class cH extends b$ {
      constructor(a) {
        (super(),
          (this.isShaderMaterial = !0),
          (this.type = 'ShaderMaterial'),
          (this.defines = {}),
          (this.uniforms = {}),
          (this.uniformsGroups = []),
          (this.vertexShader =
            'void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}'),
          (this.fragmentShader =
            'void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}'),
          (this.linewidth = 1),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.fog = !1),
          (this.lights = !1),
          (this.clipping = !1),
          (this.forceSinglePass = !0),
          (this.extensions = { clipCullDistance: !1, multiDraw: !1 }),
          (this.defaultAttributeValues = {
            color: [1, 1, 1],
            uv: [0, 0],
            uv1: [0, 0],
          }),
          (this.index0AttributeName = void 0),
          (this.uniformsNeedUpdate = !1),
          (this.glslVersion = null),
          void 0 !== a && this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.fragmentShader = a.fragmentShader),
          (this.vertexShader = a.vertexShader),
          (this.uniforms = cD(a.uniforms)),
          (this.uniformsGroups = (function (a) {
            let b = [];
            for (let c = 0; c < a.length; c++) b.push(a[c].clone());
            return b;
          })(a.uniformsGroups)),
          (this.defines = Object.assign({}, a.defines)),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.fog = a.fog),
          (this.lights = a.lights),
          (this.clipping = a.clipping),
          (this.extensions = Object.assign({}, a.extensions)),
          (this.glslVersion = a.glslVersion),
          (this.defaultAttributeValues = Object.assign(
            {},
            a.defaultAttributeValues
          )),
          (this.index0AttributeName = a.index0AttributeName),
          (this.uniformsNeedUpdate = a.uniformsNeedUpdate),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        for (let c in ((b.glslVersion = this.glslVersion),
        (b.uniforms = {}),
        this.uniforms)) {
          let d = this.uniforms[c].value;
          d && d.isTexture
            ? (b.uniforms[c] = { type: 't', value: d.toJSON(a).uuid })
            : d && d.isColor
              ? (b.uniforms[c] = { type: 'c', value: d.getHex() })
              : d && d.isVector2
                ? (b.uniforms[c] = { type: 'v2', value: d.toArray() })
                : d && d.isVector3
                  ? (b.uniforms[c] = { type: 'v3', value: d.toArray() })
                  : d && d.isVector4
                    ? (b.uniforms[c] = { type: 'v4', value: d.toArray() })
                    : d && d.isMatrix3
                      ? (b.uniforms[c] = { type: 'm3', value: d.toArray() })
                      : d && d.isMatrix4
                        ? (b.uniforms[c] = { type: 'm4', value: d.toArray() })
                        : (b.uniforms[c] = { value: d });
        }
        (Object.keys(this.defines).length > 0 && (b.defines = this.defines),
          (b.vertexShader = this.vertexShader),
          (b.fragmentShader = this.fragmentShader),
          (b.lights = this.lights),
          (b.clipping = this.clipping));
        let c = {};
        for (let a in this.extensions) !0 === this.extensions[a] && (c[a] = !0);
        return (Object.keys(c).length > 0 && (b.extensions = c), b);
      }
    }
    class cI extends bE {
      constructor() {
        (super(),
          (this.isCamera = !0),
          (this.type = 'Camera'),
          (this.matrixWorldInverse = new bd()),
          (this.projectionMatrix = new bd()),
          (this.projectionMatrixInverse = new bd()),
          (this.coordinateSystem = 2e3),
          (this._reversedDepth = !1));
      }
      get reversedDepth() {
        return this._reversedDepth;
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          this.matrixWorldInverse.copy(a.matrixWorldInverse),
          this.projectionMatrix.copy(a.projectionMatrix),
          this.projectionMatrixInverse.copy(a.projectionMatrixInverse),
          (this.coordinateSystem = a.coordinateSystem),
          this
        );
      }
      getWorldDirection(a) {
        return super.getWorldDirection(a).negate();
      }
      updateMatrixWorld(a) {
        (super.updateMatrixWorld(a),
          this.matrixWorldInverse.copy(this.matrixWorld).invert());
      }
      updateWorldMatrix(a, b) {
        (super.updateWorldMatrix(a, b),
          this.matrixWorldInverse.copy(this.matrixWorld).invert());
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    let cJ = new aq(),
      cK = new ao(),
      cL = new ao();
    class cM extends cI {
      constructor(a = 50, b = 1, c = 0.1, d = 2e3) {
        (super(),
          (this.isPerspectiveCamera = !0),
          (this.type = 'PerspectiveCamera'),
          (this.fov = a),
          (this.zoom = 1),
          (this.near = c),
          (this.far = d),
          (this.focus = 10),
          (this.aspect = b),
          (this.view = null),
          (this.filmGauge = 35),
          (this.filmOffset = 0),
          this.updateProjectionMatrix());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.fov = a.fov),
          (this.zoom = a.zoom),
          (this.near = a.near),
          (this.far = a.far),
          (this.focus = a.focus),
          (this.aspect = a.aspect),
          (this.view = null === a.view ? null : Object.assign({}, a.view)),
          (this.filmGauge = a.filmGauge),
          (this.filmOffset = a.filmOffset),
          this
        );
      }
      setFocalLength(a) {
        let b = (0.5 * this.getFilmHeight()) / a;
        ((this.fov = 2 * ag * Math.atan(b)), this.updateProjectionMatrix());
      }
      getFocalLength() {
        let a = Math.tan(0.5 * af * this.fov);
        return (0.5 * this.getFilmHeight()) / a;
      }
      getEffectiveFOV() {
        return 2 * ag * Math.atan(Math.tan(0.5 * af * this.fov) / this.zoom);
      }
      getFilmWidth() {
        return this.filmGauge * Math.min(this.aspect, 1);
      }
      getFilmHeight() {
        return this.filmGauge / Math.max(this.aspect, 1);
      }
      getViewBounds(a, b, c) {
        (cJ.set(-1, -1, 0.5).applyMatrix4(this.projectionMatrixInverse),
          b.set(cJ.x, cJ.y).multiplyScalar(-a / cJ.z),
          cJ.set(1, 1, 0.5).applyMatrix4(this.projectionMatrixInverse),
          c.set(cJ.x, cJ.y).multiplyScalar(-a / cJ.z));
      }
      getViewSize(a, b) {
        return (this.getViewBounds(a, cK, cL), b.subVectors(cL, cK));
      }
      setViewOffset(a, b, c, d, e, f) {
        ((this.aspect = a / b),
          null === this.view &&
            (this.view = {
              enabled: !0,
              fullWidth: 1,
              fullHeight: 1,
              offsetX: 0,
              offsetY: 0,
              width: 1,
              height: 1,
            }),
          (this.view.enabled = !0),
          (this.view.fullWidth = a),
          (this.view.fullHeight = b),
          (this.view.offsetX = c),
          (this.view.offsetY = d),
          (this.view.width = e),
          (this.view.height = f),
          this.updateProjectionMatrix());
      }
      clearViewOffset() {
        (null !== this.view && (this.view.enabled = !1),
          this.updateProjectionMatrix());
      }
      updateProjectionMatrix() {
        let a = this.near,
          b = (a * Math.tan(0.5 * af * this.fov)) / this.zoom,
          c = 2 * b,
          d = this.aspect * c,
          e = -0.5 * d,
          f = this.view;
        if (null !== this.view && this.view.enabled) {
          let a = f.fullWidth,
            g = f.fullHeight;
          ((e += (f.offsetX * d) / a),
            (b -= (f.offsetY * c) / g),
            (d *= f.width / a),
            (c *= f.height / g));
        }
        let g = this.filmOffset;
        (0 !== g && (e += (a * g) / this.getFilmWidth()),
          this.projectionMatrix.makePerspective(
            e,
            e + d,
            b,
            b - c,
            a,
            this.far,
            this.coordinateSystem,
            this.reversedDepth
          ),
          this.projectionMatrixInverse.copy(this.projectionMatrix).invert());
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.fov = this.fov),
          (b.object.zoom = this.zoom),
          (b.object.near = this.near),
          (b.object.far = this.far),
          (b.object.focus = this.focus),
          (b.object.aspect = this.aspect),
          null !== this.view && (b.object.view = Object.assign({}, this.view)),
          (b.object.filmGauge = this.filmGauge),
          (b.object.filmOffset = this.filmOffset),
          b
        );
      }
    }
    class cN extends bE {
      constructor(a, b, c) {
        (super(),
          (this.type = 'CubeCamera'),
          (this.renderTarget = c),
          (this.coordinateSystem = null),
          (this.activeMipmapLevel = 0));
        const d = new cM(-90, 1, a, b);
        ((d.layers = this.layers), this.add(d));
        const e = new cM(-90, 1, a, b);
        ((e.layers = this.layers), this.add(e));
        const f = new cM(-90, 1, a, b);
        ((f.layers = this.layers), this.add(f));
        const g = new cM(-90, 1, a, b);
        ((g.layers = this.layers), this.add(g));
        const h = new cM(-90, 1, a, b);
        ((h.layers = this.layers), this.add(h));
        const i = new cM(-90, 1, a, b);
        ((i.layers = this.layers), this.add(i));
      }
      updateCoordinateSystem() {
        let a = this.coordinateSystem,
          b = this.children.concat(),
          [c, d, e, f, g, h] = b;
        for (let a of b) this.remove(a);
        if (2e3 === a)
          (c.up.set(0, 1, 0),
            c.lookAt(1, 0, 0),
            d.up.set(0, 1, 0),
            d.lookAt(-1, 0, 0),
            e.up.set(0, 0, -1),
            e.lookAt(0, 1, 0),
            f.up.set(0, 0, 1),
            f.lookAt(0, -1, 0),
            g.up.set(0, 1, 0),
            g.lookAt(0, 0, 1),
            h.up.set(0, 1, 0),
            h.lookAt(0, 0, -1));
        else if (2001 === a)
          (c.up.set(0, -1, 0),
            c.lookAt(-1, 0, 0),
            d.up.set(0, -1, 0),
            d.lookAt(1, 0, 0),
            e.up.set(0, 0, 1),
            e.lookAt(0, 1, 0),
            f.up.set(0, 0, -1),
            f.lookAt(0, -1, 0),
            g.up.set(0, -1, 0),
            g.lookAt(0, 0, 1),
            h.up.set(0, -1, 0),
            h.lookAt(0, 0, -1));
        else
          throw Error(
            'THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: ' +
              a
          );
        for (let a of b) (this.add(a), a.updateMatrixWorld());
      }
      update(a, b) {
        null === this.parent && this.updateMatrixWorld();
        let { renderTarget: c, activeMipmapLevel: d } = this;
        this.coordinateSystem !== a.coordinateSystem &&
          ((this.coordinateSystem = a.coordinateSystem),
          this.updateCoordinateSystem());
        let [e, f, g, h, i, j] = this.children,
          k = a.getRenderTarget(),
          l = a.getActiveCubeFace(),
          m = a.getActiveMipmapLevel(),
          n = a.xr.enabled;
        a.xr.enabled = !1;
        let o = c.texture.generateMipmaps;
        ((c.texture.generateMipmaps = !1),
          a.setRenderTarget(c, 0, d),
          a.render(b, e),
          a.setRenderTarget(c, 1, d),
          a.render(b, f),
          a.setRenderTarget(c, 2, d),
          a.render(b, g),
          a.setRenderTarget(c, 3, d),
          a.render(b, h),
          a.setRenderTarget(c, 4, d),
          a.render(b, i),
          (c.texture.generateMipmaps = o),
          a.setRenderTarget(c, 5, d),
          a.render(b, j),
          a.setRenderTarget(k, l, m),
          (a.xr.enabled = n),
          (c.texture.needsPMREMUpdate = !0));
      }
    }
    class cO extends aG {
      constructor(a = [], b = 301, c, d, e, f, g, h, i, j) {
        (super(a, b, c, d, e, f, g, h, i, j),
          (this.isCubeTexture = !0),
          (this.flipY = !1));
      }
      get images() {
        return this.image;
      }
      set images(a) {
        this.image = a;
      }
    }
    class cP extends aJ {
      constructor(a = 1, b = {}) {
        (super(a, a, b), (this.isWebGLCubeRenderTarget = !0));
        const c = { width: a, height: a, depth: 1 };
        ((this.texture = new cO([c, c, c, c, c, c])),
          this._setTextureOptions(b),
          (this.texture.isRenderTargetTexture = !0));
      }
      fromEquirectangularTexture(a, b) {
        ((this.texture.type = b.type),
          (this.texture.colorSpace = b.colorSpace),
          (this.texture.generateMipmaps = b.generateMipmaps),
          (this.texture.minFilter = b.minFilter),
          (this.texture.magFilter = b.magFilter));
        let c = {
            uniforms: { tEquirect: { value: null } },
            vertexShader: `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,
            fragmentShader: `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`,
          },
          d = new cC(5, 5, 5),
          e = new cH({
            name: 'CubemapFromEquirect',
            uniforms: cD(c.uniforms),
            vertexShader: c.vertexShader,
            fragmentShader: c.fragmentShader,
            side: 1,
            blending: 0,
          });
        e.uniforms.tEquirect.value = b;
        let f = new cA(d, e),
          g = b.minFilter;
        return (
          1008 === b.minFilter && (b.minFilter = 1006),
          new cN(1, 10, this).update(a, f),
          (b.minFilter = g),
          f.geometry.dispose(),
          f.material.dispose(),
          this
        );
      }
      clear(a, b = !0, c = !0, d = !0) {
        let e = a.getRenderTarget();
        for (let e = 0; e < 6; e++)
          (a.setRenderTarget(this, e), a.clear(b, c, d));
        a.setRenderTarget(e);
      }
    }
    class cQ extends bE {
      constructor() {
        (super(), (this.isGroup = !0), (this.type = 'Group'));
      }
    }
    let cR = { type: 'move' };
    class cS {
      constructor() {
        ((this._targetRay = null), (this._grip = null), (this._hand = null));
      }
      getHandSpace() {
        return (
          null === this._hand &&
            ((this._hand = new cQ()),
            (this._hand.matrixAutoUpdate = !1),
            (this._hand.visible = !1),
            (this._hand.joints = {}),
            (this._hand.inputState = { pinching: !1 })),
          this._hand
        );
      }
      getTargetRaySpace() {
        return (
          null === this._targetRay &&
            ((this._targetRay = new cQ()),
            (this._targetRay.matrixAutoUpdate = !1),
            (this._targetRay.visible = !1),
            (this._targetRay.hasLinearVelocity = !1),
            (this._targetRay.linearVelocity = new aq()),
            (this._targetRay.hasAngularVelocity = !1),
            (this._targetRay.angularVelocity = new aq())),
          this._targetRay
        );
      }
      getGripSpace() {
        return (
          null === this._grip &&
            ((this._grip = new cQ()),
            (this._grip.matrixAutoUpdate = !1),
            (this._grip.visible = !1),
            (this._grip.hasLinearVelocity = !1),
            (this._grip.linearVelocity = new aq()),
            (this._grip.hasAngularVelocity = !1),
            (this._grip.angularVelocity = new aq())),
          this._grip
        );
      }
      dispatchEvent(a) {
        return (
          null !== this._targetRay && this._targetRay.dispatchEvent(a),
          null !== this._grip && this._grip.dispatchEvent(a),
          null !== this._hand && this._hand.dispatchEvent(a),
          this
        );
      }
      connect(a) {
        if (a && a.hand) {
          let b = this._hand;
          if (b) for (let c of a.hand.values()) this._getHandJoint(b, c);
        }
        return (this.dispatchEvent({ type: 'connected', data: a }), this);
      }
      disconnect(a) {
        return (
          this.dispatchEvent({ type: 'disconnected', data: a }),
          null !== this._targetRay && (this._targetRay.visible = !1),
          null !== this._grip && (this._grip.visible = !1),
          null !== this._hand && (this._hand.visible = !1),
          this
        );
      }
      update(a, b, c) {
        let d = null,
          e = null,
          f = null,
          g = this._targetRay,
          h = this._grip,
          i = this._hand;
        if (a && 'visible-blurred' !== b.session.visibilityState) {
          if (i && a.hand) {
            for (let d of ((f = !0), a.hand.values())) {
              let a = b.getJointPose(d, c),
                e = this._getHandJoint(i, d);
              (null !== a &&
                (e.matrix.fromArray(a.transform.matrix),
                e.matrix.decompose(e.position, e.rotation, e.scale),
                (e.matrixWorldNeedsUpdate = !0),
                (e.jointRadius = a.radius)),
                (e.visible = null !== a));
            }
            let d = i.joints['index-finger-tip'],
              e = i.joints['thumb-tip'],
              g = d.position.distanceTo(e.position);
            i.inputState.pinching && g > 0.025
              ? ((i.inputState.pinching = !1),
                this.dispatchEvent({
                  type: 'pinchend',
                  handedness: a.handedness,
                  target: this,
                }))
              : !i.inputState.pinching &&
                g <= 0.015 &&
                ((i.inputState.pinching = !0),
                this.dispatchEvent({
                  type: 'pinchstart',
                  handedness: a.handedness,
                  target: this,
                }));
          } else
            null !== h &&
              a.gripSpace &&
              null !== (e = b.getPose(a.gripSpace, c)) &&
              (h.matrix.fromArray(e.transform.matrix),
              h.matrix.decompose(h.position, h.rotation, h.scale),
              (h.matrixWorldNeedsUpdate = !0),
              e.linearVelocity
                ? ((h.hasLinearVelocity = !0),
                  h.linearVelocity.copy(e.linearVelocity))
                : (h.hasLinearVelocity = !1),
              e.angularVelocity
                ? ((h.hasAngularVelocity = !0),
                  h.angularVelocity.copy(e.angularVelocity))
                : (h.hasAngularVelocity = !1));
          null !== g &&
            (null === (d = b.getPose(a.targetRaySpace, c)) &&
              null !== e &&
              (d = e),
            null !== d &&
              (g.matrix.fromArray(d.transform.matrix),
              g.matrix.decompose(g.position, g.rotation, g.scale),
              (g.matrixWorldNeedsUpdate = !0),
              d.linearVelocity
                ? ((g.hasLinearVelocity = !0),
                  g.linearVelocity.copy(d.linearVelocity))
                : (g.hasLinearVelocity = !1),
              d.angularVelocity
                ? ((g.hasAngularVelocity = !0),
                  g.angularVelocity.copy(d.angularVelocity))
                : (g.hasAngularVelocity = !1),
              this.dispatchEvent(cR)));
        }
        return (
          null !== g && (g.visible = null !== d),
          null !== h && (h.visible = null !== e),
          null !== i && (i.visible = null !== f),
          this
        );
      }
      _getHandJoint(a, b) {
        if (void 0 === a.joints[b.jointName]) {
          let c = new cQ();
          ((c.matrixAutoUpdate = !1),
            (c.visible = !1),
            (a.joints[b.jointName] = c),
            a.add(c));
        }
        return a.joints[b.jointName];
      }
    }
    class cT {
      constructor(a, b = 25e-5) {
        ((this.isFogExp2 = !0),
          (this.name = ''),
          (this.color = new bX(a)),
          (this.density = b));
      }
      clone() {
        return new cT(this.color, this.density);
      }
      toJSON() {
        return {
          type: 'FogExp2',
          name: this.name,
          color: this.color.getHex(),
          density: this.density,
        };
      }
    }
    class cU {
      constructor(a, b = 1, c = 1e3) {
        ((this.isFog = !0),
          (this.name = ''),
          (this.color = new bX(a)),
          (this.near = b),
          (this.far = c));
      }
      clone() {
        return new cU(this.color, this.near, this.far);
      }
      toJSON() {
        return {
          type: 'Fog',
          name: this.name,
          color: this.color.getHex(),
          near: this.near,
          far: this.far,
        };
      }
    }
    class cV extends bE {
      constructor() {
        (super(),
          (this.isScene = !0),
          (this.type = 'Scene'),
          (this.background = null),
          (this.environment = null),
          (this.fog = null),
          (this.backgroundBlurriness = 0),
          (this.backgroundIntensity = 1),
          (this.backgroundRotation = new bn()),
          (this.environmentIntensity = 1),
          (this.environmentRotation = new bn()),
          (this.overrideMaterial = null),
          'u' > typeof __THREE_DEVTOOLS__ &&
            __THREE_DEVTOOLS__.dispatchEvent(
              new CustomEvent('observe', { detail: this })
            ));
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          null !== a.background && (this.background = a.background.clone()),
          null !== a.environment && (this.environment = a.environment.clone()),
          null !== a.fog && (this.fog = a.fog.clone()),
          (this.backgroundBlurriness = a.backgroundBlurriness),
          (this.backgroundIntensity = a.backgroundIntensity),
          this.backgroundRotation.copy(a.backgroundRotation),
          (this.environmentIntensity = a.environmentIntensity),
          this.environmentRotation.copy(a.environmentRotation),
          null !== a.overrideMaterial &&
            (this.overrideMaterial = a.overrideMaterial.clone()),
          (this.matrixAutoUpdate = a.matrixAutoUpdate),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          null !== this.fog && (b.object.fog = this.fog.toJSON()),
          this.backgroundBlurriness > 0 &&
            (b.object.backgroundBlurriness = this.backgroundBlurriness),
          1 !== this.backgroundIntensity &&
            (b.object.backgroundIntensity = this.backgroundIntensity),
          (b.object.backgroundRotation = this.backgroundRotation.toArray()),
          1 !== this.environmentIntensity &&
            (b.object.environmentIntensity = this.environmentIntensity),
          (b.object.environmentRotation = this.environmentRotation.toArray()),
          b
        );
      }
    }
    class cW {
      constructor(a, b) {
        ((this.isInterleavedBuffer = !0),
          (this.array = a),
          (this.stride = b),
          (this.count = void 0 !== a ? a.length / b : 0),
          (this.usage = 35044),
          (this.updateRanges = []),
          (this.version = 0),
          (this.uuid = ah()));
      }
      onUploadCallback() {}
      set needsUpdate(a) {
        !0 === a && this.version++;
      }
      setUsage(a) {
        return ((this.usage = a), this);
      }
      addUpdateRange(a, b) {
        this.updateRanges.push({ start: a, count: b });
      }
      clearUpdateRanges() {
        this.updateRanges.length = 0;
      }
      copy(a) {
        return (
          (this.array = new a.array.constructor(a.array)),
          (this.count = a.count),
          (this.stride = a.stride),
          (this.usage = a.usage),
          this
        );
      }
      copyAt(a, b, c) {
        ((a *= this.stride), (c *= b.stride));
        for (let d = 0, e = this.stride; d < e; d++)
          this.array[a + d] = b.array[c + d];
        return this;
      }
      set(a, b = 0) {
        return (this.array.set(a, b), this);
      }
      clone(a) {
        (void 0 === a.arrayBuffers && (a.arrayBuffers = {}),
          void 0 === this.array.buffer._uuid &&
            (this.array.buffer._uuid = ah()),
          void 0 === a.arrayBuffers[this.array.buffer._uuid] &&
            (a.arrayBuffers[this.array.buffer._uuid] =
              this.array.slice(0).buffer));
        let b = new this.array.constructor(
            a.arrayBuffers[this.array.buffer._uuid]
          ),
          c = new this.constructor(b, this.stride);
        return (c.setUsage(this.usage), c);
      }
      onUpload(a) {
        return ((this.onUploadCallback = a), this);
      }
      toJSON(a) {
        return (
          void 0 === a.arrayBuffers && (a.arrayBuffers = {}),
          void 0 === this.array.buffer._uuid &&
            (this.array.buffer._uuid = ah()),
          void 0 === a.arrayBuffers[this.array.buffer._uuid] &&
            (a.arrayBuffers[this.array.buffer._uuid] = Array.from(
              new Uint32Array(this.array.buffer)
            )),
          {
            uuid: this.uuid,
            buffer: this.array.buffer._uuid,
            type: this.array.constructor.name,
            stride: this.stride,
          }
        );
      }
    }
    let cX = new aq();
    class cY {
      constructor(a, b, c, d = !1) {
        ((this.isInterleavedBufferAttribute = !0),
          (this.name = ''),
          (this.data = a),
          (this.itemSize = b),
          (this.offset = c),
          (this.normalized = d));
      }
      get count() {
        return this.data.count;
      }
      get array() {
        return this.data.array;
      }
      set needsUpdate(a) {
        this.data.needsUpdate = a;
      }
      applyMatrix4(a) {
        for (let b = 0, c = this.data.count; b < c; b++)
          (cX.fromBufferAttribute(this, b),
            cX.applyMatrix4(a),
            this.setXYZ(b, cX.x, cX.y, cX.z));
        return this;
      }
      applyNormalMatrix(a) {
        for (let b = 0, c = this.count; b < c; b++)
          (cX.fromBufferAttribute(this, b),
            cX.applyNormalMatrix(a),
            this.setXYZ(b, cX.x, cX.y, cX.z));
        return this;
      }
      transformDirection(a) {
        for (let b = 0, c = this.count; b < c; b++)
          (cX.fromBufferAttribute(this, b),
            cX.transformDirection(a),
            this.setXYZ(b, cX.x, cX.y, cX.z));
        return this;
      }
      getComponent(a, b) {
        let c = this.array[a * this.data.stride + this.offset + b];
        return (this.normalized && (c = al(c, this.array)), c);
      }
      setComponent(a, b, c) {
        return (
          this.normalized && (c = am(c, this.array)),
          (this.data.array[a * this.data.stride + this.offset + b] = c),
          this
        );
      }
      setX(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.data.array[a * this.data.stride + this.offset] = b),
          this
        );
      }
      setY(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.data.array[a * this.data.stride + this.offset + 1] = b),
          this
        );
      }
      setZ(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.data.array[a * this.data.stride + this.offset + 2] = b),
          this
        );
      }
      setW(a, b) {
        return (
          this.normalized && (b = am(b, this.array)),
          (this.data.array[a * this.data.stride + this.offset + 3] = b),
          this
        );
      }
      getX(a) {
        let b = this.data.array[a * this.data.stride + this.offset];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      getY(a) {
        let b = this.data.array[a * this.data.stride + this.offset + 1];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      getZ(a) {
        let b = this.data.array[a * this.data.stride + this.offset + 2];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      getW(a) {
        let b = this.data.array[a * this.data.stride + this.offset + 3];
        return (this.normalized && (b = al(b, this.array)), b);
      }
      setXY(a, b, c) {
        return (
          (a = a * this.data.stride + this.offset),
          this.normalized && ((b = am(b, this.array)), (c = am(c, this.array))),
          (this.data.array[a + 0] = b),
          (this.data.array[a + 1] = c),
          this
        );
      }
      setXYZ(a, b, c, d) {
        return (
          (a = a * this.data.stride + this.offset),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array))),
          (this.data.array[a + 0] = b),
          (this.data.array[a + 1] = c),
          (this.data.array[a + 2] = d),
          this
        );
      }
      setXYZW(a, b, c, d, e) {
        return (
          (a = a * this.data.stride + this.offset),
          this.normalized &&
            ((b = am(b, this.array)),
            (c = am(c, this.array)),
            (d = am(d, this.array)),
            (e = am(e, this.array))),
          (this.data.array[a + 0] = b),
          (this.data.array[a + 1] = c),
          (this.data.array[a + 2] = d),
          (this.data.array[a + 3] = e),
          this
        );
      }
      clone(a) {
        if (void 0 !== a)
          return (
            void 0 === a.interleavedBuffers && (a.interleavedBuffers = {}),
            void 0 === a.interleavedBuffers[this.data.uuid] &&
              (a.interleavedBuffers[this.data.uuid] = this.data.clone(a)),
            new cY(
              a.interleavedBuffers[this.data.uuid],
              this.itemSize,
              this.offset,
              this.normalized
            )
          );
        {
          $(
            'InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.'
          );
          let a = [];
          for (let b = 0; b < this.count; b++) {
            let c = b * this.data.stride + this.offset;
            for (let b = 0; b < this.itemSize; b++)
              a.push(this.data.array[c + b]);
          }
          return new b7(
            new this.array.constructor(a),
            this.itemSize,
            this.normalized
          );
        }
      }
      toJSON(a) {
        if (void 0 !== a)
          return (
            void 0 === a.interleavedBuffers && (a.interleavedBuffers = {}),
            void 0 === a.interleavedBuffers[this.data.uuid] &&
              (a.interleavedBuffers[this.data.uuid] = this.data.toJSON(a)),
            {
              isInterleavedBufferAttribute: !0,
              itemSize: this.itemSize,
              data: this.data.uuid,
              offset: this.offset,
              normalized: this.normalized,
            }
          );
        {
          $(
            'InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.'
          );
          let a = [];
          for (let b = 0; b < this.count; b++) {
            let c = b * this.data.stride + this.offset;
            for (let b = 0; b < this.itemSize; b++)
              a.push(this.data.array[c + b]);
          }
          return {
            itemSize: this.itemSize,
            type: this.array.constructor.name,
            array: a,
            normalized: this.normalized,
          };
        }
      }
    }
    class cZ extends b$ {
      constructor(a) {
        (super(),
          (this.isSpriteMaterial = !0),
          (this.type = 'SpriteMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.alphaMap = null),
          (this.rotation = 0),
          (this.sizeAttenuation = !0),
          (this.transparent = !0),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.alphaMap = a.alphaMap),
          (this.rotation = a.rotation),
          (this.sizeAttenuation = a.sizeAttenuation),
          (this.fog = a.fog),
          this
        );
      }
    }
    let c$ = new aq(),
      c_ = new aq(),
      c0 = new aq(),
      c1 = new ao(),
      c2 = new ao(),
      c3 = new bd(),
      c4 = new aq(),
      c5 = new aq(),
      c6 = new aq(),
      c7 = new ao(),
      c8 = new ao(),
      c9 = new ao();
    class da extends bE {
      constructor(a = new cZ()) {
        if (
          (super(), (this.isSprite = !0), (this.type = 'Sprite'), void 0 === c)
        ) {
          c = new co();
          const a = new cW(
            new Float32Array([
              -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1, -0.5,
              0.5, 0, 0, 1,
            ]),
            5
          );
          (c.setIndex([0, 1, 2, 0, 2, 3]),
            c.setAttribute('position', new cY(a, 3, 0, !1)),
            c.setAttribute('uv', new cY(a, 2, 3, !1)));
        }
        ((this.geometry = c),
          (this.material = a),
          (this.center = new ao(0.5, 0.5)),
          (this.count = 1));
      }
      raycast(a, b) {
        let c, d;
        (null === a.camera &&
          aa(
            'Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'
          ),
          c_.setFromMatrixScale(this.matrixWorld),
          c3.copy(a.camera.matrixWorld),
          this.modelViewMatrix.multiplyMatrices(
            a.camera.matrixWorldInverse,
            this.matrixWorld
          ),
          c0.setFromMatrixPosition(this.modelViewMatrix),
          a.camera.isPerspectiveCamera &&
            !1 === this.material.sizeAttenuation &&
            c_.multiplyScalar(-c0.z));
        let e = this.material.rotation;
        0 !== e && ((d = Math.cos(e)), (c = Math.sin(e)));
        let f = this.center;
        (db(c4.set(-0.5, -0.5, 0), c0, f, c_, c, d),
          db(c5.set(0.5, -0.5, 0), c0, f, c_, c, d),
          db(c6.set(0.5, 0.5, 0), c0, f, c_, c, d),
          c7.set(0, 0),
          c8.set(1, 0),
          c9.set(1, 1));
        let g = a.ray.intersectTriangle(c4, c5, c6, !1, c$);
        if (
          null === g &&
          (db(c5.set(-0.5, 0.5, 0), c0, f, c_, c, d),
          c8.set(0, 1),
          null === (g = a.ray.intersectTriangle(c4, c6, c5, !1, c$)))
        )
          return;
        let h = a.ray.origin.distanceTo(c$);
        h < a.near ||
          h > a.far ||
          b.push({
            distance: h,
            point: c$.clone(),
            uv: bS.getInterpolation(c$, c4, c5, c6, c7, c8, c9, new ao()),
            face: null,
            object: this,
          });
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          void 0 !== a.center && this.center.copy(a.center),
          (this.material = a.material),
          this
        );
      }
    }
    function db(a, b, c, d, e, f) {
      (c1.subVectors(a, c).addScalar(0.5).multiply(d),
        void 0 !== e
          ? ((c2.x = f * c1.x - e * c1.y), (c2.y = e * c1.x + f * c1.y))
          : c2.copy(c1),
        a.copy(b),
        (a.x += c2.x),
        (a.y += c2.y),
        a.applyMatrix4(c3));
    }
    let dc = new aq(),
      dd = new aq();
    class de extends bE {
      constructor() {
        (super(),
          (this.isLOD = !0),
          (this._currentLevel = 0),
          (this.type = 'LOD'),
          Object.defineProperties(this, {
            levels: { enumerable: !0, value: [] },
          }),
          (this.autoUpdate = !0));
      }
      copy(a) {
        super.copy(a, !1);
        let b = a.levels;
        for (let a = 0, c = b.length; a < c; a++) {
          let c = b[a];
          this.addLevel(c.object.clone(), c.distance, c.hysteresis);
        }
        return ((this.autoUpdate = a.autoUpdate), this);
      }
      addLevel(a, b = 0, c = 0) {
        let d;
        b = Math.abs(b);
        let e = this.levels;
        for (d = 0; d < e.length && !(b < e[d].distance); d++);
        return (
          e.splice(d, 0, { distance: b, hysteresis: c, object: a }),
          this.add(a),
          this
        );
      }
      removeLevel(a) {
        let b = this.levels;
        for (let c = 0; c < b.length; c++)
          if (b[c].distance === a) {
            let a = b.splice(c, 1);
            return (this.remove(a[0].object), !0);
          }
        return !1;
      }
      getCurrentLevel() {
        return this._currentLevel;
      }
      getObjectForDistance(a) {
        let b = this.levels;
        if (b.length > 0) {
          let c, d;
          for (c = 1, d = b.length; c < d; c++) {
            let d = b[c].distance;
            if ((b[c].object.visible && (d -= d * b[c].hysteresis), a < d))
              break;
          }
          return b[c - 1].object;
        }
        return null;
      }
      raycast(a, b) {
        if (this.levels.length > 0) {
          dc.setFromMatrixPosition(this.matrixWorld);
          let c = a.ray.origin.distanceTo(dc);
          this.getObjectForDistance(c).raycast(a, b);
        }
      }
      update(a) {
        let b = this.levels;
        if (b.length > 1) {
          let c, d;
          (dc.setFromMatrixPosition(a.matrixWorld),
            dd.setFromMatrixPosition(this.matrixWorld));
          let e = dc.distanceTo(dd) / a.zoom;
          for (c = 1, b[0].object.visible = !0, d = b.length; c < d; c++) {
            let a = b[c].distance;
            if ((b[c].object.visible && (a -= a * b[c].hysteresis), e >= a))
              ((b[c - 1].object.visible = !1), (b[c].object.visible = !0));
            else break;
          }
          for (this._currentLevel = c - 1; c < d; c++) b[c].object.visible = !1;
        }
      }
      toJSON(a) {
        let b = super.toJSON(a);
        (!1 === this.autoUpdate && (b.object.autoUpdate = !1),
          (b.object.levels = []));
        let c = this.levels;
        for (let a = 0, d = c.length; a < d; a++) {
          let d = c[a];
          b.object.levels.push({
            object: d.object.uuid,
            distance: d.distance,
            hysteresis: d.hysteresis,
          });
        }
        return b;
      }
    }
    let df = new aq(),
      dg = new aH(),
      dh = new aH(),
      di = new aq(),
      dj = new bd(),
      dk = new aq(),
      dl = new a4(),
      dm = new bd(),
      dn = new bc();
    class dp extends cA {
      constructor(a, b) {
        (super(a, b),
          (this.isSkinnedMesh = !0),
          (this.type = 'SkinnedMesh'),
          (this.bindMode = G),
          (this.bindMatrix = new bd()),
          (this.bindMatrixInverse = new bd()),
          (this.boundingBox = null),
          (this.boundingSphere = null));
      }
      computeBoundingBox() {
        let a = this.geometry;
        (null === this.boundingBox && (this.boundingBox = new aO()),
          this.boundingBox.makeEmpty());
        let b = a.getAttribute('position');
        for (let a = 0; a < b.count; a++)
          (this.getVertexPosition(a, dk), this.boundingBox.expandByPoint(dk));
      }
      computeBoundingSphere() {
        let a = this.geometry;
        (null === this.boundingSphere && (this.boundingSphere = new a4()),
          this.boundingSphere.makeEmpty());
        let b = a.getAttribute('position');
        for (let a = 0; a < b.count; a++)
          (this.getVertexPosition(a, dk),
            this.boundingSphere.expandByPoint(dk));
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.bindMode = a.bindMode),
          this.bindMatrix.copy(a.bindMatrix),
          this.bindMatrixInverse.copy(a.bindMatrixInverse),
          (this.skeleton = a.skeleton),
          null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()),
          null !== a.boundingSphere &&
            (this.boundingSphere = a.boundingSphere.clone()),
          this
        );
      }
      raycast(a, b) {
        let c = this.material,
          d = this.matrixWorld;
        void 0 === c ||
          (null === this.boundingSphere && this.computeBoundingSphere(),
          dl.copy(this.boundingSphere),
          dl.applyMatrix4(d),
          !1 === a.ray.intersectsSphere(dl) ||
            (dm.copy(d).invert(),
            dn.copy(a.ray).applyMatrix4(dm),
            (null === this.boundingBox ||
              !1 !== dn.intersectsBox(this.boundingBox)) &&
              this._computeIntersections(a, b, dn)));
      }
      getVertexPosition(a, b) {
        return (
          super.getVertexPosition(a, b),
          this.applyBoneTransform(a, b),
          b
        );
      }
      bind(a, b) {
        ((this.skeleton = a),
          void 0 === b &&
            (this.updateMatrixWorld(!0),
            this.skeleton.calculateInverses(),
            (b = this.matrixWorld)),
          this.bindMatrix.copy(b),
          this.bindMatrixInverse.copy(b).invert());
      }
      pose() {
        this.skeleton.pose();
      }
      normalizeSkinWeights() {
        let a = new aH(),
          b = this.geometry.attributes.skinWeight;
        for (let c = 0, d = b.count; c < d; c++) {
          a.fromBufferAttribute(b, c);
          let d = 1 / a.manhattanLength();
          (d !== 1 / 0 ? a.multiplyScalar(d) : a.set(1, 0, 0, 0),
            b.setXYZW(c, a.x, a.y, a.z, a.w));
        }
      }
      updateMatrixWorld(a) {
        (super.updateMatrixWorld(a),
          this.bindMode === G
            ? this.bindMatrixInverse.copy(this.matrixWorld).invert()
            : this.bindMode === H
              ? this.bindMatrixInverse.copy(this.bindMatrix).invert()
              : _('SkinnedMesh: Unrecognized bindMode: ' + this.bindMode));
      }
      applyBoneTransform(a, b) {
        let c = this.skeleton,
          d = this.geometry;
        (dg.fromBufferAttribute(d.attributes.skinIndex, a),
          dh.fromBufferAttribute(d.attributes.skinWeight, a),
          df.copy(b).applyMatrix4(this.bindMatrix),
          b.set(0, 0, 0));
        for (let a = 0; a < 4; a++) {
          let d = dh.getComponent(a);
          if (0 !== d) {
            let e = dg.getComponent(a);
            (dj.multiplyMatrices(c.bones[e].matrixWorld, c.boneInverses[e]),
              b.addScaledVector(di.copy(df).applyMatrix4(dj), d));
          }
        }
        return b.applyMatrix4(this.bindMatrixInverse);
      }
    }
    class dq extends bE {
      constructor() {
        (super(), (this.isBone = !0), (this.type = 'Bone'));
      }
    }
    class dr extends aG {
      constructor(
        a = null,
        b = 1,
        c = 1,
        d,
        e,
        f,
        g,
        h,
        i = 1003,
        j = 1003,
        k,
        l
      ) {
        (super(null, f, g, h, i, j, d, e, k, l),
          (this.isDataTexture = !0),
          (this.image = { data: a, width: b, height: c }),
          (this.generateMipmaps = !1),
          (this.flipY = !1),
          (this.unpackAlignment = 1));
      }
    }
    let ds = new bd(),
      dt = new bd();
    class du {
      constructor(a = [], b = []) {
        ((this.uuid = ah()),
          (this.bones = a.slice(0)),
          (this.boneInverses = b),
          (this.boneMatrices = null),
          (this.previousBoneMatrices = null),
          (this.boneTexture = null),
          this.init());
      }
      init() {
        let a = this.bones,
          b = this.boneInverses;
        if (
          ((this.boneMatrices = new Float32Array(16 * a.length)),
          0 === b.length)
        )
          this.calculateInverses();
        else if (a.length !== b.length) {
          (_(
            'Skeleton: Number of inverse bone matrices does not match amount of bones.'
          ),
            (this.boneInverses = []));
          for (let a = 0, b = this.bones.length; a < b; a++)
            this.boneInverses.push(new bd());
        }
      }
      calculateInverses() {
        this.boneInverses.length = 0;
        for (let a = 0, b = this.bones.length; a < b; a++) {
          let b = new bd();
          (this.bones[a] && b.copy(this.bones[a].matrixWorld).invert(),
            this.boneInverses.push(b));
        }
      }
      pose() {
        for (let a = 0, b = this.bones.length; a < b; a++) {
          let b = this.bones[a];
          b && b.matrixWorld.copy(this.boneInverses[a]).invert();
        }
        for (let a = 0, b = this.bones.length; a < b; a++) {
          let b = this.bones[a];
          b &&
            (b.parent && b.parent.isBone
              ? (b.matrix.copy(b.parent.matrixWorld).invert(),
                b.matrix.multiply(b.matrixWorld))
              : b.matrix.copy(b.matrixWorld),
            b.matrix.decompose(b.position, b.quaternion, b.scale));
        }
      }
      update() {
        let a = this.bones,
          b = this.boneInverses,
          c = this.boneMatrices,
          d = this.boneTexture;
        for (let d = 0, e = a.length; d < e; d++) {
          let e = a[d] ? a[d].matrixWorld : dt;
          (ds.multiplyMatrices(e, b[d]), ds.toArray(c, 16 * d));
        }
        null !== d && (d.needsUpdate = !0);
      }
      clone() {
        return new du(this.bones, this.boneInverses);
      }
      computeBoneTexture() {
        let a = Math.sqrt(4 * this.bones.length),
          b = new Float32Array(
            (a = Math.max((a = 4 * Math.ceil(a / 4)), 4)) * a * 4
          );
        b.set(this.boneMatrices);
        let c = new dr(b, a, a, 1023, 1015);
        return (
          (c.needsUpdate = !0),
          (this.boneMatrices = b),
          (this.boneTexture = c),
          this
        );
      }
      getBoneByName(a) {
        for (let b = 0, c = this.bones.length; b < c; b++) {
          let c = this.bones[b];
          if (c.name === a) return c;
        }
      }
      dispose() {
        null !== this.boneTexture &&
          (this.boneTexture.dispose(), (this.boneTexture = null));
      }
      fromJSON(a, b) {
        this.uuid = a.uuid;
        for (let c = 0, d = a.bones.length; c < d; c++) {
          let d = a.bones[c],
            e = b[d];
          (void 0 === e &&
            (_('Skeleton: No bone found with UUID:', d), (e = new dq())),
            this.bones.push(e),
            this.boneInverses.push(new bd().fromArray(a.boneInverses[c])));
        }
        return (this.init(), this);
      }
      toJSON() {
        let a = {
          metadata: {
            version: 4.7,
            type: 'Skeleton',
            generator: 'Skeleton.toJSON',
          },
          bones: [],
          boneInverses: [],
        };
        a.uuid = this.uuid;
        let b = this.bones,
          c = this.boneInverses;
        for (let d = 0, e = b.length; d < e; d++) {
          let e = b[d];
          a.bones.push(e.uuid);
          let f = c[d];
          a.boneInverses.push(f.toArray());
        }
        return a;
      }
    }
    class dv extends b7 {
      constructor(a, b, c, d = 1) {
        (super(a, b, c),
          (this.isInstancedBufferAttribute = !0),
          (this.meshPerAttribute = d));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.meshPerAttribute = a.meshPerAttribute),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.meshPerAttribute = this.meshPerAttribute),
          (a.isInstancedBufferAttribute = !0),
          a
        );
      }
    }
    let dw = new bd(),
      dx = new bd(),
      dy = [],
      dz = new aO(),
      dA = new bd(),
      dB = new cA(),
      dC = new a4();
    class dD extends cA {
      constructor(a, b, c) {
        (super(a, b),
          (this.isInstancedMesh = !0),
          (this.instanceMatrix = new dv(new Float32Array(16 * c), 16)),
          (this.instanceColor = null),
          (this.morphTexture = null),
          (this.count = c),
          (this.boundingBox = null),
          (this.boundingSphere = null));
        for (let a = 0; a < c; a++) this.setMatrixAt(a, dA);
      }
      computeBoundingBox() {
        let a = this.geometry,
          b = this.count;
        (null === this.boundingBox && (this.boundingBox = new aO()),
          null === a.boundingBox && a.computeBoundingBox(),
          this.boundingBox.makeEmpty());
        for (let c = 0; c < b; c++)
          (this.getMatrixAt(c, dw),
            dz.copy(a.boundingBox).applyMatrix4(dw),
            this.boundingBox.union(dz));
      }
      computeBoundingSphere() {
        let a = this.geometry,
          b = this.count;
        (null === this.boundingSphere && (this.boundingSphere = new a4()),
          null === a.boundingSphere && a.computeBoundingSphere(),
          this.boundingSphere.makeEmpty());
        for (let c = 0; c < b; c++)
          (this.getMatrixAt(c, dw),
            dC.copy(a.boundingSphere).applyMatrix4(dw),
            this.boundingSphere.union(dC));
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          this.instanceMatrix.copy(a.instanceMatrix),
          null !== a.morphTexture &&
            (this.morphTexture = a.morphTexture.clone()),
          null !== a.instanceColor &&
            (this.instanceColor = a.instanceColor.clone()),
          (this.count = a.count),
          null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()),
          null !== a.boundingSphere &&
            (this.boundingSphere = a.boundingSphere.clone()),
          this
        );
      }
      getColorAt(a, b) {
        b.fromArray(this.instanceColor.array, 3 * a);
      }
      getMatrixAt(a, b) {
        b.fromArray(this.instanceMatrix.array, 16 * a);
      }
      getMorphAt(a, b) {
        let c = b.morphTargetInfluences,
          d = this.morphTexture.source.data.data,
          e = a * (c.length + 1) + 1;
        for (let a = 0; a < c.length; a++) c[a] = d[e + a];
      }
      raycast(a, b) {
        let c = this.matrixWorld,
          d = this.count;
        if (
          ((dB.geometry = this.geometry),
          (dB.material = this.material),
          void 0 !== dB.material) &&
          (null === this.boundingSphere && this.computeBoundingSphere(),
          dC.copy(this.boundingSphere),
          dC.applyMatrix4(c),
          !1 !== a.ray.intersectsSphere(dC))
        )
          for (let e = 0; e < d; e++) {
            (this.getMatrixAt(e, dw),
              dx.multiplyMatrices(c, dw),
              (dB.matrixWorld = dx),
              dB.raycast(a, dy));
            for (let a = 0, c = dy.length; a < c; a++) {
              let c = dy[a];
              ((c.instanceId = e), (c.object = this), b.push(c));
            }
            dy.length = 0;
          }
      }
      setColorAt(a, b) {
        (null === this.instanceColor &&
          (this.instanceColor = new dv(
            new Float32Array(3 * this.instanceMatrix.count).fill(1),
            3
          )),
          b.toArray(this.instanceColor.array, 3 * a));
      }
      setMatrixAt(a, b) {
        b.toArray(this.instanceMatrix.array, 16 * a);
      }
      setMorphAt(a, b) {
        let c = b.morphTargetInfluences,
          d = c.length + 1;
        null === this.morphTexture &&
          (this.morphTexture = new dr(
            new Float32Array(d * this.count),
            d,
            this.count,
            1028,
            1015
          ));
        let e = this.morphTexture.source.data.data,
          f = 0;
        for (let a = 0; a < c.length; a++) f += c[a];
        let g = this.geometry.morphTargetsRelative ? 1 : 1 - f,
          h = d * a;
        ((e[h] = g), e.set(c, h + 1));
      }
      updateMorphTargets() {}
      dispose() {
        (this.dispatchEvent({ type: 'dispose' }),
          null !== this.morphTexture &&
            (this.morphTexture.dispose(), (this.morphTexture = null)));
      }
    }
    let dE = new aq(),
      dF = new aq(),
      dG = new at();
    class dH {
      constructor(a = new aq(1, 0, 0), b = 0) {
        ((this.isPlane = !0), (this.normal = a), (this.constant = b));
      }
      set(a, b) {
        return (this.normal.copy(a), (this.constant = b), this);
      }
      setComponents(a, b, c, d) {
        return (this.normal.set(a, b, c), (this.constant = d), this);
      }
      setFromNormalAndCoplanarPoint(a, b) {
        return (
          this.normal.copy(a),
          (this.constant = -b.dot(this.normal)),
          this
        );
      }
      setFromCoplanarPoints(a, b, c) {
        let d = dE.subVectors(c, b).cross(dF.subVectors(a, b)).normalize();
        return (this.setFromNormalAndCoplanarPoint(d, a), this);
      }
      copy(a) {
        return (this.normal.copy(a.normal), (this.constant = a.constant), this);
      }
      normalize() {
        let a = 1 / this.normal.length();
        return (this.normal.multiplyScalar(a), (this.constant *= a), this);
      }
      negate() {
        return ((this.constant *= -1), this.normal.negate(), this);
      }
      distanceToPoint(a) {
        return this.normal.dot(a) + this.constant;
      }
      distanceToSphere(a) {
        return this.distanceToPoint(a.center) - a.radius;
      }
      projectPoint(a, b) {
        return b.copy(a).addScaledVector(this.normal, -this.distanceToPoint(a));
      }
      intersectLine(a, b) {
        let c = a.delta(dE),
          d = this.normal.dot(c);
        if (0 === d)
          return 0 === this.distanceToPoint(a.start) ? b.copy(a.start) : null;
        let e = -(a.start.dot(this.normal) + this.constant) / d;
        return e < 0 || e > 1 ? null : b.copy(a.start).addScaledVector(c, e);
      }
      intersectsLine(a) {
        let b = this.distanceToPoint(a.start),
          c = this.distanceToPoint(a.end);
        return (b < 0 && c > 0) || (c < 0 && b > 0);
      }
      intersectsBox(a) {
        return a.intersectsPlane(this);
      }
      intersectsSphere(a) {
        return a.intersectsPlane(this);
      }
      coplanarPoint(a) {
        return a.copy(this.normal).multiplyScalar(-this.constant);
      }
      applyMatrix4(a, b) {
        let c = b || dG.getNormalMatrix(a),
          d = this.coplanarPoint(dE).applyMatrix4(a),
          e = this.normal.applyMatrix3(c).normalize();
        return ((this.constant = -d.dot(e)), this);
      }
      translate(a) {
        return ((this.constant -= a.dot(this.normal)), this);
      }
      equals(a) {
        return a.normal.equals(this.normal) && a.constant === this.constant;
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    let dI = new a4(),
      dJ = new ao(0.5, 0.5),
      dK = new aq();
    class dL {
      constructor(
        a = new dH(),
        b = new dH(),
        c = new dH(),
        d = new dH(),
        e = new dH(),
        f = new dH()
      ) {
        this.planes = [a, b, c, d, e, f];
      }
      set(a, b, c, d, e, f) {
        let g = this.planes;
        return (
          g[0].copy(a),
          g[1].copy(b),
          g[2].copy(c),
          g[3].copy(d),
          g[4].copy(e),
          g[5].copy(f),
          this
        );
      }
      copy(a) {
        let b = this.planes;
        for (let c = 0; c < 6; c++) b[c].copy(a.planes[c]);
        return this;
      }
      setFromProjectionMatrix(a, b = 2e3, c = !1) {
        let d = this.planes,
          e = a.elements,
          f = e[0],
          g = e[1],
          h = e[2],
          i = e[3],
          j = e[4],
          k = e[5],
          l = e[6],
          m = e[7],
          n = e[8],
          o = e[9],
          p = e[10],
          q = e[11],
          r = e[12],
          s = e[13],
          t = e[14],
          u = e[15];
        if (
          (d[0].setComponents(i - f, m - j, q - n, u - r).normalize(),
          d[1].setComponents(i + f, m + j, q + n, u + r).normalize(),
          d[2].setComponents(i + g, m + k, q + o, u + s).normalize(),
          d[3].setComponents(i - g, m - k, q - o, u - s).normalize(),
          c)
        )
          (d[4].setComponents(h, l, p, t).normalize(),
            d[5].setComponents(i - h, m - l, q - p, u - t).normalize());
        else if (
          (d[4].setComponents(i - h, m - l, q - p, u - t).normalize(),
          2e3 === b)
        )
          d[5].setComponents(i + h, m + l, q + p, u + t).normalize();
        else if (2001 === b) d[5].setComponents(h, l, p, t).normalize();
        else
          throw Error(
            'THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: ' +
              b
          );
        return this;
      }
      intersectsObject(a) {
        if (void 0 !== a.boundingSphere)
          (null === a.boundingSphere && a.computeBoundingSphere(),
            dI.copy(a.boundingSphere).applyMatrix4(a.matrixWorld));
        else {
          let b = a.geometry;
          (null === b.boundingSphere && b.computeBoundingSphere(),
            dI.copy(b.boundingSphere).applyMatrix4(a.matrixWorld));
        }
        return this.intersectsSphere(dI);
      }
      intersectsSprite(a) {
        return (
          dI.center.set(0, 0, 0),
          (dI.radius = 0.7071067811865476 + dJ.distanceTo(a.center)),
          dI.applyMatrix4(a.matrixWorld),
          this.intersectsSphere(dI)
        );
      }
      intersectsSphere(a) {
        let b = this.planes,
          c = a.center,
          d = -a.radius;
        for (let a = 0; a < 6; a++) if (b[a].distanceToPoint(c) < d) return !1;
        return !0;
      }
      intersectsBox(a) {
        let b = this.planes;
        for (let c = 0; c < 6; c++) {
          let d = b[c];
          if (
            ((dK.x = d.normal.x > 0 ? a.max.x : a.min.x),
            (dK.y = d.normal.y > 0 ? a.max.y : a.min.y),
            (dK.z = d.normal.z > 0 ? a.max.z : a.min.z),
            0 > d.distanceToPoint(dK))
          )
            return !1;
        }
        return !0;
      }
      containsPoint(a) {
        let b = this.planes;
        for (let c = 0; c < 6; c++) if (0 > b[c].distanceToPoint(a)) return !1;
        return !0;
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    let dM = new bd(),
      dN = new dL();
    class dO {
      constructor() {
        this.coordinateSystem = 2e3;
      }
      intersectsObject(a, b) {
        if (!b.isArrayCamera || 0 === b.cameras.length) return !1;
        for (let c = 0; c < b.cameras.length; c++) {
          let d = b.cameras[c];
          if (
            (dM.multiplyMatrices(d.projectionMatrix, d.matrixWorldInverse),
            dN.setFromProjectionMatrix(dM, d.coordinateSystem, d.reversedDepth),
            dN.intersectsObject(a))
          )
            return !0;
        }
        return !1;
      }
      intersectsSprite(a, b) {
        if (!b || !b.cameras || 0 === b.cameras.length) return !1;
        for (let c = 0; c < b.cameras.length; c++) {
          let d = b.cameras[c];
          if (
            (dM.multiplyMatrices(d.projectionMatrix, d.matrixWorldInverse),
            dN.setFromProjectionMatrix(dM, d.coordinateSystem, d.reversedDepth),
            dN.intersectsSprite(a))
          )
            return !0;
        }
        return !1;
      }
      intersectsSphere(a, b) {
        if (!b || !b.cameras || 0 === b.cameras.length) return !1;
        for (let c = 0; c < b.cameras.length; c++) {
          let d = b.cameras[c];
          if (
            (dM.multiplyMatrices(d.projectionMatrix, d.matrixWorldInverse),
            dN.setFromProjectionMatrix(dM, d.coordinateSystem, d.reversedDepth),
            dN.intersectsSphere(a))
          )
            return !0;
        }
        return !1;
      }
      intersectsBox(a, b) {
        if (!b || !b.cameras || 0 === b.cameras.length) return !1;
        for (let c = 0; c < b.cameras.length; c++) {
          let d = b.cameras[c];
          if (
            (dM.multiplyMatrices(d.projectionMatrix, d.matrixWorldInverse),
            dN.setFromProjectionMatrix(dM, d.coordinateSystem, d.reversedDepth),
            dN.intersectsBox(a))
          )
            return !0;
        }
        return !1;
      }
      containsPoint(a, b) {
        if (!b || !b.cameras || 0 === b.cameras.length) return !1;
        for (let c = 0; c < b.cameras.length; c++) {
          let d = b.cameras[c];
          if (
            (dM.multiplyMatrices(d.projectionMatrix, d.matrixWorldInverse),
            dN.setFromProjectionMatrix(dM, d.coordinateSystem, d.reversedDepth),
            dN.containsPoint(a))
          )
            return !0;
        }
        return !1;
      }
      clone() {
        return new dO();
      }
    }
    function dP(a, b) {
      return a - b;
    }
    function dQ(a, b) {
      return a.z - b.z;
    }
    function dR(a, b) {
      return b.z - a.z;
    }
    let dS = new bd(),
      dT = new bX(1, 1, 1),
      dU = new dL(),
      dV = new dO(),
      dW = new aO(),
      dX = new a4(),
      dY = new aq(),
      dZ = new aq(),
      d$ = new aq(),
      d_ = new (class {
        constructor() {
          ((this.index = 0), (this.pool = []), (this.list = []));
        }
        push(a, b, c, d) {
          let e = this.pool,
            f = this.list;
          this.index >= e.length &&
            e.push({ start: -1, count: -1, z: -1, index: -1 });
          let g = e[this.index];
          (f.push(g),
            this.index++,
            (g.start = a),
            (g.count = b),
            (g.z = c),
            (g.index = d));
        }
        reset() {
          ((this.list.length = 0), (this.index = 0));
        }
      })(),
      d0 = new cA(),
      d1 = [];
    function d2(a, b) {
      if (a.constructor !== b.constructor) {
        let c = Math.min(a.length, b.length);
        for (let d = 0; d < c; d++) b[d] = a[d];
      } else {
        let c = Math.min(a.length, b.length);
        b.set(new a.constructor(a.buffer, 0, c));
      }
    }
    class d3 extends cA {
      constructor(a, b, c = 2 * b, d) {
        (super(new co(), d),
          (this.isBatchedMesh = !0),
          (this.perObjectFrustumCulled = !0),
          (this.sortObjects = !0),
          (this.boundingBox = null),
          (this.boundingSphere = null),
          (this.customSort = null),
          (this._instanceInfo = []),
          (this._geometryInfo = []),
          (this._availableInstanceIds = []),
          (this._availableGeometryIds = []),
          (this._nextIndexStart = 0),
          (this._nextVertexStart = 0),
          (this._geometryCount = 0),
          (this._visibilityChanged = !0),
          (this._geometryInitialized = !1),
          (this._maxInstanceCount = a),
          (this._maxVertexCount = b),
          (this._maxIndexCount = c),
          (this._multiDrawCounts = new Int32Array(a)),
          (this._multiDrawStarts = new Int32Array(a)),
          (this._multiDrawCount = 0),
          (this._multiDrawInstances = null),
          (this._matricesTexture = null),
          (this._indirectTexture = null),
          (this._colorsTexture = null),
          this._initMatricesTexture(),
          this._initIndirectTexture());
      }
      get maxInstanceCount() {
        return this._maxInstanceCount;
      }
      get instanceCount() {
        return this._instanceInfo.length - this._availableInstanceIds.length;
      }
      get unusedVertexCount() {
        return this._maxVertexCount - this._nextVertexStart;
      }
      get unusedIndexCount() {
        return this._maxIndexCount - this._nextIndexStart;
      }
      _initMatricesTexture() {
        let a = Math.sqrt(4 * this._maxInstanceCount),
          b = new dr(
            new Float32Array(
              (a = Math.max((a = 4 * Math.ceil(a / 4)), 4)) * a * 4
            ),
            a,
            a,
            1023,
            1015
          );
        this._matricesTexture = b;
      }
      _initIndirectTexture() {
        let a = Math.sqrt(this._maxInstanceCount),
          b = new dr(new Uint32Array((a = Math.ceil(a)) * a), a, a, 1029, 1014);
        this._indirectTexture = b;
      }
      _initColorsTexture() {
        let a = Math.sqrt(this._maxInstanceCount),
          b = new dr(
            new Float32Array((a = Math.ceil(a)) * a * 4).fill(1),
            a,
            a,
            1023,
            1015
          );
        ((b.colorSpace = ax.workingColorSpace), (this._colorsTexture = b));
      }
      _initializeGeometry(a) {
        let b = this.geometry,
          c = this._maxVertexCount,
          d = this._maxIndexCount;
        if (!1 === this._geometryInitialized) {
          for (let d in a.attributes) {
            let { array: e, itemSize: f, normalized: g } = a.getAttribute(d),
              h = new b7(new e.constructor(c * f), f, g);
            b.setAttribute(d, h);
          }
          if (null !== a.getIndex()) {
            let a = c > 65535 ? new Uint32Array(d) : new Uint16Array(d);
            b.setIndex(new b7(a, 1));
          }
          this._geometryInitialized = !0;
        }
      }
      _validateGeometry(a) {
        let b = this.geometry;
        if (!!a.getIndex() != !!b.getIndex())
          throw Error(
            'THREE.BatchedMesh: All geometries must consistently have "index".'
          );
        for (let c in b.attributes) {
          if (!a.hasAttribute(c))
            throw Error(
              `THREE.BatchedMesh: Added geometry missing "${c}". All geometries must have consistent attributes.`
            );
          let d = a.getAttribute(c),
            e = b.getAttribute(c);
          if (d.itemSize !== e.itemSize || d.normalized !== e.normalized)
            throw Error(
              'THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.'
            );
        }
      }
      validateInstanceId(a) {
        let b = this._instanceInfo;
        if (a < 0 || a >= b.length || !1 === b[a].active)
          throw Error(
            `THREE.BatchedMesh: Invalid instanceId ${a}. Instance is either out of range or has been deleted.`
          );
      }
      validateGeometryId(a) {
        let b = this._geometryInfo;
        if (a < 0 || a >= b.length || !1 === b[a].active)
          throw Error(
            `THREE.BatchedMesh: Invalid geometryId ${a}. Geometry is either out of range or has been deleted.`
          );
      }
      setCustomSort(a) {
        return ((this.customSort = a), this);
      }
      computeBoundingBox() {
        null === this.boundingBox && (this.boundingBox = new aO());
        let a = this.boundingBox,
          b = this._instanceInfo;
        a.makeEmpty();
        for (let c = 0, d = b.length; c < d; c++) {
          if (!1 === b[c].active) continue;
          let d = b[c].geometryIndex;
          (this.getMatrixAt(c, dS),
            this.getBoundingBoxAt(d, dW).applyMatrix4(dS),
            a.union(dW));
        }
      }
      computeBoundingSphere() {
        null === this.boundingSphere && (this.boundingSphere = new a4());
        let a = this.boundingSphere,
          b = this._instanceInfo;
        a.makeEmpty();
        for (let c = 0, d = b.length; c < d; c++) {
          if (!1 === b[c].active) continue;
          let d = b[c].geometryIndex;
          (this.getMatrixAt(c, dS),
            this.getBoundingSphereAt(d, dX).applyMatrix4(dS),
            a.union(dX));
        }
      }
      addInstance(a) {
        if (
          this._instanceInfo.length >= this.maxInstanceCount &&
          0 === this._availableInstanceIds.length
        )
          throw Error('THREE.BatchedMesh: Maximum item count reached.');
        let b = { visible: !0, active: !0, geometryIndex: a },
          c = null;
        this._availableInstanceIds.length > 0
          ? (this._availableInstanceIds.sort(dP),
            (c = this._availableInstanceIds.shift()),
            (this._instanceInfo[c] = b))
          : ((c = this._instanceInfo.length), this._instanceInfo.push(b));
        let d = this._matricesTexture;
        (dS.identity().toArray(d.image.data, 16 * c), (d.needsUpdate = !0));
        let e = this._colorsTexture;
        return (
          e && (dT.toArray(e.image.data, 4 * c), (e.needsUpdate = !0)),
          (this._visibilityChanged = !0),
          c
        );
      }
      addGeometry(a, b = -1, c = -1) {
        let d;
        (this._initializeGeometry(a), this._validateGeometry(a));
        let e = {
            vertexStart: -1,
            vertexCount: -1,
            reservedVertexCount: -1,
            indexStart: -1,
            indexCount: -1,
            reservedIndexCount: -1,
            start: -1,
            count: -1,
            boundingBox: null,
            boundingSphere: null,
            active: !0,
          },
          f = this._geometryInfo;
        ((e.vertexStart = this._nextVertexStart),
          (e.reservedVertexCount =
            -1 === b ? a.getAttribute('position').count : b));
        let g = a.getIndex();
        if (
          (null !== g &&
            ((e.indexStart = this._nextIndexStart),
            (e.reservedIndexCount = -1 === c ? g.count : c)),
          (-1 !== e.indexStart &&
            e.indexStart + e.reservedIndexCount > this._maxIndexCount) ||
            e.vertexStart + e.reservedVertexCount > this._maxVertexCount)
        )
          throw Error(
            'THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.'
          );
        return (
          this._availableGeometryIds.length > 0
            ? (this._availableGeometryIds.sort(dP),
              (f[(d = this._availableGeometryIds.shift())] = e))
            : ((d = this._geometryCount), this._geometryCount++, f.push(e)),
          this.setGeometryAt(d, a),
          (this._nextIndexStart = e.indexStart + e.reservedIndexCount),
          (this._nextVertexStart = e.vertexStart + e.reservedVertexCount),
          d
        );
      }
      setGeometryAt(a, b) {
        if (a >= this._geometryCount)
          throw Error('THREE.BatchedMesh: Maximum geometry count reached.');
        this._validateGeometry(b);
        let c = this.geometry,
          d = null !== c.getIndex(),
          e = c.getIndex(),
          f = b.getIndex(),
          g = this._geometryInfo[a];
        if (
          (d && f.count > g.reservedIndexCount) ||
          b.attributes.position.count > g.reservedVertexCount
        )
          throw Error(
            'THREE.BatchedMesh: Reserved space not large enough for provided geometry.'
          );
        let h = g.vertexStart,
          i = g.reservedVertexCount;
        for (let a in ((g.vertexCount = b.getAttribute('position').count),
        c.attributes)) {
          let d = b.getAttribute(a),
            e = c.getAttribute(a);
          !(function (a, b, c = 0) {
            let d = b.itemSize;
            if (
              a.isInterleavedBufferAttribute ||
              a.array.constructor !== b.array.constructor
            ) {
              let e = a.count;
              for (let f = 0; f < e; f++)
                for (let e = 0; e < d; e++)
                  b.setComponent(f + c, e, a.getComponent(f, e));
            } else b.array.set(a.array, c * d);
            b.needsUpdate = !0;
          })(d, e, h);
          let f = d.itemSize;
          for (let a = d.count; a < i; a++) {
            let b = h + a;
            for (let a = 0; a < f; a++) e.setComponent(b, a, 0);
          }
          ((e.needsUpdate = !0), e.addUpdateRange(h * f, i * f));
        }
        if (d) {
          let a = g.indexStart,
            c = g.reservedIndexCount;
          g.indexCount = b.getIndex().count;
          for (let b = 0; b < f.count; b++) e.setX(a + b, h + f.getX(b));
          for (let b = f.count; b < c; b++) e.setX(a + b, h);
          ((e.needsUpdate = !0), e.addUpdateRange(a, g.reservedIndexCount));
        }
        return (
          (g.start = d ? g.indexStart : g.vertexStart),
          (g.count = d ? g.indexCount : g.vertexCount),
          (g.boundingBox = null),
          null !== b.boundingBox && (g.boundingBox = b.boundingBox.clone()),
          (g.boundingSphere = null),
          null !== b.boundingSphere &&
            (g.boundingSphere = b.boundingSphere.clone()),
          (this._visibilityChanged = !0),
          a
        );
      }
      deleteGeometry(a) {
        let b = this._geometryInfo;
        if (a >= b.length || !1 === b[a].active) return this;
        let c = this._instanceInfo;
        for (let b = 0, d = c.length; b < d; b++)
          c[b].active && c[b].geometryIndex === a && this.deleteInstance(b);
        return (
          (b[a].active = !1),
          this._availableGeometryIds.push(a),
          (this._visibilityChanged = !0),
          this
        );
      }
      deleteInstance(a) {
        return (
          this.validateInstanceId(a),
          (this._instanceInfo[a].active = !1),
          this._availableInstanceIds.push(a),
          (this._visibilityChanged = !0),
          this
        );
      }
      optimize() {
        let a = 0,
          b = 0,
          c = this._geometryInfo,
          d = c
            .map((a, b) => b)
            .sort((a, b) => c[a].vertexStart - c[b].vertexStart),
          e = this.geometry;
        for (let f = 0, g = c.length; f < g; f++) {
          let g = c[d[f]];
          if (!1 !== g.active) {
            if (null !== e.index) {
              if (g.indexStart !== b) {
                let {
                    indexStart: c,
                    vertexStart: d,
                    reservedIndexCount: f,
                  } = g,
                  h = e.index,
                  i = h.array,
                  j = a - d;
                for (let a = c; a < c + f; a++) i[a] = i[a] + j;
                (h.array.copyWithin(b, c, c + f),
                  h.addUpdateRange(b, f),
                  (h.needsUpdate = !0),
                  (g.indexStart = b));
              }
              b += g.reservedIndexCount;
            }
            if (g.vertexStart !== a) {
              let { vertexStart: b, reservedVertexCount: c } = g,
                d = e.attributes;
              for (let e in d) {
                let f = d[e],
                  { array: g, itemSize: h } = f;
                (g.copyWithin(a * h, b * h, (b + c) * h),
                  f.addUpdateRange(a * h, c * h),
                  (f.needsUpdate = !0));
              }
              g.vertexStart = a;
            }
            ((a += g.reservedVertexCount),
              (g.start = e.index ? g.indexStart : g.vertexStart),
              (this._nextIndexStart = e.index
                ? g.indexStart + g.reservedIndexCount
                : 0),
              (this._nextVertexStart = g.vertexStart + g.reservedVertexCount));
          }
        }
        return ((this._visibilityChanged = !0), this);
      }
      getBoundingBoxAt(a, b) {
        if (a >= this._geometryCount) return null;
        let c = this.geometry,
          d = this._geometryInfo[a];
        if (null === d.boundingBox) {
          let a = new aO(),
            b = c.index,
            e = c.attributes.position;
          for (let c = d.start, f = d.start + d.count; c < f; c++) {
            let d = c;
            (b && (d = b.getX(d)),
              a.expandByPoint(dY.fromBufferAttribute(e, d)));
          }
          d.boundingBox = a;
        }
        return (b.copy(d.boundingBox), b);
      }
      getBoundingSphereAt(a, b) {
        if (a >= this._geometryCount) return null;
        let c = this.geometry,
          d = this._geometryInfo[a];
        if (null === d.boundingSphere) {
          let b = new a4();
          (this.getBoundingBoxAt(a, dW), dW.getCenter(b.center));
          let e = c.index,
            f = c.attributes.position,
            g = 0;
          for (let a = d.start, c = d.start + d.count; a < c; a++) {
            let c = a;
            (e && (c = e.getX(c)),
              dY.fromBufferAttribute(f, c),
              (g = Math.max(g, b.center.distanceToSquared(dY))));
          }
          ((b.radius = Math.sqrt(g)), (d.boundingSphere = b));
        }
        return (b.copy(d.boundingSphere), b);
      }
      setMatrixAt(a, b) {
        this.validateInstanceId(a);
        let c = this._matricesTexture,
          d = this._matricesTexture.image.data;
        return (b.toArray(d, 16 * a), (c.needsUpdate = !0), this);
      }
      getMatrixAt(a, b) {
        return (
          this.validateInstanceId(a),
          b.fromArray(this._matricesTexture.image.data, 16 * a)
        );
      }
      setColorAt(a, b) {
        return (
          this.validateInstanceId(a),
          null === this._colorsTexture && this._initColorsTexture(),
          b.toArray(this._colorsTexture.image.data, 4 * a),
          (this._colorsTexture.needsUpdate = !0),
          this
        );
      }
      getColorAt(a, b) {
        return (
          this.validateInstanceId(a),
          b.fromArray(this._colorsTexture.image.data, 4 * a)
        );
      }
      setVisibleAt(a, b) {
        return (
          this.validateInstanceId(a),
          this._instanceInfo[a].visible === b ||
            ((this._instanceInfo[a].visible = b),
            (this._visibilityChanged = !0)),
          this
        );
      }
      getVisibleAt(a) {
        return (this.validateInstanceId(a), this._instanceInfo[a].visible);
      }
      setGeometryIdAt(a, b) {
        return (
          this.validateInstanceId(a),
          this.validateGeometryId(b),
          (this._instanceInfo[a].geometryIndex = b),
          this
        );
      }
      getGeometryIdAt(a) {
        return (
          this.validateInstanceId(a),
          this._instanceInfo[a].geometryIndex
        );
      }
      getGeometryRangeAt(a, b = {}) {
        this.validateGeometryId(a);
        let c = this._geometryInfo[a];
        return (
          (b.vertexStart = c.vertexStart),
          (b.vertexCount = c.vertexCount),
          (b.reservedVertexCount = c.reservedVertexCount),
          (b.indexStart = c.indexStart),
          (b.indexCount = c.indexCount),
          (b.reservedIndexCount = c.reservedIndexCount),
          (b.start = c.start),
          (b.count = c.count),
          b
        );
      }
      setInstanceCount(a) {
        let b = this._availableInstanceIds,
          c = this._instanceInfo;
        for (b.sort(dP); b[b.length - 1] === c.length - 1; ) (c.pop(), b.pop());
        if (a < c.length)
          throw Error(
            `BatchedMesh: Instance ids outside the range ${a} are being used. Cannot shrink instance count.`
          );
        let d = new Int32Array(a),
          e = new Int32Array(a);
        (d2(this._multiDrawCounts, d),
          d2(this._multiDrawStarts, e),
          (this._multiDrawCounts = d),
          (this._multiDrawStarts = e),
          (this._maxInstanceCount = a));
        let f = this._indirectTexture,
          g = this._matricesTexture,
          h = this._colorsTexture;
        (f.dispose(),
          this._initIndirectTexture(),
          d2(f.image.data, this._indirectTexture.image.data),
          g.dispose(),
          this._initMatricesTexture(),
          d2(g.image.data, this._matricesTexture.image.data),
          h &&
            (h.dispose(),
            this._initColorsTexture(),
            d2(h.image.data, this._colorsTexture.image.data)));
      }
      setGeometrySize(a, b) {
        let c = [...this._geometryInfo].filter((a) => a.active);
        if (
          Math.max(...c.map((a) => a.vertexStart + a.reservedVertexCount)) > a
        )
          throw Error(
            `BatchedMesh: Geometry vertex values are being used outside the range ${b}. Cannot shrink further.`
          );
        if (
          this.geometry.index &&
          Math.max(...c.map((a) => a.indexStart + a.reservedIndexCount)) > b
        )
          throw Error(
            `BatchedMesh: Geometry index values are being used outside the range ${b}. Cannot shrink further.`
          );
        let d = this.geometry;
        (d.dispose(),
          (this._maxVertexCount = a),
          (this._maxIndexCount = b),
          this._geometryInitialized &&
            ((this._geometryInitialized = !1),
            (this.geometry = new co()),
            this._initializeGeometry(d)));
        let e = this.geometry;
        for (let a in (d.index && d2(d.index.array, e.index.array),
        d.attributes))
          d2(d.attributes[a].array, e.attributes[a].array);
      }
      raycast(a, b) {
        let c = this._instanceInfo,
          d = this._geometryInfo,
          e = this.matrixWorld,
          f = this.geometry;
        ((d0.material = this.material),
          (d0.geometry.index = f.index),
          (d0.geometry.attributes = f.attributes),
          null === d0.geometry.boundingBox &&
            (d0.geometry.boundingBox = new aO()),
          null === d0.geometry.boundingSphere &&
            (d0.geometry.boundingSphere = new a4()));
        for (let f = 0, g = c.length; f < g; f++) {
          if (!c[f].visible || !c[f].active) continue;
          let g = c[f].geometryIndex,
            h = d[g];
          (d0.geometry.setDrawRange(h.start, h.count),
            this.getMatrixAt(f, d0.matrixWorld).premultiply(e),
            this.getBoundingBoxAt(g, d0.geometry.boundingBox),
            this.getBoundingSphereAt(g, d0.geometry.boundingSphere),
            d0.raycast(a, d1));
          for (let a = 0, c = d1.length; a < c; a++) {
            let c = d1[a];
            ((c.object = this), (c.batchId = f), b.push(c));
          }
          d1.length = 0;
        }
        ((d0.material = null),
          (d0.geometry.index = null),
          (d0.geometry.attributes = {}),
          d0.geometry.setDrawRange(0, 1 / 0));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.geometry = a.geometry.clone()),
          (this.perObjectFrustumCulled = a.perObjectFrustumCulled),
          (this.sortObjects = a.sortObjects),
          (this.boundingBox =
            null !== a.boundingBox ? a.boundingBox.clone() : null),
          (this.boundingSphere =
            null !== a.boundingSphere ? a.boundingSphere.clone() : null),
          (this._geometryInfo = a._geometryInfo.map((a) => ({
            ...a,
            boundingBox: null !== a.boundingBox ? a.boundingBox.clone() : null,
            boundingSphere:
              null !== a.boundingSphere ? a.boundingSphere.clone() : null,
          }))),
          (this._instanceInfo = a._instanceInfo.map((a) => ({ ...a }))),
          (this._availableInstanceIds = a._availableInstanceIds.slice()),
          (this._availableGeometryIds = a._availableGeometryIds.slice()),
          (this._nextIndexStart = a._nextIndexStart),
          (this._nextVertexStart = a._nextVertexStart),
          (this._geometryCount = a._geometryCount),
          (this._maxInstanceCount = a._maxInstanceCount),
          (this._maxVertexCount = a._maxVertexCount),
          (this._maxIndexCount = a._maxIndexCount),
          (this._geometryInitialized = a._geometryInitialized),
          (this._multiDrawCounts = a._multiDrawCounts.slice()),
          (this._multiDrawStarts = a._multiDrawStarts.slice()),
          (this._indirectTexture = a._indirectTexture.clone()),
          (this._indirectTexture.image.data =
            this._indirectTexture.image.data.slice()),
          (this._matricesTexture = a._matricesTexture.clone()),
          (this._matricesTexture.image.data =
            this._matricesTexture.image.data.slice()),
          null !== this._colorsTexture &&
            ((this._colorsTexture = a._colorsTexture.clone()),
            (this._colorsTexture.image.data =
              this._colorsTexture.image.data.slice())),
          this
        );
      }
      dispose() {
        (this.geometry.dispose(),
          this._matricesTexture.dispose(),
          (this._matricesTexture = null),
          this._indirectTexture.dispose(),
          (this._indirectTexture = null),
          null !== this._colorsTexture &&
            (this._colorsTexture.dispose(), (this._colorsTexture = null)));
      }
      onBeforeRender(a, b, c, d, e) {
        if (
          !this._visibilityChanged &&
          !this.perObjectFrustumCulled &&
          !this.sortObjects
        )
          return;
        let f = d.getIndex(),
          g = null === f ? 1 : f.array.BYTES_PER_ELEMENT,
          h = this._instanceInfo,
          i = this._multiDrawStarts,
          j = this._multiDrawCounts,
          k = this._geometryInfo,
          l = this.perObjectFrustumCulled,
          m = this._indirectTexture,
          n = m.image.data,
          o = c.isArrayCamera ? dV : dU;
        l &&
          !c.isArrayCamera &&
          (dS
            .multiplyMatrices(c.projectionMatrix, c.matrixWorldInverse)
            .multiply(this.matrixWorld),
          dU.setFromProjectionMatrix(dS, c.coordinateSystem, c.reversedDepth));
        let p = 0;
        if (this.sortObjects) {
          (dS.copy(this.matrixWorld).invert(),
            dY.setFromMatrixPosition(c.matrixWorld).applyMatrix4(dS),
            dZ
              .set(0, 0, -1)
              .transformDirection(c.matrixWorld)
              .transformDirection(dS));
          for (let a = 0, b = h.length; a < b; a++)
            if (h[a].visible && h[a].active) {
              let b = h[a].geometryIndex;
              (this.getMatrixAt(a, dS),
                this.getBoundingSphereAt(b, dX).applyMatrix4(dS));
              let d = !1;
              if ((l && (d = !o.intersectsSphere(dX, c)), !d)) {
                let c = k[b],
                  d = d$.subVectors(dX.center, dY).dot(dZ);
                d_.push(c.start, c.count, d, a);
              }
            }
          let a = d_.list,
            b = this.customSort;
          null === b ? a.sort(e.transparent ? dR : dQ) : b.call(this, a, c);
          for (let b = 0, c = a.length; b < c; b++) {
            let c = a[b];
            ((i[p] = c.start * g), (j[p] = c.count), (n[p] = c.index), p++);
          }
          d_.reset();
        } else
          for (let a = 0, b = h.length; a < b; a++)
            if (h[a].visible && h[a].active) {
              let b = h[a].geometryIndex,
                d = !1;
              if (
                (l &&
                  (this.getMatrixAt(a, dS),
                  this.getBoundingSphereAt(b, dX).applyMatrix4(dS),
                  (d = !o.intersectsSphere(dX, c))),
                !d)
              ) {
                let c = k[b];
                ((i[p] = c.start * g), (j[p] = c.count), (n[p] = a), p++);
              }
            }
        ((m.needsUpdate = !0),
          (this._multiDrawCount = p),
          (this._visibilityChanged = !1));
      }
      onBeforeShadow(a, b, c, d, e, f) {
        this.onBeforeRender(a, null, d, e, f);
      }
    }
    class d4 extends b$ {
      constructor(a) {
        (super(),
          (this.isLineBasicMaterial = !0),
          (this.type = 'LineBasicMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.linewidth = 1),
          (this.linecap = 'round'),
          (this.linejoin = 'round'),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.linewidth = a.linewidth),
          (this.linecap = a.linecap),
          (this.linejoin = a.linejoin),
          (this.fog = a.fog),
          this
        );
      }
    }
    let d5 = new aq(),
      d6 = new aq(),
      d7 = new bd(),
      d8 = new bc(),
      d9 = new a4(),
      ea = new aq(),
      eb = new aq();
    class ec extends bE {
      constructor(a = new co(), b = new d4()) {
        (super(),
          (this.isLine = !0),
          (this.type = 'Line'),
          (this.geometry = a),
          (this.material = b),
          (this.morphTargetDictionary = void 0),
          (this.morphTargetInfluences = void 0),
          this.updateMorphTargets());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.material = Array.isArray(a.material)
            ? a.material.slice()
            : a.material),
          (this.geometry = a.geometry),
          this
        );
      }
      computeLineDistances() {
        let a = this.geometry;
        if (null === a.index) {
          let b = a.attributes.position,
            c = [0];
          for (let a = 1, d = b.count; a < d; a++)
            (d5.fromBufferAttribute(b, a - 1),
              d6.fromBufferAttribute(b, a),
              (c[a] = c[a - 1]),
              (c[a] += d5.distanceTo(d6)));
          a.setAttribute('lineDistance', new cg(c, 1));
        } else
          _(
            'Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.'
          );
        return this;
      }
      raycast(a, b) {
        let c = this.geometry,
          d = this.matrixWorld,
          e = a.params.Line.threshold,
          f = c.drawRange;
        if (
          (null === c.boundingSphere && c.computeBoundingSphere(),
          d9.copy(c.boundingSphere),
          d9.applyMatrix4(d),
          (d9.radius += e),
          !1 === a.ray.intersectsSphere(d9))
        )
          return;
        (d7.copy(d).invert(), d8.copy(a.ray).applyMatrix4(d7));
        let g = e / ((this.scale.x + this.scale.y + this.scale.z) / 3),
          h = g * g,
          i = this.isLineSegments ? 2 : 1,
          j = c.index,
          k = c.attributes.position;
        if (null !== j) {
          let c = Math.max(0, f.start),
            d = Math.min(j.count, f.start + f.count);
          for (let e = c, f = d - 1; e < f; e += i) {
            let c = ed(this, a, d8, h, j.getX(e), j.getX(e + 1), e);
            c && b.push(c);
          }
          if (this.isLineLoop) {
            let e = ed(this, a, d8, h, j.getX(d - 1), j.getX(c), d - 1);
            e && b.push(e);
          }
        } else {
          let c = Math.max(0, f.start),
            d = Math.min(k.count, f.start + f.count);
          for (let e = c, f = d - 1; e < f; e += i) {
            let c = ed(this, a, d8, h, e, e + 1, e);
            c && b.push(c);
          }
          if (this.isLineLoop) {
            let e = ed(this, a, d8, h, d - 1, c, d - 1);
            e && b.push(e);
          }
        }
      }
      updateMorphTargets() {
        let a = this.geometry.morphAttributes,
          b = Object.keys(a);
        if (b.length > 0) {
          let c = a[b[0]];
          if (void 0 !== c) {
            ((this.morphTargetInfluences = []),
              (this.morphTargetDictionary = {}));
            for (let a = 0, b = c.length; a < b; a++) {
              let b = c[a].name || String(a);
              (this.morphTargetInfluences.push(0),
                (this.morphTargetDictionary[b] = a));
            }
          }
        }
      }
    }
    function ed(a, b, c, d, e, f, g) {
      let h = a.geometry.attributes.position;
      if (
        (d5.fromBufferAttribute(h, e),
        d6.fromBufferAttribute(h, f),
        c.distanceSqToSegment(d5, d6, ea, eb) > d)
      )
        return;
      ea.applyMatrix4(a.matrixWorld);
      let i = b.ray.origin.distanceTo(ea);
      if (!(i < b.near) && !(i > b.far))
        return {
          distance: i,
          point: eb.clone().applyMatrix4(a.matrixWorld),
          index: g,
          face: null,
          faceIndex: null,
          barycoord: null,
          object: a,
        };
    }
    let ee = new aq(),
      ef = new aq();
    class eg extends ec {
      constructor(a, b) {
        (super(a, b), (this.isLineSegments = !0), (this.type = 'LineSegments'));
      }
      computeLineDistances() {
        let a = this.geometry;
        if (null === a.index) {
          let b = a.attributes.position,
            c = [];
          for (let a = 0, d = b.count; a < d; a += 2)
            (ee.fromBufferAttribute(b, a),
              ef.fromBufferAttribute(b, a + 1),
              (c[a] = 0 === a ? 0 : c[a - 1]),
              (c[a + 1] = c[a] + ee.distanceTo(ef)));
          a.setAttribute('lineDistance', new cg(c, 1));
        } else
          _(
            'LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.'
          );
        return this;
      }
    }
    class eh extends ec {
      constructor(a, b) {
        (super(a, b), (this.isLineLoop = !0), (this.type = 'LineLoop'));
      }
    }
    class ei extends b$ {
      constructor(a) {
        (super(),
          (this.isPointsMaterial = !0),
          (this.type = 'PointsMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.alphaMap = null),
          (this.size = 1),
          (this.sizeAttenuation = !0),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.alphaMap = a.alphaMap),
          (this.size = a.size),
          (this.sizeAttenuation = a.sizeAttenuation),
          (this.fog = a.fog),
          this
        );
      }
    }
    let ej = new bd(),
      ek = new bc(),
      el = new a4(),
      em = new aq();
    class en extends bE {
      constructor(a = new co(), b = new ei()) {
        (super(),
          (this.isPoints = !0),
          (this.type = 'Points'),
          (this.geometry = a),
          (this.material = b),
          (this.morphTargetDictionary = void 0),
          (this.morphTargetInfluences = void 0),
          this.updateMorphTargets());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.material = Array.isArray(a.material)
            ? a.material.slice()
            : a.material),
          (this.geometry = a.geometry),
          this
        );
      }
      raycast(a, b) {
        let c = this.geometry,
          d = this.matrixWorld,
          e = a.params.Points.threshold,
          f = c.drawRange;
        if (
          (null === c.boundingSphere && c.computeBoundingSphere(),
          el.copy(c.boundingSphere),
          el.applyMatrix4(d),
          (el.radius += e),
          !1 === a.ray.intersectsSphere(el))
        )
          return;
        (ej.copy(d).invert(), ek.copy(a.ray).applyMatrix4(ej));
        let g = e / ((this.scale.x + this.scale.y + this.scale.z) / 3),
          h = g * g,
          i = c.index,
          j = c.attributes.position;
        if (null !== i) {
          let c = Math.max(0, f.start),
            e = Math.min(i.count, f.start + f.count);
          for (let f = c; f < e; f++) {
            let c = i.getX(f);
            (em.fromBufferAttribute(j, c), eo(em, c, h, d, a, b, this));
          }
        } else {
          let c = Math.max(0, f.start),
            e = Math.min(j.count, f.start + f.count);
          for (let f = c; f < e; f++)
            (em.fromBufferAttribute(j, f), eo(em, f, h, d, a, b, this));
        }
      }
      updateMorphTargets() {
        let a = this.geometry.morphAttributes,
          b = Object.keys(a);
        if (b.length > 0) {
          let c = a[b[0]];
          if (void 0 !== c) {
            ((this.morphTargetInfluences = []),
              (this.morphTargetDictionary = {}));
            for (let a = 0, b = c.length; a < b; a++) {
              let b = c[a].name || String(a);
              (this.morphTargetInfluences.push(0),
                (this.morphTargetDictionary[b] = a));
            }
          }
        }
      }
    }
    function eo(a, b, c, d, e, f, g) {
      let h = ek.distanceSqToPoint(a);
      if (h < c) {
        let c = new aq();
        (ek.closestPointToPoint(a, c), c.applyMatrix4(d));
        let i = e.ray.origin.distanceTo(c);
        if (i < e.near || i > e.far) return;
        f.push({
          distance: i,
          distanceToRay: Math.sqrt(h),
          point: c,
          index: b,
          face: null,
          faceIndex: null,
          barycoord: null,
          object: g,
        });
      }
    }
    class ep extends aG {
      constructor(a, b, c, d, e = 1006, f = 1006, g, h, i) {
        (super(a, b, c, d, e, f, g, h, i),
          (this.isVideoTexture = !0),
          (this.generateMipmaps = !1),
          (this._requestVideoFrameCallbackId = 0));
        const j = this;
        'requestVideoFrameCallback' in a &&
          (this._requestVideoFrameCallbackId = a.requestVideoFrameCallback(
            function b() {
              ((j.needsUpdate = !0),
                (j._requestVideoFrameCallbackId =
                  a.requestVideoFrameCallback(b)));
            }
          ));
      }
      clone() {
        return new this.constructor(this.image).copy(this);
      }
      update() {
        let a = this.image;
        !1 == 'requestVideoFrameCallback' in a &&
          a.readyState >= a.HAVE_CURRENT_DATA &&
          (this.needsUpdate = !0);
      }
      dispose() {
        (0 !== this._requestVideoFrameCallbackId &&
          (this.source.data.cancelVideoFrameCallback(
            this._requestVideoFrameCallbackId
          ),
          (this._requestVideoFrameCallbackId = 0)),
          super.dispose());
      }
    }
    class eq extends ep {
      constructor(a, b, c, d, e, f, g, h) {
        (super({}, a, b, c, d, e, f, g, h), (this.isVideoFrameTexture = !0));
      }
      update() {}
      clone() {
        return new this.constructor().copy(this);
      }
      setFrame(a) {
        ((this.image = a), (this.needsUpdate = !0));
      }
    }
    class er extends aG {
      constructor(a, b) {
        (super({ width: a, height: b }),
          (this.isFramebufferTexture = !0),
          (this.magFilter = 1003),
          (this.minFilter = 1003),
          (this.generateMipmaps = !1),
          (this.needsUpdate = !0));
      }
    }
    class es extends aG {
      constructor(a, b, c, d, e, f, g, h, i, j, k, l) {
        (super(null, f, g, h, i, j, d, e, k, l),
          (this.isCompressedTexture = !0),
          (this.image = { width: b, height: c }),
          (this.mipmaps = a),
          (this.flipY = !1),
          (this.generateMipmaps = !1));
      }
    }
    class et extends es {
      constructor(a, b, c, d, e, f) {
        (super(a, b, c, e, f),
          (this.isCompressedArrayTexture = !0),
          (this.image.depth = d),
          (this.wrapR = 1001),
          (this.layerUpdates = new Set()));
      }
      addLayerUpdate(a) {
        this.layerUpdates.add(a);
      }
      clearLayerUpdates() {
        this.layerUpdates.clear();
      }
    }
    class eu extends es {
      constructor(a, b, c) {
        (super(void 0, a[0].width, a[0].height, b, c, 301),
          (this.isCompressedCubeTexture = !0),
          (this.isCubeTexture = !0),
          (this.image = a));
      }
    }
    class ev extends aG {
      constructor(a, b, c, d, e, f, g, h, i) {
        (super(a, b, c, d, e, f, g, h, i),
          (this.isCanvasTexture = !0),
          (this.needsUpdate = !0));
      }
    }
    class ew extends aG {
      constructor(
        a,
        b,
        c = 1014,
        d,
        e,
        f,
        g = 1003,
        h = 1003,
        i,
        j = 1026,
        k = 1
      ) {
        if (1026 !== j && 1027 !== j)
          throw Error(
            'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat'
          );
        (super({ width: a, height: b, depth: k }, d, e, f, g, h, j, c, i),
          (this.isDepthTexture = !0),
          (this.flipY = !1),
          (this.generateMipmaps = !1),
          (this.compareFunction = null));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.source = new aC(Object.assign({}, a.image))),
          (this.compareFunction = a.compareFunction),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          null !== this.compareFunction &&
            (b.compareFunction = this.compareFunction),
          b
        );
      }
    }
    class ex extends ew {
      constructor(a, b = 1014, c = 301, d, e, f = 1003, g = 1003, h, i = 1026) {
        const j = { width: a, height: a, depth: 1 };
        (super(a, a, b, c, d, e, f, g, h, i),
          (this.image = [j, j, j, j, j, j]),
          (this.isCubeDepthTexture = !0),
          (this.isCubeTexture = !0));
      }
      get images() {
        return this.image;
      }
      set images(a) {
        this.image = a;
      }
    }
    class ey extends aG {
      constructor(a = null) {
        (super(), (this.sourceTexture = a), (this.isExternalTexture = !0));
      }
      copy(a) {
        return (super.copy(a), (this.sourceTexture = a.sourceTexture), this);
      }
    }
    class ez extends co {
      constructor(a = 1, b = 1, c = 4, d = 8, e = 1) {
        (super(),
          (this.type = 'CapsuleGeometry'),
          (this.parameters = {
            radius: a,
            height: b,
            capSegments: c,
            radialSegments: d,
            heightSegments: e,
          }),
          (b = Math.max(0, b)),
          (c = Math.max(1, Math.floor(c))),
          (d = Math.max(3, Math.floor(d))));
        const f = [],
          g = [],
          h = [],
          i = [],
          j = b / 2,
          k = (Math.PI / 2) * a,
          l = b,
          m = 2 * k + l,
          n = 2 * c + (e = Math.max(1, Math.floor(e))),
          o = d + 1,
          p = new aq(),
          q = new aq();
        for (let r = 0; r <= n; r++) {
          let s = 0,
            t = 0,
            u = 0,
            v = 0;
          if (r <= c) {
            const b = r / c,
              d = (b * Math.PI) / 2;
            ((t = -j - a * Math.cos(d)),
              (u = a * Math.sin(d)),
              (v = -a * Math.cos(d)),
              (s = b * k));
          } else if (r <= c + e) {
            const d = (r - c) / e;
            ((t = -j + d * b), (u = a), (v = 0), (s = k + d * l));
          } else {
            const b = (r - c - e) / c,
              d = (b * Math.PI) / 2;
            ((t = j + a * Math.sin(d)),
              (u = a * Math.cos(d)),
              (v = a * Math.sin(d)),
              (s = k + l + b * k));
          }
          const w = Math.max(0, Math.min(1, s / m));
          let x = 0;
          0 === r ? (x = 0.5 / d) : r === n && (x = -0.5 / d);
          for (let a = 0; a <= d; a++) {
            const b = a / d,
              c = b * Math.PI * 2,
              e = Math.sin(c),
              f = Math.cos(c);
            ((q.x = -u * f),
              (q.y = t),
              (q.z = u * e),
              g.push(q.x, q.y, q.z),
              p.set(-u * f, v, u * e),
              p.normalize(),
              h.push(p.x, p.y, p.z),
              i.push(b + x, w));
          }
          if (r > 0) {
            const a = (r - 1) * o;
            for (let b = 0; b < d; b++) {
              const c = a + b,
                d = a + b + 1,
                e = r * o + b,
                g = r * o + b + 1;
              (f.push(c, d, e), f.push(d, g, e));
            }
          }
        }
        (this.setIndex(f),
          this.setAttribute('position', new cg(g, 3)),
          this.setAttribute('normal', new cg(h, 3)),
          this.setAttribute('uv', new cg(i, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new ez(
          a.radius,
          a.height,
          a.capSegments,
          a.radialSegments,
          a.heightSegments
        );
      }
    }
    class eA extends co {
      constructor(a = 1, b = 32, c = 0, d = 2 * Math.PI) {
        (super(),
          (this.type = 'CircleGeometry'),
          (this.parameters = {
            radius: a,
            segments: b,
            thetaStart: c,
            thetaLength: d,
          }),
          (b = Math.max(3, b)));
        const e = [],
          f = [],
          g = [],
          h = [],
          i = new aq(),
          j = new ao();
        (f.push(0, 0, 0), g.push(0, 0, 1), h.push(0.5, 0.5));
        for (let e = 0, k = 3; e <= b; e++, k += 3) {
          const l = c + (e / b) * d;
          ((i.x = a * Math.cos(l)),
            (i.y = a * Math.sin(l)),
            f.push(i.x, i.y, i.z),
            g.push(0, 0, 1),
            (j.x = (f[k] / a + 1) / 2),
            (j.y = (f[k + 1] / a + 1) / 2),
            h.push(j.x, j.y));
        }
        for (let a = 1; a <= b; a++) e.push(a, a + 1, 0);
        (this.setIndex(e),
          this.setAttribute('position', new cg(f, 3)),
          this.setAttribute('normal', new cg(g, 3)),
          this.setAttribute('uv', new cg(h, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new eA(a.radius, a.segments, a.thetaStart, a.thetaLength);
      }
    }
    class eB extends co {
      constructor(
        a = 1,
        b = 1,
        c = 1,
        d = 32,
        e = 1,
        f = !1,
        g = 0,
        h = 2 * Math.PI
      ) {
        (super(),
          (this.type = 'CylinderGeometry'),
          (this.parameters = {
            radiusTop: a,
            radiusBottom: b,
            height: c,
            radialSegments: d,
            heightSegments: e,
            openEnded: f,
            thetaStart: g,
            thetaLength: h,
          }));
        const i = this;
        ((d = Math.floor(d)), (e = Math.floor(e)));
        const j = [],
          k = [],
          l = [],
          m = [];
        let n = 0;
        const o = [],
          p = c / 2;
        let q = 0;
        function r(c) {
          let e = n,
            f = new ao(),
            o = new aq(),
            r = 0,
            s = !0 === c ? a : b,
            t = !0 === c ? 1 : -1;
          for (let a = 1; a <= d; a++)
            (k.push(0, p * t, 0), l.push(0, t, 0), m.push(0.5, 0.5), n++);
          let u = n;
          for (let a = 0; a <= d; a++) {
            let b = (a / d) * h + g,
              c = Math.cos(b),
              e = Math.sin(b);
            ((o.x = s * e),
              (o.y = p * t),
              (o.z = s * c),
              k.push(o.x, o.y, o.z),
              l.push(0, t, 0),
              (f.x = 0.5 * c + 0.5),
              (f.y = 0.5 * e * t + 0.5),
              m.push(f.x, f.y),
              n++);
          }
          for (let a = 0; a < d; a++) {
            let b = e + a,
              d = u + a;
            (!0 === c ? j.push(d, d + 1, b) : j.push(d + 1, d, b), (r += 3));
          }
          (i.addGroup(q, r, !0 === c ? 1 : 2), (q += r));
        }
        ((function () {
          let f = new aq(),
            r = new aq(),
            s = 0,
            t = (b - a) / c;
          for (let i = 0; i <= e; i++) {
            let j = [],
              q = i / e,
              s = q * (b - a) + a;
            for (let a = 0; a <= d; a++) {
              let b = a / d,
                e = b * h + g,
                i = Math.sin(e),
                o = Math.cos(e);
              ((r.x = s * i),
                (r.y = -q * c + p),
                (r.z = s * o),
                k.push(r.x, r.y, r.z),
                f.set(i, t, o).normalize(),
                l.push(f.x, f.y, f.z),
                m.push(b, 1 - q),
                j.push(n++));
            }
            o.push(j);
          }
          for (let c = 0; c < d; c++)
            for (let d = 0; d < e; d++) {
              let f = o[d][c],
                g = o[d + 1][c],
                h = o[d + 1][c + 1],
                i = o[d][c + 1];
              ((a > 0 || 0 !== d) && (j.push(f, g, i), (s += 3)),
                (b > 0 || d !== e - 1) && (j.push(g, h, i), (s += 3)));
            }
          (i.addGroup(q, s, 0), (q += s));
        })(),
          !1 === f && (a > 0 && r(!0), b > 0 && r(!1)),
          this.setIndex(j),
          this.setAttribute('position', new cg(k, 3)),
          this.setAttribute('normal', new cg(l, 3)),
          this.setAttribute('uv', new cg(m, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new eB(
          a.radiusTop,
          a.radiusBottom,
          a.height,
          a.radialSegments,
          a.heightSegments,
          a.openEnded,
          a.thetaStart,
          a.thetaLength
        );
      }
    }
    class eC extends eB {
      constructor(a = 1, b = 1, c = 32, d = 1, e = !1, f = 0, g = 2 * Math.PI) {
        (super(0, a, b, c, d, e, f, g),
          (this.type = 'ConeGeometry'),
          (this.parameters = {
            radius: a,
            height: b,
            radialSegments: c,
            heightSegments: d,
            openEnded: e,
            thetaStart: f,
            thetaLength: g,
          }));
      }
      static fromJSON(a) {
        return new eC(
          a.radius,
          a.height,
          a.radialSegments,
          a.heightSegments,
          a.openEnded,
          a.thetaStart,
          a.thetaLength
        );
      }
    }
    class eD extends co {
      constructor(a = [], b = [], c = 1, d = 0) {
        (super(),
          (this.type = 'PolyhedronGeometry'),
          (this.parameters = {
            vertices: a,
            indices: b,
            radius: c,
            detail: d,
          }));
        const e = [],
          f = [];
        function g(a) {
          e.push(a.x, a.y, a.z);
        }
        function h(b, c) {
          let d = 3 * b;
          ((c.x = a[d + 0]), (c.y = a[d + 1]), (c.z = a[d + 2]));
        }
        function i(a, b, c, d) {
          (d < 0 && 1 === a.x && (f[b] = a.x - 1),
            0 === c.x && 0 === c.z && (f[b] = d / 2 / Math.PI + 0.5));
        }
        function j(a) {
          return Math.atan2(a.z, -a.x);
        }
        ((function (a) {
          let c = new aq(),
            d = new aq(),
            e = new aq();
          for (let f = 0; f < b.length; f += 3)
            (h(b[f + 0], c),
              h(b[f + 1], d),
              h(b[f + 2], e),
              (function (a, b, c, d) {
                let e = d + 1,
                  f = [];
                for (let d = 0; d <= e; d++) {
                  f[d] = [];
                  let g = a.clone().lerp(c, d / e),
                    h = b.clone().lerp(c, d / e),
                    i = e - d;
                  for (let a = 0; a <= i; a++)
                    0 === a && d === e
                      ? (f[d][a] = g)
                      : (f[d][a] = g.clone().lerp(h, a / i));
                }
                for (let a = 0; a < e; a++)
                  for (let b = 0; b < 2 * (e - a) - 1; b++) {
                    let c = Math.floor(b / 2);
                    b % 2 == 0
                      ? (g(f[a][c + 1]), g(f[a + 1][c]), g(f[a][c]))
                      : (g(f[a][c + 1]), g(f[a + 1][c + 1]), g(f[a + 1][c]));
                  }
              })(c, d, e, a));
        })(d),
          (function (a) {
            let b = new aq();
            for (let c = 0; c < e.length; c += 3)
              ((b.x = e[c + 0]),
                (b.y = e[c + 1]),
                (b.z = e[c + 2]),
                b.normalize().multiplyScalar(a),
                (e[c + 0] = b.x),
                (e[c + 1] = b.y),
                (e[c + 2] = b.z));
          })(c),
          (function () {
            let a = new aq();
            for (let c = 0; c < e.length; c += 3) {
              var b;
              ((a.x = e[c + 0]), (a.y = e[c + 1]), (a.z = e[c + 2]));
              let d = j(a) / 2 / Math.PI + 0.5,
                g =
                  Math.atan2(-(b = a).y, Math.sqrt(b.x * b.x + b.z * b.z)) /
                    Math.PI +
                  0.5;
              f.push(d, 1 - g);
            }
            ((function () {
              let a = new aq(),
                b = new aq(),
                c = new aq(),
                d = new aq(),
                g = new ao(),
                h = new ao(),
                k = new ao();
              for (let l = 0, m = 0; l < e.length; l += 9, m += 6) {
                (a.set(e[l + 0], e[l + 1], e[l + 2]),
                  b.set(e[l + 3], e[l + 4], e[l + 5]),
                  c.set(e[l + 6], e[l + 7], e[l + 8]),
                  g.set(f[m + 0], f[m + 1]),
                  h.set(f[m + 2], f[m + 3]),
                  k.set(f[m + 4], f[m + 5]),
                  d.copy(a).add(b).add(c).divideScalar(3));
                let n = j(d);
                (i(g, m + 0, a, n), i(h, m + 2, b, n), i(k, m + 4, c, n));
              }
            })(),
              (function () {
                for (let a = 0; a < f.length; a += 6) {
                  let b = f[a + 0],
                    c = f[a + 2],
                    d = f[a + 4],
                    e = Math.max(b, c, d),
                    g = Math.min(b, c, d);
                  e > 0.9 &&
                    g < 0.1 &&
                    (b < 0.2 && (f[a + 0] += 1),
                    c < 0.2 && (f[a + 2] += 1),
                    d < 0.2 && (f[a + 4] += 1));
                }
              })());
          })(),
          this.setAttribute('position', new cg(e, 3)),
          this.setAttribute('normal', new cg(e.slice(), 3)),
          this.setAttribute('uv', new cg(f, 2)),
          0 === d ? this.computeVertexNormals() : this.normalizeNormals());
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new eD(a.vertices, a.indices, a.radius, a.detail);
      }
    }
    class eE extends eD {
      constructor(a = 1, b = 0) {
        const c = (1 + Math.sqrt(5)) / 2,
          d = 1 / c;
        (super(
          [
            -1,
            -1,
            -1,
            -1,
            -1,
            1,
            -1,
            1,
            -1,
            -1,
            1,
            1,
            1,
            -1,
            -1,
            1,
            -1,
            1,
            1,
            1,
            -1,
            1,
            1,
            1,
            0,
            -d,
            -c,
            0,
            -d,
            c,
            0,
            d,
            -c,
            0,
            d,
            c,
            -d,
            -c,
            0,
            -d,
            c,
            0,
            d,
            -c,
            0,
            d,
            c,
            0,
            -c,
            0,
            -d,
            c,
            0,
            -d,
            -c,
            0,
            d,
            c,
            0,
            d,
          ],
          [
            3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4,
            8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0,
            1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18,
            3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4,
            0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4,
            17, 1, 12, 14, 1, 14, 5, 1, 5, 9,
          ],
          a,
          b
        ),
          (this.type = 'DodecahedronGeometry'),
          (this.parameters = { radius: a, detail: b }));
      }
      static fromJSON(a) {
        return new eE(a.radius, a.detail);
      }
    }
    let eF = new aq(),
      eG = new aq(),
      eH = new aq(),
      eI = new bS();
    class eJ extends co {
      constructor(a = null, b = 1) {
        if (
          (super(),
          (this.type = 'EdgesGeometry'),
          (this.parameters = { geometry: a, thresholdAngle: b }),
          null !== a)
        ) {
          const c = Math.cos(af * b),
            d = a.getIndex(),
            e = a.getAttribute('position'),
            f = d ? d.count : e.count,
            g = [0, 0, 0],
            h = ['a', 'b', 'c'],
            i = [, , ,],
            j = {},
            k = [];
          for (let a = 0; a < f; a += 3) {
            d
              ? ((g[0] = d.getX(a)),
                (g[1] = d.getX(a + 1)),
                (g[2] = d.getX(a + 2)))
              : ((g[0] = a), (g[1] = a + 1), (g[2] = a + 2));
            const { a: b, b: f, c: l } = eI;
            if (
              (b.fromBufferAttribute(e, g[0]),
              f.fromBufferAttribute(e, g[1]),
              l.fromBufferAttribute(e, g[2]),
              eI.getNormal(eH),
              (i[0] = `${Math.round(1e4 * b.x)},${Math.round(1e4 * b.y)},${Math.round(1e4 * b.z)}`),
              (i[1] = `${Math.round(1e4 * f.x)},${Math.round(1e4 * f.y)},${Math.round(1e4 * f.z)}`),
              (i[2] = `${Math.round(1e4 * l.x)},${Math.round(1e4 * l.y)},${Math.round(1e4 * l.z)}`),
              i[0] !== i[1] && i[1] !== i[2] && i[2] !== i[0])
            )
              for (let a = 0; a < 3; a++) {
                const b = (a + 1) % 3,
                  d = i[a],
                  e = i[b],
                  f = eI[h[a]],
                  l = eI[h[b]],
                  m = `${d}_${e}`,
                  n = `${e}_${d}`;
                n in j && j[n]
                  ? (eH.dot(j[n].normal) <= c &&
                      (k.push(f.x, f.y, f.z), k.push(l.x, l.y, l.z)),
                    (j[n] = null))
                  : m in j ||
                    (j[m] = { index0: g[a], index1: g[b], normal: eH.clone() });
              }
          }
          for (const a in j)
            if (j[a]) {
              const { index0: b, index1: c } = j[a];
              (eF.fromBufferAttribute(e, b),
                eG.fromBufferAttribute(e, c),
                k.push(eF.x, eF.y, eF.z),
                k.push(eG.x, eG.y, eG.z));
            }
          this.setAttribute('position', new cg(k, 3));
        }
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
    }
    class eK {
      constructor() {
        ((this.type = 'Curve'),
          (this.arcLengthDivisions = 200),
          (this.needsUpdate = !1),
          (this.cacheArcLengths = null));
      }
      getPoint() {
        _('Curve: .getPoint() not implemented.');
      }
      getPointAt(a, b) {
        let c = this.getUtoTmapping(a);
        return this.getPoint(c, b);
      }
      getPoints(a = 5) {
        let b = [];
        for (let c = 0; c <= a; c++) b.push(this.getPoint(c / a));
        return b;
      }
      getSpacedPoints(a = 5) {
        let b = [];
        for (let c = 0; c <= a; c++) b.push(this.getPointAt(c / a));
        return b;
      }
      getLength() {
        let a = this.getLengths();
        return a[a.length - 1];
      }
      getLengths(a = this.arcLengthDivisions) {
        if (
          this.cacheArcLengths &&
          this.cacheArcLengths.length === a + 1 &&
          !this.needsUpdate
        )
          return this.cacheArcLengths;
        this.needsUpdate = !1;
        let b = [],
          c,
          d = this.getPoint(0),
          e = 0;
        b.push(0);
        for (let f = 1; f <= a; f++)
          (b.push((e += (c = this.getPoint(f / a)).distanceTo(d))), (d = c));
        return ((this.cacheArcLengths = b), b);
      }
      updateArcLengths() {
        ((this.needsUpdate = !0), this.getLengths());
      }
      getUtoTmapping(a, b = null) {
        let c,
          d = this.getLengths(),
          e = 0,
          f = d.length;
        c = b || a * d[f - 1];
        let g = 0,
          h = f - 1,
          i;
        for (; g <= h; )
          if ((i = d[(e = Math.floor(g + (h - g) / 2))] - c) < 0) g = e + 1;
          else if (i > 0) h = e - 1;
          else {
            h = e;
            break;
          }
        if (d[(e = h)] === c) return e / (f - 1);
        let j = d[e],
          k = d[e + 1];
        return (e + (c - j) / (k - j)) / (f - 1);
      }
      getTangent(a, b) {
        let c = a - 1e-4,
          d = a + 1e-4;
        (c < 0 && (c = 0), d > 1 && (d = 1));
        let e = this.getPoint(c),
          f = this.getPoint(d),
          g = b || (e.isVector2 ? new ao() : new aq());
        return (g.copy(f).sub(e).normalize(), g);
      }
      getTangentAt(a, b) {
        let c = this.getUtoTmapping(a);
        return this.getTangent(c, b);
      }
      computeFrenetFrames(a, b = !1) {
        let c = new aq(),
          d = [],
          e = [],
          f = [],
          g = new aq(),
          h = new bd();
        for (let b = 0; b <= a; b++) {
          let c = b / a;
          d[b] = this.getTangentAt(c, new aq());
        }
        ((e[0] = new aq()), (f[0] = new aq()));
        let i = Number.MAX_VALUE,
          j = Math.abs(d[0].x),
          k = Math.abs(d[0].y),
          l = Math.abs(d[0].z);
        (j <= i && ((i = j), c.set(1, 0, 0)),
          k <= i && ((i = k), c.set(0, 1, 0)),
          l <= i && c.set(0, 0, 1),
          g.crossVectors(d[0], c).normalize(),
          e[0].crossVectors(d[0], g),
          f[0].crossVectors(d[0], e[0]));
        for (let b = 1; b <= a; b++) {
          if (
            ((e[b] = e[b - 1].clone()),
            (f[b] = f[b - 1].clone()),
            g.crossVectors(d[b - 1], d[b]),
            g.length() > Number.EPSILON)
          ) {
            g.normalize();
            let a = Math.acos(ai(d[b - 1].dot(d[b]), -1, 1));
            e[b].applyMatrix4(h.makeRotationAxis(g, a));
          }
          f[b].crossVectors(d[b], e[b]);
        }
        if (!0 === b) {
          let b = Math.acos(ai(e[0].dot(e[a]), -1, 1));
          ((b /= a), d[0].dot(g.crossVectors(e[0], e[a])) > 0 && (b = -b));
          for (let c = 1; c <= a; c++)
            (e[c].applyMatrix4(h.makeRotationAxis(d[c], b * c)),
              f[c].crossVectors(d[c], e[c]));
        }
        return { tangents: d, normals: e, binormals: f };
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        return ((this.arcLengthDivisions = a.arcLengthDivisions), this);
      }
      toJSON() {
        let a = {
          metadata: { version: 4.7, type: 'Curve', generator: 'Curve.toJSON' },
        };
        return (
          (a.arcLengthDivisions = this.arcLengthDivisions),
          (a.type = this.type),
          a
        );
      }
      fromJSON(a) {
        return ((this.arcLengthDivisions = a.arcLengthDivisions), this);
      }
    }
    class eL extends eK {
      constructor(
        a = 0,
        b = 0,
        c = 1,
        d = 1,
        e = 0,
        f = 2 * Math.PI,
        g = !1,
        h = 0
      ) {
        (super(),
          (this.isEllipseCurve = !0),
          (this.type = 'EllipseCurve'),
          (this.aX = a),
          (this.aY = b),
          (this.xRadius = c),
          (this.yRadius = d),
          (this.aStartAngle = e),
          (this.aEndAngle = f),
          (this.aClockwise = g),
          (this.aRotation = h));
      }
      getPoint(a, b = new ao()) {
        let c = 2 * Math.PI,
          d = this.aEndAngle - this.aStartAngle,
          e = Math.abs(d) < Number.EPSILON;
        for (; d < 0; ) d += c;
        for (; d > c; ) d -= c;
        (d < Number.EPSILON && (d = e ? 0 : c),
          !0 !== this.aClockwise || e || (d === c ? (d = -c) : (d -= c)));
        let f = this.aStartAngle + a * d,
          g = this.aX + this.xRadius * Math.cos(f),
          h = this.aY + this.yRadius * Math.sin(f);
        if (0 !== this.aRotation) {
          let a = Math.cos(this.aRotation),
            b = Math.sin(this.aRotation),
            c = g - this.aX,
            d = h - this.aY;
          ((g = c * a - d * b + this.aX), (h = c * b + d * a + this.aY));
        }
        return b.set(g, h);
      }
      copy(a) {
        return (
          super.copy(a),
          (this.aX = a.aX),
          (this.aY = a.aY),
          (this.xRadius = a.xRadius),
          (this.yRadius = a.yRadius),
          (this.aStartAngle = a.aStartAngle),
          (this.aEndAngle = a.aEndAngle),
          (this.aClockwise = a.aClockwise),
          (this.aRotation = a.aRotation),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.aX = this.aX),
          (a.aY = this.aY),
          (a.xRadius = this.xRadius),
          (a.yRadius = this.yRadius),
          (a.aStartAngle = this.aStartAngle),
          (a.aEndAngle = this.aEndAngle),
          (a.aClockwise = this.aClockwise),
          (a.aRotation = this.aRotation),
          a
        );
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          (this.aX = a.aX),
          (this.aY = a.aY),
          (this.xRadius = a.xRadius),
          (this.yRadius = a.yRadius),
          (this.aStartAngle = a.aStartAngle),
          (this.aEndAngle = a.aEndAngle),
          (this.aClockwise = a.aClockwise),
          (this.aRotation = a.aRotation),
          this
        );
      }
    }
    class eM extends eL {
      constructor(a, b, c, d, e, f) {
        (super(a, b, c, c, d, e, f),
          (this.isArcCurve = !0),
          (this.type = 'ArcCurve'));
      }
    }
    function eN() {
      let a = 0,
        b = 0,
        c = 0,
        d = 0;
      function e(e, f, g, h) {
        ((a = e),
          (b = g),
          (c = -3 * e + 3 * f - 2 * g - h),
          (d = 2 * e - 2 * f + g + h));
      }
      return {
        initCatmullRom: function (a, b, c, d, f) {
          e(b, c, f * (c - a), f * (d - b));
        },
        initNonuniformCatmullRom: function (a, b, c, d, f, g, h) {
          let i = (b - a) / f - (c - a) / (f + g) + (c - b) / g,
            j = (c - b) / g - (d - b) / (g + h) + (d - c) / h;
          e(b, c, (i *= g), (j *= g));
        },
        calc: function (e) {
          let f = e * e;
          return a + b * e + c * f + f * e * d;
        },
      };
    }
    let eO = new aq(),
      eP = new eN(),
      eQ = new eN(),
      eR = new eN();
    class eS extends eK {
      constructor(a = [], b = !1, c = 'centripetal', d = 0.5) {
        (super(),
          (this.isCatmullRomCurve3 = !0),
          (this.type = 'CatmullRomCurve3'),
          (this.points = a),
          (this.closed = b),
          (this.curveType = c),
          (this.tension = d));
      }
      getPoint(a, b = new aq()) {
        let c,
          d,
          e = this.points,
          f = e.length,
          g = (f - !this.closed) * a,
          h = Math.floor(g),
          i = g - h;
        (this.closed
          ? (h += h > 0 ? 0 : (Math.floor(Math.abs(h) / f) + 1) * f)
          : 0 === i && h === f - 1 && ((h = f - 2), (i = 1)),
          this.closed || h > 0
            ? (c = e[(h - 1) % f])
            : (eO.subVectors(e[0], e[1]).add(e[0]), (c = eO)));
        let j = e[h % f],
          k = e[(h + 1) % f];
        if (
          (this.closed || h + 2 < f
            ? (d = e[(h + 2) % f])
            : (eO.subVectors(e[f - 1], e[f - 2]).add(e[f - 1]), (d = eO)),
          'centripetal' === this.curveType || 'chordal' === this.curveType)
        ) {
          let a = 'chordal' === this.curveType ? 0.5 : 0.25,
            b = Math.pow(c.distanceToSquared(j), a),
            e = Math.pow(j.distanceToSquared(k), a),
            f = Math.pow(k.distanceToSquared(d), a);
          (e < 1e-4 && (e = 1),
            b < 1e-4 && (b = e),
            f < 1e-4 && (f = e),
            eP.initNonuniformCatmullRom(c.x, j.x, k.x, d.x, b, e, f),
            eQ.initNonuniformCatmullRom(c.y, j.y, k.y, d.y, b, e, f),
            eR.initNonuniformCatmullRom(c.z, j.z, k.z, d.z, b, e, f));
        } else
          'catmullrom' === this.curveType &&
            (eP.initCatmullRom(c.x, j.x, k.x, d.x, this.tension),
            eQ.initCatmullRom(c.y, j.y, k.y, d.y, this.tension),
            eR.initCatmullRom(c.z, j.z, k.z, d.z, this.tension));
        return (b.set(eP.calc(i), eQ.calc(i), eR.calc(i)), b);
      }
      copy(a) {
        (super.copy(a), (this.points = []));
        for (let b = 0, c = a.points.length; b < c; b++) {
          let c = a.points[b];
          this.points.push(c.clone());
        }
        return (
          (this.closed = a.closed),
          (this.curveType = a.curveType),
          (this.tension = a.tension),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        a.points = [];
        for (let b = 0, c = this.points.length; b < c; b++) {
          let c = this.points[b];
          a.points.push(c.toArray());
        }
        return (
          (a.closed = this.closed),
          (a.curveType = this.curveType),
          (a.tension = this.tension),
          a
        );
      }
      fromJSON(a) {
        (super.fromJSON(a), (this.points = []));
        for (let b = 0, c = a.points.length; b < c; b++) {
          let c = a.points[b];
          this.points.push(new aq().fromArray(c));
        }
        return (
          (this.closed = a.closed),
          (this.curveType = a.curveType),
          (this.tension = a.tension),
          this
        );
      }
    }
    function eT(a, b, c, d, e) {
      let f = (d - b) * 0.5,
        g = (e - c) * 0.5,
        h = a * a;
      return (
        a * h * (2 * c - 2 * d + f + g) +
        (-3 * c + 3 * d - 2 * f - g) * h +
        f * a +
        c
      );
    }
    function eU(a, b, c, d) {
      let e;
      return (e = 1 - a) * e * b + 2 * (1 - a) * a * c + a * a * d;
    }
    function eV(a, b, c, d, e) {
      let f, g;
      return (
        (f = 1 - a) * f * f * b +
        3 * (g = 1 - a) * g * a * c +
        3 * (1 - a) * a * a * d +
        a * a * a * e
      );
    }
    class eW extends eK {
      constructor(a = new ao(), b = new ao(), c = new ao(), d = new ao()) {
        (super(),
          (this.isCubicBezierCurve = !0),
          (this.type = 'CubicBezierCurve'),
          (this.v0 = a),
          (this.v1 = b),
          (this.v2 = c),
          (this.v3 = d));
      }
      getPoint(a, b = new ao()) {
        let c = this.v0,
          d = this.v1,
          e = this.v2,
          f = this.v3;
        return (b.set(eV(a, c.x, d.x, e.x, f.x), eV(a, c.y, d.y, e.y, f.y)), b);
      }
      copy(a) {
        return (
          super.copy(a),
          this.v0.copy(a.v0),
          this.v1.copy(a.v1),
          this.v2.copy(a.v2),
          this.v3.copy(a.v3),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.v0 = this.v0.toArray()),
          (a.v1 = this.v1.toArray()),
          (a.v2 = this.v2.toArray()),
          (a.v3 = this.v3.toArray()),
          a
        );
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v0.fromArray(a.v0),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this.v3.fromArray(a.v3),
          this
        );
      }
    }
    class eX extends eK {
      constructor(a = new aq(), b = new aq(), c = new aq(), d = new aq()) {
        (super(),
          (this.isCubicBezierCurve3 = !0),
          (this.type = 'CubicBezierCurve3'),
          (this.v0 = a),
          (this.v1 = b),
          (this.v2 = c),
          (this.v3 = d));
      }
      getPoint(a, b = new aq()) {
        let c = this.v0,
          d = this.v1,
          e = this.v2,
          f = this.v3;
        return (
          b.set(
            eV(a, c.x, d.x, e.x, f.x),
            eV(a, c.y, d.y, e.y, f.y),
            eV(a, c.z, d.z, e.z, f.z)
          ),
          b
        );
      }
      copy(a) {
        return (
          super.copy(a),
          this.v0.copy(a.v0),
          this.v1.copy(a.v1),
          this.v2.copy(a.v2),
          this.v3.copy(a.v3),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.v0 = this.v0.toArray()),
          (a.v1 = this.v1.toArray()),
          (a.v2 = this.v2.toArray()),
          (a.v3 = this.v3.toArray()),
          a
        );
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v0.fromArray(a.v0),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this.v3.fromArray(a.v3),
          this
        );
      }
    }
    class eY extends eK {
      constructor(a = new ao(), b = new ao()) {
        (super(),
          (this.isLineCurve = !0),
          (this.type = 'LineCurve'),
          (this.v1 = a),
          (this.v2 = b));
      }
      getPoint(a, b = new ao()) {
        return (
          1 === a
            ? b.copy(this.v2)
            : (b.copy(this.v2).sub(this.v1), b.multiplyScalar(a).add(this.v1)),
          b
        );
      }
      getPointAt(a, b) {
        return this.getPoint(a, b);
      }
      getTangent(a, b = new ao()) {
        return b.subVectors(this.v2, this.v1).normalize();
      }
      getTangentAt(a, b) {
        return this.getTangent(a, b);
      }
      copy(a) {
        return (super.copy(a), this.v1.copy(a.v1), this.v2.copy(a.v2), this);
      }
      toJSON() {
        let a = super.toJSON();
        return ((a.v1 = this.v1.toArray()), (a.v2 = this.v2.toArray()), a);
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this
        );
      }
    }
    class eZ extends eK {
      constructor(a = new aq(), b = new aq()) {
        (super(),
          (this.isLineCurve3 = !0),
          (this.type = 'LineCurve3'),
          (this.v1 = a),
          (this.v2 = b));
      }
      getPoint(a, b = new aq()) {
        return (
          1 === a
            ? b.copy(this.v2)
            : (b.copy(this.v2).sub(this.v1), b.multiplyScalar(a).add(this.v1)),
          b
        );
      }
      getPointAt(a, b) {
        return this.getPoint(a, b);
      }
      getTangent(a, b = new aq()) {
        return b.subVectors(this.v2, this.v1).normalize();
      }
      getTangentAt(a, b) {
        return this.getTangent(a, b);
      }
      copy(a) {
        return (super.copy(a), this.v1.copy(a.v1), this.v2.copy(a.v2), this);
      }
      toJSON() {
        let a = super.toJSON();
        return ((a.v1 = this.v1.toArray()), (a.v2 = this.v2.toArray()), a);
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this
        );
      }
    }
    class e$ extends eK {
      constructor(a = new ao(), b = new ao(), c = new ao()) {
        (super(),
          (this.isQuadraticBezierCurve = !0),
          (this.type = 'QuadraticBezierCurve'),
          (this.v0 = a),
          (this.v1 = b),
          (this.v2 = c));
      }
      getPoint(a, b = new ao()) {
        let c = this.v0,
          d = this.v1,
          e = this.v2;
        return (b.set(eU(a, c.x, d.x, e.x), eU(a, c.y, d.y, e.y)), b);
      }
      copy(a) {
        return (
          super.copy(a),
          this.v0.copy(a.v0),
          this.v1.copy(a.v1),
          this.v2.copy(a.v2),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.v0 = this.v0.toArray()),
          (a.v1 = this.v1.toArray()),
          (a.v2 = this.v2.toArray()),
          a
        );
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v0.fromArray(a.v0),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this
        );
      }
    }
    class e_ extends eK {
      constructor(a = new aq(), b = new aq(), c = new aq()) {
        (super(),
          (this.isQuadraticBezierCurve3 = !0),
          (this.type = 'QuadraticBezierCurve3'),
          (this.v0 = a),
          (this.v1 = b),
          (this.v2 = c));
      }
      getPoint(a, b = new aq()) {
        let c = this.v0,
          d = this.v1,
          e = this.v2;
        return (
          b.set(
            eU(a, c.x, d.x, e.x),
            eU(a, c.y, d.y, e.y),
            eU(a, c.z, d.z, e.z)
          ),
          b
        );
      }
      copy(a) {
        return (
          super.copy(a),
          this.v0.copy(a.v0),
          this.v1.copy(a.v1),
          this.v2.copy(a.v2),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.v0 = this.v0.toArray()),
          (a.v1 = this.v1.toArray()),
          (a.v2 = this.v2.toArray()),
          a
        );
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.v0.fromArray(a.v0),
          this.v1.fromArray(a.v1),
          this.v2.fromArray(a.v2),
          this
        );
      }
    }
    class e0 extends eK {
      constructor(a = []) {
        (super(),
          (this.isSplineCurve = !0),
          (this.type = 'SplineCurve'),
          (this.points = a));
      }
      getPoint(a, b = new ao()) {
        let c = this.points,
          d = (c.length - 1) * a,
          e = Math.floor(d),
          f = d - e,
          g = c[0 === e ? e : e - 1],
          h = c[e],
          i = c[e > c.length - 2 ? c.length - 1 : e + 1],
          j = c[e > c.length - 3 ? c.length - 1 : e + 2];
        return (b.set(eT(f, g.x, h.x, i.x, j.x), eT(f, g.y, h.y, i.y, j.y)), b);
      }
      copy(a) {
        (super.copy(a), (this.points = []));
        for (let b = 0, c = a.points.length; b < c; b++) {
          let c = a.points[b];
          this.points.push(c.clone());
        }
        return this;
      }
      toJSON() {
        let a = super.toJSON();
        a.points = [];
        for (let b = 0, c = this.points.length; b < c; b++) {
          let c = this.points[b];
          a.points.push(c.toArray());
        }
        return a;
      }
      fromJSON(a) {
        (super.fromJSON(a), (this.points = []));
        for (let b = 0, c = a.points.length; b < c; b++) {
          let c = a.points[b];
          this.points.push(new ao().fromArray(c));
        }
        return this;
      }
    }
    var e1 = Object.freeze({
      __proto__: null,
      ArcCurve: eM,
      CatmullRomCurve3: eS,
      CubicBezierCurve: eW,
      CubicBezierCurve3: eX,
      EllipseCurve: eL,
      LineCurve: eY,
      LineCurve3: eZ,
      QuadraticBezierCurve: e$,
      QuadraticBezierCurve3: e_,
      SplineCurve: e0,
    });
    class e2 extends eK {
      constructor() {
        (super(),
          (this.type = 'CurvePath'),
          (this.curves = []),
          (this.autoClose = !1));
      }
      add(a) {
        this.curves.push(a);
      }
      closePath() {
        let a = this.curves[0].getPoint(0),
          b = this.curves[this.curves.length - 1].getPoint(1);
        if (!a.equals(b)) {
          let c = !0 === a.isVector2 ? 'LineCurve' : 'LineCurve3';
          this.curves.push(new e1[c](b, a));
        }
        return this;
      }
      getPoint(a, b) {
        let c = a * this.getLength(),
          d = this.getCurveLengths(),
          e = 0;
        for (; e < d.length; ) {
          if (d[e] >= c) {
            let a = d[e] - c,
              f = this.curves[e],
              g = f.getLength(),
              h = 0 === g ? 0 : 1 - a / g;
            return f.getPointAt(h, b);
          }
          e++;
        }
        return null;
      }
      getLength() {
        let a = this.getCurveLengths();
        return a[a.length - 1];
      }
      updateArcLengths() {
        ((this.needsUpdate = !0),
          (this.cacheLengths = null),
          this.getCurveLengths());
      }
      getCurveLengths() {
        if (
          this.cacheLengths &&
          this.cacheLengths.length === this.curves.length
        )
          return this.cacheLengths;
        let a = [],
          b = 0;
        for (let c = 0, d = this.curves.length; c < d; c++)
          a.push((b += this.curves[c].getLength()));
        return ((this.cacheLengths = a), a);
      }
      getSpacedPoints(a = 40) {
        let b = [];
        for (let c = 0; c <= a; c++) b.push(this.getPoint(c / a));
        return (this.autoClose && b.push(b[0]), b);
      }
      getPoints(a = 12) {
        let b,
          c = [];
        for (let d = 0, e = this.curves; d < e.length; d++) {
          let f = e[d],
            g = f.isEllipseCurve
              ? 2 * a
              : f.isLineCurve || f.isLineCurve3
                ? 1
                : f.isSplineCurve
                  ? a * f.points.length
                  : a,
            h = f.getPoints(g);
          for (let a = 0; a < h.length; a++) {
            let d = h[a];
            (b && b.equals(d)) || (c.push(d), (b = d));
          }
        }
        return (
          this.autoClose &&
            c.length > 1 &&
            !c[c.length - 1].equals(c[0]) &&
            c.push(c[0]),
          c
        );
      }
      copy(a) {
        (super.copy(a), (this.curves = []));
        for (let b = 0, c = a.curves.length; b < c; b++) {
          let c = a.curves[b];
          this.curves.push(c.clone());
        }
        return ((this.autoClose = a.autoClose), this);
      }
      toJSON() {
        let a = super.toJSON();
        ((a.autoClose = this.autoClose), (a.curves = []));
        for (let b = 0, c = this.curves.length; b < c; b++) {
          let c = this.curves[b];
          a.curves.push(c.toJSON());
        }
        return a;
      }
      fromJSON(a) {
        (super.fromJSON(a), (this.autoClose = a.autoClose), (this.curves = []));
        for (let b = 0, c = a.curves.length; b < c; b++) {
          let c = a.curves[b];
          this.curves.push(new e1[c.type]().fromJSON(c));
        }
        return this;
      }
    }
    class e3 extends e2 {
      constructor(a) {
        (super(),
          (this.type = 'Path'),
          (this.currentPoint = new ao()),
          a && this.setFromPoints(a));
      }
      setFromPoints(a) {
        this.moveTo(a[0].x, a[0].y);
        for (let b = 1, c = a.length; b < c; b++) this.lineTo(a[b].x, a[b].y);
        return this;
      }
      moveTo(a, b) {
        return (this.currentPoint.set(a, b), this);
      }
      lineTo(a, b) {
        let c = new eY(this.currentPoint.clone(), new ao(a, b));
        return (this.curves.push(c), this.currentPoint.set(a, b), this);
      }
      quadraticCurveTo(a, b, c, d) {
        let e = new e$(this.currentPoint.clone(), new ao(a, b), new ao(c, d));
        return (this.curves.push(e), this.currentPoint.set(c, d), this);
      }
      bezierCurveTo(a, b, c, d, e, f) {
        let g = new eW(
          this.currentPoint.clone(),
          new ao(a, b),
          new ao(c, d),
          new ao(e, f)
        );
        return (this.curves.push(g), this.currentPoint.set(e, f), this);
      }
      splineThru(a) {
        let b = new e0([this.currentPoint.clone()].concat(a));
        return (
          this.curves.push(b),
          this.currentPoint.copy(a[a.length - 1]),
          this
        );
      }
      arc(a, b, c, d, e, f) {
        let g = this.currentPoint.x,
          h = this.currentPoint.y;
        return (this.absarc(a + g, b + h, c, d, e, f), this);
      }
      absarc(a, b, c, d, e, f) {
        return (this.absellipse(a, b, c, c, d, e, f), this);
      }
      ellipse(a, b, c, d, e, f, g, h) {
        let i = this.currentPoint.x,
          j = this.currentPoint.y;
        return (this.absellipse(a + i, b + j, c, d, e, f, g, h), this);
      }
      absellipse(a, b, c, d, e, f, g, h) {
        let i = new eL(a, b, c, d, e, f, g, h);
        if (this.curves.length > 0) {
          let a = i.getPoint(0);
          a.equals(this.currentPoint) || this.lineTo(a.x, a.y);
        }
        this.curves.push(i);
        let j = i.getPoint(1);
        return (this.currentPoint.copy(j), this);
      }
      copy(a) {
        return (super.copy(a), this.currentPoint.copy(a.currentPoint), this);
      }
      toJSON() {
        let a = super.toJSON();
        return ((a.currentPoint = this.currentPoint.toArray()), a);
      }
      fromJSON(a) {
        return (
          super.fromJSON(a),
          this.currentPoint.fromArray(a.currentPoint),
          this
        );
      }
    }
    class e4 extends e3 {
      constructor(a) {
        (super(a),
          (this.uuid = ah()),
          (this.type = 'Shape'),
          (this.holes = []));
      }
      getPointsHoles(a) {
        let b = [];
        for (let c = 0, d = this.holes.length; c < d; c++)
          b[c] = this.holes[c].getPoints(a);
        return b;
      }
      extractPoints(a) {
        return { shape: this.getPoints(a), holes: this.getPointsHoles(a) };
      }
      copy(a) {
        (super.copy(a), (this.holes = []));
        for (let b = 0, c = a.holes.length; b < c; b++) {
          let c = a.holes[b];
          this.holes.push(c.clone());
        }
        return this;
      }
      toJSON() {
        let a = super.toJSON();
        ((a.uuid = this.uuid), (a.holes = []));
        for (let b = 0, c = this.holes.length; b < c; b++) {
          let c = this.holes[b];
          a.holes.push(c.toJSON());
        }
        return a;
      }
      fromJSON(a) {
        (super.fromJSON(a), (this.uuid = a.uuid), (this.holes = []));
        for (let b = 0, c = a.holes.length; b < c; b++) {
          let c = a.holes[b];
          this.holes.push(new e3().fromJSON(c));
        }
        return this;
      }
    }
    function e5(a, b, c, d, e) {
      let f;
      if (
        e ===
        (function (a, b, c, d) {
          let e = 0;
          for (let f = b, g = c - d; f < c; f += d)
            ((e += (a[g] - a[f]) * (a[f + 1] + a[g + 1])), (g = f));
          return e;
        })(a, b, c, d) >
          0
      )
        for (let e = b; e < c; e += d) f = fi((e / d) | 0, a[e], a[e + 1], f);
      else
        for (let e = c - d; e >= b; e -= d)
          f = fi((e / d) | 0, a[e], a[e + 1], f);
      return (f && fc(f, f.next) && (fj(f), (f = f.next)), f);
    }
    function e6(a, b) {
      if (!a) return a;
      b || (b = a);
      let c = a,
        d;
      do
        if (
          ((d = !1),
          !c.steiner && (fc(c, c.next) || 0 === fb(c.prev, c, c.next)))
        ) {
          if ((fj(c), (c = b = c.prev) === c.next)) break;
          d = !0;
        } else c = c.next;
      while (d || c !== b);
      return b;
    }
    function e7(a, b) {
      let c = a.x - b.x;
      return (
        0 === c &&
          0 == (c = a.y - b.y) &&
          (c =
            (a.next.y - a.y) / (a.next.x - a.x) -
            (b.next.y - b.y) / (b.next.x - b.x)),
        c
      );
    }
    function e8(a, b, c, d, e) {
      return (
        (a =
          ((a =
            ((a =
              ((a = ((a = ((a - c) * e) | 0) | (a << 8)) & 0xff00ff) |
                (a << 4)) &
              0xf0f0f0f) |
              (a << 2)) &
            0x33333333) |
            (a << 1)) &
          0x55555555) |
        ((b =
          ((b =
            ((b =
              ((b = ((b = ((b - d) * e) | 0) | (b << 8)) & 0xff00ff) |
                (b << 4)) &
              0xf0f0f0f) |
              (b << 2)) &
            0x33333333) |
            (b << 1)) &
          0x55555555) <<
          1)
      );
    }
    function e9(a, b, c, d, e, f, g, h) {
      return (
        (e - g) * (b - h) >= (a - g) * (f - h) &&
        (a - g) * (d - h) >= (c - g) * (b - h) &&
        (c - g) * (f - h) >= (e - g) * (d - h)
      );
    }
    function fa(a, b, c, d, e, f, g, h) {
      return (a !== g || b !== h) && e9(a, b, c, d, e, f, g, h);
    }
    function fb(a, b, c) {
      return (b.y - a.y) * (c.x - b.x) - (b.x - a.x) * (c.y - b.y);
    }
    function fc(a, b) {
      return a.x === b.x && a.y === b.y;
    }
    function fd(a, b, c, d) {
      let e = ff(fb(a, b, c)),
        f = ff(fb(a, b, d)),
        g = ff(fb(c, d, a)),
        h = ff(fb(c, d, b));
      return !!(
        (e !== f && g !== h) ||
        (0 === e && fe(a, c, b)) ||
        (0 === f && fe(a, d, b)) ||
        (0 === g && fe(c, a, d)) ||
        (0 === h && fe(c, b, d))
      );
    }
    function fe(a, b, c) {
      return (
        b.x <= Math.max(a.x, c.x) &&
        b.x >= Math.min(a.x, c.x) &&
        b.y <= Math.max(a.y, c.y) &&
        b.y >= Math.min(a.y, c.y)
      );
    }
    function ff(a) {
      return a > 0 ? 1 : a < 0 ? -1 : 0;
    }
    function fg(a, b) {
      return 0 > fb(a.prev, a, a.next)
        ? fb(a, b, a.next) >= 0 && fb(a, a.prev, b) >= 0
        : 0 > fb(a, b, a.prev) || 0 > fb(a, a.next, b);
    }
    function fh(a, b) {
      let c = fk(a.i, a.x, a.y),
        d = fk(b.i, b.x, b.y),
        e = a.next,
        f = b.prev;
      return (
        (a.next = b),
        (b.prev = a),
        (c.next = e),
        (e.prev = c),
        (d.next = c),
        (c.prev = d),
        (f.next = d),
        (d.prev = f),
        d
      );
    }
    function fi(a, b, c, d) {
      let e = fk(a, b, c);
      return (
        d
          ? ((e.next = d.next), (e.prev = d), (d.next.prev = e), (d.next = e))
          : ((e.prev = e), (e.next = e)),
        e
      );
    }
    function fj(a) {
      ((a.next.prev = a.prev),
        (a.prev.next = a.next),
        a.prevZ && (a.prevZ.nextZ = a.nextZ),
        a.nextZ && (a.nextZ.prevZ = a.prevZ));
    }
    function fk(a, b, c) {
      return {
        i: a,
        x: b,
        y: c,
        prev: null,
        next: null,
        z: 0,
        prevZ: null,
        nextZ: null,
        steiner: !1,
      };
    }
    class fl {
      static triangulate(a, b, c = 2) {
        return (function (a, b, c = 2) {
          let d,
            e,
            f,
            g = b && b.length,
            h = g ? b[0] * c : a.length,
            i = e5(a, 0, h, c, !0),
            j = [];
          if (!i || i.next === i.prev) return j;
          if (
            (g &&
              (i = (function (a, b, c, d) {
                let e = [];
                for (let c = 0, f = b.length; c < f; c++) {
                  let g = b[c] * d,
                    h = c < f - 1 ? b[c + 1] * d : a.length,
                    i = e5(a, g, h, d, !1);
                  (i === i.next && (i.steiner = !0),
                    e.push(
                      (function (a) {
                        let b = a,
                          c = a;
                        do
                          ((b.x < c.x || (b.x === c.x && b.y < c.y)) && (c = b),
                            (b = b.next));
                        while (b !== a);
                        return c;
                      })(i)
                    ));
                }
                e.sort(e7);
                for (let a = 0; a < e.length; a++)
                  c = (function (a, b) {
                    let c = (function (a, b) {
                      let c,
                        d = b,
                        e = a.x,
                        f = a.y,
                        g = -1 / 0;
                      if (fc(a, d)) return d;
                      do {
                        if (fc(a, d.next)) return d.next;
                        if (f <= d.y && f >= d.next.y && d.next.y !== d.y) {
                          let a =
                            d.x +
                            ((f - d.y) * (d.next.x - d.x)) / (d.next.y - d.y);
                          if (
                            a <= e &&
                            a > g &&
                            ((g = a),
                            (c = d.x < d.next.x ? d : d.next),
                            a === e)
                          )
                            return c;
                        }
                        d = d.next;
                      } while (d !== b);
                      if (!c) return null;
                      let h = c,
                        i = c.x,
                        j = c.y,
                        k = 1 / 0;
                      d = c;
                      do {
                        if (
                          e >= d.x &&
                          d.x >= i &&
                          e !== d.x &&
                          e9(f < j ? e : g, f, i, j, f < j ? g : e, f, d.x, d.y)
                        ) {
                          var l, m;
                          let b = Math.abs(f - d.y) / (e - d.x);
                          fg(d, a) &&
                            (b < k ||
                              (b === k &&
                                (d.x > c.x ||
                                  (d.x === c.x &&
                                    ((l = c),
                                    (m = d),
                                    0 > fb(l.prev, l, m.prev) &&
                                      0 > fb(m.next, l, l.next)))))) &&
                            ((c = d), (k = b));
                        }
                        d = d.next;
                      } while (d !== h);
                      return c;
                    })(a, b);
                    if (!c) return b;
                    let d = fh(c, a);
                    return (e6(d, d.next), e6(c, c.next));
                  })(e[a], c);
                return c;
              })(a, b, i, c)),
            a.length > 80 * c)
          ) {
            ((d = a[0]), (e = a[1]));
            let b = d,
              g = e;
            for (let f = c; f < h; f += c) {
              let c = a[f],
                h = a[f + 1];
              (c < d && (d = c),
                h < e && (e = h),
                c > b && (b = c),
                h > g && (g = h));
            }
            f = 0 !== (f = Math.max(b - d, g - e)) ? 32767 / f : 0;
          }
          return (
            (function a(b, c, d, e, f, g, h) {
              if (!b) return;
              !h &&
                g &&
                (function (a, b, c, d) {
                  let e = a;
                  do
                    (0 === e.z && (e.z = e8(e.x, e.y, b, c, d)),
                      (e.prevZ = e.prev),
                      (e.nextZ = e.next),
                      (e = e.next));
                  while (e !== a);
                  ((e.prevZ.nextZ = null),
                    (e.prevZ = null),
                    (function (a) {
                      let b,
                        c = 1;
                      do {
                        let d,
                          e = a;
                        a = null;
                        let f = null;
                        for (b = 0; e; ) {
                          b++;
                          let g = e,
                            h = 0;
                          for (let a = 0; a < c && (h++, (g = g.nextZ)); a++);
                          let i = c;
                          for (; h > 0 || (i > 0 && g); )
                            (0 !== h && (0 === i || !g || e.z <= g.z)
                              ? ((d = e), (e = e.nextZ), h--)
                              : ((d = g), (g = g.nextZ), i--),
                              f ? (f.nextZ = d) : (a = d),
                              (d.prevZ = f),
                              (f = d));
                          e = g;
                        }
                        ((f.nextZ = null), (c *= 2));
                      } while (b > 1);
                    })(e));
                })(b, e, f, g);
              let i = b;
              for (; b.prev !== b.next; ) {
                let j = b.prev,
                  k = b.next;
                if (
                  g
                    ? (function (a, b, c, d) {
                        let e = a.prev,
                          f = a.next;
                        if (fb(e, a, f) >= 0) return !1;
                        let g = e.x,
                          h = a.x,
                          i = f.x,
                          j = e.y,
                          k = a.y,
                          l = f.y,
                          m = Math.min(g, h, i),
                          n = Math.min(j, k, l),
                          o = Math.max(g, h, i),
                          p = Math.max(j, k, l),
                          q = e8(m, n, b, c, d),
                          r = e8(o, p, b, c, d),
                          s = a.prevZ,
                          t = a.nextZ;
                        for (; s && s.z >= q && t && t.z <= r; ) {
                          if (
                            (s.x >= m &&
                              s.x <= o &&
                              s.y >= n &&
                              s.y <= p &&
                              s !== e &&
                              s !== f &&
                              fa(g, j, h, k, i, l, s.x, s.y) &&
                              fb(s.prev, s, s.next) >= 0) ||
                            ((s = s.prevZ),
                            t.x >= m &&
                              t.x <= o &&
                              t.y >= n &&
                              t.y <= p &&
                              t !== e &&
                              t !== f &&
                              fa(g, j, h, k, i, l, t.x, t.y) &&
                              fb(t.prev, t, t.next) >= 0)
                          )
                            return !1;
                          t = t.nextZ;
                        }
                        for (; s && s.z >= q; ) {
                          if (
                            s.x >= m &&
                            s.x <= o &&
                            s.y >= n &&
                            s.y <= p &&
                            s !== e &&
                            s !== f &&
                            fa(g, j, h, k, i, l, s.x, s.y) &&
                            fb(s.prev, s, s.next) >= 0
                          )
                            return !1;
                          s = s.prevZ;
                        }
                        for (; t && t.z <= r; ) {
                          if (
                            t.x >= m &&
                            t.x <= o &&
                            t.y >= n &&
                            t.y <= p &&
                            t !== e &&
                            t !== f &&
                            fa(g, j, h, k, i, l, t.x, t.y) &&
                            fb(t.prev, t, t.next) >= 0
                          )
                            return !1;
                          t = t.nextZ;
                        }
                        return !0;
                      })(b, e, f, g)
                    : (function (a) {
                        let b = a.prev,
                          c = a.next;
                        if (fb(b, a, c) >= 0) return !1;
                        let d = b.x,
                          e = a.x,
                          f = c.x,
                          g = b.y,
                          h = a.y,
                          i = c.y,
                          j = Math.min(d, e, f),
                          k = Math.min(g, h, i),
                          l = Math.max(d, e, f),
                          m = Math.max(g, h, i),
                          n = c.next;
                        for (; n !== b; ) {
                          if (
                            n.x >= j &&
                            n.x <= l &&
                            n.y >= k &&
                            n.y <= m &&
                            fa(d, g, e, h, f, i, n.x, n.y) &&
                            fb(n.prev, n, n.next) >= 0
                          )
                            return !1;
                          n = n.next;
                        }
                        return !0;
                      })(b)
                ) {
                  (c.push(j.i, b.i, k.i), fj(b), (b = k.next), (i = k.next));
                  continue;
                }
                if ((b = k) === i) {
                  h
                    ? 1 === h
                      ? a(
                          (b = (function (a, b) {
                            let c = a;
                            do {
                              let d = c.prev,
                                e = c.next.next;
                              (!fc(d, e) &&
                                fd(d, c, c.next, e) &&
                                fg(d, e) &&
                                fg(e, d) &&
                                (b.push(d.i, c.i, e.i),
                                fj(c),
                                fj(c.next),
                                (c = a = e)),
                                (c = c.next));
                            } while (c !== a);
                            return e6(c);
                          })(e6(b), c)),
                          c,
                          d,
                          e,
                          f,
                          g,
                          2
                        )
                      : 2 === h &&
                        (function (b, c, d, e, f, g) {
                          let h = b;
                          do {
                            let b = h.next.next;
                            for (; b !== h.prev; ) {
                              var i, j;
                              if (
                                h.i !== b.i &&
                                ((i = h),
                                (j = b),
                                i.next.i !== j.i &&
                                  i.prev.i !== j.i &&
                                  !(function (a, b) {
                                    let c = a;
                                    do {
                                      if (
                                        c.i !== a.i &&
                                        c.next.i !== a.i &&
                                        c.i !== b.i &&
                                        c.next.i !== b.i &&
                                        fd(c, c.next, a, b)
                                      )
                                        return !0;
                                      c = c.next;
                                    } while (c !== a);
                                    return !1;
                                  })(i, j) &&
                                  ((fg(i, j) &&
                                    fg(j, i) &&
                                    (function (a, b) {
                                      let c = a,
                                        d = !1,
                                        e = (a.x + b.x) / 2,
                                        f = (a.y + b.y) / 2;
                                      do
                                        (c.y > f != c.next.y > f &&
                                          c.next.y !== c.y &&
                                          e <
                                            ((c.next.x - c.x) * (f - c.y)) /
                                              (c.next.y - c.y) +
                                              c.x &&
                                          (d = !d),
                                          (c = c.next));
                                      while (c !== a);
                                      return d;
                                    })(i, j) &&
                                    (fb(i.prev, i, j.prev) ||
                                      fb(i, j.prev, j))) ||
                                    (fc(i, j) &&
                                      fb(i.prev, i, i.next) > 0 &&
                                      fb(j.prev, j, j.next) > 0)))
                              ) {
                                let i = fh(h, b);
                                ((h = e6(h, h.next)),
                                  (i = e6(i, i.next)),
                                  a(h, c, d, e, f, g, 0),
                                  a(i, c, d, e, f, g, 0));
                                return;
                              }
                              b = b.next;
                            }
                            h = h.next;
                          } while (h !== b);
                        })(b, c, d, e, f, g)
                    : a(e6(b), c, d, e, f, g, 1);
                  break;
                }
              }
            })(i, j, c, d, e, f, 0),
            j
          );
        })(a, b, c);
      }
    }
    class fm {
      static area(a) {
        let b = a.length,
          c = 0;
        for (let d = b - 1, e = 0; e < b; d = e++)
          c += a[d].x * a[e].y - a[e].x * a[d].y;
        return 0.5 * c;
      }
      static isClockWise(a) {
        return 0 > fm.area(a);
      }
      static triangulateShape(a, b) {
        let c = [],
          d = [],
          e = [];
        (fn(a), fo(c, a));
        let f = a.length;
        b.forEach(fn);
        for (let a = 0; a < b.length; a++)
          (d.push(f), (f += b[a].length), fo(c, b[a]));
        let g = fl.triangulate(c, d);
        for (let a = 0; a < g.length; a += 3) e.push(g.slice(a, a + 3));
        return e;
      }
    }
    function fn(a) {
      let b = a.length;
      b > 2 && a[b - 1].equals(a[0]) && a.pop();
    }
    function fo(a, b) {
      for (let c = 0; c < b.length; c++) (a.push(b[c].x), a.push(b[c].y));
    }
    class fp extends co {
      constructor(
        a = new e4([
          new ao(0.5, 0.5),
          new ao(-0.5, 0.5),
          new ao(-0.5, -0.5),
          new ao(0.5, -0.5),
        ]),
        b = {}
      ) {
        (super(),
          (this.type = 'ExtrudeGeometry'),
          (this.parameters = { shapes: a, options: b }),
          (a = Array.isArray(a) ? a : [a]));
        const c = this,
          d = [],
          e = [];
        for (let f = 0, g = a.length; f < g; f++)
          !(function (a) {
            let f,
              g,
              h,
              i,
              j,
              k = [],
              l = void 0 !== b.curveSegments ? b.curveSegments : 12,
              m = void 0 !== b.steps ? b.steps : 1,
              n = void 0 !== b.depth ? b.depth : 1,
              o = void 0 === b.bevelEnabled || b.bevelEnabled,
              p = void 0 !== b.bevelThickness ? b.bevelThickness : 0.2,
              q = void 0 !== b.bevelSize ? b.bevelSize : p - 0.1,
              r = void 0 !== b.bevelOffset ? b.bevelOffset : 0,
              s = void 0 !== b.bevelSegments ? b.bevelSegments : 3,
              t = b.extrudePath,
              u = void 0 !== b.UVGenerator ? b.UVGenerator : fq,
              v,
              w = !1;
            if (t) {
              ((v = t.getSpacedPoints(m)), (w = !0), (o = !1));
              let a = !!t.isCatmullRomCurve3 && t.closed;
              ((f = t.computeFrenetFrames(m, a)),
                (g = new aq()),
                (h = new aq()),
                (i = new aq()));
            }
            o || ((s = 0), (p = 0), (q = 0), (r = 0));
            let x = a.extractPoints(l),
              y = x.shape,
              z = x.holes;
            if (!fm.isClockWise(y)) {
              y = y.reverse();
              for (let a = 0, b = z.length; a < b; a++) {
                let b = z[a];
                fm.isClockWise(b) && (z[a] = b.reverse());
              }
            }
            function A(a) {
              let b = 1e-10 * 1e-10,
                c = a[0];
              for (let d = 1; d <= a.length; d++) {
                let e = d % a.length,
                  f = a[e],
                  g = f.x - c.x,
                  h = f.y - c.y,
                  i = g * g + h * h,
                  j = Math.max(
                    Math.abs(f.x),
                    Math.abs(f.y),
                    Math.abs(c.x),
                    Math.abs(c.y)
                  );
                if (i <= b * j * j) {
                  (a.splice(e, 1), d--);
                  continue;
                }
                c = f;
              }
            }
            (A(y), z.forEach(A));
            let B = z.length,
              C = y;
            for (let a = 0; a < B; a++) {
              let b = z[a];
              y = y.concat(b);
            }
            function D(a, b, c) {
              return (
                b || aa('ExtrudeGeometry: vec does not exist'),
                a.clone().addScaledVector(b, c)
              );
            }
            let E = y.length;
            function F(a, b, c) {
              let d,
                e,
                f,
                g = a.x - b.x,
                h = a.y - b.y,
                i = c.x - a.x,
                j = c.y - a.y,
                k = g * g + h * h;
              if (Math.abs(g * j - h * i) > Number.EPSILON) {
                let l = Math.sqrt(k),
                  m = Math.sqrt(i * i + j * j),
                  n = b.x - h / l,
                  o = b.y + g / l,
                  p =
                    ((c.x - j / m - n) * j - (c.y + i / m - o) * i) /
                    (g * j - h * i),
                  q = (d = n + g * p - a.x) * d + (e = o + h * p - a.y) * e;
                if (q <= 2) return new ao(d, e);
                f = Math.sqrt(q / 2);
              } else {
                let a = !1;
                (g > Number.EPSILON
                  ? i > Number.EPSILON && (a = !0)
                  : g < -Number.EPSILON
                    ? i < -Number.EPSILON && (a = !0)
                    : Math.sign(h) === Math.sign(j) && (a = !0),
                  a
                    ? ((d = -h), (e = g), (f = Math.sqrt(k)))
                    : ((d = g), (e = h), (f = Math.sqrt(k / 2))));
              }
              return new ao(d / f, e / f);
            }
            let G = [];
            for (
              let a = 0, b = C.length, c = b - 1, d = a + 1;
              a < b;
              a++, c++, d++
            )
              (c === b && (c = 0),
                d === b && (d = 0),
                (G[a] = F(C[a], C[c], C[d])));
            let H = [],
              I,
              J = G.concat();
            for (let a = 0; a < B; a++) {
              let b = z[a];
              I = [];
              for (
                let a = 0, c = b.length, d = c - 1, e = a + 1;
                a < c;
                a++, d++, e++
              )
                (d === c && (d = 0),
                  e === c && (e = 0),
                  (I[a] = F(b[a], b[d], b[e])));
              (H.push(I), (J = J.concat(I)));
            }
            if (0 === s) j = fm.triangulateShape(C, z);
            else {
              let a = [],
                b = [];
              for (let c = 0; c < s; c++) {
                let d = c / s,
                  e = p * Math.cos((d * Math.PI) / 2),
                  f = q * Math.sin((d * Math.PI) / 2) + r;
                for (let b = 0, c = C.length; b < c; b++) {
                  let c = D(C[b], G[b], f);
                  (N(c.x, c.y, -e), 0 === d && a.push(c));
                }
                for (let a = 0; a < B; a++) {
                  let c = z[a];
                  I = H[a];
                  let g = [];
                  for (let a = 0, b = c.length; a < b; a++) {
                    let b = D(c[a], I[a], f);
                    (N(b.x, b.y, -e), 0 === d && g.push(b));
                  }
                  0 === d && b.push(g);
                }
              }
              j = fm.triangulateShape(a, b);
            }
            let K = j.length,
              L = q + r;
            for (let a = 0; a < E; a++) {
              let b = o ? D(y[a], J[a], L) : y[a];
              w
                ? (h.copy(f.normals[0]).multiplyScalar(b.x),
                  g.copy(f.binormals[0]).multiplyScalar(b.y),
                  i.copy(v[0]).add(h).add(g),
                  N(i.x, i.y, i.z))
                : N(b.x, b.y, 0);
            }
            for (let a = 1; a <= m; a++)
              for (let b = 0; b < E; b++) {
                let c = o ? D(y[b], J[b], L) : y[b];
                w
                  ? (h.copy(f.normals[a]).multiplyScalar(c.x),
                    g.copy(f.binormals[a]).multiplyScalar(c.y),
                    i.copy(v[a]).add(h).add(g),
                    N(i.x, i.y, i.z))
                  : N(c.x, c.y, (n / m) * a);
              }
            for (let a = s - 1; a >= 0; a--) {
              let b = a / s,
                c = p * Math.cos((b * Math.PI) / 2),
                d = q * Math.sin((b * Math.PI) / 2) + r;
              for (let a = 0, b = C.length; a < b; a++) {
                let b = D(C[a], G[a], d);
                N(b.x, b.y, n + c);
              }
              for (let a = 0, b = z.length; a < b; a++) {
                let b = z[a];
                I = H[a];
                for (let a = 0, e = b.length; a < e; a++) {
                  let e = D(b[a], I[a], d);
                  w
                    ? N(e.x, e.y + v[m - 1].y, v[m - 1].x + c)
                    : N(e.x, e.y, n + c);
                }
              }
            }
            function M(a, b) {
              let e = a.length;
              for (; --e >= 0; ) {
                let f = e,
                  g = e - 1;
                g < 0 && (g = a.length - 1);
                for (let a = 0, e = m + 2 * s; a < e; a++) {
                  let e = E * a,
                    h = E * (a + 1);
                  !(function (a, b, e, f) {
                    (P(a), P(b), P(f), P(b), P(e), P(f));
                    let g = d.length / 3,
                      h = u.generateSideWallUV(
                        c,
                        d,
                        g - 6,
                        g - 3,
                        g - 2,
                        g - 1
                      );
                    (Q(h[0]), Q(h[1]), Q(h[3]), Q(h[1]), Q(h[2]), Q(h[3]));
                  })(b + f + e, b + g + e, b + g + h, b + f + h);
                }
              }
            }
            function N(a, b, c) {
              (k.push(a), k.push(b), k.push(c));
            }
            function O(a, b, e) {
              (P(a), P(b), P(e));
              let f = d.length / 3,
                g = u.generateTopUV(c, d, f - 3, f - 2, f - 1);
              (Q(g[0]), Q(g[1]), Q(g[2]));
            }
            function P(a) {
              (d.push(k[3 * a + 0]),
                d.push(k[3 * a + 1]),
                d.push(k[3 * a + 2]));
            }
            function Q(a) {
              (e.push(a.x), e.push(a.y));
            }
            ((function () {
              let a = d.length / 3;
              if (o) {
                let a = 0 * E;
                for (let b = 0; b < K; b++) {
                  let c = j[b];
                  O(c[2] + a, c[1] + a, c[0] + a);
                }
                a = E * (m + 2 * s);
                for (let b = 0; b < K; b++) {
                  let c = j[b];
                  O(c[0] + a, c[1] + a, c[2] + a);
                }
              } else {
                for (let a = 0; a < K; a++) {
                  let b = j[a];
                  O(b[2], b[1], b[0]);
                }
                for (let a = 0; a < K; a++) {
                  let b = j[a];
                  O(b[0] + E * m, b[1] + E * m, b[2] + E * m);
                }
              }
              c.addGroup(a, d.length / 3 - a, 0);
            })(),
              (function () {
                let a = d.length / 3,
                  b = 0;
                (M(C, 0), (b += C.length));
                for (let a = 0, c = z.length; a < c; a++) {
                  let c = z[a];
                  (M(c, b), (b += c.length));
                }
                c.addGroup(a, d.length / 3 - a, 1);
              })());
          })(a[f]);
        (this.setAttribute('position', new cg(d, 3)),
          this.setAttribute('uv', new cg(e, 2)),
          this.computeVertexNormals());
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (function (a, b, c) {
          if (((c.shapes = []), Array.isArray(a)))
            for (let b = 0, d = a.length; b < d; b++) {
              let d = a[b];
              c.shapes.push(d.uuid);
            }
          else c.shapes.push(a.uuid);
          return (
            (c.options = Object.assign({}, b)),
            void 0 !== b.extrudePath &&
              (c.options.extrudePath = b.extrudePath.toJSON()),
            c
          );
        })(this.parameters.shapes, this.parameters.options, a);
      }
      static fromJSON(a, b) {
        let c = [];
        for (let d = 0, e = a.shapes.length; d < e; d++) {
          let e = b[a.shapes[d]];
          c.push(e);
        }
        let d = a.options.extrudePath;
        return (
          void 0 !== d &&
            (a.options.extrudePath = new e1[d.type]().fromJSON(d)),
          new fp(c, a.options)
        );
      }
    }
    let fq = {
      generateTopUV: function (a, b, c, d, e) {
        let f = b[3 * c],
          g = b[3 * c + 1],
          h = b[3 * d],
          i = b[3 * d + 1],
          j = b[3 * e],
          k = b[3 * e + 1];
        return [new ao(f, g), new ao(h, i), new ao(j, k)];
      },
      generateSideWallUV: function (a, b, c, d, e, f) {
        let g = b[3 * c],
          h = b[3 * c + 1],
          i = b[3 * c + 2],
          j = b[3 * d],
          k = b[3 * d + 1],
          l = b[3 * d + 2],
          m = b[3 * e],
          n = b[3 * e + 1],
          o = b[3 * e + 2],
          p = b[3 * f],
          q = b[3 * f + 1],
          r = b[3 * f + 2];
        return Math.abs(h - k) < Math.abs(g - j)
          ? [
              new ao(g, 1 - i),
              new ao(j, 1 - l),
              new ao(m, 1 - o),
              new ao(p, 1 - r),
            ]
          : [
              new ao(h, 1 - i),
              new ao(k, 1 - l),
              new ao(n, 1 - o),
              new ao(q, 1 - r),
            ];
      },
    };
    class fr extends eD {
      constructor(a = 1, b = 0) {
        const c = (1 + Math.sqrt(5)) / 2;
        (super(
          [
            -1,
            c,
            0,
            1,
            c,
            0,
            -1,
            -c,
            0,
            1,
            -c,
            0,
            0,
            -1,
            c,
            0,
            1,
            c,
            0,
            -1,
            -c,
            0,
            1,
            -c,
            c,
            0,
            -1,
            c,
            0,
            1,
            -c,
            0,
            -1,
            -c,
            0,
            1,
          ],
          [
            0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4,
            11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3,
            8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1,
          ],
          a,
          b
        ),
          (this.type = 'IcosahedronGeometry'),
          (this.parameters = { radius: a, detail: b }));
      }
      static fromJSON(a) {
        return new fr(a.radius, a.detail);
      }
    }
    class fs extends co {
      constructor(
        a = [new ao(0, -0.5), new ao(0.5, 0), new ao(0, 0.5)],
        b = 12,
        c = 0,
        d = 2 * Math.PI
      ) {
        (super(),
          (this.type = 'LatheGeometry'),
          (this.parameters = {
            points: a,
            segments: b,
            phiStart: c,
            phiLength: d,
          }),
          (b = Math.floor(b)),
          (d = ai(d, 0, 2 * Math.PI)));
        const e = [],
          f = [],
          g = [],
          h = [],
          i = [],
          j = 1 / b,
          k = new aq(),
          l = new ao(),
          m = new aq(),
          n = new aq(),
          o = new aq();
        let p = 0,
          q = 0;
        for (let b = 0; b <= a.length - 1; b++)
          switch (b) {
            case 0:
              ((p = a[b + 1].x - a[b].x),
                (m.x = +(q = a[b + 1].y - a[b].y)),
                (m.y = -p),
                (m.z = 0 * q),
                o.copy(m),
                m.normalize(),
                h.push(m.x, m.y, m.z));
              break;
            case a.length - 1:
              h.push(o.x, o.y, o.z);
              break;
            default:
              ((p = a[b + 1].x - a[b].x),
                (m.x = +(q = a[b + 1].y - a[b].y)),
                (m.y = -p),
                (m.z = 0 * q),
                n.copy(m),
                (m.x += o.x),
                (m.y += o.y),
                (m.z += o.z),
                m.normalize(),
                h.push(m.x, m.y, m.z),
                o.copy(n));
          }
        for (let e = 0; e <= b; e++) {
          const m = c + e * j * d,
            n = Math.sin(m),
            o = Math.cos(m);
          for (let c = 0; c <= a.length - 1; c++) {
            ((k.x = a[c].x * n),
              (k.y = a[c].y),
              (k.z = a[c].x * o),
              f.push(k.x, k.y, k.z),
              (l.x = e / b),
              (l.y = c / (a.length - 1)),
              g.push(l.x, l.y));
            const d = h[3 * c + 0] * n,
              j = h[3 * c + 1],
              m = h[3 * c + 0] * o;
            i.push(d, j, m);
          }
        }
        for (let c = 0; c < b; c++)
          for (let b = 0; b < a.length - 1; b++) {
            const d = b + c * a.length,
              f = d + a.length,
              g = d + a.length + 1,
              h = d + 1;
            (e.push(d, f, h), e.push(g, h, f));
          }
        (this.setIndex(e),
          this.setAttribute('position', new cg(f, 3)),
          this.setAttribute('uv', new cg(g, 2)),
          this.setAttribute('normal', new cg(i, 3)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fs(a.points, a.segments, a.phiStart, a.phiLength);
      }
    }
    class ft extends eD {
      constructor(a = 1, b = 0) {
        (super(
          [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
          [
            0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4,
            2,
          ],
          a,
          b
        ),
          (this.type = 'OctahedronGeometry'),
          (this.parameters = { radius: a, detail: b }));
      }
      static fromJSON(a) {
        return new ft(a.radius, a.detail);
      }
    }
    class fu extends co {
      constructor(a = 1, b = 1, c = 1, d = 1) {
        (super(),
          (this.type = 'PlaneGeometry'),
          (this.parameters = {
            width: a,
            height: b,
            widthSegments: c,
            heightSegments: d,
          }));
        const e = a / 2,
          f = b / 2,
          g = Math.floor(c),
          h = Math.floor(d),
          i = g + 1,
          j = h + 1,
          k = a / g,
          l = b / h,
          m = [],
          n = [],
          o = [],
          p = [];
        for (let a = 0; a < j; a++) {
          const b = a * l - f;
          for (let c = 0; c < i; c++) {
            const d = c * k - e;
            (n.push(d, -b, 0),
              o.push(0, 0, 1),
              p.push(c / g),
              p.push(1 - a / h));
          }
        }
        for (let a = 0; a < h; a++)
          for (let b = 0; b < g; b++) {
            const c = b + i * a,
              d = b + i * (a + 1),
              e = b + 1 + i * (a + 1),
              f = b + 1 + i * a;
            (m.push(c, d, f), m.push(d, e, f));
          }
        (this.setIndex(m),
          this.setAttribute('position', new cg(n, 3)),
          this.setAttribute('normal', new cg(o, 3)),
          this.setAttribute('uv', new cg(p, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fu(a.width, a.height, a.widthSegments, a.heightSegments);
      }
    }
    class fv extends co {
      constructor(a = 0.5, b = 1, c = 32, d = 1, e = 0, f = 2 * Math.PI) {
        (super(),
          (this.type = 'RingGeometry'),
          (this.parameters = {
            innerRadius: a,
            outerRadius: b,
            thetaSegments: c,
            phiSegments: d,
            thetaStart: e,
            thetaLength: f,
          }),
          (c = Math.max(3, c)));
        const g = [],
          h = [],
          i = [],
          j = [];
        let k = a;
        const l = (b - a) / (d = Math.max(1, d)),
          m = new aq(),
          n = new ao();
        for (let a = 0; a <= d; a++) {
          for (let a = 0; a <= c; a++) {
            const d = e + (a / c) * f;
            ((m.x = k * Math.cos(d)),
              (m.y = k * Math.sin(d)),
              h.push(m.x, m.y, m.z),
              i.push(0, 0, 1),
              (n.x = (m.x / b + 1) / 2),
              (n.y = (m.y / b + 1) / 2),
              j.push(n.x, n.y));
          }
          k += l;
        }
        for (let a = 0; a < d; a++) {
          const b = a * (c + 1);
          for (let a = 0; a < c; a++) {
            const d = a + b,
              e = d + c + 1,
              f = d + c + 2,
              h = d + 1;
            (g.push(d, e, h), g.push(e, f, h));
          }
        }
        (this.setIndex(g),
          this.setAttribute('position', new cg(h, 3)),
          this.setAttribute('normal', new cg(i, 3)),
          this.setAttribute('uv', new cg(j, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fv(
          a.innerRadius,
          a.outerRadius,
          a.thetaSegments,
          a.phiSegments,
          a.thetaStart,
          a.thetaLength
        );
      }
    }
    class fw extends co {
      constructor(
        a = new e4([new ao(0, 0.5), new ao(-0.5, -0.5), new ao(0.5, -0.5)]),
        b = 12
      ) {
        (super(),
          (this.type = 'ShapeGeometry'),
          (this.parameters = { shapes: a, curveSegments: b }));
        const c = [],
          d = [],
          e = [],
          f = [];
        let g = 0,
          h = 0;
        if (!1 === Array.isArray(a)) i(a);
        else
          for (let b = 0; b < a.length; b++)
            (i(a[b]), this.addGroup(g, h, b), (g += h), (h = 0));
        function i(a) {
          let g = d.length / 3,
            i = a.extractPoints(b),
            j = i.shape,
            k = i.holes;
          !1 === fm.isClockWise(j) && (j = j.reverse());
          for (let a = 0, b = k.length; a < b; a++) {
            let b = k[a];
            !0 === fm.isClockWise(b) && (k[a] = b.reverse());
          }
          let l = fm.triangulateShape(j, k);
          for (let a = 0, b = k.length; a < b; a++) {
            let b = k[a];
            j = j.concat(b);
          }
          for (let a = 0, b = j.length; a < b; a++) {
            let b = j[a];
            (d.push(b.x, b.y, 0), e.push(0, 0, 1), f.push(b.x, b.y));
          }
          for (let a = 0, b = l.length; a < b; a++) {
            let b = l[a],
              d = b[0] + g,
              e = b[1] + g,
              f = b[2] + g;
            (c.push(d, e, f), (h += 3));
          }
        }
        (this.setIndex(c),
          this.setAttribute('position', new cg(d, 3)),
          this.setAttribute('normal', new cg(e, 3)),
          this.setAttribute('uv', new cg(f, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return (function (a, b) {
          if (((b.shapes = []), Array.isArray(a)))
            for (let c = 0, d = a.length; c < d; c++) {
              let d = a[c];
              b.shapes.push(d.uuid);
            }
          else b.shapes.push(a.uuid);
          return b;
        })(this.parameters.shapes, a);
      }
      static fromJSON(a, b) {
        let c = [];
        for (let d = 0, e = a.shapes.length; d < e; d++) {
          let e = b[a.shapes[d]];
          c.push(e);
        }
        return new fw(c, a.curveSegments);
      }
    }
    class fx extends co {
      constructor(
        a = 1,
        b = 32,
        c = 16,
        d = 0,
        e = 2 * Math.PI,
        f = 0,
        g = Math.PI
      ) {
        (super(),
          (this.type = 'SphereGeometry'),
          (this.parameters = {
            radius: a,
            widthSegments: b,
            heightSegments: c,
            phiStart: d,
            phiLength: e,
            thetaStart: f,
            thetaLength: g,
          }),
          (b = Math.max(3, Math.floor(b))),
          (c = Math.max(2, Math.floor(c))));
        const h = Math.min(f + g, Math.PI);
        let i = 0;
        const j = [],
          k = new aq(),
          l = new aq(),
          m = [],
          n = [],
          o = [],
          p = [];
        for (let m = 0; m <= c; m++) {
          const q = [],
            r = m / c;
          let s = 0;
          0 === m && 0 === f
            ? (s = 0.5 / b)
            : m === c && h === Math.PI && (s = -0.5 / b);
          for (let c = 0; c <= b; c++) {
            const h = c / b;
            ((k.x = -a * Math.cos(d + h * e) * Math.sin(f + r * g)),
              (k.y = a * Math.cos(f + r * g)),
              (k.z = a * Math.sin(d + h * e) * Math.sin(f + r * g)),
              n.push(k.x, k.y, k.z),
              l.copy(k).normalize(),
              o.push(l.x, l.y, l.z),
              p.push(h + s, 1 - r),
              q.push(i++));
          }
          j.push(q);
        }
        for (let a = 0; a < c; a++)
          for (let d = 0; d < b; d++) {
            const b = j[a][d + 1],
              e = j[a][d],
              g = j[a + 1][d],
              i = j[a + 1][d + 1];
            ((0 !== a || f > 0) && m.push(b, e, i),
              (a !== c - 1 || h < Math.PI) && m.push(e, g, i));
          }
        (this.setIndex(m),
          this.setAttribute('position', new cg(n, 3)),
          this.setAttribute('normal', new cg(o, 3)),
          this.setAttribute('uv', new cg(p, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fx(
          a.radius,
          a.widthSegments,
          a.heightSegments,
          a.phiStart,
          a.phiLength,
          a.thetaStart,
          a.thetaLength
        );
      }
    }
    class fy extends eD {
      constructor(a = 1, b = 0) {
        (super(
          [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
          [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1],
          a,
          b
        ),
          (this.type = 'TetrahedronGeometry'),
          (this.parameters = { radius: a, detail: b }));
      }
      static fromJSON(a) {
        return new fy(a.radius, a.detail);
      }
    }
    class fz extends co {
      constructor(a = 1, b = 0.4, c = 12, d = 48, e = 2 * Math.PI) {
        (super(),
          (this.type = 'TorusGeometry'),
          (this.parameters = {
            radius: a,
            tube: b,
            radialSegments: c,
            tubularSegments: d,
            arc: e,
          }),
          (c = Math.floor(c)),
          (d = Math.floor(d)));
        const f = [],
          g = [],
          h = [],
          i = [],
          j = new aq(),
          k = new aq(),
          l = new aq();
        for (let f = 0; f <= c; f++)
          for (let m = 0; m <= d; m++) {
            const n = (m / d) * e,
              o = (f / c) * Math.PI * 2;
            ((k.x = (a + b * Math.cos(o)) * Math.cos(n)),
              (k.y = (a + b * Math.cos(o)) * Math.sin(n)),
              (k.z = b * Math.sin(o)),
              g.push(k.x, k.y, k.z),
              (j.x = a * Math.cos(n)),
              (j.y = a * Math.sin(n)),
              l.subVectors(k, j).normalize(),
              h.push(l.x, l.y, l.z),
              i.push(m / d),
              i.push(f / c));
          }
        for (let a = 1; a <= c; a++)
          for (let b = 1; b <= d; b++) {
            const c = (d + 1) * a + b - 1,
              e = (d + 1) * (a - 1) + b - 1,
              g = (d + 1) * (a - 1) + b,
              h = (d + 1) * a + b;
            (f.push(c, e, h), f.push(e, g, h));
          }
        (this.setIndex(f),
          this.setAttribute('position', new cg(g, 3)),
          this.setAttribute('normal', new cg(h, 3)),
          this.setAttribute('uv', new cg(i, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fz(
          a.radius,
          a.tube,
          a.radialSegments,
          a.tubularSegments,
          a.arc
        );
      }
    }
    class fA extends co {
      constructor(a = 1, b = 0.4, c = 64, d = 8, e = 2, f = 3) {
        (super(),
          (this.type = 'TorusKnotGeometry'),
          (this.parameters = {
            radius: a,
            tube: b,
            tubularSegments: c,
            radialSegments: d,
            p: e,
            q: f,
          }),
          (c = Math.floor(c)),
          (d = Math.floor(d)));
        const g = [],
          h = [],
          i = [],
          j = [],
          k = new aq(),
          l = new aq(),
          m = new aq(),
          n = new aq(),
          o = new aq(),
          p = new aq(),
          q = new aq();
        for (let g = 0; g <= c; ++g) {
          const s = (g / c) * e * Math.PI * 2;
          (r(s, e, f, a, m),
            r(s + 0.01, e, f, a, n),
            p.subVectors(n, m),
            q.addVectors(n, m),
            o.crossVectors(p, q),
            q.crossVectors(o, p),
            o.normalize(),
            q.normalize());
          for (let a = 0; a <= d; ++a) {
            const e = (a / d) * Math.PI * 2,
              f = -b * Math.cos(e),
              n = b * Math.sin(e);
            ((k.x = m.x + (f * q.x + n * o.x)),
              (k.y = m.y + (f * q.y + n * o.y)),
              (k.z = m.z + (f * q.z + n * o.z)),
              h.push(k.x, k.y, k.z),
              l.subVectors(k, m).normalize(),
              i.push(l.x, l.y, l.z),
              j.push(g / c),
              j.push(a / d));
          }
        }
        for (let a = 1; a <= c; a++)
          for (let b = 1; b <= d; b++) {
            const c = (d + 1) * (a - 1) + (b - 1),
              e = (d + 1) * a + (b - 1),
              f = (d + 1) * a + b,
              h = (d + 1) * (a - 1) + b;
            (g.push(c, e, h), g.push(e, f, h));
          }
        function r(a, b, c, d, e) {
          let f = Math.cos(a),
            g = Math.sin(a),
            h = (c / b) * a,
            i = Math.cos(h);
          ((e.x = d * (2 + i) * 0.5 * f),
            (e.y = d * (2 + i) * g * 0.5),
            (e.z = d * Math.sin(h) * 0.5));
        }
        (this.setIndex(g),
          this.setAttribute('position', new cg(h, 3)),
          this.setAttribute('normal', new cg(i, 3)),
          this.setAttribute('uv', new cg(j, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      static fromJSON(a) {
        return new fA(
          a.radius,
          a.tube,
          a.tubularSegments,
          a.radialSegments,
          a.p,
          a.q
        );
      }
    }
    class fB extends co {
      constructor(
        a = new e_(new aq(-1, -1, 0), new aq(-1, 1, 0), new aq(1, 1, 0)),
        b = 64,
        c = 1,
        d = 8,
        e = !1
      ) {
        (super(),
          (this.type = 'TubeGeometry'),
          (this.parameters = {
            path: a,
            tubularSegments: b,
            radius: c,
            radialSegments: d,
            closed: e,
          }));
        const f = a.computeFrenetFrames(b, e);
        ((this.tangents = f.tangents),
          (this.normals = f.normals),
          (this.binormals = f.binormals));
        const g = new aq(),
          h = new aq(),
          i = new ao();
        let j = new aq();
        const k = [],
          l = [],
          m = [],
          n = [];
        function o(e) {
          j = a.getPointAt(e / b, j);
          let i = f.normals[e],
            m = f.binormals[e];
          for (let a = 0; a <= d; a++) {
            let b = (a / d) * Math.PI * 2,
              e = Math.sin(b),
              f = -Math.cos(b);
            ((h.x = f * i.x + e * m.x),
              (h.y = f * i.y + e * m.y),
              (h.z = f * i.z + e * m.z),
              h.normalize(),
              l.push(h.x, h.y, h.z),
              (g.x = j.x + c * h.x),
              (g.y = j.y + c * h.y),
              (g.z = j.z + c * h.z),
              k.push(g.x, g.y, g.z));
          }
        }
        ((function () {
          for (let a = 0; a < b; a++) o(a);
          (o(!1 === e ? b : 0),
            (function () {
              for (let a = 0; a <= b; a++)
                for (let c = 0; c <= d; c++)
                  ((i.x = a / b), (i.y = c / d), m.push(i.x, i.y));
            })(),
            (function () {
              for (let a = 1; a <= b; a++)
                for (let b = 1; b <= d; b++) {
                  let c = (d + 1) * (a - 1) + (b - 1),
                    e = (d + 1) * a + (b - 1),
                    f = (d + 1) * a + b,
                    g = (d + 1) * (a - 1) + b;
                  (n.push(c, e, g), n.push(e, f, g));
                }
            })());
        })(),
          this.setIndex(n),
          this.setAttribute('position', new cg(k, 3)),
          this.setAttribute('normal', new cg(l, 3)),
          this.setAttribute('uv', new cg(m, 2)));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
      toJSON() {
        let a = super.toJSON();
        return ((a.path = this.parameters.path.toJSON()), a);
      }
      static fromJSON(a) {
        return new fB(
          new e1[a.path.type]().fromJSON(a.path),
          a.tubularSegments,
          a.radius,
          a.radialSegments,
          a.closed
        );
      }
    }
    class fC extends co {
      constructor(a = null) {
        if (
          (super(),
          (this.type = 'WireframeGeometry'),
          (this.parameters = { geometry: a }),
          null !== a)
        ) {
          const b = [],
            c = new Set(),
            d = new aq(),
            e = new aq();
          if (null !== a.index) {
            const f = a.attributes.position,
              g = a.index;
            let h = a.groups;
            0 === h.length &&
              (h = [{ start: 0, count: g.count, materialIndex: 0 }]);
            for (let a = 0, i = h.length; a < i; ++a) {
              const i = h[a],
                j = i.start,
                k = i.count;
              for (let a = j, h = j + k; a < h; a += 3)
                for (let h = 0; h < 3; h++) {
                  const i = g.getX(a + h),
                    j = g.getX(a + ((h + 1) % 3));
                  (d.fromBufferAttribute(f, i),
                    e.fromBufferAttribute(f, j),
                    !0 === fD(d, e, c) &&
                      (b.push(d.x, d.y, d.z), b.push(e.x, e.y, e.z)));
                }
            }
          } else {
            const f = a.attributes.position;
            for (let a = 0, g = f.count / 3; a < g; a++)
              for (let g = 0; g < 3; g++) {
                const h = 3 * a + g,
                  i = 3 * a + ((g + 1) % 3);
                (d.fromBufferAttribute(f, h),
                  e.fromBufferAttribute(f, i),
                  !0 === fD(d, e, c) &&
                    (b.push(d.x, d.y, d.z), b.push(e.x, e.y, e.z)));
              }
          }
          this.setAttribute('position', new cg(b, 3));
        }
      }
      copy(a) {
        return (
          super.copy(a),
          (this.parameters = Object.assign({}, a.parameters)),
          this
        );
      }
    }
    function fD(a, b, c) {
      let d = `${a.x},${a.y},${a.z}-${b.x},${b.y},${b.z}`,
        e = `${b.x},${b.y},${b.z}-${a.x},${a.y},${a.z}`;
      return !0 !== c.has(d) && !0 !== c.has(e) && (c.add(d), c.add(e), !0);
    }
    var fE = Object.freeze({
      __proto__: null,
      BoxGeometry: cC,
      CapsuleGeometry: ez,
      CircleGeometry: eA,
      ConeGeometry: eC,
      CylinderGeometry: eB,
      DodecahedronGeometry: eE,
      EdgesGeometry: eJ,
      ExtrudeGeometry: fp,
      IcosahedronGeometry: fr,
      LatheGeometry: fs,
      OctahedronGeometry: ft,
      PlaneGeometry: fu,
      PolyhedronGeometry: eD,
      RingGeometry: fv,
      ShapeGeometry: fw,
      SphereGeometry: fx,
      TetrahedronGeometry: fy,
      TorusGeometry: fz,
      TorusKnotGeometry: fA,
      TubeGeometry: fB,
      WireframeGeometry: fC,
    });
    class fF extends b$ {
      constructor(a) {
        (super(),
          (this.isShadowMaterial = !0),
          (this.type = 'ShadowMaterial'),
          (this.color = new bX(0)),
          (this.transparent = !0),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fG extends cH {
      constructor(a) {
        (super(a),
          (this.isRawShaderMaterial = !0),
          (this.type = 'RawShaderMaterial'));
      }
    }
    class fH extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshStandardMaterial = !0),
          (this.type = 'MeshStandardMaterial'),
          (this.defines = { STANDARD: '' }),
          (this.color = new bX(0xffffff)),
          (this.roughness = 1),
          (this.metalness = 0),
          (this.map = null),
          (this.lightMap = null),
          (this.lightMapIntensity = 1),
          (this.aoMap = null),
          (this.aoMapIntensity = 1),
          (this.emissive = new bX(0)),
          (this.emissiveIntensity = 1),
          (this.emissiveMap = null),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.roughnessMap = null),
          (this.metalnessMap = null),
          (this.alphaMap = null),
          (this.envMap = null),
          (this.envMapRotation = new bn()),
          (this.envMapIntensity = 1),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.wireframeLinecap = 'round'),
          (this.wireframeLinejoin = 'round'),
          (this.flatShading = !1),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.defines = { STANDARD: '' }),
          this.color.copy(a.color),
          (this.roughness = a.roughness),
          (this.metalness = a.metalness),
          (this.map = a.map),
          (this.lightMap = a.lightMap),
          (this.lightMapIntensity = a.lightMapIntensity),
          (this.aoMap = a.aoMap),
          (this.aoMapIntensity = a.aoMapIntensity),
          this.emissive.copy(a.emissive),
          (this.emissiveMap = a.emissiveMap),
          (this.emissiveIntensity = a.emissiveIntensity),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.roughnessMap = a.roughnessMap),
          (this.metalnessMap = a.metalnessMap),
          (this.alphaMap = a.alphaMap),
          (this.envMap = a.envMap),
          this.envMapRotation.copy(a.envMapRotation),
          (this.envMapIntensity = a.envMapIntensity),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.wireframeLinecap = a.wireframeLinecap),
          (this.wireframeLinejoin = a.wireframeLinejoin),
          (this.flatShading = a.flatShading),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fI extends fH {
      constructor(a) {
        (super(),
          (this.isMeshPhysicalMaterial = !0),
          (this.defines = { STANDARD: '', PHYSICAL: '' }),
          (this.type = 'MeshPhysicalMaterial'),
          (this.anisotropyRotation = 0),
          (this.anisotropyMap = null),
          (this.clearcoatMap = null),
          (this.clearcoatRoughness = 0),
          (this.clearcoatRoughnessMap = null),
          (this.clearcoatNormalScale = new ao(1, 1)),
          (this.clearcoatNormalMap = null),
          (this.ior = 1.5),
          Object.defineProperty(this, 'reflectivity', {
            get: function () {
              return ai((2.5 * (this.ior - 1)) / (this.ior + 1), 0, 1);
            },
            set: function (a) {
              this.ior = (1 + 0.4 * a) / (1 - 0.4 * a);
            },
          }),
          (this.iridescenceMap = null),
          (this.iridescenceIOR = 1.3),
          (this.iridescenceThicknessRange = [100, 400]),
          (this.iridescenceThicknessMap = null),
          (this.sheenColor = new bX(0)),
          (this.sheenColorMap = null),
          (this.sheenRoughness = 1),
          (this.sheenRoughnessMap = null),
          (this.transmissionMap = null),
          (this.thickness = 0),
          (this.thicknessMap = null),
          (this.attenuationDistance = 1 / 0),
          (this.attenuationColor = new bX(1, 1, 1)),
          (this.specularIntensity = 1),
          (this.specularIntensityMap = null),
          (this.specularColor = new bX(1, 1, 1)),
          (this.specularColorMap = null),
          (this._anisotropy = 0),
          (this._clearcoat = 0),
          (this._dispersion = 0),
          (this._iridescence = 0),
          (this._sheen = 0),
          (this._transmission = 0),
          this.setValues(a));
      }
      get anisotropy() {
        return this._anisotropy;
      }
      set anisotropy(a) {
        (this._anisotropy > 0 != a > 0 && this.version++,
          (this._anisotropy = a));
      }
      get clearcoat() {
        return this._clearcoat;
      }
      set clearcoat(a) {
        (this._clearcoat > 0 != a > 0 && this.version++, (this._clearcoat = a));
      }
      get iridescence() {
        return this._iridescence;
      }
      set iridescence(a) {
        (this._iridescence > 0 != a > 0 && this.version++,
          (this._iridescence = a));
      }
      get dispersion() {
        return this._dispersion;
      }
      set dispersion(a) {
        (this._dispersion > 0 != a > 0 && this.version++,
          (this._dispersion = a));
      }
      get sheen() {
        return this._sheen;
      }
      set sheen(a) {
        (this._sheen > 0 != a > 0 && this.version++, (this._sheen = a));
      }
      get transmission() {
        return this._transmission;
      }
      set transmission(a) {
        (this._transmission > 0 != a > 0 && this.version++,
          (this._transmission = a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.defines = { STANDARD: '', PHYSICAL: '' }),
          (this.anisotropy = a.anisotropy),
          (this.anisotropyRotation = a.anisotropyRotation),
          (this.anisotropyMap = a.anisotropyMap),
          (this.clearcoat = a.clearcoat),
          (this.clearcoatMap = a.clearcoatMap),
          (this.clearcoatRoughness = a.clearcoatRoughness),
          (this.clearcoatRoughnessMap = a.clearcoatRoughnessMap),
          (this.clearcoatNormalMap = a.clearcoatNormalMap),
          this.clearcoatNormalScale.copy(a.clearcoatNormalScale),
          (this.dispersion = a.dispersion),
          (this.ior = a.ior),
          (this.iridescence = a.iridescence),
          (this.iridescenceMap = a.iridescenceMap),
          (this.iridescenceIOR = a.iridescenceIOR),
          (this.iridescenceThicknessRange = [...a.iridescenceThicknessRange]),
          (this.iridescenceThicknessMap = a.iridescenceThicknessMap),
          (this.sheen = a.sheen),
          this.sheenColor.copy(a.sheenColor),
          (this.sheenColorMap = a.sheenColorMap),
          (this.sheenRoughness = a.sheenRoughness),
          (this.sheenRoughnessMap = a.sheenRoughnessMap),
          (this.transmission = a.transmission),
          (this.transmissionMap = a.transmissionMap),
          (this.thickness = a.thickness),
          (this.thicknessMap = a.thicknessMap),
          (this.attenuationDistance = a.attenuationDistance),
          this.attenuationColor.copy(a.attenuationColor),
          (this.specularIntensity = a.specularIntensity),
          (this.specularIntensityMap = a.specularIntensityMap),
          this.specularColor.copy(a.specularColor),
          (this.specularColorMap = a.specularColorMap),
          this
        );
      }
    }
    class fJ extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshPhongMaterial = !0),
          (this.type = 'MeshPhongMaterial'),
          (this.color = new bX(0xffffff)),
          (this.specular = new bX(1118481)),
          (this.shininess = 30),
          (this.map = null),
          (this.lightMap = null),
          (this.lightMapIntensity = 1),
          (this.aoMap = null),
          (this.aoMapIntensity = 1),
          (this.emissive = new bX(0)),
          (this.emissiveIntensity = 1),
          (this.emissiveMap = null),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.specularMap = null),
          (this.alphaMap = null),
          (this.envMap = null),
          (this.envMapRotation = new bn()),
          (this.combine = 0),
          (this.reflectivity = 1),
          (this.refractionRatio = 0.98),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.wireframeLinecap = 'round'),
          (this.wireframeLinejoin = 'round'),
          (this.flatShading = !1),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          this.specular.copy(a.specular),
          (this.shininess = a.shininess),
          (this.map = a.map),
          (this.lightMap = a.lightMap),
          (this.lightMapIntensity = a.lightMapIntensity),
          (this.aoMap = a.aoMap),
          (this.aoMapIntensity = a.aoMapIntensity),
          this.emissive.copy(a.emissive),
          (this.emissiveMap = a.emissiveMap),
          (this.emissiveIntensity = a.emissiveIntensity),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.specularMap = a.specularMap),
          (this.alphaMap = a.alphaMap),
          (this.envMap = a.envMap),
          this.envMapRotation.copy(a.envMapRotation),
          (this.combine = a.combine),
          (this.reflectivity = a.reflectivity),
          (this.refractionRatio = a.refractionRatio),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.wireframeLinecap = a.wireframeLinecap),
          (this.wireframeLinejoin = a.wireframeLinejoin),
          (this.flatShading = a.flatShading),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fK extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshToonMaterial = !0),
          (this.defines = { TOON: '' }),
          (this.type = 'MeshToonMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.gradientMap = null),
          (this.lightMap = null),
          (this.lightMapIntensity = 1),
          (this.aoMap = null),
          (this.aoMapIntensity = 1),
          (this.emissive = new bX(0)),
          (this.emissiveIntensity = 1),
          (this.emissiveMap = null),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.alphaMap = null),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.wireframeLinecap = 'round'),
          (this.wireframeLinejoin = 'round'),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.gradientMap = a.gradientMap),
          (this.lightMap = a.lightMap),
          (this.lightMapIntensity = a.lightMapIntensity),
          (this.aoMap = a.aoMap),
          (this.aoMapIntensity = a.aoMapIntensity),
          this.emissive.copy(a.emissive),
          (this.emissiveMap = a.emissiveMap),
          (this.emissiveIntensity = a.emissiveIntensity),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.alphaMap = a.alphaMap),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.wireframeLinecap = a.wireframeLinecap),
          (this.wireframeLinejoin = a.wireframeLinejoin),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fL extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshNormalMaterial = !0),
          (this.type = 'MeshNormalMaterial'),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.flatShading = !1),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.flatShading = a.flatShading),
          this
        );
      }
    }
    class fM extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshLambertMaterial = !0),
          (this.type = 'MeshLambertMaterial'),
          (this.color = new bX(0xffffff)),
          (this.map = null),
          (this.lightMap = null),
          (this.lightMapIntensity = 1),
          (this.aoMap = null),
          (this.aoMapIntensity = 1),
          (this.emissive = new bX(0)),
          (this.emissiveIntensity = 1),
          (this.emissiveMap = null),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.specularMap = null),
          (this.alphaMap = null),
          (this.envMap = null),
          (this.envMapRotation = new bn()),
          (this.combine = 0),
          (this.reflectivity = 1),
          (this.refractionRatio = 0.98),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.wireframeLinecap = 'round'),
          (this.wireframeLinejoin = 'round'),
          (this.flatShading = !1),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          this.color.copy(a.color),
          (this.map = a.map),
          (this.lightMap = a.lightMap),
          (this.lightMapIntensity = a.lightMapIntensity),
          (this.aoMap = a.aoMap),
          (this.aoMapIntensity = a.aoMapIntensity),
          this.emissive.copy(a.emissive),
          (this.emissiveMap = a.emissiveMap),
          (this.emissiveIntensity = a.emissiveIntensity),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.specularMap = a.specularMap),
          (this.alphaMap = a.alphaMap),
          (this.envMap = a.envMap),
          this.envMapRotation.copy(a.envMapRotation),
          (this.combine = a.combine),
          (this.reflectivity = a.reflectivity),
          (this.refractionRatio = a.refractionRatio),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.wireframeLinecap = a.wireframeLinecap),
          (this.wireframeLinejoin = a.wireframeLinejoin),
          (this.flatShading = a.flatShading),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fN extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshDepthMaterial = !0),
          (this.type = 'MeshDepthMaterial'),
          (this.depthPacking = 3200),
          (this.map = null),
          (this.alphaMap = null),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.depthPacking = a.depthPacking),
          (this.map = a.map),
          (this.alphaMap = a.alphaMap),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          this
        );
      }
    }
    class fO extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshDistanceMaterial = !0),
          (this.type = 'MeshDistanceMaterial'),
          (this.map = null),
          (this.alphaMap = null),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.map = a.map),
          (this.alphaMap = a.alphaMap),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          this
        );
      }
    }
    class fP extends b$ {
      constructor(a) {
        (super(),
          (this.isMeshMatcapMaterial = !0),
          (this.defines = { MATCAP: '' }),
          (this.type = 'MeshMatcapMaterial'),
          (this.color = new bX(0xffffff)),
          (this.matcap = null),
          (this.map = null),
          (this.bumpMap = null),
          (this.bumpScale = 1),
          (this.normalMap = null),
          (this.normalMapType = 0),
          (this.normalScale = new ao(1, 1)),
          (this.displacementMap = null),
          (this.displacementScale = 1),
          (this.displacementBias = 0),
          (this.alphaMap = null),
          (this.wireframe = !1),
          (this.wireframeLinewidth = 1),
          (this.flatShading = !1),
          (this.fog = !0),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.defines = { MATCAP: '' }),
          this.color.copy(a.color),
          (this.matcap = a.matcap),
          (this.map = a.map),
          (this.bumpMap = a.bumpMap),
          (this.bumpScale = a.bumpScale),
          (this.normalMap = a.normalMap),
          (this.normalMapType = a.normalMapType),
          this.normalScale.copy(a.normalScale),
          (this.displacementMap = a.displacementMap),
          (this.displacementScale = a.displacementScale),
          (this.displacementBias = a.displacementBias),
          (this.alphaMap = a.alphaMap),
          (this.wireframe = a.wireframe),
          (this.wireframeLinewidth = a.wireframeLinewidth),
          (this.flatShading = a.flatShading),
          (this.fog = a.fog),
          this
        );
      }
    }
    class fQ extends d4 {
      constructor(a) {
        (super(),
          (this.isLineDashedMaterial = !0),
          (this.type = 'LineDashedMaterial'),
          (this.scale = 1),
          (this.dashSize = 3),
          (this.gapSize = 1),
          this.setValues(a));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.scale = a.scale),
          (this.dashSize = a.dashSize),
          (this.gapSize = a.gapSize),
          this
        );
      }
    }
    function fR(a, b) {
      return a && a.constructor !== b
        ? 'number' == typeof b.BYTES_PER_ELEMENT
          ? new b(a)
          : Array.prototype.slice.call(a)
        : a;
    }
    function fS(a) {
      let b = a.length,
        c = Array(b);
      for (let a = 0; a !== b; ++a) c[a] = a;
      return (
        c.sort(function (b, c) {
          return a[b] - a[c];
        }),
        c
      );
    }
    function fT(a, b, c) {
      let d = a.length,
        e = new a.constructor(d);
      for (let f = 0, g = 0; g !== d; ++f) {
        let d = c[f] * b;
        for (let c = 0; c !== b; ++c) e[g++] = a[d + c];
      }
      return e;
    }
    function fU(a, b, c, d) {
      let e = 1,
        f = a[0];
      for (; void 0 !== f && void 0 === f[d]; ) f = a[e++];
      if (void 0 === f) return;
      let g = f[d];
      if (void 0 !== g)
        if (Array.isArray(g))
          do
            (void 0 !== (g = f[d]) && (b.push(f.time), c.push(...g)),
              (f = a[e++]));
          while (void 0 !== f);
        else if (void 0 !== g.toArray)
          do
            (void 0 !== (g = f[d]) && (b.push(f.time), g.toArray(c, c.length)),
              (f = a[e++]));
          while (void 0 !== f);
        else
          do
            (void 0 !== (g = f[d]) && (b.push(f.time), c.push(g)),
              (f = a[e++]));
          while (void 0 !== f);
    }
    class fV {
      static convertArray(a, b) {
        return fR(a, b);
      }
      static isTypedArray(a) {
        return T(a);
      }
      static getKeyframeOrder(a) {
        return fS(a);
      }
      static sortedArray(a, b, c) {
        return fT(a, b, c);
      }
      static flattenJSON(a, b, c, d) {
        fU(a, b, c, d);
      }
      static subclip(a, b, c, d, e = 30) {
        return (function (a, b, c, d, e = 30) {
          let f = a.clone();
          f.name = b;
          let g = [];
          for (let a = 0; a < f.tracks.length; ++a) {
            let b = f.tracks[a],
              h = b.getValueSize(),
              i = [],
              j = [];
            for (let a = 0; a < b.times.length; ++a) {
              let f = b.times[a] * e;
              if (!(f < c) && !(f >= d)) {
                i.push(b.times[a]);
                for (let c = 0; c < h; ++c) j.push(b.values[a * h + c]);
              }
            }
            0 !== i.length &&
              ((b.times = fR(i, b.times.constructor)),
              (b.values = fR(j, b.values.constructor)),
              g.push(b));
          }
          f.tracks = g;
          let h = 1 / 0;
          for (let a = 0; a < f.tracks.length; ++a)
            h > f.tracks[a].times[0] && (h = f.tracks[a].times[0]);
          for (let a = 0; a < f.tracks.length; ++a) f.tracks[a].shift(-1 * h);
          return (f.resetDuration(), f);
        })(a, b, c, d, e);
      }
      static makeClipAdditive(a, b = 0, c = a, d = 30) {
        return (function (a, b = 0, c = a, d = 30) {
          d <= 0 && (d = 30);
          let e = c.tracks.length,
            f = b / d;
          for (let b = 0; b < e; ++b) {
            let d,
              e = c.tracks[b],
              g = e.ValueTypeName;
            if ('bool' === g || 'string' === g) continue;
            let h = a.tracks.find(function (a) {
              return a.name === e.name && a.ValueTypeName === g;
            });
            if (void 0 === h) continue;
            let i = 0,
              j = e.getValueSize();
            e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline &&
              (i = j / 3);
            let k = 0,
              l = h.getValueSize();
            h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline &&
              (k = l / 3);
            let m = e.times.length - 1;
            if (f <= e.times[0]) {
              let a = i,
                b = j - i;
              d = e.values.slice(a, b);
            } else if (f >= e.times[m]) {
              let a = m * j + i,
                b = a + j - i;
              d = e.values.slice(a, b);
            } else {
              let a = e.createInterpolant(),
                b = i,
                c = j - i;
              (a.evaluate(f), (d = a.resultBuffer.slice(b, c)));
            }
            'quaternion' === g &&
              new ap().fromArray(d).normalize().conjugate().toArray(d);
            let n = h.times.length;
            for (let a = 0; a < n; ++a) {
              let b = a * l + k;
              if ('quaternion' === g)
                ap.multiplyQuaternionsFlat(h.values, b, d, 0, h.values, b);
              else {
                let a = l - 2 * k;
                for (let c = 0; c < a; ++c) h.values[b + c] -= d[c];
              }
            }
          }
          return ((a.blendMode = 2501), a);
        })(a, b, c, d);
      }
    }
    class fW {
      constructor(a, b, c, d) {
        ((this.parameterPositions = a),
          (this._cachedIndex = 0),
          (this.resultBuffer = void 0 !== d ? d : new b.constructor(c)),
          (this.sampleValues = b),
          (this.valueSize = c),
          (this.settings = null),
          (this.DefaultSettings_ = {}));
      }
      evaluate(a) {
        let b = this.parameterPositions,
          c = this._cachedIndex,
          d = b[c],
          e = b[c - 1];
        c: {
          d: {
            let f;
            e: {
              f: if (!(a < d)) {
                for (let f = c + 2; ; ) {
                  if (void 0 === d) {
                    if (a < e) break f;
                    return (
                      (c = b.length),
                      (this._cachedIndex = c),
                      this.copySampleValue_(c - 1)
                    );
                  }
                  if (c === f) break;
                  if (((e = d), a < (d = b[++c]))) break d;
                }
                f = b.length;
                break e;
              }
              if (!(a >= e)) {
                let g = b[1];
                a < g && ((c = 2), (e = g));
                for (let f = c - 2; ; ) {
                  if (void 0 === e)
                    return ((this._cachedIndex = 0), this.copySampleValue_(0));
                  if (c === f) break;
                  if (((d = e), a >= (e = b[--c - 1]))) break d;
                }
                ((f = c), (c = 0));
                break e;
              }
              break c;
            }
            for (; c < f; ) {
              let d = (c + f) >>> 1;
              a < b[d] ? (f = d) : (c = d + 1);
            }
            if (((d = b[c]), void 0 === (e = b[c - 1])))
              return ((this._cachedIndex = 0), this.copySampleValue_(0));
            if (void 0 === d)
              return (
                (c = b.length),
                (this._cachedIndex = c),
                this.copySampleValue_(c - 1)
              );
          }
          ((this._cachedIndex = c), this.intervalChanged_(c, e, d));
        }
        return this.interpolate_(c, e, a, d);
      }
      getSettings_() {
        return this.settings || this.DefaultSettings_;
      }
      copySampleValue_(a) {
        let b = this.resultBuffer,
          c = this.sampleValues,
          d = this.valueSize,
          e = a * d;
        for (let a = 0; a !== d; ++a) b[a] = c[e + a];
        return b;
      }
      interpolate_() {
        throw Error('call to abstract method');
      }
      intervalChanged_() {}
    }
    class fX extends fW {
      constructor(a, b, c, d) {
        (super(a, b, c, d),
          (this._weightPrev = -0),
          (this._offsetPrev = -0),
          (this._weightNext = -0),
          (this._offsetNext = -0),
          (this.DefaultSettings_ = { endingStart: 2400, endingEnd: 2400 }));
      }
      intervalChanged_(a, b, c) {
        let d = this.parameterPositions,
          e = a - 2,
          f = a + 1,
          g = d[e],
          h = d[f];
        if (void 0 === g)
          switch (this.getSettings_().endingStart) {
            case 2401:
              ((e = a), (g = 2 * b - c));
              break;
            case 2402:
              ((e = d.length - 2), (g = b + d[e] - d[e + 1]));
              break;
            default:
              ((e = a), (g = c));
          }
        if (void 0 === h)
          switch (this.getSettings_().endingEnd) {
            case 2401:
              ((f = a), (h = 2 * c - b));
              break;
            case 2402:
              ((f = 1), (h = c + d[1] - d[0]));
              break;
            default:
              ((f = a - 1), (h = b));
          }
        let i = (c - b) * 0.5,
          j = this.valueSize;
        ((this._weightPrev = i / (b - g)),
          (this._weightNext = i / (h - c)),
          (this._offsetPrev = e * j),
          (this._offsetNext = f * j));
      }
      interpolate_(a, b, c, d) {
        let e = this.resultBuffer,
          f = this.sampleValues,
          g = this.valueSize,
          h = a * g,
          i = h - g,
          j = this._offsetPrev,
          k = this._offsetNext,
          l = this._weightPrev,
          m = this._weightNext,
          n = (c - b) / (d - b),
          o = n * n,
          p = o * n,
          q = -l * p + 2 * l * o - l * n,
          r = (1 + l) * p + (-1.5 - 2 * l) * o + (-0.5 + l) * n + 1,
          s = (-1 - m) * p + (1.5 + m) * o + 0.5 * n,
          t = m * p - m * o;
        for (let a = 0; a !== g; ++a)
          e[a] = q * f[j + a] + r * f[i + a] + s * f[h + a] + t * f[k + a];
        return e;
      }
    }
    class fY extends fW {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
      interpolate_(a, b, c, d) {
        let e = this.resultBuffer,
          f = this.sampleValues,
          g = this.valueSize,
          h = a * g,
          i = h - g,
          j = (c - b) / (d - b),
          k = 1 - j;
        for (let a = 0; a !== g; ++a) e[a] = f[i + a] * k + f[h + a] * j;
        return e;
      }
    }
    class fZ extends fW {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
      interpolate_(a) {
        return this.copySampleValue_(a - 1);
      }
    }
    class f$ {
      constructor(a, b, c, d) {
        if (void 0 === a)
          throw Error('THREE.KeyframeTrack: track name is undefined');
        if (void 0 === b || 0 === b.length)
          throw Error('THREE.KeyframeTrack: no keyframes in track named ' + a);
        ((this.name = a),
          (this.times = fR(b, this.TimeBufferType)),
          (this.values = fR(c, this.ValueBufferType)),
          this.setInterpolation(d || this.DefaultInterpolation));
      }
      static toJSON(a) {
        let b,
          c = a.constructor;
        if (c.toJSON !== this.toJSON) b = c.toJSON(a);
        else {
          b = {
            name: a.name,
            times: fR(a.times, Array),
            values: fR(a.values, Array),
          };
          let c = a.getInterpolation();
          c !== a.DefaultInterpolation && (b.interpolation = c);
        }
        return ((b.type = a.ValueTypeName), b);
      }
      InterpolantFactoryMethodDiscrete(a) {
        return new fZ(this.times, this.values, this.getValueSize(), a);
      }
      InterpolantFactoryMethodLinear(a) {
        return new fY(this.times, this.values, this.getValueSize(), a);
      }
      InterpolantFactoryMethodSmooth(a) {
        return new fX(this.times, this.values, this.getValueSize(), a);
      }
      setInterpolation(a) {
        let b;
        switch (a) {
          case 2300:
            b = this.InterpolantFactoryMethodDiscrete;
            break;
          case 2301:
            b = this.InterpolantFactoryMethodLinear;
            break;
          case 2302:
            b = this.InterpolantFactoryMethodSmooth;
        }
        if (void 0 === b) {
          let b =
            'unsupported interpolation for ' +
            this.ValueTypeName +
            ' keyframe track named ' +
            this.name;
          if (void 0 === this.createInterpolant)
            if (a !== this.DefaultInterpolation)
              this.setInterpolation(this.DefaultInterpolation);
            else throw Error(b);
          return (_('KeyframeTrack:', b), this);
        }
        return ((this.createInterpolant = b), this);
      }
      getInterpolation() {
        switch (this.createInterpolant) {
          case this.InterpolantFactoryMethodDiscrete:
            return 2300;
          case this.InterpolantFactoryMethodLinear:
            return 2301;
          case this.InterpolantFactoryMethodSmooth:
            return 2302;
        }
      }
      getValueSize() {
        return this.values.length / this.times.length;
      }
      shift(a) {
        if (0 !== a) {
          let b = this.times;
          for (let c = 0, d = b.length; c !== d; ++c) b[c] += a;
        }
        return this;
      }
      scale(a) {
        if (1 !== a) {
          let b = this.times;
          for (let c = 0, d = b.length; c !== d; ++c) b[c] *= a;
        }
        return this;
      }
      trim(a, b) {
        let c = this.times,
          d = c.length,
          e = 0,
          f = d - 1;
        for (; e !== d && c[e] < a; ) ++e;
        for (; -1 !== f && c[f] > b; ) --f;
        if ((++f, 0 !== e || f !== d)) {
          e >= f && (e = (f = Math.max(f, 1)) - 1);
          let a = this.getValueSize();
          ((this.times = c.slice(e, f)),
            (this.values = this.values.slice(e * a, f * a)));
        }
        return this;
      }
      validate() {
        let a = !0,
          b = this.getValueSize();
        b - Math.floor(b) != 0 &&
          (aa('KeyframeTrack: Invalid value size in track.', this), (a = !1));
        let c = this.times,
          d = this.values,
          e = c.length;
        0 === e && (aa('KeyframeTrack: Track is empty.', this), (a = !1));
        let f = null;
        for (let b = 0; b !== e; b++) {
          let d = c[b];
          if ('number' == typeof d && isNaN(d)) {
            (aa('KeyframeTrack: Time is not a valid number.', this, b, d),
              (a = !1));
            break;
          }
          if (null !== f && f > d) {
            (aa('KeyframeTrack: Out of order keys.', this, b, d, f), (a = !1));
            break;
          }
          f = d;
        }
        if (void 0 !== d && T(d))
          for (let b = 0, c = d.length; b !== c; ++b) {
            let c = d[b];
            if (isNaN(c)) {
              (aa('KeyframeTrack: Value is not a valid number.', this, b, c),
                (a = !1));
              break;
            }
          }
        return a;
      }
      optimize() {
        let a = this.times.slice(),
          b = this.values.slice(),
          c = this.getValueSize(),
          d = 2302 === this.getInterpolation(),
          e = a.length - 1,
          f = 1;
        for (let g = 1; g < e; ++g) {
          let e = !1,
            h = a[g];
          if (h !== a[g + 1] && (1 !== g || h !== a[0]))
            if (d) e = !0;
            else {
              let a = g * c,
                d = a - c,
                f = a + c;
              for (let g = 0; g !== c; ++g) {
                let c = b[a + g];
                if (c !== b[d + g] || c !== b[f + g]) {
                  e = !0;
                  break;
                }
              }
            }
          if (e) {
            if (g !== f) {
              a[f] = a[g];
              let d = g * c,
                e = f * c;
              for (let a = 0; a !== c; ++a) b[e + a] = b[d + a];
            }
            ++f;
          }
        }
        if (e > 0) {
          a[f] = a[e];
          for (let a = e * c, d = f * c, g = 0; g !== c; ++g)
            b[d + g] = b[a + g];
          ++f;
        }
        return (
          f !== a.length
            ? ((this.times = a.slice(0, f)), (this.values = b.slice(0, f * c)))
            : ((this.times = a), (this.values = b)),
          this
        );
      }
      clone() {
        let a = this.times.slice(),
          b = this.values.slice(),
          c = new this.constructor(this.name, a, b);
        return ((c.createInterpolant = this.createInterpolant), c);
      }
    }
    ((f$.prototype.ValueTypeName = ''),
      (f$.prototype.TimeBufferType = Float32Array),
      (f$.prototype.ValueBufferType = Float32Array),
      (f$.prototype.DefaultInterpolation = 2301));
    class f_ extends f$ {
      constructor(a, b, c) {
        super(a, b, c);
      }
    }
    ((f_.prototype.ValueTypeName = 'bool'),
      (f_.prototype.ValueBufferType = Array),
      (f_.prototype.DefaultInterpolation = 2300),
      (f_.prototype.InterpolantFactoryMethodLinear = void 0),
      (f_.prototype.InterpolantFactoryMethodSmooth = void 0));
    class f0 extends f$ {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
    }
    f0.prototype.ValueTypeName = 'color';
    class f1 extends f$ {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
    }
    f1.prototype.ValueTypeName = 'number';
    class f2 extends fW {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
      interpolate_(a, b, c, d) {
        let e = this.resultBuffer,
          f = this.sampleValues,
          g = this.valueSize,
          h = (c - b) / (d - b),
          i = a * g;
        for (let a = i + g; i !== a; i += 4)
          ap.slerpFlat(e, 0, f, i - g, f, i, h);
        return e;
      }
    }
    class f3 extends f$ {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
      InterpolantFactoryMethodLinear(a) {
        return new f2(this.times, this.values, this.getValueSize(), a);
      }
    }
    ((f3.prototype.ValueTypeName = 'quaternion'),
      (f3.prototype.InterpolantFactoryMethodSmooth = void 0));
    class f4 extends f$ {
      constructor(a, b, c) {
        super(a, b, c);
      }
    }
    ((f4.prototype.ValueTypeName = 'string'),
      (f4.prototype.ValueBufferType = Array),
      (f4.prototype.DefaultInterpolation = 2300),
      (f4.prototype.InterpolantFactoryMethodLinear = void 0),
      (f4.prototype.InterpolantFactoryMethodSmooth = void 0));
    class f5 extends f$ {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
    }
    f5.prototype.ValueTypeName = 'vector';
    class f6 {
      constructor(a = '', b = -1, c = [], d = 2500) {
        ((this.name = a),
          (this.tracks = c),
          (this.duration = b),
          (this.blendMode = d),
          (this.uuid = ah()),
          (this.userData = {}),
          this.duration < 0 && this.resetDuration());
      }
      static parse(a) {
        let b = [],
          c = a.tracks,
          d = 1 / (a.fps || 1);
        for (let a = 0, e = c.length; a !== e; ++a)
          b.push(
            (function (a) {
              if (void 0 === a.type)
                throw Error(
                  'THREE.KeyframeTrack: track type undefined, can not parse'
                );
              let b = (function (a) {
                switch (a.toLowerCase()) {
                  case 'scalar':
                  case 'double':
                  case 'float':
                  case 'number':
                  case 'integer':
                    return f1;
                  case 'vector':
                  case 'vector2':
                  case 'vector3':
                  case 'vector4':
                    return f5;
                  case 'color':
                    return f0;
                  case 'quaternion':
                    return f3;
                  case 'bool':
                  case 'boolean':
                    return f_;
                  case 'string':
                    return f4;
                }
                throw Error('THREE.KeyframeTrack: Unsupported typeName: ' + a);
              })(a.type);
              if (void 0 === a.times) {
                let b = [],
                  c = [];
                (fU(a.keys, b, c, 'value'), (a.times = b), (a.values = c));
              }
              return void 0 !== b.parse
                ? b.parse(a)
                : new b(a.name, a.times, a.values, a.interpolation);
            })(c[a]).scale(d)
          );
        let e = new this(a.name, a.duration, b, a.blendMode);
        return (
          (e.uuid = a.uuid),
          (e.userData = JSON.parse(a.userData || '{}')),
          e
        );
      }
      static toJSON(a) {
        let b = [],
          c = a.tracks,
          d = {
            name: a.name,
            duration: a.duration,
            tracks: b,
            uuid: a.uuid,
            blendMode: a.blendMode,
            userData: JSON.stringify(a.userData),
          };
        for (let a = 0, d = c.length; a !== d; ++a) b.push(f$.toJSON(c[a]));
        return d;
      }
      static CreateFromMorphTargetSequence(a, b, c, d) {
        let e = b.length,
          f = [];
        for (let a = 0; a < e; a++) {
          let g = [],
            h = [];
          (g.push((a + e - 1) % e, a, (a + 1) % e), h.push(0, 1, 0));
          let i = fS(g);
          ((g = fT(g, 1, i)),
            (h = fT(h, 1, i)),
            d || 0 !== g[0] || (g.push(e), h.push(h[0])),
            f.push(
              new f1('.morphTargetInfluences[' + b[a].name + ']', g, h).scale(
                1 / c
              )
            ));
        }
        return new this(a, -1, f);
      }
      static findByName(a, b) {
        let c = a;
        Array.isArray(a) ||
          (c = (a.geometry && a.geometry.animations) || a.animations);
        for (let a = 0; a < c.length; a++) if (c[a].name === b) return c[a];
        return null;
      }
      static CreateClipsFromMorphTargetSequences(a, b, c) {
        let d = {},
          e = /^([\w-]*?)([\d]+)$/;
        for (let b = 0, c = a.length; b < c; b++) {
          let c = a[b],
            f = c.name.match(e);
          if (f && f.length > 1) {
            let a = f[1],
              b = d[a];
            (b || (d[a] = b = []), b.push(c));
          }
        }
        let f = [];
        for (let a in d)
          f.push(this.CreateFromMorphTargetSequence(a, d[a], b, c));
        return f;
      }
      static parseAnimation(a, b) {
        if (
          (_(
            'AnimationClip: parseAnimation() is deprecated and will be removed with r185'
          ),
          !a)
        )
          return (aa('AnimationClip: No animation in JSONLoader data.'), null);
        let c = function (a, b, c, d, e) {
            if (0 !== c.length) {
              let f = [],
                g = [];
              (fU(c, f, g, d), 0 !== f.length && e.push(new a(b, f, g)));
            }
          },
          d = [],
          e = a.name || 'default',
          f = a.fps || 30,
          g = a.blendMode,
          h = a.length || -1,
          i = a.hierarchy || [];
        for (let a = 0; a < i.length; a++) {
          let e = i[a].keys;
          if (e && 0 !== e.length)
            if (e[0].morphTargets) {
              let a,
                b = {};
              for (a = 0; a < e.length; a++)
                if (e[a].morphTargets)
                  for (let c = 0; c < e[a].morphTargets.length; c++)
                    b[e[a].morphTargets[c]] = -1;
              for (let c in b) {
                let b = [],
                  f = [];
                for (let d = 0; d !== e[a].morphTargets.length; ++d) {
                  let d = e[a];
                  (b.push(d.time), f.push(+(d.morphTarget === c)));
                }
                d.push(new f1('.morphTargetInfluence[' + c + ']', b, f));
              }
              h = b.length * f;
            } else {
              let f = '.bones[' + b[a].name + ']';
              (c(f5, f + '.position', e, 'pos', d),
                c(f3, f + '.quaternion', e, 'rot', d),
                c(f5, f + '.scale', e, 'scl', d));
            }
        }
        return 0 === d.length ? null : new this(e, h, d, g);
      }
      resetDuration() {
        let a = this.tracks,
          b = 0;
        for (let c = 0, d = a.length; c !== d; ++c) {
          let a = this.tracks[c];
          b = Math.max(b, a.times[a.times.length - 1]);
        }
        return ((this.duration = b), this);
      }
      trim() {
        for (let a = 0; a < this.tracks.length; a++)
          this.tracks[a].trim(0, this.duration);
        return this;
      }
      validate() {
        let a = !0;
        for (let b = 0; b < this.tracks.length; b++)
          a = a && this.tracks[b].validate();
        return a;
      }
      optimize() {
        for (let a = 0; a < this.tracks.length; a++) this.tracks[a].optimize();
        return this;
      }
      clone() {
        let a = [];
        for (let b = 0; b < this.tracks.length; b++)
          a.push(this.tracks[b].clone());
        let b = new this.constructor(
          this.name,
          this.duration,
          a,
          this.blendMode
        );
        return ((b.userData = JSON.parse(JSON.stringify(this.userData))), b);
      }
      toJSON() {
        return this.constructor.toJSON(this);
      }
    }
    let f7 = {
      enabled: !1,
      files: {},
      add: function (a, b) {
        !1 !== this.enabled && (this.files[a] = b);
      },
      get: function (a) {
        if (!1 !== this.enabled) return this.files[a];
      },
      remove: function (a) {
        delete this.files[a];
      },
      clear: function () {
        this.files = {};
      },
    };
    class f8 {
      constructor(a, b, c) {
        let d;
        const e = this;
        let f = !1,
          g = 0,
          h = 0;
        const i = [];
        ((this.onStart = void 0),
          (this.onLoad = a),
          (this.onProgress = b),
          (this.onError = c),
          (this._abortController = null),
          (this.itemStart = function (a) {
            (h++,
              !1 === f && void 0 !== e.onStart && e.onStart(a, g, h),
              (f = !0));
          }),
          (this.itemEnd = function (a) {
            (g++,
              void 0 !== e.onProgress && e.onProgress(a, g, h),
              g === h && ((f = !1), void 0 !== e.onLoad && e.onLoad()));
          }),
          (this.itemError = function (a) {
            void 0 !== e.onError && e.onError(a);
          }),
          (this.resolveURL = function (a) {
            return d ? d(a) : a;
          }),
          (this.setURLModifier = function (a) {
            return ((d = a), this);
          }),
          (this.addHandler = function (a, b) {
            return (i.push(a, b), this);
          }),
          (this.removeHandler = function (a) {
            let b = i.indexOf(a);
            return (-1 !== b && i.splice(b, 2), this);
          }),
          (this.getHandler = function (a) {
            for (let b = 0, c = i.length; b < c; b += 2) {
              let c = i[b],
                d = i[b + 1];
              if ((c.global && (c.lastIndex = 0), c.test(a))) return d;
            }
            return null;
          }),
          (this.abort = function () {
            return (
              this.abortController.abort(),
              (this._abortController = null),
              this
            );
          }));
      }
      get abortController() {
        return (
          this._abortController ||
            (this._abortController = new AbortController()),
          this._abortController
        );
      }
    }
    let f9 = new f8();
    class ga {
      constructor(a) {
        ((this.manager = void 0 !== a ? a : f9),
          (this.crossOrigin = 'anonymous'),
          (this.withCredentials = !1),
          (this.path = ''),
          (this.resourcePath = ''),
          (this.requestHeader = {}));
      }
      load() {}
      loadAsync(a, b) {
        let c = this;
        return new Promise(function (d, e) {
          c.load(a, d, b, e);
        });
      }
      parse() {}
      setCrossOrigin(a) {
        return ((this.crossOrigin = a), this);
      }
      setWithCredentials(a) {
        return ((this.withCredentials = a), this);
      }
      setPath(a) {
        return ((this.path = a), this);
      }
      setResourcePath(a) {
        return ((this.resourcePath = a), this);
      }
      setRequestHeader(a) {
        return ((this.requestHeader = a), this);
      }
      abort() {
        return this;
      }
    }
    ga.DEFAULT_MATERIAL_NAME = '__DEFAULT';
    let gb = {};
    class gc extends Error {
      constructor(a, b) {
        (super(a), (this.response = b));
      }
    }
    class gd extends ga {
      constructor(a) {
        (super(a),
          (this.mimeType = ''),
          (this.responseType = ''),
          (this._abortController = new AbortController()));
      }
      load(a, b, c, d) {
        (void 0 === a && (a = ''),
          void 0 !== this.path && (a = this.path + a),
          (a = this.manager.resolveURL(a)));
        let e = f7.get(`file:${a}`);
        if (void 0 !== e)
          return (
            this.manager.itemStart(a),
            setTimeout(() => {
              (b && b(e), this.manager.itemEnd(a));
            }, 0),
            e
          );
        if (void 0 !== gb[a])
          return void gb[a].push({ onLoad: b, onProgress: c, onError: d });
        ((gb[a] = []), gb[a].push({ onLoad: b, onProgress: c, onError: d }));
        let f = new Request(a, {
            headers: new Headers(this.requestHeader),
            credentials: this.withCredentials ? 'include' : 'same-origin',
            signal:
              'function' == typeof AbortSignal.any
                ? AbortSignal.any([
                    this._abortController.signal,
                    this.manager.abortController.signal,
                  ])
                : this._abortController.signal,
          }),
          g = this.mimeType,
          h = this.responseType;
        (fetch(f)
          .then((b) => {
            if (200 === b.status || 0 === b.status) {
              if (
                (0 === b.status && _('FileLoader: HTTP Status 0 received.'),
                'u' < typeof ReadableStream ||
                  void 0 === b.body ||
                  void 0 === b.body.getReader)
              )
                return b;
              let c = gb[a],
                d = b.body.getReader(),
                e =
                  b.headers.get('X-File-Size') ||
                  b.headers.get('Content-Length'),
                f = e ? parseInt(e) : 0,
                g = 0 !== f,
                h = 0;
              return new Response(
                new ReadableStream({
                  start(a) {
                    !(function b() {
                      d.read().then(
                        ({ done: d, value: e }) => {
                          if (d) a.close();
                          else {
                            let d = new ProgressEvent('progress', {
                              lengthComputable: g,
                              loaded: (h += e.byteLength),
                              total: f,
                            });
                            for (let a = 0, b = c.length; a < b; a++) {
                              let b = c[a];
                              b.onProgress && b.onProgress(d);
                            }
                            (a.enqueue(e), b());
                          }
                        },
                        (b) => {
                          a.error(b);
                        }
                      );
                    })();
                  },
                })
              );
            }
            throw new gc(
              `fetch for "${b.url}" responded with ${b.status}: ${b.statusText}`,
              b
            );
          })
          .then((a) => {
            switch (h) {
              case 'arraybuffer':
                return a.arrayBuffer();
              case 'blob':
                return a.blob();
              case 'document':
                return a
                  .text()
                  .then((a) => new DOMParser().parseFromString(a, g));
              case 'json':
                return a.json();
              default:
                if ('' === g) return a.text();
                {
                  let b = /charset="?([^;"\s]*)"?/i.exec(g),
                    c = new TextDecoder(
                      b && b[1] ? b[1].toLowerCase() : void 0
                    );
                  return a.arrayBuffer().then((a) => c.decode(a));
                }
            }
          })
          .then((b) => {
            f7.add(`file:${a}`, b);
            let c = gb[a];
            delete gb[a];
            for (let a = 0, d = c.length; a < d; a++) {
              let d = c[a];
              d.onLoad && d.onLoad(b);
            }
          })
          .catch((b) => {
            let c = gb[a];
            if (void 0 === c) throw (this.manager.itemError(a), b);
            delete gb[a];
            for (let a = 0, d = c.length; a < d; a++) {
              let d = c[a];
              d.onError && d.onError(b);
            }
            this.manager.itemError(a);
          })
          .finally(() => {
            this.manager.itemEnd(a);
          }),
          this.manager.itemStart(a));
      }
      setResponseType(a) {
        return ((this.responseType = a), this);
      }
      setMimeType(a) {
        return ((this.mimeType = a), this);
      }
      abort() {
        return (
          this._abortController.abort(),
          (this._abortController = new AbortController()),
          this
        );
      }
    }
    class ge extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = new gd(this.manager);
        (f.setPath(this.path),
          f.setRequestHeader(this.requestHeader),
          f.setWithCredentials(this.withCredentials),
          f.load(
            a,
            function (c) {
              try {
                b(e.parse(JSON.parse(c)));
              } catch (b) {
                (d ? d(b) : aa(b), e.manager.itemError(a));
              }
            },
            c,
            d
          ));
      }
      parse(a) {
        let b = [];
        for (let c = 0; c < a.length; c++) {
          let d = f6.parse(a[c]);
          b.push(d);
        }
        return b;
      }
    }
    class gf extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = [],
          g = new es(),
          h = new gd(this.manager);
        (h.setPath(this.path),
          h.setResponseType('arraybuffer'),
          h.setRequestHeader(this.requestHeader),
          h.setWithCredentials(e.withCredentials));
        let i = 0;
        if (Array.isArray(a))
          for (let j = 0, k = a.length; j < k; ++j)
            !(function (j) {
              h.load(
                a[j],
                function (a) {
                  let c = e.parse(a, !0);
                  ((f[j] = {
                    width: c.width,
                    height: c.height,
                    format: c.format,
                    mipmaps: c.mipmaps,
                  }),
                    6 === (i += 1) &&
                      (1 === c.mipmapCount && (g.minFilter = 1006),
                      (g.image = f),
                      (g.format = c.format),
                      (g.needsUpdate = !0),
                      b && b(g)));
                },
                c,
                d
              );
            })(j);
        else
          h.load(
            a,
            function (a) {
              let c = e.parse(a, !0);
              if (c.isCubemap) {
                let a = c.mipmaps.length / c.mipmapCount;
                for (let b = 0; b < a; b++) {
                  f[b] = { mipmaps: [] };
                  for (let a = 0; a < c.mipmapCount; a++)
                    (f[b].mipmaps.push(c.mipmaps[b * c.mipmapCount + a]),
                      (f[b].format = c.format),
                      (f[b].width = c.width),
                      (f[b].height = c.height));
                }
                g.image = f;
              } else
                ((g.image.width = c.width),
                  (g.image.height = c.height),
                  (g.mipmaps = c.mipmaps));
              (1 === c.mipmapCount && (g.minFilter = 1006),
                (g.format = c.format),
                (g.needsUpdate = !0),
                b && b(g));
            },
            c,
            d
          );
        return g;
      }
    }
    let gg = new WeakMap();
    class gh extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        (void 0 !== this.path && (a = this.path + a),
          (a = this.manager.resolveURL(a)));
        let e = this,
          f = f7.get(`image:${a}`);
        if (void 0 !== f) {
          if (!0 === f.complete)
            (e.manager.itemStart(a),
              setTimeout(function () {
                (b && b(f), e.manager.itemEnd(a));
              }, 0));
          else {
            let a = gg.get(f);
            (void 0 === a && ((a = []), gg.set(f, a)),
              a.push({ onLoad: b, onError: d }));
          }
          return f;
        }
        let g = U('img');
        function h() {
          (j(), b && b(this));
          let c = gg.get(this) || [];
          for (let a = 0; a < c.length; a++) {
            let b = c[a];
            b.onLoad && b.onLoad(this);
          }
          (gg.delete(this), e.manager.itemEnd(a));
        }
        function i(b) {
          (j(), d && d(b), f7.remove(`image:${a}`));
          let c = gg.get(this) || [];
          for (let a = 0; a < c.length; a++) {
            let d = c[a];
            d.onError && d.onError(b);
          }
          (gg.delete(this), e.manager.itemError(a), e.manager.itemEnd(a));
        }
        function j() {
          (g.removeEventListener('load', h, !1),
            g.removeEventListener('error', i, !1));
        }
        return (
          g.addEventListener('load', h, !1),
          g.addEventListener('error', i, !1),
          'data:' !== a.slice(0, 5) &&
            void 0 !== this.crossOrigin &&
            (g.crossOrigin = this.crossOrigin),
          f7.add(`image:${a}`, g),
          e.manager.itemStart(a),
          (g.src = a),
          g
        );
      }
    }
    class gi extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = new cO();
        e.colorSpace = I;
        let f = new gh(this.manager);
        (f.setCrossOrigin(this.crossOrigin), f.setPath(this.path));
        let g = 0;
        for (let c = 0; c < a.length; ++c)
          !(function (c) {
            f.load(
              a[c],
              function (a) {
                ((e.images[c] = a),
                  6 == ++g && ((e.needsUpdate = !0), b && b(e)));
              },
              void 0,
              d
            );
          })(c);
        return e;
      }
    }
    class gj extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = new dr(),
          g = new gd(this.manager);
        return (
          g.setResponseType('arraybuffer'),
          g.setRequestHeader(this.requestHeader),
          g.setPath(this.path),
          g.setWithCredentials(e.withCredentials),
          g.load(
            a,
            function (a) {
              let c;
              try {
                c = e.parse(a);
              } catch (a) {
                if (void 0 === d) return void a(a);
                d(a);
              }
              (void 0 !== c.image
                ? (f.image = c.image)
                : void 0 !== c.data &&
                  ((f.image.width = c.width),
                  (f.image.height = c.height),
                  (f.image.data = c.data)),
                (f.wrapS = void 0 !== c.wrapS ? c.wrapS : 1001),
                (f.wrapT = void 0 !== c.wrapT ? c.wrapT : 1001),
                (f.magFilter = void 0 !== c.magFilter ? c.magFilter : 1006),
                (f.minFilter = void 0 !== c.minFilter ? c.minFilter : 1006),
                (f.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1),
                void 0 !== c.colorSpace && (f.colorSpace = c.colorSpace),
                void 0 !== c.flipY && (f.flipY = c.flipY),
                void 0 !== c.format && (f.format = c.format),
                void 0 !== c.type && (f.type = c.type),
                void 0 !== c.mipmaps &&
                  ((f.mipmaps = c.mipmaps), (f.minFilter = 1008)),
                1 === c.mipmapCount && (f.minFilter = 1006),
                void 0 !== c.generateMipmaps &&
                  (f.generateMipmaps = c.generateMipmaps),
                (f.needsUpdate = !0),
                b && b(f, c));
            },
            c,
            d
          ),
          f
        );
      }
    }
    class gk extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = new aG(),
          f = new gh(this.manager);
        return (
          f.setCrossOrigin(this.crossOrigin),
          f.setPath(this.path),
          f.load(
            a,
            function (a) {
              ((e.image = a), (e.needsUpdate = !0), void 0 !== b && b(e));
            },
            c,
            d
          ),
          e
        );
      }
    }
    class gl extends bE {
      constructor(a, b = 1) {
        (super(),
          (this.isLight = !0),
          (this.type = 'Light'),
          (this.color = new bX(a)),
          (this.intensity = b));
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          this.color.copy(a.color),
          (this.intensity = a.intensity),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.color = this.color.getHex()),
          (b.object.intensity = this.intensity),
          b
        );
      }
    }
    class gm extends gl {
      constructor(a, b, c) {
        (super(a, c),
          (this.isHemisphereLight = !0),
          (this.type = 'HemisphereLight'),
          this.position.copy(bE.DEFAULT_UP),
          this.updateMatrix(),
          (this.groundColor = new bX(b)));
      }
      copy(a, b) {
        return (super.copy(a, b), this.groundColor.copy(a.groundColor), this);
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return ((b.object.groundColor = this.groundColor.getHex()), b);
      }
    }
    let gn = new bd(),
      go = new aq(),
      gp = new aq();
    class gq {
      constructor(a) {
        ((this.camera = a),
          (this.intensity = 1),
          (this.bias = 0),
          (this.normalBias = 0),
          (this.radius = 1),
          (this.blurSamples = 8),
          (this.mapSize = new ao(512, 512)),
          (this.mapType = 1009),
          (this.map = null),
          (this.mapPass = null),
          (this.matrix = new bd()),
          (this.autoUpdate = !0),
          (this.needsUpdate = !1),
          (this._frustum = new dL()),
          (this._frameExtents = new ao(1, 1)),
          (this._viewportCount = 1),
          (this._viewports = [new aH(0, 0, 1, 1)]));
      }
      getViewportCount() {
        return this._viewportCount;
      }
      getFrustum() {
        return this._frustum;
      }
      updateMatrices(a) {
        let b = this.camera,
          c = this.matrix;
        (go.setFromMatrixPosition(a.matrixWorld),
          b.position.copy(go),
          gp.setFromMatrixPosition(a.target.matrixWorld),
          b.lookAt(gp),
          b.updateMatrixWorld(),
          gn.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse),
          this._frustum.setFromProjectionMatrix(
            gn,
            b.coordinateSystem,
            b.reversedDepth
          ),
          b.reversedDepth
            ? c.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 1, 0, 0, 0, 0, 1)
            : c.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1),
          c.multiply(gn));
      }
      getViewport(a) {
        return this._viewports[a];
      }
      getFrameExtents() {
        return this._frameExtents;
      }
      dispose() {
        (this.map && this.map.dispose(),
          this.mapPass && this.mapPass.dispose());
      }
      copy(a) {
        return (
          (this.camera = a.camera.clone()),
          (this.intensity = a.intensity),
          (this.bias = a.bias),
          (this.radius = a.radius),
          (this.autoUpdate = a.autoUpdate),
          (this.needsUpdate = a.needsUpdate),
          (this.normalBias = a.normalBias),
          (this.blurSamples = a.blurSamples),
          this.mapSize.copy(a.mapSize),
          this
        );
      }
      clone() {
        return new this.constructor().copy(this);
      }
      toJSON() {
        let a = {};
        return (
          1 !== this.intensity && (a.intensity = this.intensity),
          0 !== this.bias && (a.bias = this.bias),
          0 !== this.normalBias && (a.normalBias = this.normalBias),
          1 !== this.radius && (a.radius = this.radius),
          (512 !== this.mapSize.x || 512 !== this.mapSize.y) &&
            (a.mapSize = this.mapSize.toArray()),
          (a.camera = this.camera.toJSON(!1).object),
          delete a.camera.matrix,
          a
        );
      }
    }
    class gr extends gq {
      constructor() {
        (super(new cM(50, 1, 0.5, 500)),
          (this.isSpotLightShadow = !0),
          (this.focus = 1),
          (this.aspect = 1));
      }
      updateMatrices(a) {
        let b = this.camera,
          c = 2 * ag * a.angle * this.focus,
          d = (this.mapSize.width / this.mapSize.height) * this.aspect,
          e = a.distance || b.far;
        ((c !== b.fov || d !== b.aspect || e !== b.far) &&
          ((b.fov = c),
          (b.aspect = d),
          (b.far = e),
          b.updateProjectionMatrix()),
          super.updateMatrices(a));
      }
      copy(a) {
        return (super.copy(a), (this.focus = a.focus), this);
      }
    }
    class gs extends gl {
      constructor(a, b, c = 0, d = Math.PI / 3, e = 0, f = 2) {
        (super(a, b),
          (this.isSpotLight = !0),
          (this.type = 'SpotLight'),
          this.position.copy(bE.DEFAULT_UP),
          this.updateMatrix(),
          (this.target = new bE()),
          (this.distance = c),
          (this.angle = d),
          (this.penumbra = e),
          (this.decay = f),
          (this.map = null),
          (this.shadow = new gr()));
      }
      get power() {
        return this.intensity * Math.PI;
      }
      set power(a) {
        this.intensity = a / Math.PI;
      }
      dispose() {
        (super.dispose(), this.shadow.dispose());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.distance = a.distance),
          (this.angle = a.angle),
          (this.penumbra = a.penumbra),
          (this.decay = a.decay),
          (this.target = a.target.clone()),
          (this.map = a.map),
          (this.shadow = a.shadow.clone()),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.distance = this.distance),
          (b.object.angle = this.angle),
          (b.object.decay = this.decay),
          (b.object.penumbra = this.penumbra),
          (b.object.target = this.target.uuid),
          this.map &&
            this.map.isTexture &&
            (b.object.map = this.map.toJSON(a).uuid),
          (b.object.shadow = this.shadow.toJSON()),
          b
        );
      }
    }
    class gt extends gq {
      constructor() {
        (super(new cM(90, 1, 0.5, 500)), (this.isPointLightShadow = !0));
      }
    }
    class gu extends gl {
      constructor(a, b, c = 0, d = 2) {
        (super(a, b),
          (this.isPointLight = !0),
          (this.type = 'PointLight'),
          (this.distance = c),
          (this.decay = d),
          (this.shadow = new gt()));
      }
      get power() {
        return 4 * this.intensity * Math.PI;
      }
      set power(a) {
        this.intensity = a / (4 * Math.PI);
      }
      dispose() {
        (super.dispose(), this.shadow.dispose());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.distance = a.distance),
          (this.decay = a.decay),
          (this.shadow = a.shadow.clone()),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.distance = this.distance),
          (b.object.decay = this.decay),
          (b.object.shadow = this.shadow.toJSON()),
          b
        );
      }
    }
    class gv extends cI {
      constructor(a = -1, b = 1, c = 1, d = -1, e = 0.1, f = 2e3) {
        (super(),
          (this.isOrthographicCamera = !0),
          (this.type = 'OrthographicCamera'),
          (this.zoom = 1),
          (this.view = null),
          (this.left = a),
          (this.right = b),
          (this.top = c),
          (this.bottom = d),
          (this.near = e),
          (this.far = f),
          this.updateProjectionMatrix());
      }
      copy(a, b) {
        return (
          super.copy(a, b),
          (this.left = a.left),
          (this.right = a.right),
          (this.top = a.top),
          (this.bottom = a.bottom),
          (this.near = a.near),
          (this.far = a.far),
          (this.zoom = a.zoom),
          (this.view = null === a.view ? null : Object.assign({}, a.view)),
          this
        );
      }
      setViewOffset(a, b, c, d, e, f) {
        (null === this.view &&
          (this.view = {
            enabled: !0,
            fullWidth: 1,
            fullHeight: 1,
            offsetX: 0,
            offsetY: 0,
            width: 1,
            height: 1,
          }),
          (this.view.enabled = !0),
          (this.view.fullWidth = a),
          (this.view.fullHeight = b),
          (this.view.offsetX = c),
          (this.view.offsetY = d),
          (this.view.width = e),
          (this.view.height = f),
          this.updateProjectionMatrix());
      }
      clearViewOffset() {
        (null !== this.view && (this.view.enabled = !1),
          this.updateProjectionMatrix());
      }
      updateProjectionMatrix() {
        let a = (this.right - this.left) / (2 * this.zoom),
          b = (this.top - this.bottom) / (2 * this.zoom),
          c = (this.right + this.left) / 2,
          d = (this.top + this.bottom) / 2,
          e = c - a,
          f = c + a,
          g = d + b,
          h = d - b;
        if (null !== this.view && this.view.enabled) {
          let a = (this.right - this.left) / this.view.fullWidth / this.zoom,
            b = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
          ((e += a * this.view.offsetX),
            (f = e + a * this.view.width),
            (g -= b * this.view.offsetY),
            (h = g - b * this.view.height));
        }
        (this.projectionMatrix.makeOrthographic(
          e,
          f,
          g,
          h,
          this.near,
          this.far,
          this.coordinateSystem,
          this.reversedDepth
        ),
          this.projectionMatrixInverse.copy(this.projectionMatrix).invert());
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.zoom = this.zoom),
          (b.object.left = this.left),
          (b.object.right = this.right),
          (b.object.top = this.top),
          (b.object.bottom = this.bottom),
          (b.object.near = this.near),
          (b.object.far = this.far),
          null !== this.view && (b.object.view = Object.assign({}, this.view)),
          b
        );
      }
    }
    class gw extends gq {
      constructor() {
        (super(new gv(-5, 5, 5, -5, 0.5, 500)),
          (this.isDirectionalLightShadow = !0));
      }
    }
    class gx extends gl {
      constructor(a, b) {
        (super(a, b),
          (this.isDirectionalLight = !0),
          (this.type = 'DirectionalLight'),
          this.position.copy(bE.DEFAULT_UP),
          this.updateMatrix(),
          (this.target = new bE()),
          (this.shadow = new gw()));
      }
      dispose() {
        (super.dispose(), this.shadow.dispose());
      }
      copy(a) {
        return (
          super.copy(a),
          (this.target = a.target.clone()),
          (this.shadow = a.shadow.clone()),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.shadow = this.shadow.toJSON()),
          (b.object.target = this.target.uuid),
          b
        );
      }
    }
    class gy extends gl {
      constructor(a, b) {
        (super(a, b), (this.isAmbientLight = !0), (this.type = 'AmbientLight'));
      }
    }
    class gz extends gl {
      constructor(a, b, c = 10, d = 10) {
        (super(a, b),
          (this.isRectAreaLight = !0),
          (this.type = 'RectAreaLight'),
          (this.width = c),
          (this.height = d));
      }
      get power() {
        return this.intensity * this.width * this.height * Math.PI;
      }
      set power(a) {
        this.intensity = a / (this.width * this.height * Math.PI);
      }
      copy(a) {
        return (
          super.copy(a),
          (this.width = a.width),
          (this.height = a.height),
          this
        );
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.object.width = this.width),
          (b.object.height = this.height),
          b
        );
      }
    }
    class gA {
      constructor() {
        ((this.isSphericalHarmonics3 = !0), (this.coefficients = []));
        for (let a = 0; a < 9; a++) this.coefficients.push(new aq());
      }
      set(a) {
        for (let b = 0; b < 9; b++) this.coefficients[b].copy(a[b]);
        return this;
      }
      zero() {
        for (let a = 0; a < 9; a++) this.coefficients[a].set(0, 0, 0);
        return this;
      }
      getAt(a, b) {
        let c = a.x,
          d = a.y,
          e = a.z,
          f = this.coefficients;
        return (
          b.copy(f[0]).multiplyScalar(0.282095),
          b.addScaledVector(f[1], 0.488603 * d),
          b.addScaledVector(f[2], 0.488603 * e),
          b.addScaledVector(f[3], 0.488603 * c),
          b.addScaledVector(f[4], c * d * 1.092548),
          b.addScaledVector(f[5], d * e * 1.092548),
          b.addScaledVector(f[6], 0.315392 * (3 * e * e - 1)),
          b.addScaledVector(f[7], c * e * 1.092548),
          b.addScaledVector(f[8], 0.546274 * (c * c - d * d)),
          b
        );
      }
      getIrradianceAt(a, b) {
        let c = a.x,
          d = a.y,
          e = a.z,
          f = this.coefficients;
        return (
          b.copy(f[0]).multiplyScalar(0.886227),
          b.addScaledVector(f[1], 1.023328 * d),
          b.addScaledVector(f[2], 1.023328 * e),
          b.addScaledVector(f[3], 1.023328 * c),
          b.addScaledVector(f[4], 0.858086 * c * d),
          b.addScaledVector(f[5], 0.858086 * d * e),
          b.addScaledVector(f[6], 0.743125 * e * e - 0.247708),
          b.addScaledVector(f[7], 0.858086 * c * e),
          b.addScaledVector(f[8], 0.429043 * (c * c - d * d)),
          b
        );
      }
      add(a) {
        for (let b = 0; b < 9; b++) this.coefficients[b].add(a.coefficients[b]);
        return this;
      }
      addScaledSH(a, b) {
        for (let c = 0; c < 9; c++)
          this.coefficients[c].addScaledVector(a.coefficients[c], b);
        return this;
      }
      scale(a) {
        for (let b = 0; b < 9; b++) this.coefficients[b].multiplyScalar(a);
        return this;
      }
      lerp(a, b) {
        for (let c = 0; c < 9; c++)
          this.coefficients[c].lerp(a.coefficients[c], b);
        return this;
      }
      equals(a) {
        for (let b = 0; b < 9; b++)
          if (!this.coefficients[b].equals(a.coefficients[b])) return !1;
        return !0;
      }
      copy(a) {
        return this.set(a.coefficients);
      }
      clone() {
        return new this.constructor().copy(this);
      }
      fromArray(a, b = 0) {
        let c = this.coefficients;
        for (let d = 0; d < 9; d++) c[d].fromArray(a, b + 3 * d);
        return this;
      }
      toArray(a = [], b = 0) {
        let c = this.coefficients;
        for (let d = 0; d < 9; d++) c[d].toArray(a, b + 3 * d);
        return a;
      }
      static getBasisAt(a, b) {
        let c = a.x,
          d = a.y,
          e = a.z;
        ((b[0] = 0.282095),
          (b[1] = 0.488603 * d),
          (b[2] = 0.488603 * e),
          (b[3] = 0.488603 * c),
          (b[4] = 1.092548 * c * d),
          (b[5] = 1.092548 * d * e),
          (b[6] = 0.315392 * (3 * e * e - 1)),
          (b[7] = 1.092548 * c * e),
          (b[8] = 0.546274 * (c * c - d * d)));
      }
    }
    class gB extends gl {
      constructor(a = new gA(), b = 1) {
        (super(void 0, b), (this.isLightProbe = !0), (this.sh = a));
      }
      copy(a) {
        return (super.copy(a), this.sh.copy(a.sh), this);
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return ((b.object.sh = this.sh.toArray()), b);
      }
    }
    class gC extends ga {
      constructor(a) {
        (super(a), (this.textures = {}));
      }
      load(a, b, c, d) {
        let e = this,
          f = new gd(e.manager);
        (f.setPath(e.path),
          f.setRequestHeader(e.requestHeader),
          f.setWithCredentials(e.withCredentials),
          f.load(
            a,
            function (c) {
              try {
                b(e.parse(JSON.parse(c)));
              } catch (b) {
                (d ? d(b) : aa(b), e.manager.itemError(a));
              }
            },
            c,
            d
          ));
      }
      parse(a) {
        let b = this.textures;
        function c(a) {
          return (
            void 0 === b[a] && _('MaterialLoader: Undefined texture', a),
            b[a]
          );
        }
        let d = this.createMaterialFromType(a.type);
        if (
          (void 0 !== a.uuid && (d.uuid = a.uuid),
          void 0 !== a.name && (d.name = a.name),
          void 0 !== a.color && void 0 !== d.color && d.color.setHex(a.color),
          void 0 !== a.roughness && (d.roughness = a.roughness),
          void 0 !== a.metalness && (d.metalness = a.metalness),
          void 0 !== a.sheen && (d.sheen = a.sheen),
          void 0 !== a.sheenColor &&
            (d.sheenColor = new bX().setHex(a.sheenColor)),
          void 0 !== a.sheenRoughness && (d.sheenRoughness = a.sheenRoughness),
          void 0 !== a.emissive &&
            void 0 !== d.emissive &&
            d.emissive.setHex(a.emissive),
          void 0 !== a.specular &&
            void 0 !== d.specular &&
            d.specular.setHex(a.specular),
          void 0 !== a.specularIntensity &&
            (d.specularIntensity = a.specularIntensity),
          void 0 !== a.specularColor &&
            void 0 !== d.specularColor &&
            d.specularColor.setHex(a.specularColor),
          void 0 !== a.shininess && (d.shininess = a.shininess),
          void 0 !== a.clearcoat && (d.clearcoat = a.clearcoat),
          void 0 !== a.clearcoatRoughness &&
            (d.clearcoatRoughness = a.clearcoatRoughness),
          void 0 !== a.dispersion && (d.dispersion = a.dispersion),
          void 0 !== a.iridescence && (d.iridescence = a.iridescence),
          void 0 !== a.iridescenceIOR && (d.iridescenceIOR = a.iridescenceIOR),
          void 0 !== a.iridescenceThicknessRange &&
            (d.iridescenceThicknessRange = a.iridescenceThicknessRange),
          void 0 !== a.transmission && (d.transmission = a.transmission),
          void 0 !== a.thickness && (d.thickness = a.thickness),
          void 0 !== a.attenuationDistance &&
            (d.attenuationDistance = a.attenuationDistance),
          void 0 !== a.attenuationColor &&
            void 0 !== d.attenuationColor &&
            d.attenuationColor.setHex(a.attenuationColor),
          void 0 !== a.anisotropy && (d.anisotropy = a.anisotropy),
          void 0 !== a.anisotropyRotation &&
            (d.anisotropyRotation = a.anisotropyRotation),
          void 0 !== a.fog && (d.fog = a.fog),
          void 0 !== a.flatShading && (d.flatShading = a.flatShading),
          void 0 !== a.blending && (d.blending = a.blending),
          void 0 !== a.combine && (d.combine = a.combine),
          void 0 !== a.side && (d.side = a.side),
          void 0 !== a.shadowSide && (d.shadowSide = a.shadowSide),
          void 0 !== a.opacity && (d.opacity = a.opacity),
          void 0 !== a.transparent && (d.transparent = a.transparent),
          void 0 !== a.alphaTest && (d.alphaTest = a.alphaTest),
          void 0 !== a.alphaHash && (d.alphaHash = a.alphaHash),
          void 0 !== a.depthFunc && (d.depthFunc = a.depthFunc),
          void 0 !== a.depthTest && (d.depthTest = a.depthTest),
          void 0 !== a.depthWrite && (d.depthWrite = a.depthWrite),
          void 0 !== a.colorWrite && (d.colorWrite = a.colorWrite),
          void 0 !== a.blendSrc && (d.blendSrc = a.blendSrc),
          void 0 !== a.blendDst && (d.blendDst = a.blendDst),
          void 0 !== a.blendEquation && (d.blendEquation = a.blendEquation),
          void 0 !== a.blendSrcAlpha && (d.blendSrcAlpha = a.blendSrcAlpha),
          void 0 !== a.blendDstAlpha && (d.blendDstAlpha = a.blendDstAlpha),
          void 0 !== a.blendEquationAlpha &&
            (d.blendEquationAlpha = a.blendEquationAlpha),
          void 0 !== a.blendColor &&
            void 0 !== d.blendColor &&
            d.blendColor.setHex(a.blendColor),
          void 0 !== a.blendAlpha && (d.blendAlpha = a.blendAlpha),
          void 0 !== a.stencilWriteMask &&
            (d.stencilWriteMask = a.stencilWriteMask),
          void 0 !== a.stencilFunc && (d.stencilFunc = a.stencilFunc),
          void 0 !== a.stencilRef && (d.stencilRef = a.stencilRef),
          void 0 !== a.stencilFuncMask &&
            (d.stencilFuncMask = a.stencilFuncMask),
          void 0 !== a.stencilFail && (d.stencilFail = a.stencilFail),
          void 0 !== a.stencilZFail && (d.stencilZFail = a.stencilZFail),
          void 0 !== a.stencilZPass && (d.stencilZPass = a.stencilZPass),
          void 0 !== a.stencilWrite && (d.stencilWrite = a.stencilWrite),
          void 0 !== a.wireframe && (d.wireframe = a.wireframe),
          void 0 !== a.wireframeLinewidth &&
            (d.wireframeLinewidth = a.wireframeLinewidth),
          void 0 !== a.wireframeLinecap &&
            (d.wireframeLinecap = a.wireframeLinecap),
          void 0 !== a.wireframeLinejoin &&
            (d.wireframeLinejoin = a.wireframeLinejoin),
          void 0 !== a.rotation && (d.rotation = a.rotation),
          void 0 !== a.linewidth && (d.linewidth = a.linewidth),
          void 0 !== a.dashSize && (d.dashSize = a.dashSize),
          void 0 !== a.gapSize && (d.gapSize = a.gapSize),
          void 0 !== a.scale && (d.scale = a.scale),
          void 0 !== a.polygonOffset && (d.polygonOffset = a.polygonOffset),
          void 0 !== a.polygonOffsetFactor &&
            (d.polygonOffsetFactor = a.polygonOffsetFactor),
          void 0 !== a.polygonOffsetUnits &&
            (d.polygonOffsetUnits = a.polygonOffsetUnits),
          void 0 !== a.dithering && (d.dithering = a.dithering),
          void 0 !== a.alphaToCoverage &&
            (d.alphaToCoverage = a.alphaToCoverage),
          void 0 !== a.premultipliedAlpha &&
            (d.premultipliedAlpha = a.premultipliedAlpha),
          void 0 !== a.forceSinglePass &&
            (d.forceSinglePass = a.forceSinglePass),
          void 0 !== a.allowOverride && (d.allowOverride = a.allowOverride),
          void 0 !== a.visible && (d.visible = a.visible),
          void 0 !== a.toneMapped && (d.toneMapped = a.toneMapped),
          void 0 !== a.userData && (d.userData = a.userData),
          void 0 !== a.vertexColors &&
            ('number' == typeof a.vertexColors
              ? (d.vertexColors = a.vertexColors > 0)
              : (d.vertexColors = a.vertexColors)),
          void 0 !== a.uniforms)
        )
          for (let b in a.uniforms) {
            let e = a.uniforms[b];
            switch (((d.uniforms[b] = {}), e.type)) {
              case 't':
                d.uniforms[b].value = c(e.value);
                break;
              case 'c':
                d.uniforms[b].value = new bX().setHex(e.value);
                break;
              case 'v2':
                d.uniforms[b].value = new ao().fromArray(e.value);
                break;
              case 'v3':
                d.uniforms[b].value = new aq().fromArray(e.value);
                break;
              case 'v4':
                d.uniforms[b].value = new aH().fromArray(e.value);
                break;
              case 'm3':
                d.uniforms[b].value = new at().fromArray(e.value);
                break;
              case 'm4':
                d.uniforms[b].value = new bd().fromArray(e.value);
                break;
              default:
                d.uniforms[b].value = e.value;
            }
          }
        if (
          (void 0 !== a.defines && (d.defines = a.defines),
          void 0 !== a.vertexShader && (d.vertexShader = a.vertexShader),
          void 0 !== a.fragmentShader && (d.fragmentShader = a.fragmentShader),
          void 0 !== a.glslVersion && (d.glslVersion = a.glslVersion),
          void 0 !== a.extensions)
        )
          for (let b in a.extensions) d.extensions[b] = a.extensions[b];
        if (
          (void 0 !== a.lights && (d.lights = a.lights),
          void 0 !== a.clipping && (d.clipping = a.clipping),
          void 0 !== a.size && (d.size = a.size),
          void 0 !== a.sizeAttenuation &&
            (d.sizeAttenuation = a.sizeAttenuation),
          void 0 !== a.map && (d.map = c(a.map)),
          void 0 !== a.matcap && (d.matcap = c(a.matcap)),
          void 0 !== a.alphaMap && (d.alphaMap = c(a.alphaMap)),
          void 0 !== a.bumpMap && (d.bumpMap = c(a.bumpMap)),
          void 0 !== a.bumpScale && (d.bumpScale = a.bumpScale),
          void 0 !== a.normalMap && (d.normalMap = c(a.normalMap)),
          void 0 !== a.normalMapType && (d.normalMapType = a.normalMapType),
          void 0 !== a.normalScale)
        ) {
          let b = a.normalScale;
          (!1 === Array.isArray(b) && (b = [b, b]),
            (d.normalScale = new ao().fromArray(b)));
        }
        return (
          void 0 !== a.displacementMap &&
            (d.displacementMap = c(a.displacementMap)),
          void 0 !== a.displacementScale &&
            (d.displacementScale = a.displacementScale),
          void 0 !== a.displacementBias &&
            (d.displacementBias = a.displacementBias),
          void 0 !== a.roughnessMap && (d.roughnessMap = c(a.roughnessMap)),
          void 0 !== a.metalnessMap && (d.metalnessMap = c(a.metalnessMap)),
          void 0 !== a.emissiveMap && (d.emissiveMap = c(a.emissiveMap)),
          void 0 !== a.emissiveIntensity &&
            (d.emissiveIntensity = a.emissiveIntensity),
          void 0 !== a.specularMap && (d.specularMap = c(a.specularMap)),
          void 0 !== a.specularIntensityMap &&
            (d.specularIntensityMap = c(a.specularIntensityMap)),
          void 0 !== a.specularColorMap &&
            (d.specularColorMap = c(a.specularColorMap)),
          void 0 !== a.envMap && (d.envMap = c(a.envMap)),
          void 0 !== a.envMapRotation &&
            d.envMapRotation.fromArray(a.envMapRotation),
          void 0 !== a.envMapIntensity &&
            (d.envMapIntensity = a.envMapIntensity),
          void 0 !== a.reflectivity && (d.reflectivity = a.reflectivity),
          void 0 !== a.refractionRatio &&
            (d.refractionRatio = a.refractionRatio),
          void 0 !== a.lightMap && (d.lightMap = c(a.lightMap)),
          void 0 !== a.lightMapIntensity &&
            (d.lightMapIntensity = a.lightMapIntensity),
          void 0 !== a.aoMap && (d.aoMap = c(a.aoMap)),
          void 0 !== a.aoMapIntensity && (d.aoMapIntensity = a.aoMapIntensity),
          void 0 !== a.gradientMap && (d.gradientMap = c(a.gradientMap)),
          void 0 !== a.clearcoatMap && (d.clearcoatMap = c(a.clearcoatMap)),
          void 0 !== a.clearcoatRoughnessMap &&
            (d.clearcoatRoughnessMap = c(a.clearcoatRoughnessMap)),
          void 0 !== a.clearcoatNormalMap &&
            (d.clearcoatNormalMap = c(a.clearcoatNormalMap)),
          void 0 !== a.clearcoatNormalScale &&
            (d.clearcoatNormalScale = new ao().fromArray(
              a.clearcoatNormalScale
            )),
          void 0 !== a.iridescenceMap &&
            (d.iridescenceMap = c(a.iridescenceMap)),
          void 0 !== a.iridescenceThicknessMap &&
            (d.iridescenceThicknessMap = c(a.iridescenceThicknessMap)),
          void 0 !== a.transmissionMap &&
            (d.transmissionMap = c(a.transmissionMap)),
          void 0 !== a.thicknessMap && (d.thicknessMap = c(a.thicknessMap)),
          void 0 !== a.anisotropyMap && (d.anisotropyMap = c(a.anisotropyMap)),
          void 0 !== a.sheenColorMap && (d.sheenColorMap = c(a.sheenColorMap)),
          void 0 !== a.sheenRoughnessMap &&
            (d.sheenRoughnessMap = c(a.sheenRoughnessMap)),
          d
        );
      }
      setTextures(a) {
        return ((this.textures = a), this);
      }
      createMaterialFromType(a) {
        return gC.createMaterialFromType(a);
      }
      static createMaterialFromType(a) {
        return new {
          ShadowMaterial: fF,
          SpriteMaterial: cZ,
          RawShaderMaterial: fG,
          ShaderMaterial: cH,
          PointsMaterial: ei,
          MeshPhysicalMaterial: fI,
          MeshStandardMaterial: fH,
          MeshPhongMaterial: fJ,
          MeshToonMaterial: fK,
          MeshNormalMaterial: fL,
          MeshLambertMaterial: fM,
          MeshDepthMaterial: fN,
          MeshDistanceMaterial: fO,
          MeshBasicMaterial: b_,
          MeshMatcapMaterial: fP,
          LineDashedMaterial: fQ,
          LineBasicMaterial: d4,
          Material: b$,
        }[a]();
      }
    }
    class gD {
      static extractUrlBase(a) {
        let b = a.lastIndexOf('/');
        return -1 === b ? './' : a.slice(0, b + 1);
      }
      static resolveURL(a, b) {
        return 'string' != typeof a || '' === a
          ? ''
          : (/^https?:\/\//i.test(b) &&
                /^\//.test(a) &&
                (b = b.replace(/(^https?:\/\/[^\/]+).*/i, '$1')),
              /^(https?:)?\/\//i.test(a) ||
                /^data:.*,.*$/i.test(a) ||
                /^blob:.*$/i.test(a))
            ? a
            : b + a;
      }
    }
    class gE extends co {
      constructor() {
        (super(),
          (this.isInstancedBufferGeometry = !0),
          (this.type = 'InstancedBufferGeometry'),
          (this.instanceCount = 1 / 0));
      }
      copy(a) {
        return (super.copy(a), (this.instanceCount = a.instanceCount), this);
      }
      toJSON() {
        let a = super.toJSON();
        return (
          (a.instanceCount = this.instanceCount),
          (a.isInstancedBufferGeometry = !0),
          a
        );
      }
    }
    class gF extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = new gd(e.manager);
        (f.setPath(e.path),
          f.setRequestHeader(e.requestHeader),
          f.setWithCredentials(e.withCredentials),
          f.load(
            a,
            function (c) {
              try {
                b(e.parse(JSON.parse(c)));
              } catch (b) {
                (d ? d(b) : aa(b), e.manager.itemError(a));
              }
            },
            c,
            d
          ));
      }
      parse(a) {
        let b = {},
          c = {};
        function d(a, d) {
          if (void 0 !== b[d]) return b[d];
          let e = a.interleavedBuffers[d],
            f = (function (a, b) {
              if (void 0 !== c[b]) return c[b];
              let d = new Uint32Array(a.arrayBuffers[b]).buffer;
              return ((c[b] = d), d);
            })(a, e.buffer),
            g = new cW(S(e.type, f), e.stride);
          return ((g.uuid = e.uuid), (b[d] = g), g);
        }
        let e = a.isInstancedBufferGeometry ? new gE() : new co(),
          f = a.data.index;
        if (void 0 !== f) {
          let a = S(f.type, f.array);
          e.setIndex(new b7(a, 1));
        }
        let g = a.data.attributes;
        for (let b in g) {
          let c,
            f = g[b];
          if (f.isInterleavedBufferAttribute)
            c = new cY(d(a.data, f.data), f.itemSize, f.offset, f.normalized);
          else {
            let a = S(f.type, f.array);
            c = new (f.isInstancedBufferAttribute ? dv : b7)(
              a,
              f.itemSize,
              f.normalized
            );
          }
          (void 0 !== f.name && (c.name = f.name),
            void 0 !== f.usage && c.setUsage(f.usage),
            e.setAttribute(b, c));
        }
        let h = a.data.morphAttributes;
        if (h)
          for (let b in h) {
            let c = h[b],
              f = [];
            for (let b = 0, e = c.length; b < e; b++) {
              let e,
                g = c[b];
              ((e = g.isInterleavedBufferAttribute
                ? new cY(d(a.data, g.data), g.itemSize, g.offset, g.normalized)
                : new b7(S(g.type, g.array), g.itemSize, g.normalized)),
                void 0 !== g.name && (e.name = g.name),
                f.push(e));
            }
            e.morphAttributes[b] = f;
          }
        a.data.morphTargetsRelative && (e.morphTargetsRelative = !0);
        let i = a.data.groups || a.data.drawcalls || a.data.offsets;
        if (void 0 !== i)
          for (let a = 0, b = i.length; a !== b; ++a) {
            let b = i[a];
            e.addGroup(b.start, b.count, b.materialIndex);
          }
        let j = a.data.boundingSphere;
        return (
          void 0 !== j && (e.boundingSphere = new a4().fromJSON(j)),
          a.name && (e.name = a.name),
          a.userData && (e.userData = a.userData),
          e
        );
      }
    }
    class gG extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = '' === this.path ? gD.extractUrlBase(a) : this.path;
        this.resourcePath = this.resourcePath || f;
        let g = new gd(this.manager);
        (g.setPath(this.path),
          g.setRequestHeader(this.requestHeader),
          g.setWithCredentials(this.withCredentials),
          g.load(
            a,
            function (c) {
              let f = null;
              try {
                f = JSON.parse(c);
              } catch (b) {
                (void 0 !== d && d(b),
                  b("ObjectLoader: Can't parse " + a + '.', b.message));
                return;
              }
              let g = f.metadata;
              if (
                void 0 === g ||
                void 0 === g.type ||
                'geometry' === g.type.toLowerCase()
              ) {
                (void 0 !== d &&
                  d(Error("THREE.ObjectLoader: Can't load " + a)),
                  aa("ObjectLoader: Can't load " + a));
                return;
              }
              e.parse(f, b);
            },
            c,
            d
          ));
      }
      async loadAsync(a, b) {
        let c = '' === this.path ? gD.extractUrlBase(a) : this.path;
        this.resourcePath = this.resourcePath || c;
        let d = new gd(this.manager);
        (d.setPath(this.path),
          d.setRequestHeader(this.requestHeader),
          d.setWithCredentials(this.withCredentials));
        let e = JSON.parse(await d.loadAsync(a, b)),
          f = e.metadata;
        if (
          void 0 === f ||
          void 0 === f.type ||
          'geometry' === f.type.toLowerCase()
        )
          throw Error("THREE.ObjectLoader: Can't load " + a);
        return await this.parseAsync(e);
      }
      parse(a, b) {
        let c = this.parseAnimations(a.animations),
          d = this.parseShapes(a.shapes),
          e = this.parseGeometries(a.geometries, d),
          f = this.parseImages(a.images, function () {
            void 0 !== b && b(i);
          }),
          g = this.parseTextures(a.textures, f),
          h = this.parseMaterials(a.materials, g),
          i = this.parseObject(a.object, e, h, g, c),
          j = this.parseSkeletons(a.skeletons, i);
        if (
          (this.bindSkeletons(i, j), this.bindLightTargets(i), void 0 !== b)
        ) {
          let a = !1;
          for (let b in f)
            if (f[b].data instanceof HTMLImageElement) {
              a = !0;
              break;
            }
          !1 === a && b(i);
        }
        return i;
      }
      async parseAsync(a) {
        let b = this.parseAnimations(a.animations),
          c = this.parseShapes(a.shapes),
          d = this.parseGeometries(a.geometries, c),
          e = await this.parseImagesAsync(a.images),
          f = this.parseTextures(a.textures, e),
          g = this.parseMaterials(a.materials, f),
          h = this.parseObject(a.object, d, g, f, b),
          i = this.parseSkeletons(a.skeletons, h);
        return (this.bindSkeletons(h, i), this.bindLightTargets(h), h);
      }
      parseShapes(a) {
        let b = {};
        if (void 0 !== a)
          for (let c = 0, d = a.length; c < d; c++) {
            let d = new e4().fromJSON(a[c]);
            b[d.uuid] = d;
          }
        return b;
      }
      parseSkeletons(a, b) {
        let c = {},
          d = {};
        if (
          (b.traverse(function (a) {
            a.isBone && (d[a.uuid] = a);
          }),
          void 0 !== a)
        )
          for (let b = 0, e = a.length; b < e; b++) {
            let e = new du().fromJSON(a[b], d);
            c[e.uuid] = e;
          }
        return c;
      }
      parseGeometries(a, b) {
        let c = {};
        if (void 0 !== a) {
          let d = new gF();
          for (let e = 0, f = a.length; e < f; e++) {
            let f,
              g = a[e];
            switch (g.type) {
              case 'BufferGeometry':
              case 'InstancedBufferGeometry':
                f = d.parse(g);
                break;
              default:
                g.type in fE
                  ? (f = fE[g.type].fromJSON(g, b))
                  : _(`ObjectLoader: Unsupported geometry type "${g.type}"`);
            }
            ((f.uuid = g.uuid),
              void 0 !== g.name && (f.name = g.name),
              void 0 !== g.userData && (f.userData = g.userData),
              (c[g.uuid] = f));
          }
        }
        return c;
      }
      parseMaterials(a, b) {
        let c = {},
          d = {};
        if (void 0 !== a) {
          let e = new gC();
          e.setTextures(b);
          for (let b = 0, f = a.length; b < f; b++) {
            let f = a[b];
            (void 0 === c[f.uuid] && (c[f.uuid] = e.parse(f)),
              (d[f.uuid] = c[f.uuid]));
          }
        }
        return d;
      }
      parseAnimations(a) {
        let b = {};
        if (void 0 !== a)
          for (let c = 0; c < a.length; c++) {
            let d = a[c],
              e = f6.parse(d);
            b[e.uuid] = e;
          }
        return b;
      }
      parseImages(a, b) {
        let c,
          d = this,
          e = {};
        function f(a) {
          if ('string' == typeof a) {
            var b;
            return (
              (b = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)
                ? a
                : d.resourcePath + a),
              d.manager.itemStart(b),
              c.load(
                b,
                function () {
                  d.manager.itemEnd(b);
                },
                void 0,
                function () {
                  (d.manager.itemError(b), d.manager.itemEnd(b));
                }
              )
            );
          }
          return a.data
            ? { data: S(a.type, a.data), width: a.width, height: a.height }
            : null;
        }
        if (void 0 !== a && a.length > 0) {
          (c = new gh(new f8(b))).setCrossOrigin(this.crossOrigin);
          for (let b = 0, c = a.length; b < c; b++) {
            let c = a[b],
              d = c.url;
            if (Array.isArray(d)) {
              let a = [];
              for (let b = 0, c = d.length; b < c; b++) {
                let c = f(d[b]);
                null !== c &&
                  (c instanceof HTMLImageElement
                    ? a.push(c)
                    : a.push(new dr(c.data, c.width, c.height)));
              }
              e[c.uuid] = new aC(a);
            } else {
              let a = f(c.url);
              e[c.uuid] = new aC(a);
            }
          }
        }
        return e;
      }
      async parseImagesAsync(a) {
        let b,
          c = this,
          d = {};
        async function e(a) {
          if ('string' == typeof a) {
            let d = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)
              ? a
              : c.resourcePath + a;
            return await b.loadAsync(d);
          }
          return a.data
            ? { data: S(a.type, a.data), width: a.width, height: a.height }
            : null;
        }
        if (void 0 !== a && a.length > 0) {
          (b = new gh(this.manager)).setCrossOrigin(this.crossOrigin);
          for (let b = 0, c = a.length; b < c; b++) {
            let c = a[b],
              f = c.url;
            if (Array.isArray(f)) {
              let a = [];
              for (let b = 0, c = f.length; b < c; b++) {
                let c = f[b],
                  d = await e(c);
                null !== d &&
                  (d instanceof HTMLImageElement
                    ? a.push(d)
                    : a.push(new dr(d.data, d.width, d.height)));
              }
              d[c.uuid] = new aC(a);
            } else {
              let a = await e(c.url);
              d[c.uuid] = new aC(a);
            }
          }
        }
        return d;
      }
      parseTextures(a, b) {
        function c(a, b) {
          return 'number' == typeof a
            ? a
            : (_(
                'ObjectLoader.parseTexture: Constant should be in numeric form.',
                a
              ),
              b[a]);
        }
        let d = {};
        if (void 0 !== a)
          for (let e = 0, f = a.length; e < f; e++) {
            let f,
              g = a[e];
            (void 0 === g.image &&
              _('ObjectLoader: No "image" specified for', g.uuid),
              void 0 === b[g.image] &&
                _('ObjectLoader: Undefined image', g.image));
            let h = b[g.image],
              i = h.data;
            (Array.isArray(i)
              ? ((f = new cO()), 6 === i.length && (f.needsUpdate = !0))
              : ((f = i && i.data ? new dr() : new aG()),
                i && (f.needsUpdate = !0)),
              (f.source = h),
              (f.uuid = g.uuid),
              void 0 !== g.name && (f.name = g.name),
              void 0 !== g.mapping && (f.mapping = c(g.mapping, gH)),
              void 0 !== g.channel && (f.channel = g.channel),
              void 0 !== g.offset && f.offset.fromArray(g.offset),
              void 0 !== g.repeat && f.repeat.fromArray(g.repeat),
              void 0 !== g.center && f.center.fromArray(g.center),
              void 0 !== g.rotation && (f.rotation = g.rotation),
              void 0 !== g.wrap &&
                ((f.wrapS = c(g.wrap[0], gI)), (f.wrapT = c(g.wrap[1], gI))),
              void 0 !== g.format && (f.format = g.format),
              void 0 !== g.internalFormat &&
                (f.internalFormat = g.internalFormat),
              void 0 !== g.type && (f.type = g.type),
              void 0 !== g.colorSpace && (f.colorSpace = g.colorSpace),
              void 0 !== g.minFilter && (f.minFilter = c(g.minFilter, gJ)),
              void 0 !== g.magFilter && (f.magFilter = c(g.magFilter, gJ)),
              void 0 !== g.anisotropy && (f.anisotropy = g.anisotropy),
              void 0 !== g.flipY && (f.flipY = g.flipY),
              void 0 !== g.generateMipmaps &&
                (f.generateMipmaps = g.generateMipmaps),
              void 0 !== g.premultiplyAlpha &&
                (f.premultiplyAlpha = g.premultiplyAlpha),
              void 0 !== g.unpackAlignment &&
                (f.unpackAlignment = g.unpackAlignment),
              void 0 !== g.compareFunction &&
                (f.compareFunction = g.compareFunction),
              void 0 !== g.userData && (f.userData = g.userData),
              (d[g.uuid] = f));
          }
        return d;
      }
      parseObject(a, b, c, d, e) {
        let f, g, h;
        function i(a) {
          return (
            void 0 === b[a] && _('ObjectLoader: Undefined geometry', a),
            b[a]
          );
        }
        function j(a) {
          if (void 0 !== a) {
            if (Array.isArray(a)) {
              let b = [];
              for (let d = 0, e = a.length; d < e; d++) {
                let e = a[d];
                (void 0 === c[e] && _('ObjectLoader: Undefined material', e),
                  b.push(c[e]));
              }
              return b;
            }
            return (
              void 0 === c[a] && _('ObjectLoader: Undefined material', a),
              c[a]
            );
          }
        }
        function k(a) {
          return (
            void 0 === d[a] && _('ObjectLoader: Undefined texture', a),
            d[a]
          );
        }
        switch (a.type) {
          case 'Scene':
            ((f = new cV()),
              void 0 !== a.background &&
                (Number.isInteger(a.background)
                  ? (f.background = new bX(a.background))
                  : (f.background = k(a.background))),
              void 0 !== a.environment && (f.environment = k(a.environment)),
              void 0 !== a.fog &&
                ('Fog' === a.fog.type
                  ? (f.fog = new cU(a.fog.color, a.fog.near, a.fog.far))
                  : 'FogExp2' === a.fog.type &&
                    (f.fog = new cT(a.fog.color, a.fog.density)),
                '' !== a.fog.name && (f.fog.name = a.fog.name)),
              void 0 !== a.backgroundBlurriness &&
                (f.backgroundBlurriness = a.backgroundBlurriness),
              void 0 !== a.backgroundIntensity &&
                (f.backgroundIntensity = a.backgroundIntensity),
              void 0 !== a.backgroundRotation &&
                f.backgroundRotation.fromArray(a.backgroundRotation),
              void 0 !== a.environmentIntensity &&
                (f.environmentIntensity = a.environmentIntensity),
              void 0 !== a.environmentRotation &&
                f.environmentRotation.fromArray(a.environmentRotation));
            break;
          case 'PerspectiveCamera':
            ((f = new cM(a.fov, a.aspect, a.near, a.far)),
              void 0 !== a.focus && (f.focus = a.focus),
              void 0 !== a.zoom && (f.zoom = a.zoom),
              void 0 !== a.filmGauge && (f.filmGauge = a.filmGauge),
              void 0 !== a.filmOffset && (f.filmOffset = a.filmOffset),
              void 0 !== a.view && (f.view = Object.assign({}, a.view)));
            break;
          case 'OrthographicCamera':
            ((f = new gv(a.left, a.right, a.top, a.bottom, a.near, a.far)),
              void 0 !== a.zoom && (f.zoom = a.zoom),
              void 0 !== a.view && (f.view = Object.assign({}, a.view)));
            break;
          case 'AmbientLight':
            f = new gy(a.color, a.intensity);
            break;
          case 'DirectionalLight':
            (f = new gx(a.color, a.intensity)).target = a.target || '';
            break;
          case 'PointLight':
            f = new gu(a.color, a.intensity, a.distance, a.decay);
            break;
          case 'RectAreaLight':
            f = new gz(a.color, a.intensity, a.width, a.height);
            break;
          case 'SpotLight':
            (f = new gs(
              a.color,
              a.intensity,
              a.distance,
              a.angle,
              a.penumbra,
              a.decay
            )).target = a.target || '';
            break;
          case 'HemisphereLight':
            f = new gm(a.color, a.groundColor, a.intensity);
            break;
          case 'LightProbe':
            f = new gB(new gA().fromArray(a.sh), a.intensity);
            break;
          case 'SkinnedMesh':
            ((f = new dp((g = i(a.geometry)), (h = j(a.material)))),
              void 0 !== a.bindMode && (f.bindMode = a.bindMode),
              void 0 !== a.bindMatrix && f.bindMatrix.fromArray(a.bindMatrix),
              void 0 !== a.skeleton && (f.skeleton = a.skeleton));
            break;
          case 'Mesh':
            f = new cA((g = i(a.geometry)), (h = j(a.material)));
            break;
          case 'InstancedMesh':
            ((g = i(a.geometry)), (h = j(a.material)));
            let l = a.count,
              m = a.instanceMatrix,
              n = a.instanceColor;
            (((f = new dD(g, h, l)).instanceMatrix = new dv(
              new Float32Array(m.array),
              16
            )),
              void 0 !== n &&
                (f.instanceColor = new dv(
                  new Float32Array(n.array),
                  n.itemSize
                )));
            break;
          case 'BatchedMesh':
            ((g = i(a.geometry)),
              (h = j(a.material)),
              ((f = new d3(
                a.maxInstanceCount,
                a.maxVertexCount,
                a.maxIndexCount,
                h
              )).geometry = g),
              (f.perObjectFrustumCulled = a.perObjectFrustumCulled),
              (f.sortObjects = a.sortObjects),
              (f._drawRanges = a.drawRanges),
              (f._reservedRanges = a.reservedRanges),
              (f._geometryInfo = a.geometryInfo.map((a) => {
                let b = null,
                  c = null;
                return (
                  void 0 !== a.boundingBox &&
                    (b = new aO().fromJSON(a.boundingBox)),
                  void 0 !== a.boundingSphere &&
                    (c = new a4().fromJSON(a.boundingSphere)),
                  { ...a, boundingBox: b, boundingSphere: c }
                );
              })),
              (f._instanceInfo = a.instanceInfo),
              (f._availableInstanceIds = a._availableInstanceIds),
              (f._availableGeometryIds = a._availableGeometryIds),
              (f._nextIndexStart = a.nextIndexStart),
              (f._nextVertexStart = a.nextVertexStart),
              (f._geometryCount = a.geometryCount),
              (f._maxInstanceCount = a.maxInstanceCount),
              (f._maxVertexCount = a.maxVertexCount),
              (f._maxIndexCount = a.maxIndexCount),
              (f._geometryInitialized = a.geometryInitialized),
              (f._matricesTexture = k(a.matricesTexture.uuid)),
              (f._indirectTexture = k(a.indirectTexture.uuid)),
              void 0 !== a.colorsTexture &&
                (f._colorsTexture = k(a.colorsTexture.uuid)),
              void 0 !== a.boundingSphere &&
                (f.boundingSphere = new a4().fromJSON(a.boundingSphere)),
              void 0 !== a.boundingBox &&
                (f.boundingBox = new aO().fromJSON(a.boundingBox)));
            break;
          case 'LOD':
            f = new de();
            break;
          case 'Line':
            f = new ec(i(a.geometry), j(a.material));
            break;
          case 'LineLoop':
            f = new eh(i(a.geometry), j(a.material));
            break;
          case 'LineSegments':
            f = new eg(i(a.geometry), j(a.material));
            break;
          case 'PointCloud':
          case 'Points':
            f = new en(i(a.geometry), j(a.material));
            break;
          case 'Sprite':
            f = new da(j(a.material));
            break;
          case 'Group':
            f = new cQ();
            break;
          case 'Bone':
            f = new dq();
            break;
          default:
            f = new bE();
        }
        if (
          ((f.uuid = a.uuid),
          void 0 !== a.name && (f.name = a.name),
          void 0 !== a.matrix
            ? (f.matrix.fromArray(a.matrix),
              void 0 !== a.matrixAutoUpdate &&
                (f.matrixAutoUpdate = a.matrixAutoUpdate),
              f.matrixAutoUpdate &&
                f.matrix.decompose(f.position, f.quaternion, f.scale))
            : (void 0 !== a.position && f.position.fromArray(a.position),
              void 0 !== a.rotation && f.rotation.fromArray(a.rotation),
              void 0 !== a.quaternion && f.quaternion.fromArray(a.quaternion),
              void 0 !== a.scale && f.scale.fromArray(a.scale)),
          void 0 !== a.up && f.up.fromArray(a.up),
          void 0 !== a.castShadow && (f.castShadow = a.castShadow),
          void 0 !== a.receiveShadow && (f.receiveShadow = a.receiveShadow),
          a.shadow &&
            (void 0 !== a.shadow.intensity &&
              (f.shadow.intensity = a.shadow.intensity),
            void 0 !== a.shadow.bias && (f.shadow.bias = a.shadow.bias),
            void 0 !== a.shadow.normalBias &&
              (f.shadow.normalBias = a.shadow.normalBias),
            void 0 !== a.shadow.radius && (f.shadow.radius = a.shadow.radius),
            void 0 !== a.shadow.mapSize &&
              f.shadow.mapSize.fromArray(a.shadow.mapSize),
            void 0 !== a.shadow.camera &&
              (f.shadow.camera = this.parseObject(a.shadow.camera))),
          void 0 !== a.visible && (f.visible = a.visible),
          void 0 !== a.frustumCulled && (f.frustumCulled = a.frustumCulled),
          void 0 !== a.renderOrder && (f.renderOrder = a.renderOrder),
          void 0 !== a.userData && (f.userData = a.userData),
          void 0 !== a.layers && (f.layers.mask = a.layers),
          void 0 !== a.children)
        ) {
          let g = a.children;
          for (let a = 0; a < g.length; a++)
            f.add(this.parseObject(g[a], b, c, d, e));
        }
        if (void 0 !== a.animations) {
          let b = a.animations;
          for (let a = 0; a < b.length; a++) {
            let c = b[a];
            f.animations.push(e[c]);
          }
        }
        if ('LOD' === a.type) {
          void 0 !== a.autoUpdate && (f.autoUpdate = a.autoUpdate);
          let b = a.levels;
          for (let a = 0; a < b.length; a++) {
            let c = b[a],
              d = f.getObjectByProperty('uuid', c.object);
            void 0 !== d && f.addLevel(d, c.distance, c.hysteresis);
          }
        }
        return f;
      }
      bindSkeletons(a, b) {
        0 !== Object.keys(b).length &&
          a.traverse(function (a) {
            if (!0 === a.isSkinnedMesh && void 0 !== a.skeleton) {
              let c = b[a.skeleton];
              void 0 === c
                ? _('ObjectLoader: No skeleton found with UUID:', a.skeleton)
                : a.bind(c, a.bindMatrix);
            }
          });
      }
      bindLightTargets(a) {
        a.traverse(function (b) {
          if (b.isDirectionalLight || b.isSpotLight) {
            let c = b.target,
              d = a.getObjectByProperty('uuid', c);
            void 0 !== d ? (b.target = d) : (b.target = new bE());
          }
        });
      }
    }
    let gH = {
        UVMapping: 300,
        CubeReflectionMapping: 301,
        CubeRefractionMapping: 302,
        EquirectangularReflectionMapping: 303,
        EquirectangularRefractionMapping: 304,
        CubeUVReflectionMapping: 306,
      },
      gI = {
        RepeatWrapping: 1e3,
        ClampToEdgeWrapping: 1001,
        MirroredRepeatWrapping: 1002,
      },
      gJ = {
        NearestFilter: 1003,
        NearestMipmapNearestFilter: 1004,
        NearestMipmapLinearFilter: 1005,
        LinearFilter: 1006,
        LinearMipmapNearestFilter: 1007,
        LinearMipmapLinearFilter: 1008,
      },
      gK = new WeakMap();
    class gL extends ga {
      constructor(a) {
        (super(a),
          (this.isImageBitmapLoader = !0),
          'u' < typeof createImageBitmap &&
            _('ImageBitmapLoader: createImageBitmap() not supported.'),
          'u' < typeof fetch && _('ImageBitmapLoader: fetch() not supported.'),
          (this.options = { premultiplyAlpha: 'none' }),
          (this._abortController = new AbortController()));
      }
      setOptions(a) {
        return ((this.options = a), this);
      }
      load(a, b, c, d) {
        (void 0 === a && (a = ''),
          void 0 !== this.path && (a = this.path + a),
          (a = this.manager.resolveURL(a)));
        let e = this,
          f = f7.get(`image-bitmap:${a}`);
        if (void 0 !== f)
          return (e.manager.itemStart(a), f.then)
            ? void f.then((c) => {
                if (!0 !== gK.has(f))
                  return (b && b(c), e.manager.itemEnd(a), c);
                (d && d(gK.get(f)),
                  e.manager.itemError(a),
                  e.manager.itemEnd(a));
              })
            : (setTimeout(function () {
                (b && b(f), e.manager.itemEnd(a));
              }, 0),
              f);
        let g = {};
        ((g.credentials =
          'anonymous' === this.crossOrigin ? 'same-origin' : 'include'),
          (g.headers = this.requestHeader),
          (g.signal =
            'function' == typeof AbortSignal.any
              ? AbortSignal.any([
                  this._abortController.signal,
                  this.manager.abortController.signal,
                ])
              : this._abortController.signal));
        let h = fetch(a, g)
          .then(function (a) {
            return a.blob();
          })
          .then(function (a) {
            return createImageBitmap(
              a,
              Object.assign(e.options, { colorSpaceConversion: 'none' })
            );
          })
          .then(function (c) {
            return (
              f7.add(`image-bitmap:${a}`, c),
              b && b(c),
              e.manager.itemEnd(a),
              c
            );
          })
          .catch(function (b) {
            (d && d(b),
              gK.set(h, b),
              f7.remove(`image-bitmap:${a}`),
              e.manager.itemError(a),
              e.manager.itemEnd(a));
          });
        (f7.add(`image-bitmap:${a}`, h), e.manager.itemStart(a));
      }
      abort() {
        return (
          this._abortController.abort(),
          (this._abortController = new AbortController()),
          this
        );
      }
    }
    class gM {
      static getContext() {
        return (
          void 0 === d &&
            (d = new (window.AudioContext || window.webkitAudioContext)()),
          d
        );
      }
      static setContext(a) {
        d = a;
      }
    }
    class gN extends ga {
      constructor(a) {
        super(a);
      }
      load(a, b, c, d) {
        let e = this,
          f = new gd(this.manager);
        function g(b) {
          (d ? d(b) : aa(b), e.manager.itemError(a));
        }
        (f.setResponseType('arraybuffer'),
          f.setPath(this.path),
          f.setRequestHeader(this.requestHeader),
          f.setWithCredentials(this.withCredentials),
          f.load(
            a,
            function (a) {
              try {
                let c = a.slice(0);
                gM.getContext()
                  .decodeAudioData(c, function (a) {
                    b(a);
                  })
                  .catch(g);
              } catch (a) {
                g(a);
              }
            },
            c,
            d
          ));
      }
    }
    let gO = new bd(),
      gP = new bd(),
      gQ = new bd();
    class gR {
      constructor() {
        ((this.type = 'StereoCamera'),
          (this.aspect = 1),
          (this.eyeSep = 0.064),
          (this.cameraL = new cM()),
          this.cameraL.layers.enable(1),
          (this.cameraL.matrixAutoUpdate = !1),
          (this.cameraR = new cM()),
          this.cameraR.layers.enable(2),
          (this.cameraR.matrixAutoUpdate = !1),
          (this._cache = {
            focus: null,
            fov: null,
            aspect: null,
            near: null,
            far: null,
            zoom: null,
            eyeSep: null,
          }));
      }
      update(a) {
        let b = this._cache;
        if (
          b.focus !== a.focus ||
          b.fov !== a.fov ||
          b.aspect !== a.aspect * this.aspect ||
          b.near !== a.near ||
          b.far !== a.far ||
          b.zoom !== a.zoom ||
          b.eyeSep !== this.eyeSep
        ) {
          let c, d;
          ((b.focus = a.focus),
            (b.fov = a.fov),
            (b.aspect = a.aspect * this.aspect),
            (b.near = a.near),
            (b.far = a.far),
            (b.zoom = a.zoom),
            (b.eyeSep = this.eyeSep),
            gQ.copy(a.projectionMatrix));
          let e = b.eyeSep / 2,
            f = (e * b.near) / b.focus,
            g = (b.near * Math.tan(af * b.fov * 0.5)) / b.zoom;
          ((gP.elements[12] = -e),
            (gO.elements[12] = e),
            (c = -g * b.aspect + f),
            (d = g * b.aspect + f),
            (gQ.elements[0] = (2 * b.near) / (d - c)),
            (gQ.elements[8] = (d + c) / (d - c)),
            this.cameraL.projectionMatrix.copy(gQ),
            (c = -g * b.aspect - f),
            (d = g * b.aspect - f),
            (gQ.elements[0] = (2 * b.near) / (d - c)),
            (gQ.elements[8] = (d + c) / (d - c)),
            this.cameraR.projectionMatrix.copy(gQ));
        }
        (this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(gP),
          this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(gO));
      }
    }
    class gS extends cM {
      constructor(a = []) {
        (super(),
          (this.isArrayCamera = !0),
          (this.isMultiViewCamera = !1),
          (this.cameras = a));
      }
    }
    class gT {
      constructor(a = !0) {
        ((this.autoStart = a),
          (this.startTime = 0),
          (this.oldTime = 0),
          (this.elapsedTime = 0),
          (this.running = !1));
      }
      start() {
        ((this.startTime = performance.now()),
          (this.oldTime = this.startTime),
          (this.elapsedTime = 0),
          (this.running = !0));
      }
      stop() {
        (this.getElapsedTime(), (this.running = !1), (this.autoStart = !1));
      }
      getElapsedTime() {
        return (this.getDelta(), this.elapsedTime);
      }
      getDelta() {
        let a = 0;
        if (this.autoStart && !this.running) return (this.start(), 0);
        if (this.running) {
          let b = performance.now();
          ((a = (b - this.oldTime) / 1e3),
            (this.oldTime = b),
            (this.elapsedTime += a));
        }
        return a;
      }
    }
    let gU = new aq(),
      gV = new ap(),
      gW = new aq(),
      gX = new aq(),
      gY = new aq();
    class gZ extends bE {
      constructor() {
        (super(),
          (this.type = 'AudioListener'),
          (this.context = gM.getContext()),
          (this.gain = this.context.createGain()),
          this.gain.connect(this.context.destination),
          (this.filter = null),
          (this.timeDelta = 0),
          (this._clock = new gT()));
      }
      getInput() {
        return this.gain;
      }
      removeFilter() {
        return (
          null !== this.filter &&
            (this.gain.disconnect(this.filter),
            this.filter.disconnect(this.context.destination),
            this.gain.connect(this.context.destination),
            (this.filter = null)),
          this
        );
      }
      getFilter() {
        return this.filter;
      }
      setFilter(a) {
        return (
          null !== this.filter
            ? (this.gain.disconnect(this.filter),
              this.filter.disconnect(this.context.destination))
            : this.gain.disconnect(this.context.destination),
          (this.filter = a),
          this.gain.connect(this.filter),
          this.filter.connect(this.context.destination),
          this
        );
      }
      getMasterVolume() {
        return this.gain.gain.value;
      }
      setMasterVolume(a) {
        return (
          this.gain.gain.setTargetAtTime(a, this.context.currentTime, 0.01),
          this
        );
      }
      updateMatrixWorld(a) {
        super.updateMatrixWorld(a);
        let b = this.context.listener;
        if (
          ((this.timeDelta = this._clock.getDelta()),
          this.matrixWorld.decompose(gU, gV, gW),
          gX.set(0, 0, -1).applyQuaternion(gV),
          gY.set(0, 1, 0).applyQuaternion(gV),
          b.positionX)
        ) {
          let a = this.context.currentTime + this.timeDelta;
          (b.positionX.linearRampToValueAtTime(gU.x, a),
            b.positionY.linearRampToValueAtTime(gU.y, a),
            b.positionZ.linearRampToValueAtTime(gU.z, a),
            b.forwardX.linearRampToValueAtTime(gX.x, a),
            b.forwardY.linearRampToValueAtTime(gX.y, a),
            b.forwardZ.linearRampToValueAtTime(gX.z, a),
            b.upX.linearRampToValueAtTime(gY.x, a),
            b.upY.linearRampToValueAtTime(gY.y, a),
            b.upZ.linearRampToValueAtTime(gY.z, a));
        } else
          (b.setPosition(gU.x, gU.y, gU.z),
            b.setOrientation(gX.x, gX.y, gX.z, gY.x, gY.y, gY.z));
      }
    }
    class g$ extends bE {
      constructor(a) {
        (super(),
          (this.type = 'Audio'),
          (this.listener = a),
          (this.context = a.context),
          (this.gain = this.context.createGain()),
          this.gain.connect(a.getInput()),
          (this.autoplay = !1),
          (this.buffer = null),
          (this.detune = 0),
          (this.loop = !1),
          (this.loopStart = 0),
          (this.loopEnd = 0),
          (this.offset = 0),
          (this.duration = void 0),
          (this.playbackRate = 1),
          (this.isPlaying = !1),
          (this.hasPlaybackControl = !0),
          (this.source = null),
          (this.sourceType = 'empty'),
          (this._startedAt = 0),
          (this._progress = 0),
          (this._connected = !1),
          (this.filters = []));
      }
      getOutput() {
        return this.gain;
      }
      setNodeSource(a) {
        return (
          (this.hasPlaybackControl = !1),
          (this.sourceType = 'audioNode'),
          (this.source = a),
          this.connect(),
          this
        );
      }
      setMediaElementSource(a) {
        return (
          (this.hasPlaybackControl = !1),
          (this.sourceType = 'mediaNode'),
          (this.source = this.context.createMediaElementSource(a)),
          this.connect(),
          this
        );
      }
      setMediaStreamSource(a) {
        return (
          (this.hasPlaybackControl = !1),
          (this.sourceType = 'mediaStreamNode'),
          (this.source = this.context.createMediaStreamSource(a)),
          this.connect(),
          this
        );
      }
      setBuffer(a) {
        return (
          (this.buffer = a),
          (this.sourceType = 'buffer'),
          this.autoplay && this.play(),
          this
        );
      }
      play(a = 0) {
        if (!0 === this.isPlaying)
          return void _('Audio: Audio is already playing.');
        if (!1 === this.hasPlaybackControl)
          return void _('Audio: this Audio has no playback control.');
        this._startedAt = this.context.currentTime + a;
        let b = this.context.createBufferSource();
        return (
          (b.buffer = this.buffer),
          (b.loop = this.loop),
          (b.loopStart = this.loopStart),
          (b.loopEnd = this.loopEnd),
          (b.onended = this.onEnded.bind(this)),
          b.start(this._startedAt, this._progress + this.offset, this.duration),
          (this.isPlaying = !0),
          (this.source = b),
          this.setDetune(this.detune),
          this.setPlaybackRate(this.playbackRate),
          this.connect()
        );
      }
      pause() {
        return !1 === this.hasPlaybackControl
          ? void _('Audio: this Audio has no playback control.')
          : (!0 === this.isPlaying &&
              ((this._progress +=
                Math.max(this.context.currentTime - this._startedAt, 0) *
                this.playbackRate),
              !0 === this.loop &&
                (this._progress =
                  this._progress % (this.duration || this.buffer.duration)),
              this.source.stop(),
              (this.source.onended = null),
              (this.isPlaying = !1)),
            this);
      }
      stop(a = 0) {
        return !1 === this.hasPlaybackControl
          ? void _('Audio: this Audio has no playback control.')
          : ((this._progress = 0),
            null !== this.source &&
              (this.source.stop(this.context.currentTime + a),
              (this.source.onended = null)),
            (this.isPlaying = !1),
            this);
      }
      connect() {
        if (this.filters.length > 0) {
          this.source.connect(this.filters[0]);
          for (let a = 1, b = this.filters.length; a < b; a++)
            this.filters[a - 1].connect(this.filters[a]);
          this.filters[this.filters.length - 1].connect(this.getOutput());
        } else this.source.connect(this.getOutput());
        return ((this._connected = !0), this);
      }
      disconnect() {
        if (!1 !== this._connected) {
          if (this.filters.length > 0) {
            this.source.disconnect(this.filters[0]);
            for (let a = 1, b = this.filters.length; a < b; a++)
              this.filters[a - 1].disconnect(this.filters[a]);
            this.filters[this.filters.length - 1].disconnect(this.getOutput());
          } else this.source.disconnect(this.getOutput());
          return ((this._connected = !1), this);
        }
      }
      getFilters() {
        return this.filters;
      }
      setFilters(a) {
        return (
          a || (a = []),
          !0 === this._connected
            ? (this.disconnect(), (this.filters = a.slice()), this.connect())
            : (this.filters = a.slice()),
          this
        );
      }
      setDetune(a) {
        return (
          (this.detune = a),
          !0 === this.isPlaying &&
            void 0 !== this.source.detune &&
            this.source.detune.setTargetAtTime(
              this.detune,
              this.context.currentTime,
              0.01
            ),
          this
        );
      }
      getDetune() {
        return this.detune;
      }
      getFilter() {
        return this.getFilters()[0];
      }
      setFilter(a) {
        return this.setFilters(a ? [a] : []);
      }
      setPlaybackRate(a) {
        return !1 === this.hasPlaybackControl
          ? void _('Audio: this Audio has no playback control.')
          : ((this.playbackRate = a),
            !0 === this.isPlaying &&
              this.source.playbackRate.setTargetAtTime(
                this.playbackRate,
                this.context.currentTime,
                0.01
              ),
            this);
      }
      getPlaybackRate() {
        return this.playbackRate;
      }
      onEnded() {
        ((this.isPlaying = !1), (this._progress = 0));
      }
      getLoop() {
        return !1 === this.hasPlaybackControl
          ? (_('Audio: this Audio has no playback control.'), !1)
          : this.loop;
      }
      setLoop(a) {
        return !1 === this.hasPlaybackControl
          ? void _('Audio: this Audio has no playback control.')
          : ((this.loop = a),
            !0 === this.isPlaying && (this.source.loop = this.loop),
            this);
      }
      setLoopStart(a) {
        return ((this.loopStart = a), this);
      }
      setLoopEnd(a) {
        return ((this.loopEnd = a), this);
      }
      getVolume() {
        return this.gain.gain.value;
      }
      setVolume(a) {
        return (
          this.gain.gain.setTargetAtTime(a, this.context.currentTime, 0.01),
          this
        );
      }
      copy(a, b) {
        return (
          (super.copy(a, b), 'buffer' !== a.sourceType)
            ? _('Audio: Audio source type cannot be copied.')
            : ((this.autoplay = a.autoplay),
              (this.buffer = a.buffer),
              (this.detune = a.detune),
              (this.loop = a.loop),
              (this.loopStart = a.loopStart),
              (this.loopEnd = a.loopEnd),
              (this.offset = a.offset),
              (this.duration = a.duration),
              (this.playbackRate = a.playbackRate),
              (this.hasPlaybackControl = a.hasPlaybackControl),
              (this.sourceType = a.sourceType),
              (this.filters = a.filters.slice())),
          this
        );
      }
      clone(a) {
        return new this.constructor(this.listener).copy(this, a);
      }
    }
    let g_ = new aq(),
      g0 = new ap(),
      g1 = new aq(),
      g2 = new aq();
    class g3 extends g$ {
      constructor(a) {
        (super(a),
          (this.panner = this.context.createPanner()),
          (this.panner.panningModel = 'HRTF'),
          this.panner.connect(this.gain));
      }
      connect() {
        return (super.connect(), this.panner.connect(this.gain), this);
      }
      disconnect() {
        return (super.disconnect(), this.panner.disconnect(this.gain), this);
      }
      getOutput() {
        return this.panner;
      }
      getRefDistance() {
        return this.panner.refDistance;
      }
      setRefDistance(a) {
        return ((this.panner.refDistance = a), this);
      }
      getRolloffFactor() {
        return this.panner.rolloffFactor;
      }
      setRolloffFactor(a) {
        return ((this.panner.rolloffFactor = a), this);
      }
      getDistanceModel() {
        return this.panner.distanceModel;
      }
      setDistanceModel(a) {
        return ((this.panner.distanceModel = a), this);
      }
      getMaxDistance() {
        return this.panner.maxDistance;
      }
      setMaxDistance(a) {
        return ((this.panner.maxDistance = a), this);
      }
      setDirectionalCone(a, b, c) {
        return (
          (this.panner.coneInnerAngle = a),
          (this.panner.coneOuterAngle = b),
          (this.panner.coneOuterGain = c),
          this
        );
      }
      updateMatrixWorld(a) {
        if (
          (super.updateMatrixWorld(a),
          !0 === this.hasPlaybackControl && !1 === this.isPlaying)
        )
          return;
        (this.matrixWorld.decompose(g_, g0, g1),
          g2.set(0, 0, 1).applyQuaternion(g0));
        let b = this.panner;
        if (b.positionX) {
          let a = this.context.currentTime + this.listener.timeDelta;
          (b.positionX.linearRampToValueAtTime(g_.x, a),
            b.positionY.linearRampToValueAtTime(g_.y, a),
            b.positionZ.linearRampToValueAtTime(g_.z, a),
            b.orientationX.linearRampToValueAtTime(g2.x, a),
            b.orientationY.linearRampToValueAtTime(g2.y, a),
            b.orientationZ.linearRampToValueAtTime(g2.z, a));
        } else
          (b.setPosition(g_.x, g_.y, g_.z), b.setOrientation(g2.x, g2.y, g2.z));
      }
    }
    class g4 {
      constructor(a, b = 2048) {
        ((this.analyser = a.context.createAnalyser()),
          (this.analyser.fftSize = b),
          (this.data = new Uint8Array(this.analyser.frequencyBinCount)),
          a.getOutput().connect(this.analyser));
      }
      getFrequencyData() {
        return (this.analyser.getByteFrequencyData(this.data), this.data);
      }
      getAverageFrequency() {
        let a = 0,
          b = this.getFrequencyData();
        for (let c = 0; c < b.length; c++) a += b[c];
        return a / b.length;
      }
    }
    class g5 {
      constructor(a, b, c) {
        let d, e, f;
        switch (((this.binding = a), (this.valueSize = c), b)) {
          case 'quaternion':
            ((d = this._slerp),
              (e = this._slerpAdditive),
              (f = this._setAdditiveIdentityQuaternion),
              (this.buffer = new Float64Array(6 * c)),
              (this._workIndex = 5));
            break;
          case 'string':
          case 'bool':
            ((d = this._select),
              (e = this._select),
              (f = this._setAdditiveIdentityOther),
              (this.buffer = Array(5 * c)));
            break;
          default:
            ((d = this._lerp),
              (e = this._lerpAdditive),
              (f = this._setAdditiveIdentityNumeric),
              (this.buffer = new Float64Array(5 * c)));
        }
        ((this._mixBufferRegion = d),
          (this._mixBufferRegionAdditive = e),
          (this._setIdentity = f),
          (this._origIndex = 3),
          (this._addIndex = 4),
          (this.cumulativeWeight = 0),
          (this.cumulativeWeightAdditive = 0),
          (this.useCount = 0),
          (this.referenceCount = 0));
      }
      accumulate(a, b) {
        let c = this.buffer,
          d = this.valueSize,
          e = a * d + d,
          f = this.cumulativeWeight;
        if (0 === f) {
          for (let a = 0; a !== d; ++a) c[e + a] = c[a];
          f = b;
        } else {
          f += b;
          let a = b / f;
          this._mixBufferRegion(c, e, 0, a, d);
        }
        this.cumulativeWeight = f;
      }
      accumulateAdditive(a) {
        let b = this.buffer,
          c = this.valueSize,
          d = c * this._addIndex;
        (0 === this.cumulativeWeightAdditive && this._setIdentity(),
          this._mixBufferRegionAdditive(b, d, 0, a, c),
          (this.cumulativeWeightAdditive += a));
      }
      apply(a) {
        let b = this.valueSize,
          c = this.buffer,
          d = a * b + b,
          e = this.cumulativeWeight,
          f = this.cumulativeWeightAdditive,
          g = this.binding;
        if (
          ((this.cumulativeWeight = 0),
          (this.cumulativeWeightAdditive = 0),
          e < 1)
        ) {
          let a = b * this._origIndex;
          this._mixBufferRegion(c, d, a, 1 - e, b);
        }
        f > 0 && this._mixBufferRegionAdditive(c, d, this._addIndex * b, 1, b);
        for (let a = b, e = b + b; a !== e; ++a)
          if (c[a] !== c[a + b]) {
            g.setValue(c, d);
            break;
          }
      }
      saveOriginalState() {
        let a = this.binding,
          b = this.buffer,
          c = this.valueSize,
          d = c * this._origIndex;
        a.getValue(b, d);
        for (let a = c; a !== d; ++a) b[a] = b[d + (a % c)];
        (this._setIdentity(),
          (this.cumulativeWeight = 0),
          (this.cumulativeWeightAdditive = 0));
      }
      restoreOriginalState() {
        let a = 3 * this.valueSize;
        this.binding.setValue(this.buffer, a);
      }
      _setAdditiveIdentityNumeric() {
        let a = this._addIndex * this.valueSize,
          b = a + this.valueSize;
        for (let c = a; c < b; c++) this.buffer[c] = 0;
      }
      _setAdditiveIdentityQuaternion() {
        (this._setAdditiveIdentityNumeric(),
          (this.buffer[this._addIndex * this.valueSize + 3] = 1));
      }
      _setAdditiveIdentityOther() {
        let a = this._origIndex * this.valueSize,
          b = this._addIndex * this.valueSize;
        for (let c = 0; c < this.valueSize; c++)
          this.buffer[b + c] = this.buffer[a + c];
      }
      _select(a, b, c, d, e) {
        if (d >= 0.5) for (let d = 0; d !== e; ++d) a[b + d] = a[c + d];
      }
      _slerp(a, b, c, d) {
        ap.slerpFlat(a, b, a, b, a, c, d);
      }
      _slerpAdditive(a, b, c, d, e) {
        let f = this._workIndex * e;
        (ap.multiplyQuaternionsFlat(a, f, a, b, a, c),
          ap.slerpFlat(a, b, a, b, a, f, d));
      }
      _lerp(a, b, c, d, e) {
        let f = 1 - d;
        for (let g = 0; g !== e; ++g) {
          let e = b + g;
          a[e] = a[e] * f + a[c + g] * d;
        }
      }
      _lerpAdditive(a, b, c, d, e) {
        for (let f = 0; f !== e; ++f) {
          let e = b + f;
          a[e] = a[e] + a[c + f] * d;
        }
      }
    }
    let g6 = '\\[\\]\\.:\\/',
      g7 = RegExp('[' + g6 + ']', 'g'),
      g8 = '[^' + g6 + ']',
      g9 = '[^' + g6.replace('\\.', '') + ']',
      ha = RegExp(
        '^' +
          /((?:WC+[\/:])*)/.source.replace('WC', g8) +
          /(WCOD+)?/.source.replace('WCOD', g9) +
          /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace('WC', g8) +
          /\.(WC+)(?:\[(.+)\])?/.source.replace('WC', g8) +
          '$'
      ),
      hb = ['material', 'materials', 'bones', 'map'];
    class hc {
      constructor(a, b, c) {
        ((this.path = b),
          (this.parsedPath = c || hc.parseTrackName(b)),
          (this.node = hc.findNode(a, this.parsedPath.nodeName)),
          (this.rootNode = a),
          (this.getValue = this._getValue_unbound),
          (this.setValue = this._setValue_unbound));
      }
      static create(a, b, c) {
        return a && a.isAnimationObjectGroup
          ? new hc.Composite(a, b, c)
          : new hc(a, b, c);
      }
      static sanitizeNodeName(a) {
        return a.replace(/\s/g, '_').replace(g7, '');
      }
      static parseTrackName(a) {
        let b = ha.exec(a);
        if (null === b)
          throw Error('PropertyBinding: Cannot parse trackName: ' + a);
        let c = {
            nodeName: b[2],
            objectName: b[3],
            objectIndex: b[4],
            propertyName: b[5],
            propertyIndex: b[6],
          },
          d = c.nodeName && c.nodeName.lastIndexOf('.');
        if (void 0 !== d && -1 !== d) {
          let a = c.nodeName.substring(d + 1);
          -1 !== hb.indexOf(a) &&
            ((c.nodeName = c.nodeName.substring(0, d)), (c.objectName = a));
        }
        if (null === c.propertyName || 0 === c.propertyName.length)
          throw Error(
            'PropertyBinding: can not parse propertyName from trackName: ' + a
          );
        return c;
      }
      static findNode(a, b) {
        if (
          void 0 === b ||
          '' === b ||
          '.' === b ||
          -1 === b ||
          b === a.name ||
          b === a.uuid
        )
          return a;
        if (a.skeleton) {
          let c = a.skeleton.getBoneByName(b);
          if (void 0 !== c) return c;
        }
        if (a.children) {
          let c = function (a) {
              for (let d = 0; d < a.length; d++) {
                let e = a[d];
                if (e.name === b || e.uuid === b) return e;
                let f = c(e.children);
                if (f) return f;
              }
              return null;
            },
            d = c(a.children);
          if (d) return d;
        }
        return null;
      }
      _getValue_unavailable() {}
      _setValue_unavailable() {}
      _getValue_direct(a, b) {
        a[b] = this.targetObject[this.propertyName];
      }
      _getValue_array(a, b) {
        let c = this.resolvedProperty;
        for (let d = 0, e = c.length; d !== e; ++d) a[b++] = c[d];
      }
      _getValue_arrayElement(a, b) {
        a[b] = this.resolvedProperty[this.propertyIndex];
      }
      _getValue_toArray(a, b) {
        this.resolvedProperty.toArray(a, b);
      }
      _setValue_direct(a, b) {
        this.targetObject[this.propertyName] = a[b];
      }
      _setValue_direct_setNeedsUpdate(a, b) {
        ((this.targetObject[this.propertyName] = a[b]),
          (this.targetObject.needsUpdate = !0));
      }
      _setValue_direct_setMatrixWorldNeedsUpdate(a, b) {
        ((this.targetObject[this.propertyName] = a[b]),
          (this.targetObject.matrixWorldNeedsUpdate = !0));
      }
      _setValue_array(a, b) {
        let c = this.resolvedProperty;
        for (let d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
      }
      _setValue_array_setNeedsUpdate(a, b) {
        let c = this.resolvedProperty;
        for (let d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
        this.targetObject.needsUpdate = !0;
      }
      _setValue_array_setMatrixWorldNeedsUpdate(a, b) {
        let c = this.resolvedProperty;
        for (let d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
        this.targetObject.matrixWorldNeedsUpdate = !0;
      }
      _setValue_arrayElement(a, b) {
        this.resolvedProperty[this.propertyIndex] = a[b];
      }
      _setValue_arrayElement_setNeedsUpdate(a, b) {
        ((this.resolvedProperty[this.propertyIndex] = a[b]),
          (this.targetObject.needsUpdate = !0));
      }
      _setValue_arrayElement_setMatrixWorldNeedsUpdate(a, b) {
        ((this.resolvedProperty[this.propertyIndex] = a[b]),
          (this.targetObject.matrixWorldNeedsUpdate = !0));
      }
      _setValue_fromArray(a, b) {
        this.resolvedProperty.fromArray(a, b);
      }
      _setValue_fromArray_setNeedsUpdate(a, b) {
        (this.resolvedProperty.fromArray(a, b),
          (this.targetObject.needsUpdate = !0));
      }
      _setValue_fromArray_setMatrixWorldNeedsUpdate(a, b) {
        (this.resolvedProperty.fromArray(a, b),
          (this.targetObject.matrixWorldNeedsUpdate = !0));
      }
      _getValue_unbound(a, b) {
        (this.bind(), this.getValue(a, b));
      }
      _setValue_unbound(a, b) {
        (this.bind(), this.setValue(a, b));
      }
      bind() {
        let a = this.node,
          b = this.parsedPath,
          c = b.objectName,
          d = b.propertyName,
          e = b.propertyIndex;
        if (
          (a || ((a = hc.findNode(this.rootNode, b.nodeName)), (this.node = a)),
          (this.getValue = this._getValue_unavailable),
          (this.setValue = this._setValue_unavailable),
          !a)
        )
          return void _(
            'PropertyBinding: No target node found for track: ' +
              this.path +
              '.'
          );
        if (c) {
          let d = b.objectIndex;
          switch (c) {
            case 'materials':
              if (!a.material)
                return void aa(
                  'PropertyBinding: Can not bind to material as node does not have a material.',
                  this
                );
              if (!a.material.materials)
                return void aa(
                  'PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.',
                  this
                );
              a = a.material.materials;
              break;
            case 'bones':
              if (!a.skeleton)
                return void aa(
                  'PropertyBinding: Can not bind to bones as node does not have a skeleton.',
                  this
                );
              a = a.skeleton.bones;
              for (let b = 0; b < a.length; b++)
                if (a[b].name === d) {
                  d = b;
                  break;
                }
              break;
            case 'map':
              if ('map' in a) {
                a = a.map;
                break;
              }
              if (!a.material)
                return void aa(
                  'PropertyBinding: Can not bind to material as node does not have a material.',
                  this
                );
              if (!a.material.map)
                return void aa(
                  'PropertyBinding: Can not bind to material.map as node.material does not have a map.',
                  this
                );
              a = a.material.map;
              break;
            default:
              if (void 0 === a[c])
                return void aa(
                  'PropertyBinding: Can not bind to objectName of node undefined.',
                  this
                );
              a = a[c];
          }
          if (void 0 !== d) {
            if (void 0 === a[d])
              return void aa(
                'PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.',
                this,
                a
              );
            a = a[d];
          }
        }
        let f = a[d];
        if (void 0 === f)
          return void aa(
            'PropertyBinding: Trying to update property for track: ' +
              b.nodeName +
              '.' +
              d +
              " but it wasn't found.",
            a
          );
        let g = this.Versioning.None;
        ((this.targetObject = a),
          !0 === a.isMaterial
            ? (g = this.Versioning.NeedsUpdate)
            : !0 === a.isObject3D &&
              (g = this.Versioning.MatrixWorldNeedsUpdate));
        let h = this.BindingType.Direct;
        if (void 0 !== e) {
          if ('morphTargetInfluences' === d) {
            if (!a.geometry)
              return void aa(
                'PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.',
                this
              );
            if (!a.geometry.morphAttributes)
              return void aa(
                'PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.',
                this
              );
            void 0 !== a.morphTargetDictionary[e] &&
              (e = a.morphTargetDictionary[e]);
          }
          ((h = this.BindingType.ArrayElement),
            (this.resolvedProperty = f),
            (this.propertyIndex = e));
        } else
          void 0 !== f.fromArray && void 0 !== f.toArray
            ? ((h = this.BindingType.HasFromToArray),
              (this.resolvedProperty = f))
            : Array.isArray(f)
              ? ((h = this.BindingType.EntireArray),
                (this.resolvedProperty = f))
              : (this.propertyName = d);
        ((this.getValue = this.GetterByBindingType[h]),
          (this.setValue = this.SetterByBindingTypeAndVersioning[h][g]));
      }
      unbind() {
        ((this.node = null),
          (this.getValue = this._getValue_unbound),
          (this.setValue = this._setValue_unbound));
      }
    }
    ((hc.Composite = class {
      constructor(a, b, c) {
        const d = c || hc.parseTrackName(b);
        ((this._targetGroup = a), (this._bindings = a.subscribe_(b, d)));
      }
      getValue(a, b) {
        this.bind();
        let c = this._targetGroup.nCachedObjects_,
          d = this._bindings[c];
        void 0 !== d && d.getValue(a, b);
      }
      setValue(a, b) {
        let c = this._bindings;
        for (
          let d = this._targetGroup.nCachedObjects_, e = c.length;
          d !== e;
          ++d
        )
          c[d].setValue(a, b);
      }
      bind() {
        let a = this._bindings;
        for (
          let b = this._targetGroup.nCachedObjects_, c = a.length;
          b !== c;
          ++b
        )
          a[b].bind();
      }
      unbind() {
        let a = this._bindings;
        for (
          let b = this._targetGroup.nCachedObjects_, c = a.length;
          b !== c;
          ++b
        )
          a[b].unbind();
      }
    }),
      (hc.prototype.BindingType = {
        Direct: 0,
        EntireArray: 1,
        ArrayElement: 2,
        HasFromToArray: 3,
      }),
      (hc.prototype.Versioning = {
        None: 0,
        NeedsUpdate: 1,
        MatrixWorldNeedsUpdate: 2,
      }),
      (hc.prototype.GetterByBindingType = [
        hc.prototype._getValue_direct,
        hc.prototype._getValue_array,
        hc.prototype._getValue_arrayElement,
        hc.prototype._getValue_toArray,
      ]),
      (hc.prototype.SetterByBindingTypeAndVersioning = [
        [
          hc.prototype._setValue_direct,
          hc.prototype._setValue_direct_setNeedsUpdate,
          hc.prototype._setValue_direct_setMatrixWorldNeedsUpdate,
        ],
        [
          hc.prototype._setValue_array,
          hc.prototype._setValue_array_setNeedsUpdate,
          hc.prototype._setValue_array_setMatrixWorldNeedsUpdate,
        ],
        [
          hc.prototype._setValue_arrayElement,
          hc.prototype._setValue_arrayElement_setNeedsUpdate,
          hc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,
        ],
        [
          hc.prototype._setValue_fromArray,
          hc.prototype._setValue_fromArray_setNeedsUpdate,
          hc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,
        ],
      ]));
    class hd {
      constructor() {
        ((this.isAnimationObjectGroup = !0),
          (this.uuid = ah()),
          (this._objects = Array.prototype.slice.call(arguments)),
          (this.nCachedObjects_ = 0));
        const a = {};
        this._indicesByUUID = a;
        for (let b = 0, c = arguments.length; b !== c; ++b)
          a[arguments[b].uuid] = b;
        ((this._paths = []),
          (this._parsedPaths = []),
          (this._bindings = []),
          (this._bindingsIndicesByPath = {}));
        const b = this;
        this.stats = {
          objects: {
            get total() {
              return b._objects.length;
            },
            get inUse() {
              return this.total - b.nCachedObjects_;
            },
          },
          get bindingsPerObject() {
            return b._bindings.length;
          },
        };
      }
      add() {
        let a = this._objects,
          b = this._indicesByUUID,
          c = this._paths,
          d = this._parsedPaths,
          e = this._bindings,
          f = e.length,
          g,
          h = a.length,
          i = this.nCachedObjects_;
        for (let j = 0, k = arguments.length; j !== k; ++j) {
          let k = arguments[j],
            l = k.uuid,
            m = b[l];
          if (void 0 === m) {
            ((m = h++), (b[l] = m), a.push(k));
            for (let a = 0; a !== f; ++a) e[a].push(new hc(k, c[a], d[a]));
          } else if (m < i) {
            g = a[m];
            let h = --i,
              j = a[h];
            ((b[j.uuid] = m), (a[m] = j), (b[l] = h), (a[h] = k));
            for (let a = 0; a !== f; ++a) {
              let b = e[a],
                f = b[h],
                g = b[m];
              ((b[m] = f),
                void 0 === g && (g = new hc(k, c[a], d[a])),
                (b[h] = g));
            }
          } else
            a[m] !== g &&
              aa(
                'AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.'
              );
        }
        this.nCachedObjects_ = i;
      }
      remove() {
        let a = this._objects,
          b = this._indicesByUUID,
          c = this._bindings,
          d = c.length,
          e = this.nCachedObjects_;
        for (let f = 0, g = arguments.length; f !== g; ++f) {
          let g = arguments[f],
            h = g.uuid,
            i = b[h];
          if (void 0 !== i && i >= e) {
            let f = e++,
              j = a[f];
            ((b[j.uuid] = i), (a[i] = j), (b[h] = f), (a[f] = g));
            for (let a = 0; a !== d; ++a) {
              let b = c[a],
                d = b[f],
                e = b[i];
              ((b[i] = d), (b[f] = e));
            }
          }
        }
        this.nCachedObjects_ = e;
      }
      uncache() {
        let a = this._objects,
          b = this._indicesByUUID,
          c = this._bindings,
          d = c.length,
          e = this.nCachedObjects_,
          f = a.length;
        for (let g = 0, h = arguments.length; g !== h; ++g) {
          let h = arguments[g],
            i = h.uuid,
            j = b[i];
          if (void 0 !== j)
            if ((delete b[i], j < e)) {
              let g = --e,
                h = a[g],
                i = --f,
                k = a[i];
              ((b[h.uuid] = j),
                (a[j] = h),
                (b[k.uuid] = g),
                (a[g] = k),
                a.pop());
              for (let a = 0; a !== d; ++a) {
                let b = c[a],
                  d = b[g],
                  e = b[i];
                ((b[j] = d), (b[g] = e), b.pop());
              }
            } else {
              let e = --f,
                g = a[e];
              (e > 0 && (b[g.uuid] = j), (a[j] = g), a.pop());
              for (let a = 0; a !== d; ++a) {
                let b = c[a];
                ((b[j] = b[e]), b.pop());
              }
            }
        }
        this.nCachedObjects_ = e;
      }
      subscribe_(a, b) {
        let c = this._bindingsIndicesByPath,
          d = c[a],
          e = this._bindings;
        if (void 0 !== d) return e[d];
        let f = this._paths,
          g = this._parsedPaths,
          h = this._objects,
          i = h.length,
          j = this.nCachedObjects_,
          k = Array(i);
        ((d = e.length), (c[a] = d), f.push(a), g.push(b), e.push(k));
        for (let c = j, d = h.length; c !== d; ++c) {
          let d = h[c];
          k[c] = new hc(d, a, b);
        }
        return k;
      }
      unsubscribe_(a) {
        let b = this._bindingsIndicesByPath,
          c = b[a];
        if (void 0 !== c) {
          let d = this._paths,
            e = this._parsedPaths,
            f = this._bindings,
            g = f.length - 1,
            h = f[g];
          ((b[a[g]] = c),
            (f[c] = h),
            f.pop(),
            (e[c] = e[g]),
            e.pop(),
            (d[c] = d[g]),
            d.pop());
        }
      }
    }
    class he {
      constructor(a, b, c = null, d = b.blendMode) {
        ((this._mixer = a),
          (this._clip = b),
          (this._localRoot = c),
          (this.blendMode = d));
        const e = b.tracks,
          f = e.length,
          g = Array(f),
          h = { endingStart: 2400, endingEnd: 2400 };
        for (let a = 0; a !== f; ++a) {
          const b = e[a].createInterpolant(null);
          ((g[a] = b), (b.settings = h));
        }
        ((this._interpolantSettings = h),
          (this._interpolants = g),
          (this._propertyBindings = Array(f)),
          (this._cacheIndex = null),
          (this._byClipCacheIndex = null),
          (this._timeScaleInterpolant = null),
          (this._weightInterpolant = null),
          (this.loop = 2201),
          (this._loopCount = -1),
          (this._startTime = null),
          (this.time = 0),
          (this.timeScale = 1),
          (this._effectiveTimeScale = 1),
          (this.weight = 1),
          (this._effectiveWeight = 1),
          (this.repetitions = 1 / 0),
          (this.paused = !1),
          (this.enabled = !0),
          (this.clampWhenFinished = !1),
          (this.zeroSlopeAtStart = !0),
          (this.zeroSlopeAtEnd = !0));
      }
      play() {
        return (this._mixer._activateAction(this), this);
      }
      stop() {
        return (this._mixer._deactivateAction(this), this.reset());
      }
      reset() {
        return (
          (this.paused = !1),
          (this.enabled = !0),
          (this.time = 0),
          (this._loopCount = -1),
          (this._startTime = null),
          this.stopFading().stopWarping()
        );
      }
      isRunning() {
        return (
          this.enabled &&
          !this.paused &&
          0 !== this.timeScale &&
          null === this._startTime &&
          this._mixer._isActiveAction(this)
        );
      }
      isScheduled() {
        return this._mixer._isActiveAction(this);
      }
      startAt(a) {
        return ((this._startTime = a), this);
      }
      setLoop(a, b) {
        return ((this.loop = a), (this.repetitions = b), this);
      }
      setEffectiveWeight(a) {
        return (
          (this.weight = a),
          (this._effectiveWeight = this.enabled ? a : 0),
          this.stopFading()
        );
      }
      getEffectiveWeight() {
        return this._effectiveWeight;
      }
      fadeIn(a) {
        return this._scheduleFading(a, 0, 1);
      }
      fadeOut(a) {
        return this._scheduleFading(a, 1, 0);
      }
      crossFadeFrom(a, b, c = !1) {
        if ((a.fadeOut(b), this.fadeIn(b), !0 === c)) {
          let c = this._clip.duration,
            d = a._clip.duration;
          (a.warp(1, d / c, b), this.warp(c / d, 1, b));
        }
        return this;
      }
      crossFadeTo(a, b, c = !1) {
        return a.crossFadeFrom(this, b, c);
      }
      stopFading() {
        let a = this._weightInterpolant;
        return (
          null !== a &&
            ((this._weightInterpolant = null),
            this._mixer._takeBackControlInterpolant(a)),
          this
        );
      }
      setEffectiveTimeScale(a) {
        return (
          (this.timeScale = a),
          (this._effectiveTimeScale = this.paused ? 0 : a),
          this.stopWarping()
        );
      }
      getEffectiveTimeScale() {
        return this._effectiveTimeScale;
      }
      setDuration(a) {
        return ((this.timeScale = this._clip.duration / a), this.stopWarping());
      }
      syncWith(a) {
        return (
          (this.time = a.time),
          (this.timeScale = a.timeScale),
          this.stopWarping()
        );
      }
      halt(a) {
        return this.warp(this._effectiveTimeScale, 0, a);
      }
      warp(a, b, c) {
        let d = this._mixer,
          e = d.time,
          f = this.timeScale,
          g = this._timeScaleInterpolant;
        null === g &&
          ((g = d._lendControlInterpolant()), (this._timeScaleInterpolant = g));
        let h = g.parameterPositions,
          i = g.sampleValues;
        return (
          (h[0] = e),
          (h[1] = e + c),
          (i[0] = a / f),
          (i[1] = b / f),
          this
        );
      }
      stopWarping() {
        let a = this._timeScaleInterpolant;
        return (
          null !== a &&
            ((this._timeScaleInterpolant = null),
            this._mixer._takeBackControlInterpolant(a)),
          this
        );
      }
      getMixer() {
        return this._mixer;
      }
      getClip() {
        return this._clip;
      }
      getRoot() {
        return this._localRoot || this._mixer._root;
      }
      _update(a, b, c, d) {
        if (!this.enabled) return void this._updateWeight(a);
        let e = this._startTime;
        if (null !== e) {
          let d = (a - e) * c;
          d < 0 || 0 === c ? (b = 0) : ((this._startTime = null), (b = c * d));
        }
        b *= this._updateTimeScale(a);
        let f = this._updateTime(b),
          g = this._updateWeight(a);
        if (g > 0) {
          let a = this._interpolants,
            b = this._propertyBindings;
          if (2501 === this.blendMode)
            for (let c = 0, d = a.length; c !== d; ++c)
              (a[c].evaluate(f), b[c].accumulateAdditive(g));
          else
            for (let c = 0, e = a.length; c !== e; ++c)
              (a[c].evaluate(f), b[c].accumulate(d, g));
        }
      }
      _updateWeight(a) {
        let b = 0;
        if (this.enabled) {
          b = this.weight;
          let c = this._weightInterpolant;
          if (null !== c) {
            let d = c.evaluate(a)[0];
            ((b *= d),
              a > c.parameterPositions[1] &&
                (this.stopFading(), 0 === d && (this.enabled = !1)));
          }
        }
        return ((this._effectiveWeight = b), b);
      }
      _updateTimeScale(a) {
        let b = 0;
        if (!this.paused) {
          b = this.timeScale;
          let c = this._timeScaleInterpolant;
          null !== c &&
            ((b *= c.evaluate(a)[0]),
            a > c.parameterPositions[1] &&
              (this.stopWarping(),
              0 === b ? (this.paused = !0) : (this.timeScale = b)));
        }
        return ((this._effectiveTimeScale = b), b);
      }
      _updateTime(a) {
        let b = this._clip.duration,
          c = this.loop,
          d = this.time + a,
          e = this._loopCount,
          f = 2202 === c;
        if (0 === a) return -1 === e ? d : f && (1 & e) == 1 ? b - d : d;
        if (2200 === c) {
          -1 === e && ((this._loopCount = 0), this._setEndings(!0, !0, !1));
          g: {
            if (d >= b) d = b;
            else if (d < 0) d = 0;
            else {
              this.time = d;
              break g;
            }
            (this.clampWhenFinished ? (this.paused = !0) : (this.enabled = !1),
              (this.time = d),
              this._mixer.dispatchEvent({
                type: 'finished',
                action: this,
                direction: a < 0 ? -1 : 1,
              }));
          }
        } else {
          if (
            (-1 === e &&
              (a >= 0
                ? ((e = 0), this._setEndings(!0, 0 === this.repetitions, f))
                : this._setEndings(0 === this.repetitions, !0, f)),
            d >= b || d < 0)
          ) {
            let c = Math.floor(d / b);
            ((d -= b * c), (e += Math.abs(c)));
            let g = this.repetitions - e;
            if (g <= 0)
              (this.clampWhenFinished
                ? (this.paused = !0)
                : (this.enabled = !1),
                (d = a > 0 ? b : 0),
                (this.time = d),
                this._mixer.dispatchEvent({
                  type: 'finished',
                  action: this,
                  direction: a > 0 ? 1 : -1,
                }));
            else {
              if (1 === g) {
                let b = a < 0;
                this._setEndings(b, !b, f);
              } else this._setEndings(!1, !1, f);
              ((this._loopCount = e),
                (this.time = d),
                this._mixer.dispatchEvent({
                  type: 'loop',
                  action: this,
                  loopDelta: c,
                }));
            }
          } else this.time = d;
          if (f && (1 & e) == 1) return b - d;
        }
        return d;
      }
      _setEndings(a, b, c) {
        let d = this._interpolantSettings;
        c
          ? ((d.endingStart = 2401), (d.endingEnd = 2401))
          : (a
              ? (d.endingStart = this.zeroSlopeAtStart ? 2401 : 2400)
              : (d.endingStart = 2402),
            b
              ? (d.endingEnd = this.zeroSlopeAtEnd ? 2401 : 2400)
              : (d.endingEnd = 2402));
      }
      _scheduleFading(a, b, c) {
        let d = this._mixer,
          e = d.time,
          f = this._weightInterpolant;
        null === f &&
          ((f = d._lendControlInterpolant()), (this._weightInterpolant = f));
        let g = f.parameterPositions,
          h = f.sampleValues;
        return ((g[0] = e), (h[0] = b), (g[1] = e + a), (h[1] = c), this);
      }
    }
    let hf = new Float32Array(1);
    class hg extends ac {
      constructor(a) {
        (super(),
          (this._root = a),
          this._initMemoryManager(),
          (this._accuIndex = 0),
          (this.time = 0),
          (this.timeScale = 1));
      }
      _bindAction(a, b) {
        let c = a._localRoot || this._root,
          d = a._clip.tracks,
          e = d.length,
          f = a._propertyBindings,
          g = a._interpolants,
          h = c.uuid,
          i = this._bindingsByRootAndName,
          j = i[h];
        void 0 === j && ((j = {}), (i[h] = j));
        for (let a = 0; a !== e; ++a) {
          let e = d[a],
            i = e.name,
            k = j[i];
          if (void 0 !== k) (++k.referenceCount, (f[a] = k));
          else {
            if (void 0 !== (k = f[a])) {
              null === k._cacheIndex &&
                (++k.referenceCount, this._addInactiveBinding(k, h, i));
              continue;
            }
            let d = b && b._propertyBindings[a].binding.parsedPath;
            ((k = new g5(
              hc.create(c, i, d),
              e.ValueTypeName,
              e.getValueSize()
            )),
              ++k.referenceCount,
              this._addInactiveBinding(k, h, i),
              (f[a] = k));
          }
          g[a].resultBuffer = k.buffer;
        }
      }
      _activateAction(a) {
        if (!this._isActiveAction(a)) {
          if (null === a._cacheIndex) {
            let b = (a._localRoot || this._root).uuid,
              c = a._clip.uuid,
              d = this._actionsByClip[c];
            (this._bindAction(a, d && d.knownActions[0]),
              this._addInactiveAction(a, c, b));
          }
          let b = a._propertyBindings;
          for (let a = 0, c = b.length; a !== c; ++a) {
            let c = b[a];
            0 == c.useCount++ && (this._lendBinding(c), c.saveOriginalState());
          }
          this._lendAction(a);
        }
      }
      _deactivateAction(a) {
        if (this._isActiveAction(a)) {
          let b = a._propertyBindings;
          for (let a = 0, c = b.length; a !== c; ++a) {
            let c = b[a];
            0 == --c.useCount &&
              (c.restoreOriginalState(), this._takeBackBinding(c));
          }
          this._takeBackAction(a);
        }
      }
      _initMemoryManager() {
        ((this._actions = []),
          (this._nActiveActions = 0),
          (this._actionsByClip = {}),
          (this._bindings = []),
          (this._nActiveBindings = 0),
          (this._bindingsByRootAndName = {}),
          (this._controlInterpolants = []),
          (this._nActiveControlInterpolants = 0));
        let a = this;
        this.stats = {
          actions: {
            get total() {
              return a._actions.length;
            },
            get inUse() {
              return a._nActiveActions;
            },
          },
          bindings: {
            get total() {
              return a._bindings.length;
            },
            get inUse() {
              return a._nActiveBindings;
            },
          },
          controlInterpolants: {
            get total() {
              return a._controlInterpolants.length;
            },
            get inUse() {
              return a._nActiveControlInterpolants;
            },
          },
        };
      }
      _isActiveAction(a) {
        let b = a._cacheIndex;
        return null !== b && b < this._nActiveActions;
      }
      _addInactiveAction(a, b, c) {
        let d = this._actions,
          e = this._actionsByClip,
          f = e[b];
        if (void 0 === f)
          ((f = { knownActions: [a], actionByRoot: {} }),
            (a._byClipCacheIndex = 0),
            (e[b] = f));
        else {
          let b = f.knownActions;
          ((a._byClipCacheIndex = b.length), b.push(a));
        }
        ((a._cacheIndex = d.length), d.push(a), (f.actionByRoot[c] = a));
      }
      _removeInactiveAction(a) {
        let b = this._actions,
          c = b[b.length - 1],
          d = a._cacheIndex;
        ((c._cacheIndex = d), (b[d] = c), b.pop(), (a._cacheIndex = null));
        let e = a._clip.uuid,
          f = this._actionsByClip,
          g = f[e],
          h = g.knownActions,
          i = h[h.length - 1],
          j = a._byClipCacheIndex;
        ((i._byClipCacheIndex = j),
          (h[j] = i),
          h.pop(),
          (a._byClipCacheIndex = null));
        let k = g.actionByRoot,
          l = (a._localRoot || this._root).uuid;
        (delete k[l],
          0 === h.length && delete f[e],
          this._removeInactiveBindingsForAction(a));
      }
      _removeInactiveBindingsForAction(a) {
        let b = a._propertyBindings;
        for (let a = 0, c = b.length; a !== c; ++a) {
          let c = b[a];
          0 == --c.referenceCount && this._removeInactiveBinding(c);
        }
      }
      _lendAction(a) {
        let b = this._actions,
          c = a._cacheIndex,
          d = this._nActiveActions++,
          e = b[d];
        ((a._cacheIndex = d), (b[d] = a), (e._cacheIndex = c), (b[c] = e));
      }
      _takeBackAction(a) {
        let b = this._actions,
          c = a._cacheIndex,
          d = --this._nActiveActions,
          e = b[d];
        ((a._cacheIndex = d), (b[d] = a), (e._cacheIndex = c), (b[c] = e));
      }
      _addInactiveBinding(a, b, c) {
        let d = this._bindingsByRootAndName,
          e = this._bindings,
          f = d[b];
        (void 0 === f && ((f = {}), (d[b] = f)),
          (f[c] = a),
          (a._cacheIndex = e.length),
          e.push(a));
      }
      _removeInactiveBinding(a) {
        let b = this._bindings,
          c = a.binding,
          d = c.rootNode.uuid,
          e = c.path,
          f = this._bindingsByRootAndName,
          g = f[d],
          h = b[b.length - 1],
          i = a._cacheIndex;
        ((h._cacheIndex = i),
          (b[i] = h),
          b.pop(),
          delete g[e],
          0 === Object.keys(g).length && delete f[d]);
      }
      _lendBinding(a) {
        let b = this._bindings,
          c = a._cacheIndex,
          d = this._nActiveBindings++,
          e = b[d];
        ((a._cacheIndex = d), (b[d] = a), (e._cacheIndex = c), (b[c] = e));
      }
      _takeBackBinding(a) {
        let b = this._bindings,
          c = a._cacheIndex,
          d = --this._nActiveBindings,
          e = b[d];
        ((a._cacheIndex = d), (b[d] = a), (e._cacheIndex = c), (b[c] = e));
      }
      _lendControlInterpolant() {
        let a = this._controlInterpolants,
          b = this._nActiveControlInterpolants++,
          c = a[b];
        return (
          void 0 === c &&
            (((c = new fY(
              new Float32Array(2),
              new Float32Array(2),
              1,
              hf
            )).__cacheIndex = b),
            (a[b] = c)),
          c
        );
      }
      _takeBackControlInterpolant(a) {
        let b = this._controlInterpolants,
          c = a.__cacheIndex,
          d = --this._nActiveControlInterpolants,
          e = b[d];
        ((a.__cacheIndex = d), (b[d] = a), (e.__cacheIndex = c), (b[c] = e));
      }
      clipAction(a, b, c) {
        let d = b || this._root,
          e = d.uuid,
          f = 'string' == typeof a ? f6.findByName(d, a) : a,
          g = null !== f ? f.uuid : a,
          h = this._actionsByClip[g],
          i = null;
        if (
          (void 0 === c && (c = null !== f ? f.blendMode : 2500), void 0 !== h)
        ) {
          let a = h.actionByRoot[e];
          if (void 0 !== a && a.blendMode === c) return a;
          ((i = h.knownActions[0]), null === f && (f = i._clip));
        }
        if (null === f) return null;
        let j = new he(this, f, b, c);
        return (this._bindAction(j, i), this._addInactiveAction(j, g, e), j);
      }
      existingAction(a, b) {
        let c = b || this._root,
          d = c.uuid,
          e = 'string' == typeof a ? f6.findByName(c, a) : a,
          f = e ? e.uuid : a,
          g = this._actionsByClip[f];
        return (void 0 !== g && g.actionByRoot[d]) || null;
      }
      stopAllAction() {
        let a = this._actions,
          b = this._nActiveActions;
        for (let c = b - 1; c >= 0; --c) a[c].stop();
        return this;
      }
      update(a) {
        a *= this.timeScale;
        let b = this._actions,
          c = this._nActiveActions,
          d = (this.time += a),
          e = Math.sign(a),
          f = (this._accuIndex ^= 1);
        for (let g = 0; g !== c; ++g) b[g]._update(d, a, e, f);
        let g = this._bindings,
          h = this._nActiveBindings;
        for (let a = 0; a !== h; ++a) g[a].apply(f);
        return this;
      }
      setTime(a) {
        this.time = 0;
        for (let a = 0; a < this._actions.length; a++)
          this._actions[a].time = 0;
        return this.update(a);
      }
      getRoot() {
        return this._root;
      }
      uncacheClip(a) {
        let b = this._actions,
          c = a.uuid,
          d = this._actionsByClip,
          e = d[c];
        if (void 0 !== e) {
          let a = e.knownActions;
          for (let c = 0, d = a.length; c !== d; ++c) {
            let d = a[c];
            this._deactivateAction(d);
            let e = d._cacheIndex,
              f = b[b.length - 1];
            ((d._cacheIndex = null),
              (d._byClipCacheIndex = null),
              (f._cacheIndex = e),
              (b[e] = f),
              b.pop(),
              this._removeInactiveBindingsForAction(d));
          }
          delete d[c];
        }
      }
      uncacheRoot(a) {
        let b = a.uuid,
          c = this._actionsByClip;
        for (let a in c) {
          let d = c[a].actionByRoot[b];
          void 0 !== d &&
            (this._deactivateAction(d), this._removeInactiveAction(d));
        }
        let d = this._bindingsByRootAndName[b];
        if (void 0 !== d)
          for (let a in d) {
            let b = d[a];
            (b.restoreOriginalState(), this._removeInactiveBinding(b));
          }
      }
      uncacheAction(a, b) {
        let c = this.existingAction(a, b);
        null !== c &&
          (this._deactivateAction(c), this._removeInactiveAction(c));
      }
    }
    class hh extends aI {
      constructor(a = 1, b = 1, c = 1, d = {}) {
        (super(a, b, d),
          (this.isRenderTarget3D = !0),
          (this.depth = c),
          (this.texture = new aM(null, a, b, c)),
          this._setTextureOptions(d),
          (this.texture.isRenderTargetTexture = !0));
      }
    }
    class hi {
      constructor(a) {
        this.value = a;
      }
      clone() {
        return new hi(
          void 0 === this.value.clone ? this.value : this.value.clone()
        );
      }
    }
    let hj = 0;
    class hk extends ac {
      constructor() {
        (super(),
          (this.isUniformsGroup = !0),
          Object.defineProperty(this, 'id', { value: hj++ }),
          (this.name = ''),
          (this.usage = 35044),
          (this.uniforms = []));
      }
      add(a) {
        return (this.uniforms.push(a), this);
      }
      remove(a) {
        let b = this.uniforms.indexOf(a);
        return (-1 !== b && this.uniforms.splice(b, 1), this);
      }
      setName(a) {
        return ((this.name = a), this);
      }
      setUsage(a) {
        return ((this.usage = a), this);
      }
      dispose() {
        this.dispatchEvent({ type: 'dispose' });
      }
      copy(a) {
        ((this.name = a.name), (this.usage = a.usage));
        let b = a.uniforms;
        this.uniforms.length = 0;
        for (let a = 0, c = b.length; a < c; a++) {
          let c = Array.isArray(b[a]) ? b[a] : [b[a]];
          for (let a = 0; a < c.length; a++) this.uniforms.push(c[a].clone());
        }
        return this;
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    class hl extends cW {
      constructor(a, b, c = 1) {
        (super(a, b),
          (this.isInstancedInterleavedBuffer = !0),
          (this.meshPerAttribute = c));
      }
      copy(a) {
        return (
          super.copy(a),
          (this.meshPerAttribute = a.meshPerAttribute),
          this
        );
      }
      clone(a) {
        let b = super.clone(a);
        return ((b.meshPerAttribute = this.meshPerAttribute), b);
      }
      toJSON(a) {
        let b = super.toJSON(a);
        return (
          (b.isInstancedInterleavedBuffer = !0),
          (b.meshPerAttribute = this.meshPerAttribute),
          b
        );
      }
    }
    class hm {
      constructor(a, b, c, d, e, f = !1) {
        ((this.isGLBufferAttribute = !0),
          (this.name = ''),
          (this.buffer = a),
          (this.type = b),
          (this.itemSize = c),
          (this.elementSize = d),
          (this.count = e),
          (this.normalized = f),
          (this.version = 0));
      }
      set needsUpdate(a) {
        !0 === a && this.version++;
      }
      setBuffer(a) {
        return ((this.buffer = a), this);
      }
      setType(a, b) {
        return ((this.type = a), (this.elementSize = b), this);
      }
      setItemSize(a) {
        return ((this.itemSize = a), this);
      }
      setCount(a) {
        return ((this.count = a), this);
      }
    }
    let hn = new bd();
    class ho {
      constructor(a, b, c = 0, d = 1 / 0) {
        ((this.ray = new bc(a, b)),
          (this.near = c),
          (this.far = d),
          (this.camera = null),
          (this.layers = new bo()),
          (this.params = {
            Mesh: {},
            Line: { threshold: 1 },
            LOD: {},
            Points: { threshold: 1 },
            Sprite: {},
          }));
      }
      set(a, b) {
        this.ray.set(a, b);
      }
      setFromCamera(a, b) {
        b.isPerspectiveCamera
          ? (this.ray.origin.setFromMatrixPosition(b.matrixWorld),
            this.ray.direction
              .set(a.x, a.y, 0.5)
              .unproject(b)
              .sub(this.ray.origin)
              .normalize(),
            (this.camera = b))
          : b.isOrthographicCamera
            ? (this.ray.origin
                .set(a.x, a.y, (b.near + b.far) / (b.near - b.far))
                .unproject(b),
              this.ray.direction
                .set(0, 0, -1)
                .transformDirection(b.matrixWorld),
              (this.camera = b))
            : aa('Raycaster: Unsupported camera type: ' + b.type);
      }
      setFromXRController(a) {
        return (
          hn.identity().extractRotation(a.matrixWorld),
          this.ray.origin.setFromMatrixPosition(a.matrixWorld),
          this.ray.direction.set(0, 0, -1).applyMatrix4(hn),
          this
        );
      }
      intersectObject(a, b = !0, c = []) {
        return (hq(a, this, c, b), c.sort(hp), c);
      }
      intersectObjects(a, b = !0, c = []) {
        for (let d = 0, e = a.length; d < e; d++) hq(a[d], this, c, b);
        return (c.sort(hp), c);
      }
    }
    function hp(a, b) {
      return a.distance - b.distance;
    }
    function hq(a, b, c, d) {
      let e = !0;
      if (
        (a.layers.test(b.layers) && !1 === a.raycast(b, c) && (e = !1),
        !0 === e && !0 === d)
      ) {
        let d = a.children;
        for (let a = 0, e = d.length; a < e; a++) hq(d[a], b, c, !0);
      }
    }
    class hr {
      constructor() {
        ((this._previousTime = 0),
          (this._currentTime = 0),
          (this._startTime = performance.now()),
          (this._delta = 0),
          (this._elapsed = 0),
          (this._timescale = 1),
          (this._document = null),
          (this._pageVisibilityHandler = null));
      }
      connect(a) {
        ((this._document = a),
          void 0 !== a.hidden &&
            ((this._pageVisibilityHandler = hs.bind(this)),
            a.addEventListener(
              'visibilitychange',
              this._pageVisibilityHandler,
              !1
            )));
      }
      disconnect() {
        (null !== this._pageVisibilityHandler &&
          (this._document.removeEventListener(
            'visibilitychange',
            this._pageVisibilityHandler
          ),
          (this._pageVisibilityHandler = null)),
          (this._document = null));
      }
      getDelta() {
        return this._delta / 1e3;
      }
      getElapsed() {
        return this._elapsed / 1e3;
      }
      getTimescale() {
        return this._timescale;
      }
      setTimescale(a) {
        return ((this._timescale = a), this);
      }
      reset() {
        return (
          (this._currentTime = performance.now() - this._startTime),
          this
        );
      }
      dispose() {
        this.disconnect();
      }
      update(a) {
        return (
          null !== this._pageVisibilityHandler && !0 === this._document.hidden
            ? (this._delta = 0)
            : ((this._previousTime = this._currentTime),
              (this._currentTime =
                (void 0 !== a ? a : performance.now()) - this._startTime),
              (this._delta =
                (this._currentTime - this._previousTime) * this._timescale),
              (this._elapsed += this._delta)),
          this
        );
      }
    }
    function hs() {
      !1 === this._document.hidden && this.reset();
    }
    class ht {
      constructor(a = 1, b = 0, c = 0) {
        ((this.radius = a), (this.phi = b), (this.theta = c));
      }
      set(a, b, c) {
        return ((this.radius = a), (this.phi = b), (this.theta = c), this);
      }
      copy(a) {
        return (
          (this.radius = a.radius),
          (this.phi = a.phi),
          (this.theta = a.theta),
          this
        );
      }
      makeSafe() {
        return ((this.phi = ai(this.phi, 1e-6, Math.PI - 1e-6)), this);
      }
      setFromVector3(a) {
        return this.setFromCartesianCoords(a.x, a.y, a.z);
      }
      setFromCartesianCoords(a, b, c) {
        return (
          (this.radius = Math.sqrt(a * a + b * b + c * c)),
          0 === this.radius
            ? ((this.theta = 0), (this.phi = 0))
            : ((this.theta = Math.atan2(a, c)),
              (this.phi = Math.acos(ai(b / this.radius, -1, 1)))),
          this
        );
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    class hu {
      constructor(a = 1, b = 0, c = 0) {
        ((this.radius = a), (this.theta = b), (this.y = c));
      }
      set(a, b, c) {
        return ((this.radius = a), (this.theta = b), (this.y = c), this);
      }
      copy(a) {
        return (
          (this.radius = a.radius),
          (this.theta = a.theta),
          (this.y = a.y),
          this
        );
      }
      setFromVector3(a) {
        return this.setFromCartesianCoords(a.x, a.y, a.z);
      }
      setFromCartesianCoords(a, b, c) {
        return (
          (this.radius = Math.sqrt(a * a + c * c)),
          (this.theta = Math.atan2(a, c)),
          (this.y = b),
          this
        );
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    class hv {
      constructor(a, b, c, d) {
        ((hv.prototype.isMatrix2 = !0),
          (this.elements = [1, 0, 0, 1]),
          void 0 !== a && this.set(a, b, c, d));
      }
      identity() {
        return (this.set(1, 0, 0, 1), this);
      }
      fromArray(a, b = 0) {
        for (let c = 0; c < 4; c++) this.elements[c] = a[c + b];
        return this;
      }
      set(a, b, c, d) {
        let e = this.elements;
        return ((e[0] = a), (e[2] = b), (e[1] = c), (e[3] = d), this);
      }
    }
    let hw = new ao();
    class hx {
      constructor(a = new ao(Infinity, Infinity), b = new ao(-1 / 0, -1 / 0)) {
        ((this.isBox2 = !0), (this.min = a), (this.max = b));
      }
      set(a, b) {
        return (this.min.copy(a), this.max.copy(b), this);
      }
      setFromPoints(a) {
        this.makeEmpty();
        for (let b = 0, c = a.length; b < c; b++) this.expandByPoint(a[b]);
        return this;
      }
      setFromCenterAndSize(a, b) {
        let c = hw.copy(b).multiplyScalar(0.5);
        return (this.min.copy(a).sub(c), this.max.copy(a).add(c), this);
      }
      clone() {
        return new this.constructor().copy(this);
      }
      copy(a) {
        return (this.min.copy(a.min), this.max.copy(a.max), this);
      }
      makeEmpty() {
        return (
          (this.min.x = this.min.y = Infinity),
          (this.max.x = this.max.y = -1 / 0),
          this
        );
      }
      isEmpty() {
        return this.max.x < this.min.x || this.max.y < this.min.y;
      }
      getCenter(a) {
        return this.isEmpty()
          ? a.set(0, 0)
          : a.addVectors(this.min, this.max).multiplyScalar(0.5);
      }
      getSize(a) {
        return this.isEmpty() ? a.set(0, 0) : a.subVectors(this.max, this.min);
      }
      expandByPoint(a) {
        return (this.min.min(a), this.max.max(a), this);
      }
      expandByVector(a) {
        return (this.min.sub(a), this.max.add(a), this);
      }
      expandByScalar(a) {
        return (this.min.addScalar(-a), this.max.addScalar(a), this);
      }
      containsPoint(a) {
        return (
          a.x >= this.min.x &&
          a.x <= this.max.x &&
          a.y >= this.min.y &&
          a.y <= this.max.y
        );
      }
      containsBox(a) {
        return (
          this.min.x <= a.min.x &&
          a.max.x <= this.max.x &&
          this.min.y <= a.min.y &&
          a.max.y <= this.max.y
        );
      }
      getParameter(a, b) {
        return b.set(
          (a.x - this.min.x) / (this.max.x - this.min.x),
          (a.y - this.min.y) / (this.max.y - this.min.y)
        );
      }
      intersectsBox(a) {
        return (
          a.max.x >= this.min.x &&
          a.min.x <= this.max.x &&
          a.max.y >= this.min.y &&
          a.min.y <= this.max.y
        );
      }
      clampPoint(a, b) {
        return b.copy(a).clamp(this.min, this.max);
      }
      distanceToPoint(a) {
        return this.clampPoint(a, hw).distanceTo(a);
      }
      intersect(a) {
        return (
          this.min.max(a.min),
          this.max.min(a.max),
          this.isEmpty() && this.makeEmpty(),
          this
        );
      }
      union(a) {
        return (this.min.min(a.min), this.max.max(a.max), this);
      }
      translate(a) {
        return (this.min.add(a), this.max.add(a), this);
      }
      equals(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
      }
    }
    let hy = new aq(),
      hz = new aq(),
      hA = new aq(),
      hB = new aq(),
      hC = new aq(),
      hD = new aq(),
      hE = new aq();
    class hF {
      constructor(a = new aq(), b = new aq()) {
        ((this.start = a), (this.end = b));
      }
      set(a, b) {
        return (this.start.copy(a), this.end.copy(b), this);
      }
      copy(a) {
        return (this.start.copy(a.start), this.end.copy(a.end), this);
      }
      getCenter(a) {
        return a.addVectors(this.start, this.end).multiplyScalar(0.5);
      }
      delta(a) {
        return a.subVectors(this.end, this.start);
      }
      distanceSq() {
        return this.start.distanceToSquared(this.end);
      }
      distance() {
        return this.start.distanceTo(this.end);
      }
      at(a, b) {
        return this.delta(b).multiplyScalar(a).add(this.start);
      }
      closestPointToPointParameter(a, b) {
        (hy.subVectors(a, this.start), hz.subVectors(this.end, this.start));
        let c = hz.dot(hz),
          d = hz.dot(hy) / c;
        return (b && (d = ai(d, 0, 1)), d);
      }
      closestPointToPoint(a, b, c) {
        let d = this.closestPointToPointParameter(a, b);
        return this.delta(c).multiplyScalar(d).add(this.start);
      }
      distanceSqToLine3(a, b = hD, c = hE) {
        let d,
          e,
          f = 1e-8 * 1e-8,
          g = this.start,
          h = a.start,
          i = this.end,
          j = a.end;
        (hA.subVectors(i, g), hB.subVectors(j, h), hC.subVectors(g, h));
        let k = hA.dot(hA),
          l = hB.dot(hB),
          m = hB.dot(hC);
        if (k <= f && l <= f) return (b.copy(g), c.copy(h), b.sub(c), b.dot(b));
        if (k <= f) ((d = 0), (e = ai((e = m / l), 0, 1)));
        else {
          let a = hA.dot(hC);
          if (l <= f) ((e = 0), (d = ai(-a / k, 0, 1)));
          else {
            let b = hA.dot(hB),
              c = k * l - b * b;
            ((d = 0 !== c ? ai((b * m - a * l) / c, 0, 1) : 0),
              (e = (b * d + m) / l) < 0
                ? ((e = 0), (d = ai(-a / k, 0, 1)))
                : e > 1 && ((e = 1), (d = ai((b - a) / k, 0, 1))));
          }
        }
        return (
          b.copy(g).add(hA.multiplyScalar(d)),
          c.copy(h).add(hB.multiplyScalar(e)),
          b.sub(c),
          b.dot(b)
        );
      }
      applyMatrix4(a) {
        return (this.start.applyMatrix4(a), this.end.applyMatrix4(a), this);
      }
      equals(a) {
        return a.start.equals(this.start) && a.end.equals(this.end);
      }
      clone() {
        return new this.constructor().copy(this);
      }
    }
    let hG = new aq();
    class hH extends bE {
      constructor(a, b) {
        (super(),
          (this.light = a),
          (this.matrixAutoUpdate = !1),
          (this.color = b),
          (this.type = 'SpotLightHelper'));
        const c = new co(),
          d = [
            0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0,
            1, 1, 0, 0, 0, 0, -1, 1,
          ];
        for (let a = 0, b = 1; a < 32; a++, b++) {
          const c = (a / 32) * Math.PI * 2,
            e = (b / 32) * Math.PI * 2;
          d.push(Math.cos(c), Math.sin(c), 1, Math.cos(e), Math.sin(e), 1);
        }
        c.setAttribute('position', new cg(d, 3));
        const e = new d4({ fog: !1, toneMapped: !1 });
        ((this.cone = new eg(c, e)), this.add(this.cone), this.update());
      }
      dispose() {
        (this.cone.geometry.dispose(), this.cone.material.dispose());
      }
      update() {
        (this.light.updateWorldMatrix(!0, !1),
          this.light.target.updateWorldMatrix(!0, !1),
          this.parent
            ? (this.parent.updateWorldMatrix(!0),
              this.matrix
                .copy(this.parent.matrixWorld)
                .invert()
                .multiply(this.light.matrixWorld))
            : this.matrix.copy(this.light.matrixWorld),
          this.matrixWorld.copy(this.light.matrixWorld));
        let a = this.light.distance ? this.light.distance : 1e3,
          b = a * Math.tan(this.light.angle);
        (this.cone.scale.set(b, b, a),
          hG.setFromMatrixPosition(this.light.target.matrixWorld),
          this.cone.lookAt(hG),
          void 0 !== this.color
            ? this.cone.material.color.set(this.color)
            : this.cone.material.color.copy(this.light.color));
      }
    }
    let hI = new aq(),
      hJ = new bd(),
      hK = new bd();
    class hL extends eg {
      constructor(a) {
        const b = (function a(b) {
            let c = [];
            !0 === b.isBone && c.push(b);
            for (let d = 0; d < b.children.length; d++)
              c.push(...a(b.children[d]));
            return c;
          })(a),
          c = new co(),
          d = [],
          e = [];
        for (let a = 0; a < b.length; a++) {
          const c = b[a];
          c.parent &&
            c.parent.isBone &&
            (d.push(0, 0, 0),
            d.push(0, 0, 0),
            e.push(0, 0, 0),
            e.push(0, 0, 0));
        }
        (c.setAttribute('position', new cg(d, 3)),
          c.setAttribute('color', new cg(e, 3)),
          super(
            c,
            new d4({
              vertexColors: !0,
              depthTest: !1,
              depthWrite: !1,
              toneMapped: !1,
              transparent: !0,
            })
          ),
          (this.isSkeletonHelper = !0),
          (this.type = 'SkeletonHelper'),
          (this.root = a),
          (this.bones = b),
          (this.matrix = a.matrixWorld),
          (this.matrixAutoUpdate = !1));
        const f = new bX(255),
          g = new bX(65280);
        this.setColors(f, g);
      }
      updateMatrixWorld(a) {
        let b = this.bones,
          c = this.geometry,
          d = c.getAttribute('position');
        hK.copy(this.root.matrixWorld).invert();
        for (let a = 0, c = 0; a < b.length; a++) {
          let e = b[a];
          e.parent &&
            e.parent.isBone &&
            (hJ.multiplyMatrices(hK, e.matrixWorld),
            hI.setFromMatrixPosition(hJ),
            d.setXYZ(c, hI.x, hI.y, hI.z),
            hJ.multiplyMatrices(hK, e.parent.matrixWorld),
            hI.setFromMatrixPosition(hJ),
            d.setXYZ(c + 1, hI.x, hI.y, hI.z),
            (c += 2));
        }
        ((c.getAttribute('position').needsUpdate = !0),
          super.updateMatrixWorld(a));
      }
      setColors(a, b) {
        let c = this.geometry.getAttribute('color');
        for (let d = 0; d < c.count; d += 2)
          (c.setXYZ(d, a.r, a.g, a.b), c.setXYZ(d + 1, b.r, b.g, b.b));
        return ((c.needsUpdate = !0), this);
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    class hM extends cA {
      constructor(a, b, c) {
        (super(
          new fx(b, 4, 2),
          new b_({ wireframe: !0, fog: !1, toneMapped: !1 })
        ),
          (this.light = a),
          (this.color = c),
          (this.type = 'PointLightHelper'),
          (this.matrix = this.light.matrixWorld),
          (this.matrixAutoUpdate = !1),
          this.update());
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
      update() {
        (this.light.updateWorldMatrix(!0, !1),
          void 0 !== this.color
            ? this.material.color.set(this.color)
            : this.material.color.copy(this.light.color));
      }
    }
    let hN = new aq(),
      hO = new bX(),
      hP = new bX();
    class hQ extends bE {
      constructor(a, b, c) {
        (super(),
          (this.light = a),
          (this.matrix = a.matrixWorld),
          (this.matrixAutoUpdate = !1),
          (this.color = c),
          (this.type = 'HemisphereLightHelper'));
        const d = new ft(b);
        (d.rotateY(0.5 * Math.PI),
          (this.material = new b_({ wireframe: !0, fog: !1, toneMapped: !1 })),
          void 0 === this.color && (this.material.vertexColors = !0));
        const e = new Float32Array(3 * d.getAttribute('position').count);
        (d.setAttribute('color', new b7(e, 3)),
          this.add(new cA(d, this.material)),
          this.update());
      }
      dispose() {
        (this.children[0].geometry.dispose(),
          this.children[0].material.dispose());
      }
      update() {
        let a = this.children[0];
        if (void 0 !== this.color) this.material.color.set(this.color);
        else {
          let b = a.geometry.getAttribute('color');
          (hO.copy(this.light.color), hP.copy(this.light.groundColor));
          for (let a = 0, c = b.count; a < c; a++) {
            let d = a < c / 2 ? hO : hP;
            b.setXYZ(a, d.r, d.g, d.b);
          }
          b.needsUpdate = !0;
        }
        (this.light.updateWorldMatrix(!0, !1),
          a.lookAt(hN.setFromMatrixPosition(this.light.matrixWorld).negate()));
      }
    }
    class hR extends eg {
      constructor(a = 10, b = 10, c = 4473924, d = 8947848) {
        ((c = new bX(c)), (d = new bX(d)));
        const e = b / 2,
          f = a / b,
          g = a / 2,
          h = [],
          i = [];
        for (let a = 0, j = 0, k = -g; a <= b; a++, k += f) {
          (h.push(-g, 0, k, g, 0, k), h.push(k, 0, -g, k, 0, g));
          const b = a === e ? c : d;
          (b.toArray(i, j),
            (j += 3),
            b.toArray(i, j),
            (j += 3),
            b.toArray(i, j),
            (j += 3),
            b.toArray(i, j),
            (j += 3));
        }
        const j = new co();
        (j.setAttribute('position', new cg(h, 3)),
          j.setAttribute('color', new cg(i, 3)),
          super(j, new d4({ vertexColors: !0, toneMapped: !1 })),
          (this.type = 'GridHelper'));
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    class hS extends eg {
      constructor(a = 10, b = 16, c = 8, d = 64, e = 4473924, f = 8947848) {
        ((e = new bX(e)), (f = new bX(f)));
        const g = [],
          h = [];
        if (b > 1)
          for (let c = 0; c < b; c++) {
            const d = (c / b) * (2 * Math.PI),
              i = Math.sin(d) * a,
              j = Math.cos(d) * a;
            (g.push(0, 0, 0), g.push(i, 0, j));
            const k = 1 & c ? e : f;
            (h.push(k.r, k.g, k.b), h.push(k.r, k.g, k.b));
          }
        for (let b = 0; b < c; b++) {
          const i = 1 & b ? e : f,
            j = a - (a / c) * b;
          for (let a = 0; a < d; a++) {
            let b = (a / d) * (2 * Math.PI),
              c = Math.sin(b) * j,
              e = Math.cos(b) * j;
            (g.push(c, 0, e),
              h.push(i.r, i.g, i.b),
              (c = Math.sin((b = ((a + 1) / d) * (2 * Math.PI))) * j),
              (e = Math.cos(b) * j),
              g.push(c, 0, e),
              h.push(i.r, i.g, i.b));
          }
        }
        const i = new co();
        (i.setAttribute('position', new cg(g, 3)),
          i.setAttribute('color', new cg(h, 3)),
          super(i, new d4({ vertexColors: !0, toneMapped: !1 })),
          (this.type = 'PolarGridHelper'));
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    let hT = new aq(),
      hU = new aq(),
      hV = new aq();
    class hW extends bE {
      constructor(a, b, c) {
        (super(),
          (this.light = a),
          (this.matrix = a.matrixWorld),
          (this.matrixAutoUpdate = !1),
          (this.color = c),
          (this.type = 'DirectionalLightHelper'),
          void 0 === b && (b = 1));
        let d = new co();
        d.setAttribute(
          'position',
          new cg([-b, b, 0, b, b, 0, b, -b, 0, -b, -b, 0, -b, b, 0], 3)
        );
        const e = new d4({ fog: !1, toneMapped: !1 });
        ((this.lightPlane = new ec(d, e)),
          this.add(this.lightPlane),
          (d = new co()).setAttribute(
            'position',
            new cg([0, 0, 0, 0, 0, 1], 3)
          ),
          (this.targetLine = new ec(d, e)),
          this.add(this.targetLine),
          this.update());
      }
      dispose() {
        (this.lightPlane.geometry.dispose(),
          this.lightPlane.material.dispose(),
          this.targetLine.geometry.dispose(),
          this.targetLine.material.dispose());
      }
      update() {
        (this.light.updateWorldMatrix(!0, !1),
          this.light.target.updateWorldMatrix(!0, !1),
          hT.setFromMatrixPosition(this.light.matrixWorld),
          hU.setFromMatrixPosition(this.light.target.matrixWorld),
          hV.subVectors(hU, hT),
          this.lightPlane.lookAt(hU),
          void 0 !== this.color
            ? (this.lightPlane.material.color.set(this.color),
              this.targetLine.material.color.set(this.color))
            : (this.lightPlane.material.color.copy(this.light.color),
              this.targetLine.material.color.copy(this.light.color)),
          this.targetLine.lookAt(hU),
          (this.targetLine.scale.z = hV.length()));
      }
    }
    let hX = new aq(),
      hY = new cI();
    class hZ extends eg {
      constructor(a) {
        const b = new co(),
          c = new d4({ color: 0xffffff, vertexColors: !0, toneMapped: !1 }),
          d = [],
          e = [],
          f = {};
        function g(a, b) {
          (h(a), h(b));
        }
        function h(a) {
          (d.push(0, 0, 0),
            e.push(0, 0, 0),
            void 0 === f[a] && (f[a] = []),
            f[a].push(d.length / 3 - 1));
        }
        (g('n1', 'n2'),
          g('n2', 'n4'),
          g('n4', 'n3'),
          g('n3', 'n1'),
          g('f1', 'f2'),
          g('f2', 'f4'),
          g('f4', 'f3'),
          g('f3', 'f1'),
          g('n1', 'f1'),
          g('n2', 'f2'),
          g('n3', 'f3'),
          g('n4', 'f4'),
          g('p', 'n1'),
          g('p', 'n2'),
          g('p', 'n3'),
          g('p', 'n4'),
          g('u1', 'u2'),
          g('u2', 'u3'),
          g('u3', 'u1'),
          g('c', 't'),
          g('p', 'c'),
          g('cn1', 'cn2'),
          g('cn3', 'cn4'),
          g('cf1', 'cf2'),
          g('cf3', 'cf4'),
          b.setAttribute('position', new cg(d, 3)),
          b.setAttribute('color', new cg(e, 3)),
          super(b, c),
          (this.type = 'CameraHelper'),
          (this.camera = a),
          this.camera.updateProjectionMatrix &&
            this.camera.updateProjectionMatrix(),
          (this.matrix = a.matrixWorld),
          (this.matrixAutoUpdate = !1),
          (this.pointMap = f),
          this.update());
        const i = new bX(0xffaa00),
          j = new bX(0xff0000),
          k = new bX(43775),
          l = new bX(0xffffff),
          m = new bX(3355443);
        this.setColors(i, j, k, l, m);
      }
      setColors(a, b, c, d, e) {
        let f = this.geometry.getAttribute('color');
        return (
          f.setXYZ(0, a.r, a.g, a.b),
          f.setXYZ(1, a.r, a.g, a.b),
          f.setXYZ(2, a.r, a.g, a.b),
          f.setXYZ(3, a.r, a.g, a.b),
          f.setXYZ(4, a.r, a.g, a.b),
          f.setXYZ(5, a.r, a.g, a.b),
          f.setXYZ(6, a.r, a.g, a.b),
          f.setXYZ(7, a.r, a.g, a.b),
          f.setXYZ(8, a.r, a.g, a.b),
          f.setXYZ(9, a.r, a.g, a.b),
          f.setXYZ(10, a.r, a.g, a.b),
          f.setXYZ(11, a.r, a.g, a.b),
          f.setXYZ(12, a.r, a.g, a.b),
          f.setXYZ(13, a.r, a.g, a.b),
          f.setXYZ(14, a.r, a.g, a.b),
          f.setXYZ(15, a.r, a.g, a.b),
          f.setXYZ(16, a.r, a.g, a.b),
          f.setXYZ(17, a.r, a.g, a.b),
          f.setXYZ(18, a.r, a.g, a.b),
          f.setXYZ(19, a.r, a.g, a.b),
          f.setXYZ(20, a.r, a.g, a.b),
          f.setXYZ(21, a.r, a.g, a.b),
          f.setXYZ(22, a.r, a.g, a.b),
          f.setXYZ(23, a.r, a.g, a.b),
          f.setXYZ(24, b.r, b.g, b.b),
          f.setXYZ(25, b.r, b.g, b.b),
          f.setXYZ(26, b.r, b.g, b.b),
          f.setXYZ(27, b.r, b.g, b.b),
          f.setXYZ(28, b.r, b.g, b.b),
          f.setXYZ(29, b.r, b.g, b.b),
          f.setXYZ(30, b.r, b.g, b.b),
          f.setXYZ(31, b.r, b.g, b.b),
          f.setXYZ(32, c.r, c.g, c.b),
          f.setXYZ(33, c.r, c.g, c.b),
          f.setXYZ(34, c.r, c.g, c.b),
          f.setXYZ(35, c.r, c.g, c.b),
          f.setXYZ(36, c.r, c.g, c.b),
          f.setXYZ(37, c.r, c.g, c.b),
          f.setXYZ(38, d.r, d.g, d.b),
          f.setXYZ(39, d.r, d.g, d.b),
          f.setXYZ(40, e.r, e.g, e.b),
          f.setXYZ(41, e.r, e.g, e.b),
          f.setXYZ(42, e.r, e.g, e.b),
          f.setXYZ(43, e.r, e.g, e.b),
          f.setXYZ(44, e.r, e.g, e.b),
          f.setXYZ(45, e.r, e.g, e.b),
          f.setXYZ(46, e.r, e.g, e.b),
          f.setXYZ(47, e.r, e.g, e.b),
          f.setXYZ(48, e.r, e.g, e.b),
          f.setXYZ(49, e.r, e.g, e.b),
          (f.needsUpdate = !0),
          this
        );
      }
      update() {
        let a,
          b,
          c = this.geometry,
          d = this.pointMap;
        if (
          (hY.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),
          !0 === this.camera.reversedDepth)
        )
          ((a = 1), (b = 0));
        else if (2e3 === this.camera.coordinateSystem) ((a = -1), (b = 1));
        else if (2001 === this.camera.coordinateSystem) ((a = 0), (b = 1));
        else
          throw Error(
            'THREE.CameraHelper.update(): Invalid coordinate system: ' +
              this.camera.coordinateSystem
          );
        (h$('c', d, c, hY, 0, 0, a),
          h$('t', d, c, hY, 0, 0, b),
          h$('n1', d, c, hY, -1, -1, a),
          h$('n2', d, c, hY, 1, -1, a),
          h$('n3', d, c, hY, -1, 1, a),
          h$('n4', d, c, hY, 1, 1, a),
          h$('f1', d, c, hY, -1, -1, b),
          h$('f2', d, c, hY, 1, -1, b),
          h$('f3', d, c, hY, -1, 1, b),
          h$('f4', d, c, hY, 1, 1, b),
          h$('u1', d, c, hY, 0.7, 1.1, a),
          h$('u2', d, c, hY, -0.7, 1.1, a),
          h$('u3', d, c, hY, 0, 2, a),
          h$('cf1', d, c, hY, -1, 0, b),
          h$('cf2', d, c, hY, 1, 0, b),
          h$('cf3', d, c, hY, 0, -1, b),
          h$('cf4', d, c, hY, 0, 1, b),
          h$('cn1', d, c, hY, -1, 0, a),
          h$('cn2', d, c, hY, 1, 0, a),
          h$('cn3', d, c, hY, 0, -1, a),
          h$('cn4', d, c, hY, 0, 1, a),
          (c.getAttribute('position').needsUpdate = !0));
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    function h$(a, b, c, d, e, f, g) {
      hX.set(e, f, g).unproject(d);
      let h = b[a];
      if (void 0 !== h) {
        let a = c.getAttribute('position');
        for (let b = 0, c = h.length; b < c; b++)
          a.setXYZ(h[b], hX.x, hX.y, hX.z);
      }
    }
    let h_ = new aO();
    class h0 extends eg {
      constructor(a, b = 0xffff00) {
        const c = new Uint16Array([
            0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3,
            7,
          ]),
          d = new Float32Array(24),
          e = new co();
        (e.setIndex(new b7(c, 1)),
          e.setAttribute('position', new b7(d, 3)),
          super(e, new d4({ color: b, toneMapped: !1 })),
          (this.object = a),
          (this.type = 'BoxHelper'),
          (this.matrixAutoUpdate = !1),
          this.update());
      }
      update() {
        if (
          (void 0 !== this.object && h_.setFromObject(this.object),
          h_.isEmpty())
        )
          return;
        let a = h_.min,
          b = h_.max,
          c = this.geometry.attributes.position,
          d = c.array;
        ((d[0] = b.x),
          (d[1] = b.y),
          (d[2] = b.z),
          (d[3] = a.x),
          (d[4] = b.y),
          (d[5] = b.z),
          (d[6] = a.x),
          (d[7] = a.y),
          (d[8] = b.z),
          (d[9] = b.x),
          (d[10] = a.y),
          (d[11] = b.z),
          (d[12] = b.x),
          (d[13] = b.y),
          (d[14] = a.z),
          (d[15] = a.x),
          (d[16] = b.y),
          (d[17] = a.z),
          (d[18] = a.x),
          (d[19] = a.y),
          (d[20] = a.z),
          (d[21] = b.x),
          (d[22] = a.y),
          (d[23] = a.z),
          (c.needsUpdate = !0),
          this.geometry.computeBoundingSphere());
      }
      setFromObject(a) {
        return ((this.object = a), this.update(), this);
      }
      copy(a, b) {
        return (super.copy(a, b), (this.object = a.object), this);
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    class h1 extends eg {
      constructor(a, b = 0xffff00) {
        const c = new Uint16Array([
            0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3,
            7,
          ]),
          d = new co();
        (d.setIndex(new b7(c, 1)),
          d.setAttribute(
            'position',
            new cg(
              [
                1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1,
                -1, -1, 1, -1, -1,
              ],
              3
            )
          ),
          super(d, new d4({ color: b, toneMapped: !1 })),
          (this.box = a),
          (this.type = 'Box3Helper'),
          this.geometry.computeBoundingSphere());
      }
      updateMatrixWorld(a) {
        let b = this.box;
        b.isEmpty() ||
          (b.getCenter(this.position),
          b.getSize(this.scale),
          this.scale.multiplyScalar(0.5),
          super.updateMatrixWorld(a));
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    class h2 extends ec {
      constructor(a, b = 1, c = 0xffff00) {
        const d = new co();
        (d.setAttribute(
          'position',
          new cg(
            [
              1, -1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, 1, 0, -1, -1, 0, 1,
              -1, 0, 1, 1, 0,
            ],
            3
          )
        ),
          d.computeBoundingSphere(),
          super(d, new d4({ color: c, toneMapped: !1 })),
          (this.type = 'PlaneHelper'),
          (this.plane = a),
          (this.size = b));
        const e = new co();
        (e.setAttribute(
          'position',
          new cg(
            [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0],
            3
          )
        ),
          e.computeBoundingSphere(),
          this.add(
            new cA(
              e,
              new b_({
                color: c,
                opacity: 0.2,
                transparent: !0,
                depthWrite: !1,
                toneMapped: !1,
              })
            )
          ));
      }
      updateMatrixWorld(a) {
        (this.position.set(0, 0, 0),
          this.scale.set(0.5 * this.size, 0.5 * this.size, 1),
          this.lookAt(this.plane.normal),
          this.translateZ(-this.plane.constant),
          super.updateMatrixWorld(a));
      }
      dispose() {
        (this.geometry.dispose(),
          this.material.dispose(),
          this.children[0].geometry.dispose(),
          this.children[0].material.dispose());
      }
    }
    let h3 = new aq();
    class h4 extends bE {
      constructor(
        a = new aq(0, 0, 1),
        b = new aq(0, 0, 0),
        c = 1,
        d = 0xffff00,
        g = 0.2 * c,
        h = 0.2 * g
      ) {
        (super(),
          (this.type = 'ArrowHelper'),
          void 0 === e &&
            ((e = new co()).setAttribute(
              'position',
              new cg([0, 0, 0, 0, 1, 0], 3)
            ),
            (f = new eC(0.5, 1, 5, 1)).translate(0, -0.5, 0)),
          this.position.copy(b),
          (this.line = new ec(e, new d4({ color: d, toneMapped: !1 }))),
          (this.line.matrixAutoUpdate = !1),
          this.add(this.line),
          (this.cone = new cA(f, new b_({ color: d, toneMapped: !1 }))),
          (this.cone.matrixAutoUpdate = !1),
          this.add(this.cone),
          this.setDirection(a),
          this.setLength(c, g, h));
      }
      setDirection(a) {
        if (a.y > 0.99999) this.quaternion.set(0, 0, 0, 1);
        else if (a.y < -0.99999) this.quaternion.set(1, 0, 0, 0);
        else {
          h3.set(a.z, 0, -a.x).normalize();
          let b = Math.acos(a.y);
          this.quaternion.setFromAxisAngle(h3, b);
        }
      }
      setLength(a, b = 0.2 * a, c = 0.2 * b) {
        (this.line.scale.set(1, Math.max(1e-4, a - b), 1),
          this.line.updateMatrix(),
          this.cone.scale.set(c, b, c),
          (this.cone.position.y = a),
          this.cone.updateMatrix());
      }
      setColor(a) {
        (this.line.material.color.set(a), this.cone.material.color.set(a));
      }
      copy(a) {
        return (
          super.copy(a, !1),
          this.line.copy(a.line),
          this.cone.copy(a.cone),
          this
        );
      }
      dispose() {
        (this.line.geometry.dispose(),
          this.line.material.dispose(),
          this.cone.geometry.dispose(),
          this.cone.material.dispose());
      }
    }
    class h5 extends eg {
      constructor(a = 1) {
        const b = new co();
        (b.setAttribute(
          'position',
          new cg([0, 0, 0, a, 0, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 0, a], 3)
        ),
          b.setAttribute(
            'color',
            new cg(
              [1, 0, 0, 1, 0.6, 0, 0, 1, 0, 0.6, 1, 0, 0, 0, 1, 0, 0.6, 1],
              3
            )
          ),
          super(b, new d4({ vertexColors: !0, toneMapped: !1 })),
          (this.type = 'AxesHelper'));
      }
      setColors(a, b, c) {
        let d = new bX(),
          e = this.geometry.attributes.color.array;
        return (
          d.set(a),
          d.toArray(e, 0),
          d.toArray(e, 3),
          d.set(b),
          d.toArray(e, 6),
          d.toArray(e, 9),
          d.set(c),
          d.toArray(e, 12),
          d.toArray(e, 15),
          (this.geometry.attributes.color.needsUpdate = !0),
          this
        );
      }
      dispose() {
        (this.geometry.dispose(), this.material.dispose());
      }
    }
    class h6 {
      constructor() {
        ((this.type = 'ShapePath'),
          (this.color = new bX()),
          (this.subPaths = []),
          (this.currentPath = null));
      }
      moveTo(a, b) {
        return (
          (this.currentPath = new e3()),
          this.subPaths.push(this.currentPath),
          this.currentPath.moveTo(a, b),
          this
        );
      }
      lineTo(a, b) {
        return (this.currentPath.lineTo(a, b), this);
      }
      quadraticCurveTo(a, b, c, d) {
        return (this.currentPath.quadraticCurveTo(a, b, c, d), this);
      }
      bezierCurveTo(a, b, c, d, e, f) {
        return (this.currentPath.bezierCurveTo(a, b, c, d, e, f), this);
      }
      splineThru(a) {
        return (this.currentPath.splineThru(a), this);
      }
      toShapes(a) {
        let b,
          c,
          d,
          e,
          f,
          g = fm.isClockWise,
          h = this.subPaths;
        if (0 === h.length) return [];
        let i = [];
        if (1 === h.length)
          return ((c = h[0]), ((d = new e4()).curves = c.curves), i.push(d), i);
        let j = !g(h[0].getPoints());
        j = a ? !j : j;
        let k = [],
          l = [],
          m = [],
          n = 0;
        ((l[0] = void 0), (m[n] = []));
        for (let d = 0, f = h.length; d < f; d++)
          ((b = g((e = (c = h[d]).getPoints()))),
            (b = a ? !b : b)
              ? (!j && l[n] && n++,
                (l[n] = { s: new e4(), p: e }),
                (l[n].s.curves = c.curves),
                j && n++,
                (m[n] = []))
              : m[n].push({ h: c, p: e[0] }));
        if (!l[0])
          return (function (a) {
            let b = [];
            for (let c = 0, d = a.length; c < d; c++) {
              let d = a[c],
                e = new e4();
              ((e.curves = d.curves), b.push(e));
            }
            return b;
          })(h);
        if (l.length > 1) {
          let a = !1,
            b = 0;
          for (let a = 0, b = l.length; a < b; a++) k[a] = [];
          for (let c = 0, d = l.length; c < d; c++) {
            let d = m[c];
            for (let e = 0; e < d.length; e++) {
              let f = d[e],
                g = !0;
              for (let d = 0; d < l.length; d++)
                (function (a, b) {
                  let c = b.length,
                    d = !1;
                  for (let e = c - 1, f = 0; f < c; e = f++) {
                    let c = b[e],
                      g = b[f],
                      h = g.x - c.x,
                      i = g.y - c.y;
                    if (Math.abs(i) > Number.EPSILON) {
                      if (
                        (i < 0 && ((c = b[f]), (h = -h), (g = b[e]), (i = -i)),
                        a.y < c.y || a.y > g.y)
                      )
                        continue;
                      if (a.y === c.y) {
                        if (a.x === c.x) return !0;
                      } else {
                        let b = i * (a.x - c.x) - h * (a.y - c.y);
                        if (0 === b) return !0;
                        if (b < 0) continue;
                        d = !d;
                      }
                    } else {
                      if (a.y !== c.y) continue;
                      if (
                        (g.x <= a.x && a.x <= c.x) ||
                        (c.x <= a.x && a.x <= g.x)
                      )
                        return !0;
                    }
                  }
                  return d;
                })(f.p, l[d].p) &&
                  (c !== d && b++, g ? ((g = !1), k[d].push(f)) : (a = !0));
              g && k[c].push(f);
            }
          }
          b > 0 && !1 === a && (m = k);
        }
        for (let a = 0, b = l.length; a < b; a++) {
          ((d = l[a].s), i.push(d), (f = m[a]));
          for (let a = 0, b = f.length; a < b; a++) d.holes.push(f[a].h);
        }
        return i;
      }
    }
    class h7 extends ac {
      constructor(a, b = null) {
        (super(),
          (this.object = a),
          (this.domElement = b),
          (this.enabled = !0),
          (this.state = -1),
          (this.keys = {}),
          (this.mouseButtons = { LEFT: null, MIDDLE: null, RIGHT: null }),
          (this.touches = { ONE: null, TWO: null }));
      }
      connect(a) {
        void 0 === a
          ? _('Controls: connect() now requires an element.')
          : (null !== this.domElement && this.disconnect(),
            (this.domElement = a));
      }
      disconnect() {}
      dispose() {}
      update() {}
    }
    function h8(a, b, c, d) {
      let e = (function (a) {
        switch (a) {
          case 1009:
          case 1010:
            return { byteLength: 1, components: 1 };
          case 1012:
          case 1011:
          case 1016:
            return { byteLength: 2, components: 1 };
          case 1017:
          case 1018:
            return { byteLength: 2, components: 4 };
          case 1014:
          case 1013:
          case 1015:
            return { byteLength: 4, components: 1 };
          case 35902:
          case 35899:
            return { byteLength: 4, components: 3 };
        }
        throw Error(`Unknown texture type ${a}.`);
      })(d);
      switch (c) {
        case 1021:
          return a * b;
        case 1028:
        case 1029:
          return ((a * b) / e.components) * e.byteLength;
        case 1030:
        case 1031:
          return ((a * b * 2) / e.components) * e.byteLength;
        case 1022:
          return ((a * b * 3) / e.components) * e.byteLength;
        case 1023:
        case 1033:
          return ((a * b * 4) / e.components) * e.byteLength;
        case 33776:
        case 33777:
        case 36196:
        case 37492:
        case 37488:
        case 37489:
          return Math.floor((a + 3) / 4) * Math.floor((b + 3) / 4) * 8;
        case 33778:
        case 33779:
        case 37496:
        case 37490:
        case 37491:
        case 37808:
          return Math.floor((a + 3) / 4) * Math.floor((b + 3) / 4) * 16;
        case 35841:
        case 35843:
          return (Math.max(a, 16) * Math.max(b, 8)) / 4;
        case 35840:
        case 35842:
          return (Math.max(a, 8) * Math.max(b, 8)) / 2;
        case 37809:
          return Math.floor((a + 4) / 5) * Math.floor((b + 3) / 4) * 16;
        case 37810:
          return Math.floor((a + 4) / 5) * Math.floor((b + 4) / 5) * 16;
        case 37811:
          return Math.floor((a + 5) / 6) * Math.floor((b + 4) / 5) * 16;
        case 37812:
          return Math.floor((a + 5) / 6) * Math.floor((b + 5) / 6) * 16;
        case 37813:
          return Math.floor((a + 7) / 8) * Math.floor((b + 4) / 5) * 16;
        case 37814:
          return Math.floor((a + 7) / 8) * Math.floor((b + 5) / 6) * 16;
        case 37815:
          return Math.floor((a + 7) / 8) * Math.floor((b + 7) / 8) * 16;
        case 37816:
          return Math.floor((a + 9) / 10) * Math.floor((b + 4) / 5) * 16;
        case 37817:
          return Math.floor((a + 9) / 10) * Math.floor((b + 5) / 6) * 16;
        case 37818:
          return Math.floor((a + 9) / 10) * Math.floor((b + 7) / 8) * 16;
        case 37819:
          return Math.floor((a + 9) / 10) * Math.floor((b + 9) / 10) * 16;
        case 37820:
          return Math.floor((a + 11) / 12) * Math.floor((b + 9) / 10) * 16;
        case 37821:
          return Math.floor((a + 11) / 12) * Math.floor((b + 11) / 12) * 16;
        case 36492:
        case 36494:
        case 36495:
        case 36285:
        case 36286:
          return Math.ceil(a / 4) * Math.ceil(b / 4) * 16;
        case 36283:
        case 36284:
          return Math.ceil(a / 4) * Math.ceil(b / 4) * 8;
      }
      throw Error(`Unable to determine texture byte length for ${c} format.`);
    }
    class h9 {
      static contain(a, b) {
        let c;
        return (
          (c = a.image && a.image.width ? a.image.width / a.image.height : 1) >
          b
            ? ((a.repeat.x = 1),
              (a.repeat.y = c / b),
              (a.offset.x = 0),
              (a.offset.y = (1 - a.repeat.y) / 2))
            : ((a.repeat.x = b / c),
              (a.repeat.y = 1),
              (a.offset.x = (1 - a.repeat.x) / 2),
              (a.offset.y = 0)),
          a
        );
      }
      static cover(a, b) {
        let c;
        return (
          (c = a.image && a.image.width ? a.image.width / a.image.height : 1) >
          b
            ? ((a.repeat.x = b / c),
              (a.repeat.y = 1),
              (a.offset.x = (1 - a.repeat.x) / 2),
              (a.offset.y = 0))
            : ((a.repeat.x = 1),
              (a.repeat.y = c / b),
              (a.offset.x = 0),
              (a.offset.y = (1 - a.repeat.y) / 2)),
          a
        );
      }
      static fill(a) {
        return (
          (a.repeat.x = 1),
          (a.repeat.y = 1),
          (a.offset.x = 0),
          (a.offset.y = 0),
          a
        );
      }
      static getByteLength(a, b, c, d) {
        return h8(a, b, c, d);
      }
    }
    function ia() {
      let a = null,
        b = !1,
        c = null,
        d = null;
      function e(b, f) {
        (c(b, f), (d = a.requestAnimationFrame(e)));
      }
      return {
        start: function () {
          !0 === b ||
            (null !== c && ((d = a.requestAnimationFrame(e)), (b = !0)));
        },
        stop: function () {
          (a.cancelAnimationFrame(d), (b = !1));
        },
        setAnimationLoop: function (a) {
          c = a;
        },
        setContext: function (b) {
          a = b;
        },
      };
    }
    function ib(a) {
      let b = new WeakMap();
      return {
        get: function (a) {
          return (a.isInterleavedBufferAttribute && (a = a.data), b.get(a));
        },
        remove: function (c) {
          c.isInterleavedBufferAttribute && (c = c.data);
          let d = b.get(c);
          d && (a.deleteBuffer(d.buffer), b.delete(c));
        },
        update: function (c, d) {
          if (
            (c.isInterleavedBufferAttribute && (c = c.data),
            c.isGLBufferAttribute)
          ) {
            let a = b.get(c);
            (!a || a.version < c.version) &&
              b.set(c, {
                buffer: c.buffer,
                type: c.type,
                bytesPerElement: c.elementSize,
                version: c.version,
              });
            return;
          }
          let e = b.get(c);
          if (void 0 === e)
            b.set(
              c,
              (function (b, c) {
                let d,
                  e = b.array,
                  f = b.usage,
                  g = e.byteLength,
                  h = a.createBuffer();
                if (
                  (a.bindBuffer(c, h),
                  a.bufferData(c, e, f),
                  b.onUploadCallback(),
                  e instanceof Float32Array)
                )
                  d = a.FLOAT;
                else if ('u' > typeof Float16Array && e instanceof Float16Array)
                  d = a.HALF_FLOAT;
                else if (e instanceof Uint16Array)
                  d = b.isFloat16BufferAttribute
                    ? a.HALF_FLOAT
                    : a.UNSIGNED_SHORT;
                else if (e instanceof Int16Array) d = a.SHORT;
                else if (e instanceof Uint32Array) d = a.UNSIGNED_INT;
                else if (e instanceof Int32Array) d = a.INT;
                else if (e instanceof Int8Array) d = a.BYTE;
                else if (e instanceof Uint8Array) d = a.UNSIGNED_BYTE;
                else if (e instanceof Uint8ClampedArray) d = a.UNSIGNED_BYTE;
                else
                  throw Error(
                    'THREE.WebGLAttributes: Unsupported buffer data format: ' +
                      e
                  );
                return {
                  buffer: h,
                  type: d,
                  bytesPerElement: e.BYTES_PER_ELEMENT,
                  version: b.version,
                  size: g,
                };
              })(c, d)
            );
          else if (e.version < c.version) {
            if (e.size !== c.array.byteLength)
              throw Error(
                "THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported."
              );
            (!(function (b, c, d) {
              let e = c.array,
                f = c.updateRanges;
              if ((a.bindBuffer(d, b), 0 === f.length))
                a.bufferSubData(d, 0, e);
              else {
                f.sort((a, b) => a.start - b.start);
                let b = 0;
                for (let a = 1; a < f.length; a++) {
                  let c = f[b],
                    d = f[a];
                  d.start <= c.start + c.count + 1
                    ? (c.count = Math.max(c.count, d.start + d.count - c.start))
                    : (f[++b] = d);
                }
                f.length = b + 1;
                for (let b = 0, c = f.length; b < c; b++) {
                  let c = f[b];
                  a.bufferSubData(
                    d,
                    c.start * e.BYTES_PER_ELEMENT,
                    e,
                    c.start,
                    c.count
                  );
                }
                c.clearUpdateRanges();
              }
              c.onUploadCallback();
            })(e.buffer, c, d),
              (e.version = c.version));
          }
        },
      };
    }
    'u' > typeof __THREE_DEVTOOLS__ &&
      __THREE_DEVTOOLS__.dispatchEvent(
        new CustomEvent('register', { detail: { revision: '182' } })
      );
    let ic = {
        alphahash_fragment:
          '#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif',
        alphahash_pars_fragment:
          '#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif',
        alphamap_fragment:
          '#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif',
        alphamap_pars_fragment:
          '#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif',
        alphatest_fragment:
          '#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif',
        alphatest_pars_fragment:
          '#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif',
        aomap_fragment:
          '#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif',
        aomap_pars_fragment:
          '#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif',
        batching_pars_vertex:
          '#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif',
        batching_vertex:
          '#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif',
        begin_vertex:
          'vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif',
        beginnormal_vertex:
          'vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif',
        bsdfs:
          'float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated',
        iridescence_fragment:
          '#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif',
        bumpmap_pars_fragment:
          '#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif',
        clipping_planes_fragment:
          '#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif',
        clipping_planes_pars_fragment:
          '#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif',
        clipping_planes_pars_vertex:
          '#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif',
        clipping_planes_vertex:
          '#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif',
        color_fragment:
          '#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif',
        color_pars_fragment:
          '#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif',
        color_pars_vertex:
          '#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif',
        color_vertex:
          '#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif',
        common:
          '#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated',
        cube_uv_reflection_fragment:
          '#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif',
        defaultnormal_vertex:
          'vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif',
        displacementmap_pars_vertex:
          '#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif',
        displacementmap_vertex:
          '#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif',
        emissivemap_fragment:
          '#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif',
        emissivemap_pars_fragment:
          '#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif',
        colorspace_fragment:
          'gl_FragColor = linearToOutputTexel( gl_FragColor );',
        colorspace_pars_fragment:
          'vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}',
        envmap_fragment:
          '#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif',
        envmap_common_pars_fragment:
          '#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n#endif',
        envmap_pars_fragment:
          '#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif',
        envmap_pars_vertex:
          '#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif',
        envmap_physical_pars_fragment:
          '#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif',
        envmap_vertex:
          '#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif',
        fog_vertex: '#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif',
        fog_pars_vertex: '#ifdef USE_FOG\n	varying float vFogDepth;\n#endif',
        fog_fragment:
          '#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif',
        fog_pars_fragment:
          '#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif',
        gradientmap_pars_fragment:
          '#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}',
        lightmap_pars_fragment:
          '#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif',
        lights_lambert_fragment:
          'LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;',
        lights_lambert_pars_fragment:
          'varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert',
        lights_pars_begin:
          'uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif',
        lights_toon_fragment:
          'ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;',
        lights_toon_pars_fragment:
          'varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon',
        lights_phong_fragment:
          'BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;',
        lights_phong_pars_fragment:
          'varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong',
        lights_physical_fragment:
          'PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.metalness = metalnessFactor;\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;\n	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = vec3( 0.04 );\n	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif',
        lights_physical_pars_fragment:
          'uniform sampler2D dfgLUT;\nstruct PhysicalMaterial {\n	vec3 diffuseColor;\n	vec3 diffuseContribution;\n	vec3 specularColor;\n	vec3 specularColorBlended;\n	float roughness;\n	float metalness;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n		vec3 iridescenceFresnelDielectric;\n		vec3 iridescenceFresnelMetallic;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return v;\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColorBlended;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float rInv = 1.0 / ( roughness + 0.1 );\n	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;\n	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;\n	float DG = exp( a * dotNV + b );\n	return saturate( DG );\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\nvec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;\n	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;\n	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;\n	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;\n	float Ess_V = dfgV.x + dfgV.y;\n	float Ess_L = dfgL.x + dfgL.y;\n	float Ems_V = 1.0 - Ess_V;\n	float Ems_L = 1.0 - Ess_L;\n	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;\n	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );\n	float compensationFactor = Ems_V * Ems_L;\n	vec3 multiScatter = Fms * compensationFactor;\n	return singleScatter + multiScatter;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n \n 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n \n 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );\n \n 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );\n \n 		irradiance *= sheenEnergyComp;\n \n 	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );\n	#ifdef USE_SHEEN\n		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;\n		diffuse *= sheenEnergyComp;\n	#endif\n	reflectedLight.indirectDiffuse += diffuse;\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;\n 	#endif\n	vec3 singleScatteringDielectric = vec3( 0.0 );\n	vec3 multiScatteringDielectric = vec3( 0.0 );\n	vec3 singleScatteringMetallic = vec3( 0.0 );\n	vec3 multiScatteringMetallic = vec3( 0.0 );\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );\n		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );\n	#endif\n	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );\n	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );\n	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;\n	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	vec3 indirectSpecular = radiance * singleScattering;\n	indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;\n	#ifdef USE_SHEEN\n		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;\n		indirectSpecular *= sheenEnergyComp;\n		indirectDiffuse *= sheenEnergyComp;\n	#endif\n	reflectedLight.indirectSpecular += indirectSpecular;\n	reflectedLight.indirectDiffuse += indirectDiffuse;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}',
        lights_fragment_begin:
          '\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );\n		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif',
        lights_fragment_maps:
          '#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif',
        lights_fragment_end:
          '#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif',
        logdepthbuf_fragment:
          '#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif',
        logdepthbuf_pars_fragment:
          '#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif',
        logdepthbuf_pars_vertex:
          '#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif',
        logdepthbuf_vertex:
          '#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif',
        map_fragment:
          '#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif',
        map_pars_fragment: '#ifdef USE_MAP\n	uniform sampler2D map;\n#endif',
        map_particle_fragment:
          '#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif',
        map_particle_pars_fragment:
          '#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif',
        metalnessmap_fragment:
          'float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif',
        metalnessmap_pars_fragment:
          '#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif',
        morphinstance_vertex:
          '#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif',
        morphcolor_vertex:
          '#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif',
        morphnormal_vertex:
          '#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif',
        morphtarget_pars_vertex:
          '#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif',
        morphtarget_vertex:
          '#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif',
        normal_fragment_begin:
          'float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;',
        normal_fragment_maps:
          '#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif',
        normal_pars_fragment:
          '#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif',
        normal_pars_vertex:
          '#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif',
        normal_vertex:
          '#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif',
        normalmap_pars_fragment:
          '#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif',
        clearcoat_normal_fragment_begin:
          '#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif',
        clearcoat_normal_fragment_maps:
          '#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif',
        clearcoat_pars_fragment:
          '#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif',
        iridescence_pars_fragment:
          '#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif',
        opaque_fragment:
          '#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );',
        packing:
          'vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}',
        premultiplied_alpha_fragment:
          '#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif',
        project_vertex:
          'vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;',
        dithering_fragment:
          '#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif',
        dithering_pars_fragment:
          '#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif',
        roughnessmap_fragment:
          'float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif',
        roughnessmap_pars_fragment:
          '#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif',
        shadowmap_pars_fragment:
          '#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#if defined( SHADOWMAP_TYPE_PCF )\n			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		#else\n			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		#endif\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		#if defined( SHADOWMAP_TYPE_PCF )\n			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		#else\n			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		#endif\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#if defined( SHADOWMAP_TYPE_PCF )\n			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		#elif defined( SHADOWMAP_TYPE_BASIC )\n			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		#endif\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	#if defined( SHADOWMAP_TYPE_PCF )\n		float interleavedGradientNoise( vec2 position ) {\n			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );\n		}\n		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {\n			const float goldenAngle = 2.399963229728653;\n			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );\n			float theta = float( sampleIndex ) * goldenAngle + phi;\n			return vec2( cos( theta ), sin( theta ) ) * r;\n		}\n	#endif\n	#if defined( SHADOWMAP_TYPE_PCF )\n		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n			float shadow = 1.0;\n			shadowCoord.xyz /= shadowCoord.w;\n			shadowCoord.z += shadowBias;\n			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n			if ( frustumTest ) {\n				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n				float radius = shadowRadius * texelSize.x;\n				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;\n				shadow = (\n					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +\n					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +\n					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +\n					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +\n					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )\n				) * 0.2;\n			}\n			return mix( 1.0, shadow, shadowIntensity );\n		}\n	#elif defined( SHADOWMAP_TYPE_VSM )\n		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n			float shadow = 1.0;\n			shadowCoord.xyz /= shadowCoord.w;\n			shadowCoord.z += shadowBias;\n			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n			if ( frustumTest ) {\n				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;\n				float mean = distribution.x;\n				float variance = distribution.y * distribution.y;\n				#ifdef USE_REVERSED_DEPTH_BUFFER\n					float hard_shadow = step( mean, shadowCoord.z );\n				#else\n					float hard_shadow = step( shadowCoord.z, mean );\n				#endif\n				if ( hard_shadow == 1.0 ) {\n					shadow = 1.0;\n				} else {\n					variance = max( variance, 0.0000001 );\n					float d = shadowCoord.z - mean;\n					float p_max = variance / ( variance + d * d );\n					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );\n					shadow = max( hard_shadow, p_max );\n				}\n			}\n			return mix( 1.0, shadow, shadowIntensity );\n		}\n	#else\n		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n			float shadow = 1.0;\n			shadowCoord.xyz /= shadowCoord.w;\n			shadowCoord.z += shadowBias;\n			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n			if ( frustumTest ) {\n				float depth = texture2D( shadowMap, shadowCoord.xy ).r;\n				#ifdef USE_REVERSED_DEPTH_BUFFER\n					shadow = step( depth, shadowCoord.z );\n				#else\n					shadow = step( shadowCoord.z, depth );\n				#endif\n			}\n			return mix( 1.0, shadow, shadowIntensity );\n		}\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	#if defined( SHADOWMAP_TYPE_PCF )\n	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		vec3 absVec = abs( lightToPosition );\n		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );\n		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {\n			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );\n			dp += shadowBias;\n			float texelSize = shadowRadius / shadowMapSize.x;\n			vec3 absDir = abs( bd3D );\n			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );\n			tangent = normalize( cross( bd3D, tangent ) );\n			vec3 bitangent = cross( bd3D, tangent );\n			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;\n			shadow = (\n				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +\n				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +\n				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +\n				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +\n				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )\n			) * 0.2;\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	#elif defined( SHADOWMAP_TYPE_BASIC )\n	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		vec3 absVec = abs( lightToPosition );\n		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );\n		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {\n			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );\n			dp += shadowBias;\n			float depth = textureCube( shadowMap, bd3D ).r;\n			#ifdef USE_REVERSED_DEPTH_BUFFER\n				shadow = step( depth, dp );\n			#else\n				shadow = step( dp, depth );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	#endif\n	#endif\n#endif',
        shadowmap_pars_vertex:
          '#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif',
        shadowmap_vertex:
          '#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif',
        shadowmask_pars_fragment:
          'float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}',
        skinbase_vertex:
          '#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif',
        skinning_pars_vertex:
          '#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif',
        skinning_vertex:
          '#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif',
        skinnormal_vertex:
          '#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif',
        specularmap_fragment:
          'float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif',
        specularmap_pars_fragment:
          '#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif',
        tonemapping_fragment:
          '#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif',
        tonemapping_pars_fragment:
          '#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }',
        transmission_fragment:
          '#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif',
        transmission_pars_fragment:
          '#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif',
        uv_pars_fragment:
          '#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif',
        uv_pars_vertex:
          '#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif',
        uv_vertex:
          '#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif',
        worldpos_vertex:
          '#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif',
        background_vert:
          'varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}',
        background_frag:
          'uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}',
        backgroundCube_vert:
          'varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}',
        backgroundCube_frag:
          '#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}',
        cube_vert:
          'varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}',
        cube_frag:
          'uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}',
        depth_vert:
          '#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}',
        depth_frag:
          '#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	#ifdef USE_REVERSED_DEPTH_BUFFER\n		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n	#else\n		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n	#endif\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}',
        distance_vert:
          '#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}',
        distance_frag:
          '#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );\n}',
        equirect_vert:
          'varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}',
        equirect_frag:
          'uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}',
        linedashed_vert:
          'uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}',
        linedashed_frag:
          'uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}',
        meshbasic_vert:
          '#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}',
        meshbasic_frag:
          'uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        meshlambert_vert:
          '#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}',
        meshlambert_frag:
          '#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        meshmatcap_vert:
          '#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}',
        meshmatcap_frag:
          '#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        meshnormal_vert:
          '#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}',
        meshnormal_frag:
          '#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}',
        meshphong_vert:
          '#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}',
        meshphong_frag:
          '#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        meshphysical_vert:
          '#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}',
        meshphysical_frag:
          '#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n \n		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;\n \n 	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        meshtoon_vert:
          '#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}',
        meshtoon_frag:
          '#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}',
        points_vert:
          'uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}',
        points_frag:
          'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}',
        shadow_vert:
          '#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}',
        shadow_frag:
          'uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}',
        sprite_vert:
          'uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}',
        sprite_frag:
          'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}',
      },
      id = {
        common: {
          diffuse: { value: new bX(0xffffff) },
          opacity: { value: 1 },
          map: { value: null },
          mapTransform: { value: new at() },
          alphaMap: { value: null },
          alphaMapTransform: { value: new at() },
          alphaTest: { value: 0 },
        },
        specularmap: {
          specularMap: { value: null },
          specularMapTransform: { value: new at() },
        },
        envmap: {
          envMap: { value: null },
          envMapRotation: { value: new at() },
          flipEnvMap: { value: -1 },
          reflectivity: { value: 1 },
          ior: { value: 1.5 },
          refractionRatio: { value: 0.98 },
          dfgLUT: { value: null },
        },
        aomap: {
          aoMap: { value: null },
          aoMapIntensity: { value: 1 },
          aoMapTransform: { value: new at() },
        },
        lightmap: {
          lightMap: { value: null },
          lightMapIntensity: { value: 1 },
          lightMapTransform: { value: new at() },
        },
        bumpmap: {
          bumpMap: { value: null },
          bumpMapTransform: { value: new at() },
          bumpScale: { value: 1 },
        },
        normalmap: {
          normalMap: { value: null },
          normalMapTransform: { value: new at() },
          normalScale: { value: new ao(1, 1) },
        },
        displacementmap: {
          displacementMap: { value: null },
          displacementMapTransform: { value: new at() },
          displacementScale: { value: 1 },
          displacementBias: { value: 0 },
        },
        emissivemap: {
          emissiveMap: { value: null },
          emissiveMapTransform: { value: new at() },
        },
        metalnessmap: {
          metalnessMap: { value: null },
          metalnessMapTransform: { value: new at() },
        },
        roughnessmap: {
          roughnessMap: { value: null },
          roughnessMapTransform: { value: new at() },
        },
        gradientmap: { gradientMap: { value: null } },
        fog: {
          fogDensity: { value: 25e-5 },
          fogNear: { value: 1 },
          fogFar: { value: 2e3 },
          fogColor: { value: new bX(0xffffff) },
        },
        lights: {
          ambientLightColor: { value: [] },
          lightProbe: { value: [] },
          directionalLights: {
            value: [],
            properties: { direction: {}, color: {} },
          },
          directionalLightShadows: {
            value: [],
            properties: {
              shadowIntensity: 1,
              shadowBias: {},
              shadowNormalBias: {},
              shadowRadius: {},
              shadowMapSize: {},
            },
          },
          directionalShadowMap: { value: [] },
          directionalShadowMatrix: { value: [] },
          spotLights: {
            value: [],
            properties: {
              color: {},
              position: {},
              direction: {},
              distance: {},
              coneCos: {},
              penumbraCos: {},
              decay: {},
            },
          },
          spotLightShadows: {
            value: [],
            properties: {
              shadowIntensity: 1,
              shadowBias: {},
              shadowNormalBias: {},
              shadowRadius: {},
              shadowMapSize: {},
            },
          },
          spotLightMap: { value: [] },
          spotShadowMap: { value: [] },
          spotLightMatrix: { value: [] },
          pointLights: {
            value: [],
            properties: { color: {}, position: {}, decay: {}, distance: {} },
          },
          pointLightShadows: {
            value: [],
            properties: {
              shadowIntensity: 1,
              shadowBias: {},
              shadowNormalBias: {},
              shadowRadius: {},
              shadowMapSize: {},
              shadowCameraNear: {},
              shadowCameraFar: {},
            },
          },
          pointShadowMap: { value: [] },
          pointShadowMatrix: { value: [] },
          hemisphereLights: {
            value: [],
            properties: { direction: {}, skyColor: {}, groundColor: {} },
          },
          rectAreaLights: {
            value: [],
            properties: { color: {}, position: {}, width: {}, height: {} },
          },
          ltc_1: { value: null },
          ltc_2: { value: null },
        },
        points: {
          diffuse: { value: new bX(0xffffff) },
          opacity: { value: 1 },
          size: { value: 1 },
          scale: { value: 1 },
          map: { value: null },
          alphaMap: { value: null },
          alphaMapTransform: { value: new at() },
          alphaTest: { value: 0 },
          uvTransform: { value: new at() },
        },
        sprite: {
          diffuse: { value: new bX(0xffffff) },
          opacity: { value: 1 },
          center: { value: new ao(0.5, 0.5) },
          rotation: { value: 0 },
          map: { value: null },
          mapTransform: { value: new at() },
          alphaMap: { value: null },
          alphaMapTransform: { value: new at() },
          alphaTest: { value: 0 },
        },
      },
      ie = {
        basic: {
          uniforms: cE([
            id.common,
            id.specularmap,
            id.envmap,
            id.aomap,
            id.lightmap,
            id.fog,
          ]),
          vertexShader: ic.meshbasic_vert,
          fragmentShader: ic.meshbasic_frag,
        },
        lambert: {
          uniforms: cE([
            id.common,
            id.specularmap,
            id.envmap,
            id.aomap,
            id.lightmap,
            id.emissivemap,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            id.fog,
            id.lights,
            { emissive: { value: new bX(0) } },
          ]),
          vertexShader: ic.meshlambert_vert,
          fragmentShader: ic.meshlambert_frag,
        },
        phong: {
          uniforms: cE([
            id.common,
            id.specularmap,
            id.envmap,
            id.aomap,
            id.lightmap,
            id.emissivemap,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            id.fog,
            id.lights,
            {
              emissive: { value: new bX(0) },
              specular: { value: new bX(1118481) },
              shininess: { value: 30 },
            },
          ]),
          vertexShader: ic.meshphong_vert,
          fragmentShader: ic.meshphong_frag,
        },
        standard: {
          uniforms: cE([
            id.common,
            id.envmap,
            id.aomap,
            id.lightmap,
            id.emissivemap,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            id.roughnessmap,
            id.metalnessmap,
            id.fog,
            id.lights,
            {
              emissive: { value: new bX(0) },
              roughness: { value: 1 },
              metalness: { value: 0 },
              envMapIntensity: { value: 1 },
            },
          ]),
          vertexShader: ic.meshphysical_vert,
          fragmentShader: ic.meshphysical_frag,
        },
        toon: {
          uniforms: cE([
            id.common,
            id.aomap,
            id.lightmap,
            id.emissivemap,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            id.gradientmap,
            id.fog,
            id.lights,
            { emissive: { value: new bX(0) } },
          ]),
          vertexShader: ic.meshtoon_vert,
          fragmentShader: ic.meshtoon_frag,
        },
        matcap: {
          uniforms: cE([
            id.common,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            id.fog,
            { matcap: { value: null } },
          ]),
          vertexShader: ic.meshmatcap_vert,
          fragmentShader: ic.meshmatcap_frag,
        },
        points: {
          uniforms: cE([id.points, id.fog]),
          vertexShader: ic.points_vert,
          fragmentShader: ic.points_frag,
        },
        dashed: {
          uniforms: cE([
            id.common,
            id.fog,
            {
              scale: { value: 1 },
              dashSize: { value: 1 },
              totalSize: { value: 2 },
            },
          ]),
          vertexShader: ic.linedashed_vert,
          fragmentShader: ic.linedashed_frag,
        },
        depth: {
          uniforms: cE([id.common, id.displacementmap]),
          vertexShader: ic.depth_vert,
          fragmentShader: ic.depth_frag,
        },
        normal: {
          uniforms: cE([
            id.common,
            id.bumpmap,
            id.normalmap,
            id.displacementmap,
            { opacity: { value: 1 } },
          ]),
          vertexShader: ic.meshnormal_vert,
          fragmentShader: ic.meshnormal_frag,
        },
        sprite: {
          uniforms: cE([id.sprite, id.fog]),
          vertexShader: ic.sprite_vert,
          fragmentShader: ic.sprite_frag,
        },
        background: {
          uniforms: {
            uvTransform: { value: new at() },
            t2D: { value: null },
            backgroundIntensity: { value: 1 },
          },
          vertexShader: ic.background_vert,
          fragmentShader: ic.background_frag,
        },
        backgroundCube: {
          uniforms: {
            envMap: { value: null },
            flipEnvMap: { value: -1 },
            backgroundBlurriness: { value: 0 },
            backgroundIntensity: { value: 1 },
            backgroundRotation: { value: new at() },
          },
          vertexShader: ic.backgroundCube_vert,
          fragmentShader: ic.backgroundCube_frag,
        },
        cube: {
          uniforms: {
            tCube: { value: null },
            tFlip: { value: -1 },
            opacity: { value: 1 },
          },
          vertexShader: ic.cube_vert,
          fragmentShader: ic.cube_frag,
        },
        equirect: {
          uniforms: { tEquirect: { value: null } },
          vertexShader: ic.equirect_vert,
          fragmentShader: ic.equirect_frag,
        },
        distance: {
          uniforms: cE([
            id.common,
            id.displacementmap,
            {
              referencePosition: { value: new aq() },
              nearDistance: { value: 1 },
              farDistance: { value: 1e3 },
            },
          ]),
          vertexShader: ic.distance_vert,
          fragmentShader: ic.distance_frag,
        },
        shadow: {
          uniforms: cE([
            id.lights,
            id.fog,
            { color: { value: new bX(0) }, opacity: { value: 1 } },
          ]),
          vertexShader: ic.shadow_vert,
          fragmentShader: ic.shadow_frag,
        },
      };
    ie.physical = {
      uniforms: cE([
        ie.standard.uniforms,
        {
          clearcoat: { value: 0 },
          clearcoatMap: { value: null },
          clearcoatMapTransform: { value: new at() },
          clearcoatNormalMap: { value: null },
          clearcoatNormalMapTransform: { value: new at() },
          clearcoatNormalScale: { value: new ao(1, 1) },
          clearcoatRoughness: { value: 0 },
          clearcoatRoughnessMap: { value: null },
          clearcoatRoughnessMapTransform: { value: new at() },
          dispersion: { value: 0 },
          iridescence: { value: 0 },
          iridescenceMap: { value: null },
          iridescenceMapTransform: { value: new at() },
          iridescenceIOR: { value: 1.3 },
          iridescenceThicknessMinimum: { value: 100 },
          iridescenceThicknessMaximum: { value: 400 },
          iridescenceThicknessMap: { value: null },
          iridescenceThicknessMapTransform: { value: new at() },
          sheen: { value: 0 },
          sheenColor: { value: new bX(0) },
          sheenColorMap: { value: null },
          sheenColorMapTransform: { value: new at() },
          sheenRoughness: { value: 1 },
          sheenRoughnessMap: { value: null },
          sheenRoughnessMapTransform: { value: new at() },
          transmission: { value: 0 },
          transmissionMap: { value: null },
          transmissionMapTransform: { value: new at() },
          transmissionSamplerSize: { value: new ao() },
          transmissionSamplerMap: { value: null },
          thickness: { value: 0 },
          thicknessMap: { value: null },
          thicknessMapTransform: { value: new at() },
          attenuationDistance: { value: 0 },
          attenuationColor: { value: new bX(0) },
          specularColor: { value: new bX(1, 1, 1) },
          specularColorMap: { value: null },
          specularColorMapTransform: { value: new at() },
          specularIntensity: { value: 1 },
          specularIntensityMap: { value: null },
          specularIntensityMapTransform: { value: new at() },
          anisotropyVector: { value: new ao() },
          anisotropyMap: { value: null },
          anisotropyMapTransform: { value: new at() },
        },
      ]),
      vertexShader: ic.meshphysical_vert,
      fragmentShader: ic.meshphysical_frag,
    };
    let ig = { r: 0, b: 0, g: 0 },
      ih = new bn(),
      ii = new bd();
    function ij(a, b, c, d, e, f, g) {
      let h,
        i,
        j = new bX(0),
        k = +(!0 !== f),
        l = null,
        m = 0,
        n = null;
      function o(a) {
        let d = !0 === a.isScene ? a.background : null;
        return (
          d && d.isTexture && (d = (a.backgroundBlurriness > 0 ? c : b).get(d)),
          d
        );
      }
      function p(b, c) {
        (b.getRGB(ig, cF(a)), d.buffers.color.setClear(ig.r, ig.g, ig.b, c, g));
      }
      return {
        getClearColor: function () {
          return j;
        },
        setClearColor: function (a, b = 1) {
          (j.set(a), p(j, (k = b)));
        },
        getClearAlpha: function () {
          return k;
        },
        setClearAlpha: function (a) {
          p(j, (k = a));
        },
        render: function (b) {
          let c = !1,
            e = o(b);
          null === e ? p(j, k) : e && e.isColor && (p(e, 1), (c = !0));
          let f = a.xr.getEnvironmentBlendMode();
          ('additive' === f
            ? d.buffers.color.setClear(0, 0, 0, 1, g)
            : 'alpha-blend' === f && d.buffers.color.setClear(0, 0, 0, 0, g),
            (a.autoClear || c) &&
              (d.buffers.depth.setTest(!0),
              d.buffers.depth.setMask(!0),
              d.buffers.color.setMask(!0),
              a.clear(a.autoClearColor, a.autoClearDepth, a.autoClearStencil)));
        },
        addToRenderList: function (b, c) {
          let d = o(c);
          d && (d.isCubeTexture || 306 === d.mapping)
            ? (void 0 === i &&
                ((i = new cA(
                  new cC(1, 1, 1),
                  new cH({
                    name: 'BackgroundCubeMaterial',
                    uniforms: cD(ie.backgroundCube.uniforms),
                    vertexShader: ie.backgroundCube.vertexShader,
                    fragmentShader: ie.backgroundCube.fragmentShader,
                    side: 1,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1,
                    allowOverride: !1,
                  })
                )).geometry.deleteAttribute('normal'),
                i.geometry.deleteAttribute('uv'),
                (i.onBeforeRender = function (a, b, c) {
                  this.matrixWorld.copyPosition(c.matrixWorld);
                }),
                Object.defineProperty(i.material, 'envMap', {
                  get: function () {
                    return this.uniforms.envMap.value;
                  },
                }),
                e.update(i)),
              ih.copy(c.backgroundRotation),
              (ih.x *= -1),
              (ih.y *= -1),
              (ih.z *= -1),
              d.isCubeTexture &&
                !1 === d.isRenderTargetTexture &&
                ((ih.y *= -1), (ih.z *= -1)),
              (i.material.uniforms.envMap.value = d),
              (i.material.uniforms.flipEnvMap.value =
                d.isCubeTexture && !1 === d.isRenderTargetTexture ? -1 : 1),
              (i.material.uniforms.backgroundBlurriness.value =
                c.backgroundBlurriness),
              (i.material.uniforms.backgroundIntensity.value =
                c.backgroundIntensity),
              i.material.uniforms.backgroundRotation.value.setFromMatrix4(
                ii.makeRotationFromEuler(ih)
              ),
              (i.material.toneMapped = ax.getTransfer(d.colorSpace) !== L),
              (l !== d || m !== d.version || n !== a.toneMapping) &&
                ((i.material.needsUpdate = !0),
                (l = d),
                (m = d.version),
                (n = a.toneMapping)),
              i.layers.enableAll(),
              b.unshift(i, i.geometry, i.material, 0, 0, null))
            : d &&
              d.isTexture &&
              (void 0 === h &&
                ((h = new cA(
                  new fu(2, 2),
                  new cH({
                    name: 'BackgroundMaterial',
                    uniforms: cD(ie.background.uniforms),
                    vertexShader: ie.background.vertexShader,
                    fragmentShader: ie.background.fragmentShader,
                    side: 0,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1,
                    allowOverride: !1,
                  })
                )).geometry.deleteAttribute('normal'),
                Object.defineProperty(h.material, 'map', {
                  get: function () {
                    return this.uniforms.t2D.value;
                  },
                }),
                e.update(h)),
              (h.material.uniforms.t2D.value = d),
              (h.material.uniforms.backgroundIntensity.value =
                c.backgroundIntensity),
              (h.material.toneMapped = ax.getTransfer(d.colorSpace) !== L),
              !0 === d.matrixAutoUpdate && d.updateMatrix(),
              h.material.uniforms.uvTransform.value.copy(d.matrix),
              (l !== d || m !== d.version || n !== a.toneMapping) &&
                ((h.material.needsUpdate = !0),
                (l = d),
                (m = d.version),
                (n = a.toneMapping)),
              h.layers.enableAll(),
              b.unshift(h, h.geometry, h.material, 0, 0, null));
        },
        dispose: function () {
          (void 0 !== i &&
            (i.geometry.dispose(), i.material.dispose(), (i = void 0)),
            void 0 !== h &&
              (h.geometry.dispose(), h.material.dispose(), (h = void 0)));
        },
      };
    }
    function ik(a, b) {
      let c = a.getParameter(a.MAX_VERTEX_ATTRIBS),
        d = {},
        e = j(null),
        f = e,
        g = !1;
      function h(b) {
        return a.bindVertexArray(b);
      }
      function i(b) {
        return a.deleteVertexArray(b);
      }
      function j(a) {
        let b = [],
          d = [],
          e = [];
        for (let a = 0; a < c; a++) ((b[a] = 0), (d[a] = 0), (e[a] = 0));
        return {
          geometry: null,
          program: null,
          wireframe: !1,
          newAttributes: b,
          enabledAttributes: d,
          attributeDivisors: e,
          object: a,
          attributes: {},
          index: null,
        };
      }
      function k() {
        let a = f.newAttributes;
        for (let b = 0, c = a.length; b < c; b++) a[b] = 0;
      }
      function l(a) {
        m(a, 0);
      }
      function m(b, c) {
        let d = f.newAttributes,
          e = f.enabledAttributes,
          g = f.attributeDivisors;
        ((d[b] = 1),
          0 === e[b] && (a.enableVertexAttribArray(b), (e[b] = 1)),
          g[b] !== c && (a.vertexAttribDivisor(b, c), (g[b] = c)));
      }
      function n() {
        let b = f.newAttributes,
          c = f.enabledAttributes;
        for (let d = 0, e = c.length; d < e; d++)
          c[d] !== b[d] && (a.disableVertexAttribArray(d), (c[d] = 0));
      }
      function o(b, c, d, e, f, g, h) {
        !0 === h
          ? a.vertexAttribIPointer(b, c, d, f, g)
          : a.vertexAttribPointer(b, c, d, e, f, g);
      }
      function p() {
        (q(), (g = !0), f !== e && h((f = e).object));
      }
      function q() {
        ((e.geometry = null), (e.program = null), (e.wireframe = !1));
      }
      return {
        setup: function (c, e, i, p, q) {
          var r, s;
          let t,
            u,
            v,
            w,
            x = !1,
            y =
              ((r = p),
              (s = i),
              (t = !0 === e.wireframe),
              void 0 === (u = d[r.id]) && ((u = {}), (d[r.id] = u)),
              void 0 === (v = u[s.id]) && ((v = {}), (u[s.id] = v)),
              void 0 === (w = v[t]) &&
                ((w = j(a.createVertexArray())), (v[t] = w)),
              w);
          (f !== y && h((f = y).object),
            (x = (function (a, b, c, d) {
              let e = f.attributes,
                g = b.attributes,
                h = 0,
                i = c.getAttributes();
              for (let b in i)
                if (i[b].location >= 0) {
                  let c = e[b],
                    d = g[b];
                  if (
                    (void 0 === d &&
                      ('instanceMatrix' === b &&
                        a.instanceMatrix &&
                        (d = a.instanceMatrix),
                      'instanceColor' === b &&
                        a.instanceColor &&
                        (d = a.instanceColor)),
                    void 0 === c ||
                      c.attribute !== d ||
                      (d && c.data !== d.data))
                  )
                    return !0;
                  h++;
                }
              return f.attributesNum !== h || f.index !== d;
            })(c, p, i, q)) &&
              (function (a, b, c, d) {
                let e = {},
                  g = b.attributes,
                  h = 0,
                  i = c.getAttributes();
                for (let b in i)
                  if (i[b].location >= 0) {
                    let c = g[b];
                    void 0 === c &&
                      ('instanceMatrix' === b &&
                        a.instanceMatrix &&
                        (c = a.instanceMatrix),
                      'instanceColor' === b &&
                        a.instanceColor &&
                        (c = a.instanceColor));
                    let d = {};
                    ((d.attribute = c),
                      c && c.data && (d.data = c.data),
                      (e[b] = d),
                      h++);
                  }
                ((f.attributes = e), (f.attributesNum = h), (f.index = d));
              })(c, p, i, q),
            null !== q && b.update(q, a.ELEMENT_ARRAY_BUFFER),
            (x || g) &&
              ((g = !1),
              (function (c, d, e, f) {
                k();
                let g = f.attributes,
                  h = e.getAttributes(),
                  i = d.defaultAttributeValues;
                for (let d in h) {
                  let e = h[d];
                  if (e.location >= 0) {
                    let h = g[d];
                    if (
                      (void 0 === h &&
                        ('instanceMatrix' === d &&
                          c.instanceMatrix &&
                          (h = c.instanceMatrix),
                        'instanceColor' === d &&
                          c.instanceColor &&
                          (h = c.instanceColor)),
                      void 0 !== h)
                    ) {
                      let d = h.normalized,
                        g = h.itemSize,
                        i = b.get(h);
                      if (void 0 === i) continue;
                      let j = i.buffer,
                        k = i.type,
                        n = i.bytesPerElement,
                        p =
                          k === a.INT ||
                          k === a.UNSIGNED_INT ||
                          1013 === h.gpuType;
                      if (h.isInterleavedBufferAttribute) {
                        let b = h.data,
                          i = b.stride,
                          q = h.offset;
                        if (b.isInstancedInterleavedBuffer) {
                          for (let a = 0; a < e.locationSize; a++)
                            m(e.location + a, b.meshPerAttribute);
                          !0 !== c.isInstancedMesh &&
                            void 0 === f._maxInstanceCount &&
                            (f._maxInstanceCount =
                              b.meshPerAttribute * b.count);
                        } else
                          for (let a = 0; a < e.locationSize; a++)
                            l(e.location + a);
                        a.bindBuffer(a.ARRAY_BUFFER, j);
                        for (let a = 0; a < e.locationSize; a++)
                          o(
                            e.location + a,
                            g / e.locationSize,
                            k,
                            d,
                            i * n,
                            (q + (g / e.locationSize) * a) * n,
                            p
                          );
                      } else {
                        if (h.isInstancedBufferAttribute) {
                          for (let a = 0; a < e.locationSize; a++)
                            m(e.location + a, h.meshPerAttribute);
                          !0 !== c.isInstancedMesh &&
                            void 0 === f._maxInstanceCount &&
                            (f._maxInstanceCount =
                              h.meshPerAttribute * h.count);
                        } else
                          for (let a = 0; a < e.locationSize; a++)
                            l(e.location + a);
                        a.bindBuffer(a.ARRAY_BUFFER, j);
                        for (let a = 0; a < e.locationSize; a++)
                          o(
                            e.location + a,
                            g / e.locationSize,
                            k,
                            d,
                            g * n,
                            (g / e.locationSize) * a * n,
                            p
                          );
                      }
                    } else if (void 0 !== i) {
                      let b = i[d];
                      if (void 0 !== b)
                        switch (b.length) {
                          case 2:
                            a.vertexAttrib2fv(e.location, b);
                            break;
                          case 3:
                            a.vertexAttrib3fv(e.location, b);
                            break;
                          case 4:
                            a.vertexAttrib4fv(e.location, b);
                            break;
                          default:
                            a.vertexAttrib1fv(e.location, b);
                        }
                    }
                  }
                }
                n();
              })(c, e, i, p),
              null !== q &&
                a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, b.get(q).buffer)));
        },
        reset: p,
        resetDefaultState: q,
        dispose: function () {
          for (let a in (p(), d)) {
            let b = d[a];
            for (let a in b) {
              let c = b[a];
              for (let a in c) (i(c[a].object), delete c[a]);
              delete b[a];
            }
            delete d[a];
          }
        },
        releaseStatesOfGeometry: function (a) {
          if (void 0 === d[a.id]) return;
          let b = d[a.id];
          for (let a in b) {
            let c = b[a];
            for (let a in c) (i(c[a].object), delete c[a]);
            delete b[a];
          }
          delete d[a.id];
        },
        releaseStatesOfProgram: function (a) {
          for (let b in d) {
            let c = d[b];
            if (void 0 === c[a.id]) continue;
            let e = c[a.id];
            for (let a in e) (i(e[a].object), delete e[a]);
            delete c[a.id];
          }
        },
        initAttributes: k,
        enableAttribute: l,
        disableUnusedAttributes: n,
      };
    }
    function il(a, b, c) {
      let d;
      function e(b, e, f) {
        0 !== f && (a.drawArraysInstanced(d, b, e, f), c.update(e, d, f));
      }
      ((this.setMode = function (a) {
        d = a;
      }),
        (this.render = function (b, e) {
          (a.drawArrays(d, b, e), c.update(e, d, 1));
        }),
        (this.renderInstances = e),
        (this.renderMultiDraw = function (a, e, f) {
          if (0 === f) return;
          b.get('WEBGL_multi_draw').multiDrawArraysWEBGL(d, a, 0, e, 0, f);
          let g = 0;
          for (let a = 0; a < f; a++) g += e[a];
          c.update(g, d, 1);
        }),
        (this.renderMultiDrawInstances = function (a, f, g, h) {
          if (0 === g) return;
          let i = b.get('WEBGL_multi_draw');
          if (null === i)
            for (let b = 0; b < a.length; b++) e(a[b], f[b], h[b]);
          else {
            i.multiDrawArraysInstancedWEBGL(d, a, 0, f, 0, h, 0, g);
            let b = 0;
            for (let a = 0; a < g; a++) b += f[a] * h[a];
            c.update(b, d, 1);
          }
        }));
    }
    function im(a, b, c, d) {
      let e;
      function f(b) {
        if ('highp' === b) {
          if (
            a.getShaderPrecisionFormat(a.VERTEX_SHADER, a.HIGH_FLOAT)
              .precision > 0 &&
            a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.HIGH_FLOAT)
              .precision > 0
          )
            return 'highp';
          b = 'mediump';
        }
        return 'mediump' === b &&
          a.getShaderPrecisionFormat(a.VERTEX_SHADER, a.MEDIUM_FLOAT)
            .precision > 0 &&
          a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.MEDIUM_FLOAT)
            .precision > 0
          ? 'mediump'
          : 'lowp';
      }
      let g = void 0 !== c.precision ? c.precision : 'highp',
        h = f(g);
      return (
        h !== g &&
          (_('WebGLRenderer:', g, 'not supported, using', h, 'instead.'),
          (g = h)),
        {
          isWebGL2: !0,
          getMaxAnisotropy: function () {
            if (void 0 !== e) return e;
            if (!0 === b.has('EXT_texture_filter_anisotropic')) {
              let c = b.get('EXT_texture_filter_anisotropic');
              e = a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
            } else e = 0;
            return e;
          },
          getMaxPrecision: f,
          textureFormatReadable: function (b) {
            return (
              1023 === b ||
              d.convert(b) ===
                a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT)
            );
          },
          textureTypeReadable: function (c) {
            let e =
              1016 === c &&
              (b.has('EXT_color_buffer_half_float') ||
                b.has('EXT_color_buffer_float'));
            return (
              1009 === c ||
              d.convert(c) ===
                a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE) ||
              1015 === c ||
              !!e
            );
          },
          precision: g,
          logarithmicDepthBuffer: !0 === c.logarithmicDepthBuffer,
          reversedDepthBuffer:
            !0 === c.reversedDepthBuffer && b.has('EXT_clip_control'),
          maxTextures: a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),
          maxVertexTextures: a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
          maxTextureSize: a.getParameter(a.MAX_TEXTURE_SIZE),
          maxCubemapSize: a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
          maxAttributes: a.getParameter(a.MAX_VERTEX_ATTRIBS),
          maxVertexUniforms: a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),
          maxVaryings: a.getParameter(a.MAX_VARYING_VECTORS),
          maxFragmentUniforms: a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),
          maxSamples: a.getParameter(a.MAX_SAMPLES),
          samples: a.getParameter(a.SAMPLES),
        }
      );
    }
    function io(a) {
      let b = this,
        c = null,
        d = 0,
        e = !1,
        f = !1,
        g = new dH(),
        h = new at(),
        i = { value: null, needsUpdate: !1 };
      function j(a, c, d, e) {
        let f = null !== a ? a.length : 0,
          j = null;
        if (0 !== f) {
          if (((j = i.value), !0 !== e || null === j)) {
            let b = d + 4 * f,
              e = c.matrixWorldInverse;
            (h.getNormalMatrix(e),
              (null === j || j.length < b) && (j = new Float32Array(b)));
            for (let b = 0, c = d; b !== f; ++b, c += 4)
              (g.copy(a[b]).applyMatrix4(e, h),
                g.normal.toArray(j, c),
                (j[c + 3] = g.constant));
          }
          ((i.value = j), (i.needsUpdate = !0));
        }
        return ((b.numPlanes = f), (b.numIntersection = 0), j);
      }
      ((this.uniform = i),
        (this.numPlanes = 0),
        (this.numIntersection = 0),
        (this.init = function (a, b) {
          let c = 0 !== a.length || b || 0 !== d || e;
          return ((e = b), (d = a.length), c);
        }),
        (this.beginShadows = function () {
          ((f = !0), j(null));
        }),
        (this.endShadows = function () {
          f = !1;
        }),
        (this.setGlobalState = function (a, b) {
          c = j(a, b, 0);
        }),
        (this.setState = function (g, h, k) {
          let l = g.clippingPlanes,
            m = g.clipIntersection,
            n = g.clipShadows,
            o = a.get(g);
          if (e && null !== l && 0 !== l.length && (!f || n)) {
            let a = f ? 0 : d,
              b = 4 * a,
              e = o.clippingState || null;
            ((i.value = e), (e = j(l, h, b, k)));
            for (let a = 0; a !== b; ++a) e[a] = c[a];
            ((o.clippingState = e),
              (this.numIntersection = m ? this.numPlanes : 0),
              (this.numPlanes += a));
          } else
            f
              ? j(null)
              : (i.value !== c && ((i.value = c), (i.needsUpdate = d > 0)),
                (b.numPlanes = d),
                (b.numIntersection = 0));
        }));
    }
    function ip(a) {
      let b = new WeakMap();
      function c(a, b) {
        return (
          303 === b ? (a.mapping = 301) : 304 === b && (a.mapping = 302),
          a
        );
      }
      function d(a) {
        let c = a.target;
        c.removeEventListener('dispose', d);
        let e = b.get(c);
        void 0 !== e && (b.delete(c), e.dispose());
      }
      return {
        get: function (e) {
          if (e && e.isTexture) {
            let f = e.mapping;
            if (303 === f || 304 === f)
              if (b.has(e)) return c(b.get(e).texture, e.mapping);
              else {
                let f = e.image;
                if (!f || !(f.height > 0)) return null;
                {
                  let g = new cP(f.height);
                  return (
                    g.fromEquirectangularTexture(a, e),
                    b.set(e, g),
                    e.addEventListener('dispose', d),
                    c(g.texture, e.mapping)
                  );
                }
              }
          }
          return e;
        },
        dispose: function () {
          b = new WeakMap();
        },
      };
    }
    let iq = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
      ir = new gv(),
      is = new bX(),
      it = null,
      iu = 0,
      iv = 0,
      iw = !1,
      ix = new aq();
    class iy {
      constructor(a) {
        ((this._renderer = a),
          (this._pingPongRenderTarget = null),
          (this._lodMax = 0),
          (this._cubeSize = 0),
          (this._sizeLods = []),
          (this._sigmas = []),
          (this._lodMeshes = []),
          (this._backgroundBox = null),
          (this._cubemapMaterial = null),
          (this._equirectMaterial = null),
          (this._blurMaterial = null),
          (this._ggxMaterial = null));
      }
      fromScene(a, b = 0, c = 0.1, d = 100, e = {}) {
        let { size: f = 256, position: g = ix } = e;
        ((it = this._renderer.getRenderTarget()),
          (iu = this._renderer.getActiveCubeFace()),
          (iv = this._renderer.getActiveMipmapLevel()),
          (iw = this._renderer.xr.enabled),
          (this._renderer.xr.enabled = !1),
          this._setSize(f));
        let h = this._allocateTargets();
        return (
          (h.depthBuffer = !0),
          this._sceneToCubeUV(a, c, d, h, g),
          b > 0 && this._blur(h, 0, 0, b),
          this._applyPMREM(h),
          this._cleanup(h),
          h
        );
      }
      fromEquirectangular(a, b = null) {
        return this._fromTexture(a, b);
      }
      fromCubemap(a, b = null) {
        return this._fromTexture(a, b);
      }
      compileCubemapShader() {
        null === this._cubemapMaterial &&
          ((this._cubemapMaterial = iC()),
          this._compileMaterial(this._cubemapMaterial));
      }
      compileEquirectangularShader() {
        null === this._equirectMaterial &&
          ((this._equirectMaterial = iB()),
          this._compileMaterial(this._equirectMaterial));
      }
      dispose() {
        (this._dispose(),
          null !== this._cubemapMaterial && this._cubemapMaterial.dispose(),
          null !== this._equirectMaterial && this._equirectMaterial.dispose(),
          null !== this._backgroundBox &&
            (this._backgroundBox.geometry.dispose(),
            this._backgroundBox.material.dispose()));
      }
      _setSize(a) {
        ((this._lodMax = Math.floor(Math.log2(a))),
          (this._cubeSize = Math.pow(2, this._lodMax)));
      }
      _dispose() {
        (null !== this._blurMaterial && this._blurMaterial.dispose(),
          null !== this._ggxMaterial && this._ggxMaterial.dispose(),
          null !== this._pingPongRenderTarget &&
            this._pingPongRenderTarget.dispose());
        for (let a = 0; a < this._lodMeshes.length; a++)
          this._lodMeshes[a].geometry.dispose();
      }
      _cleanup(a) {
        (this._renderer.setRenderTarget(it, iu, iv),
          (this._renderer.xr.enabled = iw),
          (a.scissorTest = !1),
          iA(a, 0, 0, a.width, a.height));
      }
      _fromTexture(a, b) {
        (301 === a.mapping || 302 === a.mapping
          ? this._setSize(
              0 === a.image.length
                ? 16
                : a.image[0].width || a.image[0].image.width
            )
          : this._setSize(a.image.width / 4),
          (it = this._renderer.getRenderTarget()),
          (iu = this._renderer.getActiveCubeFace()),
          (iv = this._renderer.getActiveMipmapLevel()),
          (iw = this._renderer.xr.enabled),
          (this._renderer.xr.enabled = !1));
        let c = b || this._allocateTargets();
        return (
          this._textureToCubeUV(a, c),
          this._applyPMREM(c),
          this._cleanup(c),
          c
        );
      }
      _allocateTargets() {
        let a = 3 * Math.max(this._cubeSize, 112),
          b = 4 * this._cubeSize,
          c = {
            magFilter: 1006,
            minFilter: 1006,
            generateMipmaps: !1,
            type: 1016,
            format: 1023,
            colorSpace: J,
            depthBuffer: !1,
          },
          d = iz(a, b, c);
        if (
          null === this._pingPongRenderTarget ||
          this._pingPongRenderTarget.width !== a ||
          this._pingPongRenderTarget.height !== b
        ) {
          var e, f;
          (null !== this._pingPongRenderTarget && this._dispose(),
            (this._pingPongRenderTarget = iz(a, b, c)));
          let { _lodMax: d } = this;
          (({
            lodMeshes: this._lodMeshes,
            sizeLods: this._sizeLods,
            sigmas: this._sigmas,
          } = (function (a) {
            let b = [],
              c = [],
              d = [],
              e = a,
              f = a - 4 + 1 + iq.length;
            for (let g = 0; g < f; g++) {
              let f = Math.pow(2, e);
              b.push(f);
              let h = 1 / f;
              (g > a - 4 ? (h = iq[g - a + 4 - 1]) : 0 === g && (h = 0),
                c.push(h));
              let i = 1 / (f - 2),
                j = -i,
                k = 1 + i,
                l = [j, j, k, j, k, k, j, j, k, k, j, k],
                m = new Float32Array(108),
                n = new Float32Array(72),
                o = new Float32Array(36);
              for (let a = 0; a < 6; a++) {
                let b = ((a % 3) * 2) / 3 - 1,
                  c = a > 2 ? 0 : -1,
                  d = [
                    b,
                    c,
                    0,
                    b + 2 / 3,
                    c,
                    0,
                    b + 2 / 3,
                    c + 1,
                    0,
                    b,
                    c,
                    0,
                    b + 2 / 3,
                    c + 1,
                    0,
                    b,
                    c + 1,
                    0,
                  ];
                (m.set(d, 18 * a), n.set(l, 12 * a));
                let e = [a, a, a, a, a, a];
                o.set(e, 6 * a);
              }
              let p = new co();
              (p.setAttribute('position', new b7(m, 3)),
                p.setAttribute('uv', new b7(n, 2)),
                p.setAttribute('faceIndex', new b7(o, 1)),
                d.push(new cA(p, null)),
                e > 4 && e--);
            }
            return { lodMeshes: d, sizeLods: b, sigmas: c };
          })(d)),
            (this._blurMaterial =
              ((e = d),
              new cH({
                name: 'SphericalGaussianBlur',
                defines: {
                  n: 20,
                  CUBEUV_TEXEL_WIDTH: 1 / a,
                  CUBEUV_TEXEL_HEIGHT: 1 / b,
                  CUBEUV_MAX_MIP: `${e}.0`,
                },
                uniforms: {
                  envMap: { value: null },
                  samples: { value: 1 },
                  weights: { value: new Float32Array(20) },
                  latitudinal: { value: !1 },
                  dTheta: { value: 0 },
                  mipInt: { value: 0 },
                  poleAxis: { value: new aq(0, 1, 0) },
                },
                vertexShader: iD(),
                fragmentShader: `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,
                blending: 0,
                depthTest: !1,
                depthWrite: !1,
              }))),
            (this._ggxMaterial =
              ((f = d),
              new cH({
                name: 'PMREMGGXConvolution',
                defines: {
                  GGX_SAMPLES: 256,
                  CUBEUV_TEXEL_WIDTH: 1 / a,
                  CUBEUV_TEXEL_HEIGHT: 1 / b,
                  CUBEUV_MAX_MIP: `${f}.0`,
                },
                uniforms: {
                  envMap: { value: null },
                  roughness: { value: 0 },
                  mipInt: { value: 0 },
                },
                vertexShader: iD(),
                fragmentShader: `

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,
                blending: 0,
                depthTest: !1,
                depthWrite: !1,
              }))));
        }
        return d;
      }
      _compileMaterial(a) {
        let b = new cA(new co(), a);
        this._renderer.compile(b, ir);
      }
      _sceneToCubeUV(a, b, c, d, e) {
        let f = new cM(90, 1, b, c),
          g = [1, -1, 1, 1, 1, 1],
          h = [1, 1, 1, -1, -1, -1],
          i = this._renderer,
          j = i.autoClear,
          k = i.toneMapping;
        (i.getClearColor(is),
          (i.toneMapping = 0),
          (i.autoClear = !1),
          i.state.buffers.depth.getReversed() &&
            (i.setRenderTarget(d), i.clearDepth(), i.setRenderTarget(null)),
          null === this._backgroundBox &&
            (this._backgroundBox = new cA(
              new cC(),
              new b_({
                name: 'PMREM.Background',
                side: 1,
                depthWrite: !1,
                depthTest: !1,
              })
            )));
        let l = this._backgroundBox,
          m = l.material,
          n = !1,
          o = a.background;
        o
          ? o.isColor && (m.color.copy(o), (a.background = null), (n = !0))
          : (m.color.copy(is), (n = !0));
        for (let b = 0; b < 6; b++) {
          let c = b % 3;
          0 === c
            ? (f.up.set(0, g[b], 0),
              f.position.set(e.x, e.y, e.z),
              f.lookAt(e.x + h[b], e.y, e.z))
            : 1 === c
              ? (f.up.set(0, 0, g[b]),
                f.position.set(e.x, e.y, e.z),
                f.lookAt(e.x, e.y + h[b], e.z))
              : (f.up.set(0, g[b], 0),
                f.position.set(e.x, e.y, e.z),
                f.lookAt(e.x, e.y, e.z + h[b]));
          let j = this._cubeSize;
          (iA(d, c * j, b > 2 ? j : 0, j, j),
            i.setRenderTarget(d),
            n && i.render(l, f),
            i.render(a, f));
        }
        ((i.toneMapping = k), (i.autoClear = j), (a.background = o));
      }
      _textureToCubeUV(a, b) {
        let c = this._renderer,
          d = 301 === a.mapping || 302 === a.mapping;
        d
          ? (null === this._cubemapMaterial && (this._cubemapMaterial = iC()),
            (this._cubemapMaterial.uniforms.flipEnvMap.value =
              !1 === a.isRenderTargetTexture ? -1 : 1))
          : null === this._equirectMaterial && (this._equirectMaterial = iB());
        let e = d ? this._cubemapMaterial : this._equirectMaterial,
          f = this._lodMeshes[0];
        ((f.material = e), (e.uniforms.envMap.value = a));
        let g = this._cubeSize;
        (iA(b, 0, 0, 3 * g, 2 * g), c.setRenderTarget(b), c.render(f, ir));
      }
      _applyPMREM(a) {
        let b = this._renderer,
          c = b.autoClear;
        b.autoClear = !1;
        let d = this._lodMeshes.length;
        for (let b = 1; b < d; b++) this._applyGGXFilter(a, b - 1, b);
        b.autoClear = c;
      }
      _applyGGXFilter(a, b, c) {
        let d = this._renderer,
          e = this._pingPongRenderTarget,
          f = this._ggxMaterial,
          g = this._lodMeshes[c];
        g.material = f;
        let h = f.uniforms,
          i = c / (this._lodMeshes.length - 1),
          j = b / (this._lodMeshes.length - 1),
          k = Math.sqrt(i * i - j * j),
          { _lodMax: l } = this,
          m = this._sizeLods[c],
          n = 3 * m * (c > l - 4 ? c - l + 4 : 0),
          o = 4 * (this._cubeSize - m);
        ((h.envMap.value = a.texture),
          (h.roughness.value = k * (0 + 1.25 * i)),
          (h.mipInt.value = l - b),
          iA(e, n, o, 3 * m, 2 * m),
          d.setRenderTarget(e),
          d.render(g, ir),
          (h.envMap.value = e.texture),
          (h.roughness.value = 0),
          (h.mipInt.value = l - c),
          iA(a, n, o, 3 * m, 2 * m),
          d.setRenderTarget(a),
          d.render(g, ir));
      }
      _blur(a, b, c, d, e) {
        let f = this._pingPongRenderTarget;
        (this._halfBlur(a, f, b, c, d, 'latitudinal', e),
          this._halfBlur(f, a, c, c, d, 'longitudinal', e));
      }
      _halfBlur(a, b, c, d, e, f, g) {
        let h = this._renderer,
          i = this._blurMaterial;
        'latitudinal' !== f &&
          'longitudinal' !== f &&
          aa('blur direction must be either latitudinal or longitudinal!');
        let j = this._lodMeshes[d];
        j.material = i;
        let k = i.uniforms,
          l = this._sizeLods[c] - 1,
          m = isFinite(e) ? Math.PI / (2 * l) : (2 * Math.PI) / 39,
          n = e / m,
          o = isFinite(e) ? 1 + Math.floor(3 * n) : 20;
        o > 20 &&
          _(
            `sigmaRadians, ${e}, is too large and will clip, as it requested ${o} samples when the maximum is set to 20`
          );
        let p = [],
          q = 0;
        for (let a = 0; a < 20; ++a) {
          let b = a / n,
            c = Math.exp((-b * b) / 2);
          (p.push(c), 0 === a ? (q += c) : a < o && (q += 2 * c));
        }
        for (let a = 0; a < p.length; a++) p[a] = p[a] / q;
        ((k.envMap.value = a.texture),
          (k.samples.value = o),
          (k.weights.value = p),
          (k.latitudinal.value = 'latitudinal' === f),
          g && (k.poleAxis.value = g));
        let { _lodMax: r } = this;
        ((k.dTheta.value = m), (k.mipInt.value = r - c));
        let s = this._sizeLods[d],
          t = 4 * (this._cubeSize - s);
        (iA(b, 3 * s * (d > r - 4 ? d - r + 4 : 0), t, 3 * s, 2 * s),
          h.setRenderTarget(b),
          h.render(j, ir));
      }
    }
    function iz(a, b, c) {
      let d = new aJ(a, b, c);
      return (
        (d.texture.mapping = 306),
        (d.texture.name = 'PMREM.cubeUv'),
        (d.scissorTest = !0),
        d
      );
    }
    function iA(a, b, c, d, e) {
      (a.viewport.set(b, c, d, e), a.scissor.set(b, c, d, e));
    }
    function iB() {
      return new cH({
        name: 'EquirectangularToCubeUV',
        uniforms: { envMap: { value: null } },
        vertexShader: iD(),
        fragmentShader: `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,
        blending: 0,
        depthTest: !1,
        depthWrite: !1,
      });
    }
    function iC() {
      return new cH({
        name: 'CubemapToCubeUV',
        uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } },
        vertexShader: iD(),
        fragmentShader: `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,
        blending: 0,
        depthTest: !1,
        depthWrite: !1,
      });
    }
    function iD() {
      return `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`;
    }
    function iE(a) {
      let b = new WeakMap(),
        c = null;
      function d(a) {
        let c = a.target;
        c.removeEventListener('dispose', d);
        let e = b.get(c);
        void 0 !== e && (b.delete(c), e.dispose());
      }
      return {
        get: function (e) {
          if (e && e.isTexture) {
            let f = e.mapping,
              g = 303 === f || 304 === f,
              h = 301 === f || 302 === f;
            if (g || h) {
              let f = b.get(e),
                i = void 0 !== f ? f.texture.pmremVersion : 0;
              if (e.isRenderTargetTexture && e.pmremVersion !== i)
                return (
                  null === c && (c = new iy(a)),
                  ((f = g
                    ? c.fromEquirectangular(e, f)
                    : c.fromCubemap(e, f)).texture.pmremVersion =
                    e.pmremVersion),
                  b.set(e, f),
                  f.texture
                );
              {
                if (void 0 !== f) return f.texture;
                let i = e.image;
                return (g && i && i.height > 0) ||
                  (h &&
                    i &&
                    (function (a) {
                      let b = 0;
                      for (let c = 0; c < 6; c++) void 0 !== a[c] && b++;
                      return 6 === b;
                    })(i))
                  ? (null === c && (c = new iy(a)),
                    ((f = g
                      ? c.fromEquirectangular(e)
                      : c.fromCubemap(e)).texture.pmremVersion =
                      e.pmremVersion),
                    b.set(e, f),
                    e.addEventListener('dispose', d),
                    f.texture)
                  : null;
              }
            }
          }
          return e;
        },
        dispose: function () {
          ((b = new WeakMap()), null !== c && (c.dispose(), (c = null)));
        },
      };
    }
    function iF(a) {
      let b = {};
      function c(c) {
        if (void 0 !== b[c]) return b[c];
        let d = a.getExtension(c);
        return ((b[c] = d), d);
      }
      return {
        has: function (a) {
          return null !== c(a);
        },
        init: function () {
          (c('EXT_color_buffer_float'),
            c('WEBGL_clip_cull_distance'),
            c('OES_texture_float_linear'),
            c('EXT_color_buffer_half_float'),
            c('WEBGL_multisampled_render_to_texture'),
            c('WEBGL_render_shared_exponent'));
        },
        get: function (a) {
          let b = c(a);
          return (
            null === b &&
              ab('WebGLRenderer: ' + a + ' extension not supported.'),
            b
          );
        },
      };
    }
    function iG(a, b, c, d) {
      let e = {},
        f = new WeakMap();
      function g(a) {
        let h = a.target;
        for (let a in (null !== h.index && b.remove(h.index), h.attributes))
          b.remove(h.attributes[a]);
        (h.removeEventListener('dispose', g), delete e[h.id]);
        let i = f.get(h);
        (i && (b.remove(i), f.delete(h)),
          d.releaseStatesOfGeometry(h),
          !0 === h.isInstancedBufferGeometry && delete h._maxInstanceCount,
          c.memory.geometries--);
      }
      function h(a) {
        let c = [],
          d = a.index,
          e = a.attributes.position,
          g = 0;
        if (null !== d) {
          let a = d.array;
          g = d.version;
          for (let b = 0, d = a.length; b < d; b += 3) {
            let d = a[b + 0],
              e = a[b + 1],
              f = a[b + 2];
            c.push(d, e, e, f, f, d);
          }
        } else {
          if (void 0 === e) return;
          let a = e.array;
          g = e.version;
          for (let b = 0, d = a.length / 3 - 1; b < d; b += 3) {
            let a = b + 0,
              d = b + 1,
              e = b + 2;
            c.push(a, d, d, e, e, a);
          }
        }
        let h = new (Q(c) ? ce : cc)(c, 1);
        h.version = g;
        let i = f.get(a);
        (i && b.remove(i), f.set(a, h));
      }
      return {
        get: function (a, b) {
          return (
            !0 === e[b.id] ||
              (b.addEventListener('dispose', g),
              (e[b.id] = !0),
              c.memory.geometries++),
            b
          );
        },
        update: function (c) {
          let d = c.attributes;
          for (let c in d) b.update(d[c], a.ARRAY_BUFFER);
        },
        getWireframeAttribute: function (a) {
          let b = f.get(a);
          if (b) {
            let c = a.index;
            null !== c && b.version < c.version && h(a);
          } else h(a);
          return f.get(a);
        },
      };
    }
    function iH(a, b, c) {
      let d, e, f;
      function g(b, g, h) {
        0 !== h &&
          (a.drawElementsInstanced(d, g, e, b * f, h), c.update(g, d, h));
      }
      ((this.setMode = function (a) {
        d = a;
      }),
        (this.setIndex = function (a) {
          ((e = a.type), (f = a.bytesPerElement));
        }),
        (this.render = function (b, g) {
          (a.drawElements(d, g, e, b * f), c.update(g, d, 1));
        }),
        (this.renderInstances = g),
        (this.renderMultiDraw = function (a, f, g) {
          if (0 === g) return;
          b.get('WEBGL_multi_draw').multiDrawElementsWEBGL(d, f, 0, e, a, 0, g);
          let h = 0;
          for (let a = 0; a < g; a++) h += f[a];
          c.update(h, d, 1);
        }),
        (this.renderMultiDrawInstances = function (a, h, i, j) {
          if (0 === i) return;
          let k = b.get('WEBGL_multi_draw');
          if (null === k)
            for (let b = 0; b < a.length; b++) g(a[b] / f, h[b], j[b]);
          else {
            k.multiDrawElementsInstancedWEBGL(d, h, 0, e, a, 0, j, 0, i);
            let b = 0;
            for (let a = 0; a < i; a++) b += h[a] * j[a];
            c.update(b, d, 1);
          }
        }));
    }
    function iI(a) {
      let b = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
      return {
        memory: { geometries: 0, textures: 0 },
        render: b,
        programs: null,
        autoReset: !0,
        reset: function () {
          ((b.calls = 0), (b.triangles = 0), (b.points = 0), (b.lines = 0));
        },
        update: function (c, d, e) {
          switch ((b.calls++, d)) {
            case a.TRIANGLES:
              b.triangles += (c / 3) * e;
              break;
            case a.LINES:
              b.lines += (c / 2) * e;
              break;
            case a.LINE_STRIP:
              b.lines += e * (c - 1);
              break;
            case a.LINE_LOOP:
              b.lines += e * c;
              break;
            case a.POINTS:
              b.points += e * c;
              break;
            default:
              aa('WebGLInfo: Unknown draw mode:', d);
          }
        },
      };
    }
    function iJ(a, b, c) {
      let d = new WeakMap(),
        e = new aH();
      return {
        update: function (f, g, h) {
          let i = f.morphTargetInfluences,
            j =
              g.morphAttributes.position ||
              g.morphAttributes.normal ||
              g.morphAttributes.color,
            k = void 0 !== j ? j.length : 0,
            l = d.get(g);
          if (void 0 === l || l.count !== k) {
            void 0 !== l && l.texture.dispose();
            let a = void 0 !== g.morphAttributes.position,
              c = void 0 !== g.morphAttributes.normal,
              f = void 0 !== g.morphAttributes.color,
              h = g.morphAttributes.position || [],
              i = g.morphAttributes.normal || [],
              j = g.morphAttributes.color || [],
              m = 0;
            (!0 === a && (m = 1), !0 === c && (m = 2), !0 === f && (m = 3));
            let n = g.attributes.position.count * m,
              o = 1;
            n > b.maxTextureSize &&
              ((o = Math.ceil(n / b.maxTextureSize)), (n = b.maxTextureSize));
            let p = new Float32Array(n * o * 4 * k),
              q = new aK(p, n, o, k);
            ((q.type = 1015), (q.needsUpdate = !0));
            let r = 4 * m;
            for (let b = 0; b < k; b++) {
              let d = h[b],
                g = i[b],
                k = j[b],
                l = n * o * 4 * b;
              for (let b = 0; b < d.count; b++) {
                let h = b * r;
                (!0 === a &&
                  (e.fromBufferAttribute(d, b),
                  (p[l + h + 0] = e.x),
                  (p[l + h + 1] = e.y),
                  (p[l + h + 2] = e.z),
                  (p[l + h + 3] = 0)),
                  !0 === c &&
                    (e.fromBufferAttribute(g, b),
                    (p[l + h + 4] = e.x),
                    (p[l + h + 5] = e.y),
                    (p[l + h + 6] = e.z),
                    (p[l + h + 7] = 0)),
                  !0 === f &&
                    (e.fromBufferAttribute(k, b),
                    (p[l + h + 8] = e.x),
                    (p[l + h + 9] = e.y),
                    (p[l + h + 10] = e.z),
                    (p[l + h + 11] = 4 === k.itemSize ? e.w : 1)));
              }
            }
            ((l = { count: k, texture: q, size: new ao(n, o) }),
              d.set(g, l),
              g.addEventListener('dispose', function a() {
                (q.dispose(), d.delete(g), g.removeEventListener('dispose', a));
              }));
          }
          if (!0 === f.isInstancedMesh && null !== f.morphTexture)
            h.getUniforms().setValue(a, 'morphTexture', f.morphTexture, c);
          else {
            let b = 0;
            for (let a = 0; a < i.length; a++) b += i[a];
            let c = g.morphTargetsRelative ? 1 : 1 - b;
            (h.getUniforms().setValue(a, 'morphTargetBaseInfluence', c),
              h.getUniforms().setValue(a, 'morphTargetInfluences', i));
          }
          (h.getUniforms().setValue(a, 'morphTargetsTexture', l.texture, c),
            h.getUniforms().setValue(a, 'morphTargetsTextureSize', l.size));
        },
      };
    }
    function iK(a, b, c, d) {
      let e = new WeakMap();
      function f(a) {
        let b = a.target;
        (b.removeEventListener('dispose', f),
          c.remove(b.instanceMatrix),
          null !== b.instanceColor && c.remove(b.instanceColor));
      }
      return {
        update: function (g) {
          let h = d.render.frame,
            i = g.geometry,
            j = b.get(g, i);
          if (
            (e.get(j) !== h && (b.update(j), e.set(j, h)),
            g.isInstancedMesh &&
              (!1 === g.hasEventListener('dispose', f) &&
                g.addEventListener('dispose', f),
              e.get(g) !== h &&
                (c.update(g.instanceMatrix, a.ARRAY_BUFFER),
                null !== g.instanceColor &&
                  c.update(g.instanceColor, a.ARRAY_BUFFER),
                e.set(g, h))),
            g.isSkinnedMesh)
          ) {
            let a = g.skeleton;
            e.get(a) !== h && (a.update(), e.set(a, h));
          }
          return j;
        },
        dispose: function () {
          e = new WeakMap();
        },
      };
    }
    let iL = {
      1: 'LINEAR_TONE_MAPPING',
      2: 'REINHARD_TONE_MAPPING',
      3: 'CINEON_TONE_MAPPING',
      4: 'ACES_FILMIC_TONE_MAPPING',
      6: 'AGX_TONE_MAPPING',
      7: 'NEUTRAL_TONE_MAPPING',
      5: 'CUSTOM_TONE_MAPPING',
    };
    function iM(a, b, c, d, e) {
      let f,
        g = new aJ(b, c, { type: a, depthBuffer: d, stencilBuffer: e }),
        h = new aJ(b, c, { type: 1016, depthBuffer: !1, stencilBuffer: !1 }),
        i = new co();
      (i.setAttribute('position', new cg([-1, 3, 0, -1, -1, 0, 3, -1, 0], 3)),
        i.setAttribute('uv', new cg([0, 2, 0, 0, 2, 0], 2)));
      let j = new fG({
          uniforms: { tDiffuse: { value: null } },
          vertexShader: `
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,
          fragmentShader: `
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,
          depthTest: !1,
          depthWrite: !1,
        }),
        k = new cA(i, j),
        l = new gv(-1, 1, 1, -1, 0, 1),
        m = null,
        n = null,
        o = !1,
        p = null,
        q = [],
        r = !1;
      ((this.setSize = function (a, b) {
        (g.setSize(a, b), h.setSize(a, b));
        for (let c = 0; c < q.length; c++) {
          let d = q[c];
          d.setSize && d.setSize(a, b);
        }
      }),
        (this.setEffects = function (a) {
          r = (q = a).length > 0 && !0 === q[0].isRenderPass;
          let b = g.width,
            c = g.height;
          for (let a = 0; a < q.length; a++) {
            let d = q[a];
            d.setSize && d.setSize(b, c);
          }
        }),
        (this.begin = function (a, b) {
          if (o || (0 === a.toneMapping && 0 === q.length)) return !1;
          if (((p = b), null !== b)) {
            let a = b.width,
              c = b.height;
            (g.width !== a || g.height !== c) && this.setSize(a, c);
          }
          return (
            !1 === r && a.setRenderTarget(g),
            (f = a.toneMapping),
            (a.toneMapping = 0),
            !0
          );
        }),
        (this.hasRenderPass = function () {
          return r;
        }),
        (this.end = function (a, b) {
          ((a.toneMapping = f), (o = !0));
          let c = g,
            d = h;
          for (let e = 0; e < q.length; e++) {
            let f = q[e];
            if (
              !1 !== f.enabled &&
              (f.render(a, d, c, b), !1 !== f.needsSwap)
            ) {
              let a = c;
              ((c = d), (d = a));
            }
          }
          if (m !== a.outputColorSpace || n !== a.toneMapping) {
            ((m = a.outputColorSpace),
              (n = a.toneMapping),
              (j.defines = {}),
              ax.getTransfer(m) === L && (j.defines.SRGB_TRANSFER = ''));
            let b = iL[n];
            (b && (j.defines[b] = ''), (j.needsUpdate = !0));
          }
          ((j.uniforms.tDiffuse.value = c.texture),
            a.setRenderTarget(p),
            a.render(k, l),
            (p = null),
            (o = !1));
        }),
        (this.isCompositing = function () {
          return o;
        }),
        (this.dispose = function () {
          (g.dispose(), h.dispose(), i.dispose(), j.dispose());
        }));
    }
    let iN = new aG(),
      iO = new ew(1, 1),
      iP = new aK(),
      iQ = new aM(),
      iR = new cO(),
      iS = [],
      iT = [],
      iU = new Float32Array(16),
      iV = new Float32Array(9),
      iW = new Float32Array(4);
    function iX(a, b, c) {
      let d = a[0];
      if (d <= 0 || d > 0) return a;
      let e = b * c,
        f = iS[e];
      if ((void 0 === f && ((f = new Float32Array(e)), (iS[e] = f)), 0 !== b)) {
        d.toArray(f, 0);
        for (let d = 1, e = 0; d !== b; ++d) ((e += c), a[d].toArray(f, e));
      }
      return f;
    }
    function iY(a, b) {
      if (a.length !== b.length) return !1;
      for (let c = 0, d = a.length; c < d; c++) if (a[c] !== b[c]) return !1;
      return !0;
    }
    function iZ(a, b) {
      for (let c = 0, d = b.length; c < d; c++) a[c] = b[c];
    }
    function i$(a, b) {
      let c = iT[b];
      void 0 === c && ((c = new Int32Array(b)), (iT[b] = c));
      for (let d = 0; d !== b; ++d) c[d] = a.allocateTextureUnit();
      return c;
    }
    function i_(a, b) {
      let c = this.cache;
      c[0] !== b && (a.uniform1f(this.addr, b), (c[0] = b));
    }
    function i0(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y) &&
          (a.uniform2f(this.addr, b.x, b.y), (c[0] = b.x), (c[1] = b.y));
      else {
        if (iY(c, b)) return;
        (a.uniform2fv(this.addr, b), iZ(c, b));
      }
    }
    function i1(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z) &&
          (a.uniform3f(this.addr, b.x, b.y, b.z),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z));
      else if (void 0 !== b.r)
        (c[0] !== b.r || c[1] !== b.g || c[2] !== b.b) &&
          (a.uniform3f(this.addr, b.r, b.g, b.b),
          (c[0] = b.r),
          (c[1] = b.g),
          (c[2] = b.b));
      else {
        if (iY(c, b)) return;
        (a.uniform3fv(this.addr, b), iZ(c, b));
      }
    }
    function i2(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z || c[3] !== b.w) &&
          (a.uniform4f(this.addr, b.x, b.y, b.z, b.w),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z),
          (c[3] = b.w));
      else {
        if (iY(c, b)) return;
        (a.uniform4fv(this.addr, b), iZ(c, b));
      }
    }
    function i3(a, b) {
      let c = this.cache,
        d = b.elements;
      if (void 0 === d) {
        if (iY(c, b)) return;
        (a.uniformMatrix2fv(this.addr, !1, b), iZ(c, b));
      } else {
        if (iY(c, d)) return;
        (iW.set(d), a.uniformMatrix2fv(this.addr, !1, iW), iZ(c, d));
      }
    }
    function i4(a, b) {
      let c = this.cache,
        d = b.elements;
      if (void 0 === d) {
        if (iY(c, b)) return;
        (a.uniformMatrix3fv(this.addr, !1, b), iZ(c, b));
      } else {
        if (iY(c, d)) return;
        (iV.set(d), a.uniformMatrix3fv(this.addr, !1, iV), iZ(c, d));
      }
    }
    function i5(a, b) {
      let c = this.cache,
        d = b.elements;
      if (void 0 === d) {
        if (iY(c, b)) return;
        (a.uniformMatrix4fv(this.addr, !1, b), iZ(c, b));
      } else {
        if (iY(c, d)) return;
        (iU.set(d), a.uniformMatrix4fv(this.addr, !1, iU), iZ(c, d));
      }
    }
    function i6(a, b) {
      let c = this.cache;
      c[0] !== b && (a.uniform1i(this.addr, b), (c[0] = b));
    }
    function i7(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y) &&
          (a.uniform2i(this.addr, b.x, b.y), (c[0] = b.x), (c[1] = b.y));
      else {
        if (iY(c, b)) return;
        (a.uniform2iv(this.addr, b), iZ(c, b));
      }
    }
    function i8(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z) &&
          (a.uniform3i(this.addr, b.x, b.y, b.z),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z));
      else {
        if (iY(c, b)) return;
        (a.uniform3iv(this.addr, b), iZ(c, b));
      }
    }
    function i9(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z || c[3] !== b.w) &&
          (a.uniform4i(this.addr, b.x, b.y, b.z, b.w),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z),
          (c[3] = b.w));
      else {
        if (iY(c, b)) return;
        (a.uniform4iv(this.addr, b), iZ(c, b));
      }
    }
    function ja(a, b) {
      let c = this.cache;
      c[0] !== b && (a.uniform1ui(this.addr, b), (c[0] = b));
    }
    function jb(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y) &&
          (a.uniform2ui(this.addr, b.x, b.y), (c[0] = b.x), (c[1] = b.y));
      else {
        if (iY(c, b)) return;
        (a.uniform2uiv(this.addr, b), iZ(c, b));
      }
    }
    function jc(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z) &&
          (a.uniform3ui(this.addr, b.x, b.y, b.z),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z));
      else {
        if (iY(c, b)) return;
        (a.uniform3uiv(this.addr, b), iZ(c, b));
      }
    }
    function jd(a, b) {
      let c = this.cache;
      if (void 0 !== b.x)
        (c[0] !== b.x || c[1] !== b.y || c[2] !== b.z || c[3] !== b.w) &&
          (a.uniform4ui(this.addr, b.x, b.y, b.z, b.w),
          (c[0] = b.x),
          (c[1] = b.y),
          (c[2] = b.z),
          (c[3] = b.w));
      else {
        if (iY(c, b)) return;
        (a.uniform4uiv(this.addr, b), iZ(c, b));
      }
    }
    function je(a, b, c) {
      let d,
        e = this.cache,
        f = c.allocateTextureUnit();
      (e[0] !== f && (a.uniform1i(this.addr, f), (e[0] = f)),
        this.type === a.SAMPLER_2D_SHADOW
          ? ((iO.compareFunction = c.isReversedDepthBuffer() ? 518 : 515),
            (d = iO))
          : (d = iN),
        c.setTexture2D(b || d, f));
    }
    function jf(a, b, c) {
      let d = this.cache,
        e = c.allocateTextureUnit();
      (d[0] !== e && (a.uniform1i(this.addr, e), (d[0] = e)),
        c.setTexture3D(b || iQ, e));
    }
    function jg(a, b, c) {
      let d = this.cache,
        e = c.allocateTextureUnit();
      (d[0] !== e && (a.uniform1i(this.addr, e), (d[0] = e)),
        c.setTextureCube(b || iR, e));
    }
    function jh(a, b, c) {
      let d = this.cache,
        e = c.allocateTextureUnit();
      (d[0] !== e && (a.uniform1i(this.addr, e), (d[0] = e)),
        c.setTexture2DArray(b || iP, e));
    }
    function ji(a, b) {
      a.uniform1fv(this.addr, b);
    }
    function jj(a, b) {
      let c = iX(b, this.size, 2);
      a.uniform2fv(this.addr, c);
    }
    function jk(a, b) {
      let c = iX(b, this.size, 3);
      a.uniform3fv(this.addr, c);
    }
    function jl(a, b) {
      let c = iX(b, this.size, 4);
      a.uniform4fv(this.addr, c);
    }
    function jm(a, b) {
      let c = iX(b, this.size, 4);
      a.uniformMatrix2fv(this.addr, !1, c);
    }
    function jn(a, b) {
      let c = iX(b, this.size, 9);
      a.uniformMatrix3fv(this.addr, !1, c);
    }
    function jo(a, b) {
      let c = iX(b, this.size, 16);
      a.uniformMatrix4fv(this.addr, !1, c);
    }
    function jp(a, b) {
      a.uniform1iv(this.addr, b);
    }
    function jq(a, b) {
      a.uniform2iv(this.addr, b);
    }
    function jr(a, b) {
      a.uniform3iv(this.addr, b);
    }
    function js(a, b) {
      a.uniform4iv(this.addr, b);
    }
    function jt(a, b) {
      a.uniform1uiv(this.addr, b);
    }
    function ju(a, b) {
      a.uniform2uiv(this.addr, b);
    }
    function jv(a, b) {
      a.uniform3uiv(this.addr, b);
    }
    function jw(a, b) {
      a.uniform4uiv(this.addr, b);
    }
    function jx(a, b, c) {
      let d,
        e = this.cache,
        f = b.length,
        g = i$(c, f);
      (iY(e, g) || (a.uniform1iv(this.addr, g), iZ(e, g)),
        (d = this.type === a.SAMPLER_2D_SHADOW ? iO : iN));
      for (let a = 0; a !== f; ++a) c.setTexture2D(b[a] || d, g[a]);
    }
    function jy(a, b, c) {
      let d = this.cache,
        e = b.length,
        f = i$(c, e);
      iY(d, f) || (a.uniform1iv(this.addr, f), iZ(d, f));
      for (let a = 0; a !== e; ++a) c.setTexture3D(b[a] || iQ, f[a]);
    }
    function jz(a, b, c) {
      let d = this.cache,
        e = b.length,
        f = i$(c, e);
      iY(d, f) || (a.uniform1iv(this.addr, f), iZ(d, f));
      for (let a = 0; a !== e; ++a) c.setTextureCube(b[a] || iR, f[a]);
    }
    function jA(a, b, c) {
      let d = this.cache,
        e = b.length,
        f = i$(c, e);
      iY(d, f) || (a.uniform1iv(this.addr, f), iZ(d, f));
      for (let a = 0; a !== e; ++a) c.setTexture2DArray(b[a] || iP, f[a]);
    }
    class jB {
      constructor(a, b, c) {
        ((this.id = a),
          (this.addr = c),
          (this.cache = []),
          (this.type = b.type),
          (this.setValue = (function (a) {
            switch (a) {
              case 5126:
                return i_;
              case 35664:
                return i0;
              case 35665:
                return i1;
              case 35666:
                return i2;
              case 35674:
                return i3;
              case 35675:
                return i4;
              case 35676:
                return i5;
              case 5124:
              case 35670:
                return i6;
              case 35667:
              case 35671:
                return i7;
              case 35668:
              case 35672:
                return i8;
              case 35669:
              case 35673:
                return i9;
              case 5125:
                return ja;
              case 36294:
                return jb;
              case 36295:
                return jc;
              case 36296:
                return jd;
              case 35678:
              case 36198:
              case 36298:
              case 36306:
              case 35682:
                return je;
              case 35679:
              case 36299:
              case 36307:
                return jf;
              case 35680:
              case 36300:
              case 36308:
              case 36293:
                return jg;
              case 36289:
              case 36303:
              case 36311:
              case 36292:
                return jh;
            }
          })(b.type)));
      }
    }
    class jC {
      constructor(a, b, c) {
        ((this.id = a),
          (this.addr = c),
          (this.cache = []),
          (this.type = b.type),
          (this.size = b.size),
          (this.setValue = (function (a) {
            switch (a) {
              case 5126:
                return ji;
              case 35664:
                return jj;
              case 35665:
                return jk;
              case 35666:
                return jl;
              case 35674:
                return jm;
              case 35675:
                return jn;
              case 35676:
                return jo;
              case 5124:
              case 35670:
                return jp;
              case 35667:
              case 35671:
                return jq;
              case 35668:
              case 35672:
                return jr;
              case 35669:
              case 35673:
                return js;
              case 5125:
                return jt;
              case 36294:
                return ju;
              case 36295:
                return jv;
              case 36296:
                return jw;
              case 35678:
              case 36198:
              case 36298:
              case 36306:
              case 35682:
                return jx;
              case 35679:
              case 36299:
              case 36307:
                return jy;
              case 35680:
              case 36300:
              case 36308:
              case 36293:
                return jz;
              case 36289:
              case 36303:
              case 36311:
              case 36292:
                return jA;
            }
          })(b.type)));
      }
    }
    class jD {
      constructor(a) {
        ((this.id = a), (this.seq = []), (this.map = {}));
      }
      setValue(a, b, c) {
        let d = this.seq;
        for (let e = 0, f = d.length; e !== f; ++e) {
          let f = d[e];
          f.setValue(a, b[f.id], c);
        }
      }
    }
    let jE = /(\w+)(\])?(\[|\.)?/g;
    function jF(a, b) {
      (a.seq.push(b), (a.map[b.id] = b));
    }
    class jG {
      constructor(a, b) {
        ((this.seq = []), (this.map = {}));
        const c = a.getProgramParameter(b, a.ACTIVE_UNIFORMS);
        for (let d = 0; d < c; ++d) {
          const c = a.getActiveUniform(b, d),
            e = a.getUniformLocation(b, c.name);
          !(function (a, b, c) {
            let d = a.name,
              e = d.length;
            for (jE.lastIndex = 0; ; ) {
              let f = jE.exec(d),
                g = jE.lastIndex,
                h = f[1],
                i = ']' === f[2],
                j = f[3];
              if ((i && (h |= 0), void 0 === j || ('[' === j && g + 2 === e))) {
                jF(c, void 0 === j ? new jB(h, a, b) : new jC(h, a, b));
                break;
              }
              {
                let a = c.map[h];
                (void 0 === a && jF(c, (a = new jD(h))), (c = a));
              }
            }
          })(c, e, this);
        }
        const d = [],
          e = [];
        for (const b of this.seq)
          b.type === a.SAMPLER_2D_SHADOW ||
          b.type === a.SAMPLER_CUBE_SHADOW ||
          b.type === a.SAMPLER_2D_ARRAY_SHADOW
            ? d.push(b)
            : e.push(b);
        d.length > 0 && (this.seq = d.concat(e));
      }
      setValue(a, b, c, d) {
        let e = this.map[b];
        void 0 !== e && e.setValue(a, c, d);
      }
      setOptional(a, b, c) {
        let d = b[c];
        void 0 !== d && this.setValue(a, c, d);
      }
      static upload(a, b, c, d) {
        for (let e = 0, f = b.length; e !== f; ++e) {
          let f = b[e],
            g = c[f.id];
          !1 !== g.needsUpdate && f.setValue(a, g.value, d);
        }
      }
      static seqWithValue(a, b) {
        let c = [];
        for (let d = 0, e = a.length; d !== e; ++d) {
          let e = a[d];
          e.id in b && c.push(e);
        }
        return c;
      }
    }
    function jH(a, b, c) {
      let d = a.createShader(b);
      return (a.shaderSource(d, c), a.compileShader(d), d);
    }
    let jI = 0,
      jJ = new at();
    function jK(a, b, c) {
      let d = a.getShaderParameter(b, a.COMPILE_STATUS),
        e = (a.getShaderInfoLog(b) || '').trim();
      if (d && '' === e) return '';
      let f = /ERROR: 0:(\d+)/.exec(e);
      if (!f) return e;
      {
        let d = parseInt(f[1]);
        return (
          c.toUpperCase() +
          '\n\n' +
          e +
          '\n\n' +
          (function (a, b) {
            let c = a.split('\n'),
              d = [],
              e = Math.max(b - 6, 0),
              f = Math.min(b + 6, c.length);
            for (let a = e; a < f; a++) {
              let e = a + 1;
              d.push(`${e === b ? '>' : ' '} ${e}: ${c[a]}`);
            }
            return d.join('\n');
          })(a.getShaderSource(b), d)
        );
      }
    }
    let jL = {
        1: 'Linear',
        2: 'Reinhard',
        3: 'Cineon',
        4: 'ACESFilmic',
        6: 'AgX',
        7: 'Neutral',
        5: 'Custom',
      },
      jM = new aq();
    function jN(a) {
      return '' !== a;
    }
    function jO(a, b) {
      let c =
        b.numSpotLightShadows +
        b.numSpotLightMaps -
        b.numSpotLightShadowsWithMaps;
      return a
        .replace(/NUM_DIR_LIGHTS/g, b.numDirLights)
        .replace(/NUM_SPOT_LIGHTS/g, b.numSpotLights)
        .replace(/NUM_SPOT_LIGHT_MAPS/g, b.numSpotLightMaps)
        .replace(/NUM_SPOT_LIGHT_COORDS/g, c)
        .replace(/NUM_RECT_AREA_LIGHTS/g, b.numRectAreaLights)
        .replace(/NUM_POINT_LIGHTS/g, b.numPointLights)
        .replace(/NUM_HEMI_LIGHTS/g, b.numHemiLights)
        .replace(/NUM_DIR_LIGHT_SHADOWS/g, b.numDirLightShadows)
        .replace(
          /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
          b.numSpotLightShadowsWithMaps
        )
        .replace(/NUM_SPOT_LIGHT_SHADOWS/g, b.numSpotLightShadows)
        .replace(/NUM_POINT_LIGHT_SHADOWS/g, b.numPointLightShadows);
    }
    function jP(a, b) {
      return a
        .replace(/NUM_CLIPPING_PLANES/g, b.numClippingPlanes)
        .replace(
          /UNION_CLIPPING_PLANES/g,
          b.numClippingPlanes - b.numClipIntersection
        );
    }
    let jQ = /^[ \t]*#include +<([\w\d./]+)>/gm;
    function jR(a) {
      return a.replace(jQ, jT);
    }
    let jS = new Map();
    function jT(a, b) {
      let c = ic[b];
      if (void 0 === c) {
        let a = jS.get(b);
        if (void 0 !== a)
          ((c = ic[a]),
            _(
              'WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',
              b,
              a
            ));
        else throw Error('Can not resolve #include <' + b + '>');
      }
      return jR(c);
    }
    let jU =
      /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
    function jV(a) {
      return a.replace(jU, jW);
    }
    function jW(a, b, c, d) {
      let e = '';
      for (let a = parseInt(b); a < parseInt(c); a++)
        e += d
          .replace(/\[\s*i\s*\]/g, '[ ' + a + ' ]')
          .replace(/UNROLLED_LOOP_INDEX/g, a);
      return e;
    }
    function jX(a) {
      let b = `precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;
      return (
        'highp' === a.precision
          ? (b += '\n#define HIGH_PRECISION')
          : 'mediump' === a.precision
            ? (b += '\n#define MEDIUM_PRECISION')
            : 'lowp' === a.precision && (b += '\n#define LOW_PRECISION'),
        b
      );
    }
    let jY = { 1: 'SHADOWMAP_TYPE_PCF', 3: 'SHADOWMAP_TYPE_VSM' },
      jZ = {
        301: 'ENVMAP_TYPE_CUBE',
        302: 'ENVMAP_TYPE_CUBE',
        306: 'ENVMAP_TYPE_CUBE_UV',
      },
      j$ = { 302: 'ENVMAP_MODE_REFRACTION' },
      j_ = {
        0: 'ENVMAP_BLENDING_MULTIPLY',
        1: 'ENVMAP_BLENDING_MIX',
        2: 'ENVMAP_BLENDING_ADD',
      };
    function j0(a, b, c, d) {
      var e, f;
      let g,
        h,
        i,
        j,
        k = a.getContext(),
        l = c.defines,
        m = c.vertexShader,
        n = c.fragmentShader,
        o = jY[c.shadowMapType] || 'SHADOWMAP_TYPE_BASIC',
        p =
          !1 === c.envMap
            ? 'ENVMAP_TYPE_CUBE'
            : jZ[c.envMapMode] || 'ENVMAP_TYPE_CUBE',
        q =
          !1 === c.envMap
            ? 'ENVMAP_MODE_REFLECTION'
            : j$[c.envMapMode] || 'ENVMAP_MODE_REFLECTION',
        r =
          !1 === c.envMap
            ? 'ENVMAP_BLENDING_NONE'
            : j_[c.combine] || 'ENVMAP_BLENDING_NONE',
        s = (function (a) {
          let b = a.envMapCubeUVHeight;
          if (null === b) return null;
          let c = Math.log2(b) - 2;
          return {
            texelWidth: 1 / (3 * Math.max(Math.pow(2, c), 112)),
            texelHeight: 1 / b,
            maxMip: c,
          };
        })(c),
        t = [
          c.extensionClipCullDistance
            ? '#extension GL_ANGLE_clip_cull_distance : require'
            : '',
          c.extensionMultiDraw
            ? '#extension GL_ANGLE_multi_draw : require'
            : '',
        ]
          .filter(jN)
          .join('\n'),
        u = (function (a) {
          let b = [];
          for (let c in a) {
            let d = a[c];
            !1 !== d && b.push('#define ' + c + ' ' + d);
          }
          return b.join('\n');
        })(l),
        v = k.createProgram(),
        w = c.glslVersion ? '#version ' + c.glslVersion + '\n' : '';
      if (c.isRawShaderMaterial)
        ((g = [
          '#define SHADER_TYPE ' + c.shaderType,
          '#define SHADER_NAME ' + c.shaderName,
          u,
        ]
          .filter(jN)
          .join('\n')).length > 0 && (g += '\n'),
          (h = [
            '#define SHADER_TYPE ' + c.shaderType,
            '#define SHADER_NAME ' + c.shaderName,
            u,
          ]
            .filter(jN)
            .join('\n')).length > 0 && (h += '\n'));
      else {
        let a, b, d, i, j;
        ((g = [
          jX(c),
          '#define SHADER_TYPE ' + c.shaderType,
          '#define SHADER_NAME ' + c.shaderName,
          u,
          c.extensionClipCullDistance ? '#define USE_CLIP_DISTANCE' : '',
          c.batching ? '#define USE_BATCHING' : '',
          c.batchingColor ? '#define USE_BATCHING_COLOR' : '',
          c.instancing ? '#define USE_INSTANCING' : '',
          c.instancingColor ? '#define USE_INSTANCING_COLOR' : '',
          c.instancingMorph ? '#define USE_INSTANCING_MORPH' : '',
          c.useFog && c.fog ? '#define USE_FOG' : '',
          c.useFog && c.fogExp2 ? '#define FOG_EXP2' : '',
          c.map ? '#define USE_MAP' : '',
          c.envMap ? '#define USE_ENVMAP' : '',
          c.envMap ? '#define ' + q : '',
          c.lightMap ? '#define USE_LIGHTMAP' : '',
          c.aoMap ? '#define USE_AOMAP' : '',
          c.bumpMap ? '#define USE_BUMPMAP' : '',
          c.normalMap ? '#define USE_NORMALMAP' : '',
          c.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',
          c.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',
          c.displacementMap ? '#define USE_DISPLACEMENTMAP' : '',
          c.emissiveMap ? '#define USE_EMISSIVEMAP' : '',
          c.anisotropy ? '#define USE_ANISOTROPY' : '',
          c.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',
          c.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',
          c.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',
          c.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',
          c.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',
          c.iridescenceThicknessMap
            ? '#define USE_IRIDESCENCE_THICKNESSMAP'
            : '',
          c.specularMap ? '#define USE_SPECULARMAP' : '',
          c.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',
          c.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',
          c.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',
          c.metalnessMap ? '#define USE_METALNESSMAP' : '',
          c.alphaMap ? '#define USE_ALPHAMAP' : '',
          c.alphaHash ? '#define USE_ALPHAHASH' : '',
          c.transmission ? '#define USE_TRANSMISSION' : '',
          c.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',
          c.thicknessMap ? '#define USE_THICKNESSMAP' : '',
          c.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',
          c.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',
          c.mapUv ? '#define MAP_UV ' + c.mapUv : '',
          c.alphaMapUv ? '#define ALPHAMAP_UV ' + c.alphaMapUv : '',
          c.lightMapUv ? '#define LIGHTMAP_UV ' + c.lightMapUv : '',
          c.aoMapUv ? '#define AOMAP_UV ' + c.aoMapUv : '',
          c.emissiveMapUv ? '#define EMISSIVEMAP_UV ' + c.emissiveMapUv : '',
          c.bumpMapUv ? '#define BUMPMAP_UV ' + c.bumpMapUv : '',
          c.normalMapUv ? '#define NORMALMAP_UV ' + c.normalMapUv : '',
          c.displacementMapUv
            ? '#define DISPLACEMENTMAP_UV ' + c.displacementMapUv
            : '',
          c.metalnessMapUv ? '#define METALNESSMAP_UV ' + c.metalnessMapUv : '',
          c.roughnessMapUv ? '#define ROUGHNESSMAP_UV ' + c.roughnessMapUv : '',
          c.anisotropyMapUv
            ? '#define ANISOTROPYMAP_UV ' + c.anisotropyMapUv
            : '',
          c.clearcoatMapUv ? '#define CLEARCOATMAP_UV ' + c.clearcoatMapUv : '',
          c.clearcoatNormalMapUv
            ? '#define CLEARCOAT_NORMALMAP_UV ' + c.clearcoatNormalMapUv
            : '',
          c.clearcoatRoughnessMapUv
            ? '#define CLEARCOAT_ROUGHNESSMAP_UV ' + c.clearcoatRoughnessMapUv
            : '',
          c.iridescenceMapUv
            ? '#define IRIDESCENCEMAP_UV ' + c.iridescenceMapUv
            : '',
          c.iridescenceThicknessMapUv
            ? '#define IRIDESCENCE_THICKNESSMAP_UV ' +
              c.iridescenceThicknessMapUv
            : '',
          c.sheenColorMapUv
            ? '#define SHEEN_COLORMAP_UV ' + c.sheenColorMapUv
            : '',
          c.sheenRoughnessMapUv
            ? '#define SHEEN_ROUGHNESSMAP_UV ' + c.sheenRoughnessMapUv
            : '',
          c.specularMapUv ? '#define SPECULARMAP_UV ' + c.specularMapUv : '',
          c.specularColorMapUv
            ? '#define SPECULAR_COLORMAP_UV ' + c.specularColorMapUv
            : '',
          c.specularIntensityMapUv
            ? '#define SPECULAR_INTENSITYMAP_UV ' + c.specularIntensityMapUv
            : '',
          c.transmissionMapUv
            ? '#define TRANSMISSIONMAP_UV ' + c.transmissionMapUv
            : '',
          c.thicknessMapUv ? '#define THICKNESSMAP_UV ' + c.thicknessMapUv : '',
          c.vertexTangents && !1 === c.flatShading ? '#define USE_TANGENT' : '',
          c.vertexColors ? '#define USE_COLOR' : '',
          c.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',
          c.vertexUv1s ? '#define USE_UV1' : '',
          c.vertexUv2s ? '#define USE_UV2' : '',
          c.vertexUv3s ? '#define USE_UV3' : '',
          c.pointsUvs ? '#define USE_POINTS_UV' : '',
          c.flatShading ? '#define FLAT_SHADED' : '',
          c.skinning ? '#define USE_SKINNING' : '',
          c.morphTargets ? '#define USE_MORPHTARGETS' : '',
          c.morphNormals && !1 === c.flatShading
            ? '#define USE_MORPHNORMALS'
            : '',
          c.morphColors ? '#define USE_MORPHCOLORS' : '',
          c.morphTargetsCount > 0
            ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + c.morphTextureStride
            : '',
          c.morphTargetsCount > 0
            ? '#define MORPHTARGETS_COUNT ' + c.morphTargetsCount
            : '',
          c.doubleSided ? '#define DOUBLE_SIDED' : '',
          c.flipSided ? '#define FLIP_SIDED' : '',
          c.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',
          c.shadowMapEnabled ? '#define ' + o : '',
          c.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',
          c.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',
          c.logarithmicDepthBuffer
            ? '#define USE_LOGARITHMIC_DEPTH_BUFFER'
            : '',
          c.reversedDepthBuffer ? '#define USE_REVERSED_DEPTH_BUFFER' : '',
          'uniform mat4 modelMatrix;',
          'uniform mat4 modelViewMatrix;',
          'uniform mat4 projectionMatrix;',
          'uniform mat4 viewMatrix;',
          'uniform mat3 normalMatrix;',
          'uniform vec3 cameraPosition;',
          'uniform bool isOrthographic;',
          '#ifdef USE_INSTANCING',
          '	attribute mat4 instanceMatrix;',
          '#endif',
          '#ifdef USE_INSTANCING_COLOR',
          '	attribute vec3 instanceColor;',
          '#endif',
          '#ifdef USE_INSTANCING_MORPH',
          '	uniform sampler2D morphTexture;',
          '#endif',
          'attribute vec3 position;',
          'attribute vec3 normal;',
          'attribute vec2 uv;',
          '#ifdef USE_UV1',
          '	attribute vec2 uv1;',
          '#endif',
          '#ifdef USE_UV2',
          '	attribute vec2 uv2;',
          '#endif',
          '#ifdef USE_UV3',
          '	attribute vec2 uv3;',
          '#endif',
          '#ifdef USE_TANGENT',
          '	attribute vec4 tangent;',
          '#endif',
          '#if defined( USE_COLOR_ALPHA )',
          '	attribute vec4 color;',
          '#elif defined( USE_COLOR )',
          '	attribute vec3 color;',
          '#endif',
          '#ifdef USE_SKINNING',
          '	attribute vec4 skinIndex;',
          '	attribute vec4 skinWeight;',
          '#endif',
          '\n',
        ]
          .filter(jN)
          .join('\n')),
          (h = [
            jX(c),
            '#define SHADER_TYPE ' + c.shaderType,
            '#define SHADER_NAME ' + c.shaderName,
            u,
            c.useFog && c.fog ? '#define USE_FOG' : '',
            c.useFog && c.fogExp2 ? '#define FOG_EXP2' : '',
            c.alphaToCoverage ? '#define ALPHA_TO_COVERAGE' : '',
            c.map ? '#define USE_MAP' : '',
            c.matcap ? '#define USE_MATCAP' : '',
            c.envMap ? '#define USE_ENVMAP' : '',
            c.envMap ? '#define ' + p : '',
            c.envMap ? '#define ' + q : '',
            c.envMap ? '#define ' + r : '',
            s ? '#define CUBEUV_TEXEL_WIDTH ' + s.texelWidth : '',
            s ? '#define CUBEUV_TEXEL_HEIGHT ' + s.texelHeight : '',
            s ? '#define CUBEUV_MAX_MIP ' + s.maxMip + '.0' : '',
            c.lightMap ? '#define USE_LIGHTMAP' : '',
            c.aoMap ? '#define USE_AOMAP' : '',
            c.bumpMap ? '#define USE_BUMPMAP' : '',
            c.normalMap ? '#define USE_NORMALMAP' : '',
            c.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',
            c.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',
            c.emissiveMap ? '#define USE_EMISSIVEMAP' : '',
            c.anisotropy ? '#define USE_ANISOTROPY' : '',
            c.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',
            c.clearcoat ? '#define USE_CLEARCOAT' : '',
            c.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',
            c.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',
            c.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',
            c.dispersion ? '#define USE_DISPERSION' : '',
            c.iridescence ? '#define USE_IRIDESCENCE' : '',
            c.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',
            c.iridescenceThicknessMap
              ? '#define USE_IRIDESCENCE_THICKNESSMAP'
              : '',
            c.specularMap ? '#define USE_SPECULARMAP' : '',
            c.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',
            c.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',
            c.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',
            c.metalnessMap ? '#define USE_METALNESSMAP' : '',
            c.alphaMap ? '#define USE_ALPHAMAP' : '',
            c.alphaTest ? '#define USE_ALPHATEST' : '',
            c.alphaHash ? '#define USE_ALPHAHASH' : '',
            c.sheen ? '#define USE_SHEEN' : '',
            c.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',
            c.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',
            c.transmission ? '#define USE_TRANSMISSION' : '',
            c.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',
            c.thicknessMap ? '#define USE_THICKNESSMAP' : '',
            c.vertexTangents && !1 === c.flatShading
              ? '#define USE_TANGENT'
              : '',
            c.vertexColors || c.instancingColor || c.batchingColor
              ? '#define USE_COLOR'
              : '',
            c.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',
            c.vertexUv1s ? '#define USE_UV1' : '',
            c.vertexUv2s ? '#define USE_UV2' : '',
            c.vertexUv3s ? '#define USE_UV3' : '',
            c.pointsUvs ? '#define USE_POINTS_UV' : '',
            c.gradientMap ? '#define USE_GRADIENTMAP' : '',
            c.flatShading ? '#define FLAT_SHADED' : '',
            c.doubleSided ? '#define DOUBLE_SIDED' : '',
            c.flipSided ? '#define FLIP_SIDED' : '',
            c.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',
            c.shadowMapEnabled ? '#define ' + o : '',
            c.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',
            c.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',
            c.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',
            c.decodeVideoTextureEmissive
              ? '#define DECODE_VIDEO_TEXTURE_EMISSIVE'
              : '',
            c.logarithmicDepthBuffer
              ? '#define USE_LOGARITHMIC_DEPTH_BUFFER'
              : '',
            c.reversedDepthBuffer ? '#define USE_REVERSED_DEPTH_BUFFER' : '',
            'uniform mat4 viewMatrix;',
            'uniform vec3 cameraPosition;',
            'uniform bool isOrthographic;',
            0 !== c.toneMapping ? '#define TONE_MAPPING' : '',
            0 !== c.toneMapping ? ic.tonemapping_pars_fragment : '',
            0 !== c.toneMapping
              ? ((e = 'toneMapping'),
                void 0 === (a = jL[(f = c.toneMapping)])
                  ? (_('WebGLProgram: Unsupported toneMapping:', f),
                    'vec3 ' +
                      e +
                      '( vec3 color ) { return LinearToneMapping( color ); }')
                  : 'vec3 ' +
                    e +
                    '( vec3 color ) { return ' +
                    a +
                    'ToneMapping( color ); }')
              : '',
            c.dithering ? '#define DITHERING' : '',
            c.opaque ? '#define OPAQUE' : '',
            ic.colorspace_pars_fragment,
            ((b = (function (a) {
              ax._getMatrix(jJ, ax.workingColorSpace, a);
              let b = `mat3( ${jJ.elements.map((a) => a.toFixed(4))} )`;
              switch (ax.getTransfer(a)) {
                case K:
                  return [b, 'LinearTransferOETF'];
                case L:
                  return [b, 'sRGBTransferOETF'];
                default:
                  return (
                    _('WebGLProgram: Unsupported color space: ', a),
                    [b, 'LinearTransferOETF']
                  );
              }
            })(c.outputColorSpace)),
            `vec4 linearToOutputTexel( vec4 value ) {
	return ${b[1]}( vec4( value.rgb * ${b[0]}, value.a ) );
}`),
            (ax.getLuminanceCoefficients(jM),
            (d = jM.x.toFixed(4)),
            (i = jM.y.toFixed(4)),
            (j = jM.z.toFixed(4)),
            `float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${d}, ${i}, ${j} );
	return dot( weights, rgb );
}`),
            c.useDepthPacking ? '#define DEPTH_PACKING ' + c.depthPacking : '',
            '\n',
          ]
            .filter(jN)
            .join('\n')));
      }
      ((m = jP((m = jO((m = jR(m)), c)), c)),
        (n = jP((n = jO((n = jR(n)), c)), c)),
        (m = jV(m)),
        (n = jV(n)),
        !0 !== c.isRawShaderMaterial &&
          ((w = '#version 300 es\n'),
          (g =
            [
              t,
              '#define attribute in\n#define varying out\n#define texture2D texture',
            ].join('\n') +
            '\n' +
            g),
          (h =
            [
              '#define varying in',
              c.glslVersion === M
                ? ''
                : 'layout(location = 0) out highp vec4 pc_fragColor;',
              c.glslVersion === M ? '' : '#define gl_FragColor pc_fragColor',
              '#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad',
            ].join('\n') +
            '\n' +
            h)));
      let x = w + g + m,
        y = w + h + n,
        z = jH(k, k.VERTEX_SHADER, x),
        A = jH(k, k.FRAGMENT_SHADER, y);
      function B(b) {
        if (a.debug.checkShaderErrors) {
          let c = k.getProgramInfoLog(v) || '',
            d = k.getShaderInfoLog(z) || '',
            e = k.getShaderInfoLog(A) || '',
            f = c.trim(),
            i = d.trim(),
            j = e.trim(),
            l = !0,
            m = !0;
          if (!1 === k.getProgramParameter(v, k.LINK_STATUS))
            if (((l = !1), 'function' == typeof a.debug.onShaderError))
              a.debug.onShaderError(k, v, z, A);
            else {
              let a = jK(k, z, 'vertex'),
                c = jK(k, A, 'fragment');
              aa(
                'THREE.WebGLProgram: Shader Error ' +
                  k.getError() +
                  ' - VALIDATE_STATUS ' +
                  k.getProgramParameter(v, k.VALIDATE_STATUS) +
                  '\n\nMaterial Name: ' +
                  b.name +
                  '\nMaterial Type: ' +
                  b.type +
                  '\n\nProgram Info Log: ' +
                  f +
                  '\n' +
                  a +
                  '\n' +
                  c
              );
            }
          else
            '' !== f
              ? _('WebGLProgram: Program Info Log:', f)
              : ('' === i || '' === j) && (m = !1);
          m &&
            (b.diagnostics = {
              runnable: l,
              programLog: f,
              vertexShader: { log: i, prefix: g },
              fragmentShader: { log: j, prefix: h },
            });
        }
        (k.deleteShader(z),
          k.deleteShader(A),
          (i = new jG(k, v)),
          (j = (function (a, b) {
            let c = {},
              d = a.getProgramParameter(b, a.ACTIVE_ATTRIBUTES);
            for (let e = 0; e < d; e++) {
              let d = a.getActiveAttrib(b, e),
                f = d.name,
                g = 1;
              (d.type === a.FLOAT_MAT2 && (g = 2),
                d.type === a.FLOAT_MAT3 && (g = 3),
                d.type === a.FLOAT_MAT4 && (g = 4),
                (c[f] = {
                  type: d.type,
                  location: a.getAttribLocation(b, f),
                  locationSize: g,
                }));
            }
            return c;
          })(k, v)));
      }
      (k.attachShader(v, z),
        k.attachShader(v, A),
        void 0 !== c.index0AttributeName
          ? k.bindAttribLocation(v, 0, c.index0AttributeName)
          : !0 === c.morphTargets && k.bindAttribLocation(v, 0, 'position'),
        k.linkProgram(v),
        (this.getUniforms = function () {
          return (void 0 === i && B(this), i);
        }),
        (this.getAttributes = function () {
          return (void 0 === j && B(this), j);
        }));
      let C = !1 === c.rendererExtensionParallelShaderCompile;
      return (
        (this.isReady = function () {
          return (!1 === C && (C = k.getProgramParameter(v, 37297)), C);
        }),
        (this.destroy = function () {
          (d.releaseStatesOfProgram(this),
            k.deleteProgram(v),
            (this.program = void 0));
        }),
        (this.type = c.shaderType),
        (this.name = c.shaderName),
        (this.id = jI++),
        (this.cacheKey = b),
        (this.usedTimes = 1),
        (this.program = v),
        (this.vertexShader = z),
        (this.fragmentShader = A),
        this
      );
    }
    let j1 = 0;
    class j2 {
      constructor() {
        ((this.shaderCache = new Map()), (this.materialCache = new Map()));
      }
      update(a) {
        let b = a.vertexShader,
          c = a.fragmentShader,
          d = this._getShaderStage(b),
          e = this._getShaderStage(c),
          f = this._getShaderCacheForMaterial(a);
        return (
          !1 === f.has(d) && (f.add(d), d.usedTimes++),
          !1 === f.has(e) && (f.add(e), e.usedTimes++),
          this
        );
      }
      remove(a) {
        for (let b of this.materialCache.get(a))
          (b.usedTimes--, 0 === b.usedTimes && this.shaderCache.delete(b.code));
        return (this.materialCache.delete(a), this);
      }
      getVertexShaderID(a) {
        return this._getShaderStage(a.vertexShader).id;
      }
      getFragmentShaderID(a) {
        return this._getShaderStage(a.fragmentShader).id;
      }
      dispose() {
        (this.shaderCache.clear(), this.materialCache.clear());
      }
      _getShaderCacheForMaterial(a) {
        let b = this.materialCache,
          c = b.get(a);
        return (void 0 === c && ((c = new Set()), b.set(a, c)), c);
      }
      _getShaderStage(a) {
        let b = this.shaderCache,
          c = b.get(a);
        return (void 0 === c && ((c = new j3(a)), b.set(a, c)), c);
      }
    }
    class j3 {
      constructor(a) {
        ((this.id = j1++), (this.code = a), (this.usedTimes = 0));
      }
    }
    function j4(a, b, c, d, e, f, g) {
      let h = new bo(),
        i = new j2(),
        j = new Set(),
        k = [],
        l = new Map(),
        m = e.logarithmicDepthBuffer,
        n = e.precision,
        o = {
          MeshDepthMaterial: 'depth',
          MeshDistanceMaterial: 'distance',
          MeshNormalMaterial: 'normal',
          MeshBasicMaterial: 'basic',
          MeshLambertMaterial: 'lambert',
          MeshPhongMaterial: 'phong',
          MeshToonMaterial: 'toon',
          MeshStandardMaterial: 'physical',
          MeshPhysicalMaterial: 'physical',
          MeshMatcapMaterial: 'matcap',
          LineBasicMaterial: 'basic',
          LineDashedMaterial: 'dashed',
          PointsMaterial: 'points',
          ShadowMaterial: 'shadow',
          SpriteMaterial: 'sprite',
        };
      function p(a) {
        return (j.add(a), 0 === a) ? 'uv' : `uv${a}`;
      }
      return {
        getParameters: function (f, h, k, l, q) {
          let r,
            s,
            t,
            u,
            v = l.fog,
            w = q.geometry,
            x = f.isMeshStandardMaterial ? l.environment : null,
            y = (f.isMeshStandardMaterial ? c : b).get(f.envMap || x),
            z = y && 306 === y.mapping ? y.image.height : null,
            A = o[f.type];
          null !== f.precision &&
            (n = e.getMaxPrecision(f.precision)) !== f.precision &&
            _(
              'WebGLProgram.getParameters:',
              f.precision,
              'not supported, using',
              n,
              'instead.'
            );
          let B =
              w.morphAttributes.position ||
              w.morphAttributes.normal ||
              w.morphAttributes.color,
            C = void 0 !== B ? B.length : 0,
            D = 0;
          if (
            (void 0 !== w.morphAttributes.position && (D = 1),
            void 0 !== w.morphAttributes.normal && (D = 2),
            void 0 !== w.morphAttributes.color && (D = 3),
            A)
          ) {
            let a = ie[A];
            ((r = a.vertexShader), (s = a.fragmentShader));
          } else
            ((r = f.vertexShader),
              (s = f.fragmentShader),
              i.update(f),
              (t = i.getVertexShaderID(f)),
              (u = i.getFragmentShaderID(f)));
          let E = a.getRenderTarget(),
            F = a.state.buffers.depth.getReversed(),
            G = !0 === q.isInstancedMesh,
            H = !0 === q.isBatchedMesh,
            I = !!f.map,
            K = !!f.matcap,
            M = !!y,
            N = !!f.aoMap,
            O = !!f.lightMap,
            P = !!f.bumpMap,
            Q = !!f.normalMap,
            R = !!f.displacementMap,
            S = !!f.emissiveMap,
            T = !!f.metalnessMap,
            U = !!f.roughnessMap,
            V = f.anisotropy > 0,
            W = f.clearcoat > 0,
            X = f.dispersion > 0,
            Y = f.iridescence > 0,
            Z = f.sheen > 0,
            $ = f.transmission > 0,
            aa = V && !!f.anisotropyMap,
            ab = W && !!f.clearcoatMap,
            ac = W && !!f.clearcoatNormalMap,
            ad = W && !!f.clearcoatRoughnessMap,
            ae = Y && !!f.iridescenceMap,
            af = Y && !!f.iridescenceThicknessMap,
            ag = Z && !!f.sheenColorMap,
            ah = Z && !!f.sheenRoughnessMap,
            ai = !!f.specularMap,
            aj = !!f.specularColorMap,
            ak = !!f.specularIntensityMap,
            al = $ && !!f.transmissionMap,
            am = $ && !!f.thicknessMap,
            an = !!f.gradientMap,
            ao = !!f.alphaMap,
            ap = f.alphaTest > 0,
            aq = !!f.alphaHash,
            ar = !!f.extensions,
            as = 0;
          f.toneMapped &&
            (null === E || !0 === E.isXRRenderTarget) &&
            (as = a.toneMapping);
          let at = {
            shaderID: A,
            shaderType: f.type,
            shaderName: f.name,
            vertexShader: r,
            fragmentShader: s,
            defines: f.defines,
            customVertexShaderID: t,
            customFragmentShaderID: u,
            isRawShaderMaterial: !0 === f.isRawShaderMaterial,
            glslVersion: f.glslVersion,
            precision: n,
            batching: H,
            batchingColor: H && null !== q._colorsTexture,
            instancing: G,
            instancingColor: G && null !== q.instanceColor,
            instancingMorph: G && null !== q.morphTexture,
            outputColorSpace:
              null === E
                ? a.outputColorSpace
                : !0 === E.isXRRenderTarget
                  ? E.texture.colorSpace
                  : J,
            alphaToCoverage: !!f.alphaToCoverage,
            map: I,
            matcap: K,
            envMap: M,
            envMapMode: M && y.mapping,
            envMapCubeUVHeight: z,
            aoMap: N,
            lightMap: O,
            bumpMap: P,
            normalMap: Q,
            displacementMap: R,
            emissiveMap: S,
            normalMapObjectSpace: Q && 1 === f.normalMapType,
            normalMapTangentSpace: Q && 0 === f.normalMapType,
            metalnessMap: T,
            roughnessMap: U,
            anisotropy: V,
            anisotropyMap: aa,
            clearcoat: W,
            clearcoatMap: ab,
            clearcoatNormalMap: ac,
            clearcoatRoughnessMap: ad,
            dispersion: X,
            iridescence: Y,
            iridescenceMap: ae,
            iridescenceThicknessMap: af,
            sheen: Z,
            sheenColorMap: ag,
            sheenRoughnessMap: ah,
            specularMap: ai,
            specularColorMap: aj,
            specularIntensityMap: ak,
            transmission: $,
            transmissionMap: al,
            thicknessMap: am,
            gradientMap: an,
            opaque:
              !1 === f.transparent &&
              1 === f.blending &&
              !1 === f.alphaToCoverage,
            alphaMap: ao,
            alphaTest: ap,
            alphaHash: aq,
            combine: f.combine,
            mapUv: I && p(f.map.channel),
            aoMapUv: N && p(f.aoMap.channel),
            lightMapUv: O && p(f.lightMap.channel),
            bumpMapUv: P && p(f.bumpMap.channel),
            normalMapUv: Q && p(f.normalMap.channel),
            displacementMapUv: R && p(f.displacementMap.channel),
            emissiveMapUv: S && p(f.emissiveMap.channel),
            metalnessMapUv: T && p(f.metalnessMap.channel),
            roughnessMapUv: U && p(f.roughnessMap.channel),
            anisotropyMapUv: aa && p(f.anisotropyMap.channel),
            clearcoatMapUv: ab && p(f.clearcoatMap.channel),
            clearcoatNormalMapUv: ac && p(f.clearcoatNormalMap.channel),
            clearcoatRoughnessMapUv: ad && p(f.clearcoatRoughnessMap.channel),
            iridescenceMapUv: ae && p(f.iridescenceMap.channel),
            iridescenceThicknessMapUv:
              af && p(f.iridescenceThicknessMap.channel),
            sheenColorMapUv: ag && p(f.sheenColorMap.channel),
            sheenRoughnessMapUv: ah && p(f.sheenRoughnessMap.channel),
            specularMapUv: ai && p(f.specularMap.channel),
            specularColorMapUv: aj && p(f.specularColorMap.channel),
            specularIntensityMapUv: ak && p(f.specularIntensityMap.channel),
            transmissionMapUv: al && p(f.transmissionMap.channel),
            thicknessMapUv: am && p(f.thicknessMap.channel),
            alphaMapUv: ao && p(f.alphaMap.channel),
            vertexTangents: !!w.attributes.tangent && (Q || V),
            vertexColors: f.vertexColors,
            vertexAlphas:
              !0 === f.vertexColors &&
              !!w.attributes.color &&
              4 === w.attributes.color.itemSize,
            pointsUvs: !0 === q.isPoints && !!w.attributes.uv && (I || ao),
            fog: !!v,
            useFog: !0 === f.fog,
            fogExp2: !!v && v.isFogExp2,
            flatShading: !0 === f.flatShading && !1 === f.wireframe,
            sizeAttenuation: !0 === f.sizeAttenuation,
            logarithmicDepthBuffer: m,
            reversedDepthBuffer: F,
            skinning: !0 === q.isSkinnedMesh,
            morphTargets: void 0 !== w.morphAttributes.position,
            morphNormals: void 0 !== w.morphAttributes.normal,
            morphColors: void 0 !== w.morphAttributes.color,
            morphTargetsCount: C,
            morphTextureStride: D,
            numDirLights: h.directional.length,
            numPointLights: h.point.length,
            numSpotLights: h.spot.length,
            numSpotLightMaps: h.spotLightMap.length,
            numRectAreaLights: h.rectArea.length,
            numHemiLights: h.hemi.length,
            numDirLightShadows: h.directionalShadowMap.length,
            numPointLightShadows: h.pointShadowMap.length,
            numSpotLightShadows: h.spotShadowMap.length,
            numSpotLightShadowsWithMaps: h.numSpotLightShadowsWithMaps,
            numLightProbes: h.numLightProbes,
            numClippingPlanes: g.numPlanes,
            numClipIntersection: g.numIntersection,
            dithering: f.dithering,
            shadowMapEnabled: a.shadowMap.enabled && k.length > 0,
            shadowMapType: a.shadowMap.type,
            toneMapping: as,
            decodeVideoTexture:
              I &&
              !0 === f.map.isVideoTexture &&
              ax.getTransfer(f.map.colorSpace) === L,
            decodeVideoTextureEmissive:
              S &&
              !0 === f.emissiveMap.isVideoTexture &&
              ax.getTransfer(f.emissiveMap.colorSpace) === L,
            premultipliedAlpha: f.premultipliedAlpha,
            doubleSided: 2 === f.side,
            flipSided: 1 === f.side,
            useDepthPacking: f.depthPacking >= 0,
            depthPacking: f.depthPacking || 0,
            index0AttributeName: f.index0AttributeName,
            extensionClipCullDistance:
              ar &&
              !0 === f.extensions.clipCullDistance &&
              d.has('WEBGL_clip_cull_distance'),
            extensionMultiDraw:
              ((ar && !0 === f.extensions.multiDraw) || H) &&
              d.has('WEBGL_multi_draw'),
            rendererExtensionParallelShaderCompile: d.has(
              'KHR_parallel_shader_compile'
            ),
            customProgramCacheKey: f.customProgramCacheKey(),
          };
          return (
            (at.vertexUv1s = j.has(1)),
            (at.vertexUv2s = j.has(2)),
            (at.vertexUv3s = j.has(3)),
            j.clear(),
            at
          );
        },
        getProgramCacheKey: function (b) {
          var c, d, e, f;
          let g = [];
          if (
            (b.shaderID
              ? g.push(b.shaderID)
              : (g.push(b.customVertexShaderID),
                g.push(b.customFragmentShaderID)),
            void 0 !== b.defines)
          )
            for (let a in b.defines) (g.push(a), g.push(b.defines[a]));
          return (
            !1 === b.isRawShaderMaterial &&
              ((c = g),
              (d = b),
              c.push(d.precision),
              c.push(d.outputColorSpace),
              c.push(d.envMapMode),
              c.push(d.envMapCubeUVHeight),
              c.push(d.mapUv),
              c.push(d.alphaMapUv),
              c.push(d.lightMapUv),
              c.push(d.aoMapUv),
              c.push(d.bumpMapUv),
              c.push(d.normalMapUv),
              c.push(d.displacementMapUv),
              c.push(d.emissiveMapUv),
              c.push(d.metalnessMapUv),
              c.push(d.roughnessMapUv),
              c.push(d.anisotropyMapUv),
              c.push(d.clearcoatMapUv),
              c.push(d.clearcoatNormalMapUv),
              c.push(d.clearcoatRoughnessMapUv),
              c.push(d.iridescenceMapUv),
              c.push(d.iridescenceThicknessMapUv),
              c.push(d.sheenColorMapUv),
              c.push(d.sheenRoughnessMapUv),
              c.push(d.specularMapUv),
              c.push(d.specularColorMapUv),
              c.push(d.specularIntensityMapUv),
              c.push(d.transmissionMapUv),
              c.push(d.thicknessMapUv),
              c.push(d.combine),
              c.push(d.fogExp2),
              c.push(d.sizeAttenuation),
              c.push(d.morphTargetsCount),
              c.push(d.morphAttributeCount),
              c.push(d.numDirLights),
              c.push(d.numPointLights),
              c.push(d.numSpotLights),
              c.push(d.numSpotLightMaps),
              c.push(d.numHemiLights),
              c.push(d.numRectAreaLights),
              c.push(d.numDirLightShadows),
              c.push(d.numPointLightShadows),
              c.push(d.numSpotLightShadows),
              c.push(d.numSpotLightShadowsWithMaps),
              c.push(d.numLightProbes),
              c.push(d.shadowMapType),
              c.push(d.toneMapping),
              c.push(d.numClippingPlanes),
              c.push(d.numClipIntersection),
              c.push(d.depthPacking),
              (e = g),
              (f = b),
              h.disableAll(),
              f.instancing && h.enable(0),
              f.instancingColor && h.enable(1),
              f.instancingMorph && h.enable(2),
              f.matcap && h.enable(3),
              f.envMap && h.enable(4),
              f.normalMapObjectSpace && h.enable(5),
              f.normalMapTangentSpace && h.enable(6),
              f.clearcoat && h.enable(7),
              f.iridescence && h.enable(8),
              f.alphaTest && h.enable(9),
              f.vertexColors && h.enable(10),
              f.vertexAlphas && h.enable(11),
              f.vertexUv1s && h.enable(12),
              f.vertexUv2s && h.enable(13),
              f.vertexUv3s && h.enable(14),
              f.vertexTangents && h.enable(15),
              f.anisotropy && h.enable(16),
              f.alphaHash && h.enable(17),
              f.batching && h.enable(18),
              f.dispersion && h.enable(19),
              f.batchingColor && h.enable(20),
              f.gradientMap && h.enable(21),
              e.push(h.mask),
              h.disableAll(),
              f.fog && h.enable(0),
              f.useFog && h.enable(1),
              f.flatShading && h.enable(2),
              f.logarithmicDepthBuffer && h.enable(3),
              f.reversedDepthBuffer && h.enable(4),
              f.skinning && h.enable(5),
              f.morphTargets && h.enable(6),
              f.morphNormals && h.enable(7),
              f.morphColors && h.enable(8),
              f.premultipliedAlpha && h.enable(9),
              f.shadowMapEnabled && h.enable(10),
              f.doubleSided && h.enable(11),
              f.flipSided && h.enable(12),
              f.useDepthPacking && h.enable(13),
              f.dithering && h.enable(14),
              f.transmission && h.enable(15),
              f.sheen && h.enable(16),
              f.opaque && h.enable(17),
              f.pointsUvs && h.enable(18),
              f.decodeVideoTexture && h.enable(19),
              f.decodeVideoTextureEmissive && h.enable(20),
              f.alphaToCoverage && h.enable(21),
              e.push(h.mask),
              g.push(a.outputColorSpace)),
            g.push(b.customProgramCacheKey),
            g.join()
          );
        },
        getUniforms: function (a) {
          let b,
            c = o[a.type];
          if (c) {
            let a = ie[c];
            b = cG.clone(a.uniforms);
          } else b = a.uniforms;
          return b;
        },
        acquireProgram: function (b, c) {
          let d = l.get(c);
          return (
            void 0 !== d
              ? ++d.usedTimes
              : ((d = new j0(a, c, b, f)), k.push(d), l.set(c, d)),
            d
          );
        },
        releaseProgram: function (a) {
          if (0 == --a.usedTimes) {
            let b = k.indexOf(a);
            ((k[b] = k[k.length - 1]),
              k.pop(),
              l.delete(a.cacheKey),
              a.destroy());
          }
        },
        releaseShaderCache: function (a) {
          i.remove(a);
        },
        programs: k,
        dispose: function () {
          i.dispose();
        },
      };
    }
    function j5() {
      let a = new WeakMap();
      return {
        has: function (b) {
          return a.has(b);
        },
        get: function (b) {
          let c = a.get(b);
          return (void 0 === c && ((c = {}), a.set(b, c)), c);
        },
        remove: function (b) {
          a.delete(b);
        },
        update: function (b, c, d) {
          a.get(b)[c] = d;
        },
        dispose: function () {
          a = new WeakMap();
        },
      };
    }
    function j6(a, b) {
      return a.groupOrder !== b.groupOrder
        ? a.groupOrder - b.groupOrder
        : a.renderOrder !== b.renderOrder
          ? a.renderOrder - b.renderOrder
          : a.material.id !== b.material.id
            ? a.material.id - b.material.id
            : a.z !== b.z
              ? a.z - b.z
              : a.id - b.id;
    }
    function j7(a, b) {
      return a.groupOrder !== b.groupOrder
        ? a.groupOrder - b.groupOrder
        : a.renderOrder !== b.renderOrder
          ? a.renderOrder - b.renderOrder
          : a.z !== b.z
            ? b.z - a.z
            : a.id - b.id;
    }
    function j8() {
      let a = [],
        b = 0,
        c = [],
        d = [],
        e = [];
      function f(c, d, e, f, g, h) {
        let i = a[b];
        return (
          void 0 === i
            ? ((i = {
                id: c.id,
                object: c,
                geometry: d,
                material: e,
                groupOrder: f,
                renderOrder: c.renderOrder,
                z: g,
                group: h,
              }),
              (a[b] = i))
            : ((i.id = c.id),
              (i.object = c),
              (i.geometry = d),
              (i.material = e),
              (i.groupOrder = f),
              (i.renderOrder = c.renderOrder),
              (i.z = g),
              (i.group = h)),
          b++,
          i
        );
      }
      return {
        opaque: c,
        transmissive: d,
        transparent: e,
        init: function () {
          ((b = 0), (c.length = 0), (d.length = 0), (e.length = 0));
        },
        push: function (a, b, g, h, i, j) {
          let k = f(a, b, g, h, i, j);
          g.transmission > 0
            ? d.push(k)
            : !0 === g.transparent
              ? e.push(k)
              : c.push(k);
        },
        unshift: function (a, b, g, h, i, j) {
          let k = f(a, b, g, h, i, j);
          g.transmission > 0
            ? d.unshift(k)
            : !0 === g.transparent
              ? e.unshift(k)
              : c.unshift(k);
        },
        finish: function () {
          for (let c = b, d = a.length; c < d; c++) {
            let b = a[c];
            if (null === b.id) break;
            ((b.id = null),
              (b.object = null),
              (b.geometry = null),
              (b.material = null),
              (b.group = null));
          }
        },
        sort: function (a, b) {
          (c.length > 1 && c.sort(a || j6),
            d.length > 1 && d.sort(b || j7),
            e.length > 1 && e.sort(b || j7));
        },
      };
    }
    function j9() {
      let a = new WeakMap();
      return {
        get: function (b, c) {
          let d,
            e = a.get(b);
          return (
            void 0 === e
              ? ((d = new j8()), a.set(b, [d]))
              : c >= e.length
                ? ((d = new j8()), e.push(d))
                : (d = e[c]),
            d
          );
        },
        dispose: function () {
          a = new WeakMap();
        },
      };
    }
    function ka() {
      let a = {};
      return {
        get: function (b) {
          let c;
          if (void 0 !== a[b.id]) return a[b.id];
          switch (b.type) {
            case 'DirectionalLight':
              c = { direction: new aq(), color: new bX() };
              break;
            case 'SpotLight':
              c = {
                position: new aq(),
                direction: new aq(),
                color: new bX(),
                distance: 0,
                coneCos: 0,
                penumbraCos: 0,
                decay: 0,
              };
              break;
            case 'PointLight':
              c = {
                position: new aq(),
                color: new bX(),
                distance: 0,
                decay: 0,
              };
              break;
            case 'HemisphereLight':
              c = {
                direction: new aq(),
                skyColor: new bX(),
                groundColor: new bX(),
              };
              break;
            case 'RectAreaLight':
              c = {
                color: new bX(),
                position: new aq(),
                halfWidth: new aq(),
                halfHeight: new aq(),
              };
          }
          return ((a[b.id] = c), c);
        },
      };
    }
    let kb = 0;
    function kc(a, b) {
      return 2 * !!b.castShadow - 2 * !!a.castShadow + +!!b.map - !!a.map;
    }
    function kd(a) {
      let b,
        c = new ka(),
        d =
          ((b = {}),
          {
            get: function (a) {
              let c;
              if (void 0 !== b[a.id]) return b[a.id];
              switch (a.type) {
                case 'DirectionalLight':
                case 'SpotLight':
                  c = {
                    shadowIntensity: 1,
                    shadowBias: 0,
                    shadowNormalBias: 0,
                    shadowRadius: 1,
                    shadowMapSize: new ao(),
                  };
                  break;
                case 'PointLight':
                  c = {
                    shadowIntensity: 1,
                    shadowBias: 0,
                    shadowNormalBias: 0,
                    shadowRadius: 1,
                    shadowMapSize: new ao(),
                    shadowCameraNear: 1,
                    shadowCameraFar: 1e3,
                  };
              }
              return ((b[a.id] = c), c);
            },
          }),
        e = {
          version: 0,
          hash: {
            directionalLength: -1,
            pointLength: -1,
            spotLength: -1,
            rectAreaLength: -1,
            hemiLength: -1,
            numDirectionalShadows: -1,
            numPointShadows: -1,
            numSpotShadows: -1,
            numSpotMaps: -1,
            numLightProbes: -1,
          },
          ambient: [0, 0, 0],
          probe: [],
          directional: [],
          directionalShadow: [],
          directionalShadowMap: [],
          directionalShadowMatrix: [],
          spot: [],
          spotLightMap: [],
          spotShadow: [],
          spotShadowMap: [],
          spotLightMatrix: [],
          rectArea: [],
          rectAreaLTC1: null,
          rectAreaLTC2: null,
          point: [],
          pointShadow: [],
          pointShadowMap: [],
          pointShadowMatrix: [],
          hemi: [],
          numSpotLightShadowsWithMaps: 0,
          numLightProbes: 0,
        };
      for (let a = 0; a < 9; a++) e.probe.push(new aq());
      let f = new aq(),
        g = new bd(),
        h = new bd();
      return {
        setup: function (b) {
          let f = 0,
            g = 0,
            h = 0;
          for (let a = 0; a < 9; a++) e.probe[a].set(0, 0, 0);
          let i = 0,
            j = 0,
            k = 0,
            l = 0,
            m = 0,
            n = 0,
            o = 0,
            p = 0,
            q = 0,
            r = 0,
            s = 0;
          b.sort(kc);
          for (let a = 0, t = b.length; a < t; a++) {
            let t = b[a],
              u = t.color,
              v = t.intensity,
              w = t.distance,
              x = null;
            if (
              (t.shadow &&
                t.shadow.map &&
                (x =
                  1030 === t.shadow.map.texture.format
                    ? t.shadow.map.texture
                    : t.shadow.map.depthTexture || t.shadow.map.texture),
              t.isAmbientLight)
            )
              ((f += u.r * v), (g += u.g * v), (h += u.b * v));
            else if (t.isLightProbe) {
              for (let a = 0; a < 9; a++)
                e.probe[a].addScaledVector(t.sh.coefficients[a], v);
              s++;
            } else if (t.isDirectionalLight) {
              let a = c.get(t);
              if (
                (a.color.copy(t.color).multiplyScalar(t.intensity),
                t.castShadow)
              ) {
                let a = t.shadow,
                  b = d.get(t);
                ((b.shadowIntensity = a.intensity),
                  (b.shadowBias = a.bias),
                  (b.shadowNormalBias = a.normalBias),
                  (b.shadowRadius = a.radius),
                  (b.shadowMapSize = a.mapSize),
                  (e.directionalShadow[i] = b),
                  (e.directionalShadowMap[i] = x),
                  (e.directionalShadowMatrix[i] = t.shadow.matrix),
                  n++);
              }
              ((e.directional[i] = a), i++);
            } else if (t.isSpotLight) {
              let a = c.get(t);
              (a.position.setFromMatrixPosition(t.matrixWorld),
                a.color.copy(u).multiplyScalar(v),
                (a.distance = w),
                (a.coneCos = Math.cos(t.angle)),
                (a.penumbraCos = Math.cos(t.angle * (1 - t.penumbra))),
                (a.decay = t.decay),
                (e.spot[k] = a));
              let b = t.shadow;
              if (
                (t.map &&
                  ((e.spotLightMap[q] = t.map),
                  q++,
                  b.updateMatrices(t),
                  t.castShadow && r++),
                (e.spotLightMatrix[k] = b.matrix),
                t.castShadow)
              ) {
                let a = d.get(t);
                ((a.shadowIntensity = b.intensity),
                  (a.shadowBias = b.bias),
                  (a.shadowNormalBias = b.normalBias),
                  (a.shadowRadius = b.radius),
                  (a.shadowMapSize = b.mapSize),
                  (e.spotShadow[k] = a),
                  (e.spotShadowMap[k] = x),
                  p++);
              }
              k++;
            } else if (t.isRectAreaLight) {
              let a = c.get(t);
              (a.color.copy(u).multiplyScalar(v),
                a.halfWidth.set(0.5 * t.width, 0, 0),
                a.halfHeight.set(0, 0.5 * t.height, 0),
                (e.rectArea[l] = a),
                l++);
            } else if (t.isPointLight) {
              let a = c.get(t);
              if (
                (a.color.copy(t.color).multiplyScalar(t.intensity),
                (a.distance = t.distance),
                (a.decay = t.decay),
                t.castShadow)
              ) {
                let a = t.shadow,
                  b = d.get(t);
                ((b.shadowIntensity = a.intensity),
                  (b.shadowBias = a.bias),
                  (b.shadowNormalBias = a.normalBias),
                  (b.shadowRadius = a.radius),
                  (b.shadowMapSize = a.mapSize),
                  (b.shadowCameraNear = a.camera.near),
                  (b.shadowCameraFar = a.camera.far),
                  (e.pointShadow[j] = b),
                  (e.pointShadowMap[j] = x),
                  (e.pointShadowMatrix[j] = t.shadow.matrix),
                  o++);
              }
              ((e.point[j] = a), j++);
            } else if (t.isHemisphereLight) {
              let a = c.get(t);
              (a.skyColor.copy(t.color).multiplyScalar(v),
                a.groundColor.copy(t.groundColor).multiplyScalar(v),
                (e.hemi[m] = a),
                m++);
            }
          }
          (l > 0 &&
            (!0 === a.has('OES_texture_float_linear')
              ? ((e.rectAreaLTC1 = id.LTC_FLOAT_1),
                (e.rectAreaLTC2 = id.LTC_FLOAT_2))
              : ((e.rectAreaLTC1 = id.LTC_HALF_1),
                (e.rectAreaLTC2 = id.LTC_HALF_2))),
            (e.ambient[0] = f),
            (e.ambient[1] = g),
            (e.ambient[2] = h));
          let t = e.hash;
          (t.directionalLength !== i ||
            t.pointLength !== j ||
            t.spotLength !== k ||
            t.rectAreaLength !== l ||
            t.hemiLength !== m ||
            t.numDirectionalShadows !== n ||
            t.numPointShadows !== o ||
            t.numSpotShadows !== p ||
            t.numSpotMaps !== q ||
            t.numLightProbes !== s) &&
            ((e.directional.length = i),
            (e.spot.length = k),
            (e.rectArea.length = l),
            (e.point.length = j),
            (e.hemi.length = m),
            (e.directionalShadow.length = n),
            (e.directionalShadowMap.length = n),
            (e.pointShadow.length = o),
            (e.pointShadowMap.length = o),
            (e.spotShadow.length = p),
            (e.spotShadowMap.length = p),
            (e.directionalShadowMatrix.length = n),
            (e.pointShadowMatrix.length = o),
            (e.spotLightMatrix.length = p + q - r),
            (e.spotLightMap.length = q),
            (e.numSpotLightShadowsWithMaps = r),
            (e.numLightProbes = s),
            (t.directionalLength = i),
            (t.pointLength = j),
            (t.spotLength = k),
            (t.rectAreaLength = l),
            (t.hemiLength = m),
            (t.numDirectionalShadows = n),
            (t.numPointShadows = o),
            (t.numSpotShadows = p),
            (t.numSpotMaps = q),
            (t.numLightProbes = s),
            (e.version = kb++));
        },
        setupView: function (a, b) {
          let c = 0,
            d = 0,
            i = 0,
            j = 0,
            k = 0,
            l = b.matrixWorldInverse;
          for (let b = 0, m = a.length; b < m; b++) {
            let m = a[b];
            if (m.isDirectionalLight) {
              let a = e.directional[c];
              (a.direction.setFromMatrixPosition(m.matrixWorld),
                f.setFromMatrixPosition(m.target.matrixWorld),
                a.direction.sub(f),
                a.direction.transformDirection(l),
                c++);
            } else if (m.isSpotLight) {
              let a = e.spot[i];
              (a.position.setFromMatrixPosition(m.matrixWorld),
                a.position.applyMatrix4(l),
                a.direction.setFromMatrixPosition(m.matrixWorld),
                f.setFromMatrixPosition(m.target.matrixWorld),
                a.direction.sub(f),
                a.direction.transformDirection(l),
                i++);
            } else if (m.isRectAreaLight) {
              let a = e.rectArea[j];
              (a.position.setFromMatrixPosition(m.matrixWorld),
                a.position.applyMatrix4(l),
                h.identity(),
                g.copy(m.matrixWorld),
                g.premultiply(l),
                h.extractRotation(g),
                a.halfWidth.set(0.5 * m.width, 0, 0),
                a.halfHeight.set(0, 0.5 * m.height, 0),
                a.halfWidth.applyMatrix4(h),
                a.halfHeight.applyMatrix4(h),
                j++);
            } else if (m.isPointLight) {
              let a = e.point[d];
              (a.position.setFromMatrixPosition(m.matrixWorld),
                a.position.applyMatrix4(l),
                d++);
            } else if (m.isHemisphereLight) {
              let a = e.hemi[k];
              (a.direction.setFromMatrixPosition(m.matrixWorld),
                a.direction.transformDirection(l),
                k++);
            }
          }
        },
        state: e,
      };
    }
    function ke(a) {
      let b = new kd(a),
        c = [],
        d = [],
        e = {
          lightsArray: c,
          shadowsArray: d,
          camera: null,
          lights: b,
          transmissionRenderTarget: {},
        };
      return {
        init: function (a) {
          ((e.camera = a), (c.length = 0), (d.length = 0));
        },
        state: e,
        setupLights: function () {
          b.setup(c);
        },
        setupLightsView: function (a) {
          b.setupView(c, a);
        },
        pushLight: function (a) {
          c.push(a);
        },
        pushShadow: function (a) {
          d.push(a);
        },
      };
    }
    function kf(a) {
      let b = new WeakMap();
      return {
        get: function (c, d = 0) {
          let e,
            f = b.get(c);
          return (
            void 0 === f
              ? ((e = new ke(a)), b.set(c, [e]))
              : d >= f.length
                ? ((e = new ke(a)), f.push(e))
                : (e = f[d]),
            e
          );
        },
        dispose: function () {
          b = new WeakMap();
        },
      };
    }
    let kg = [
        new aq(1, 0, 0),
        new aq(-1, 0, 0),
        new aq(0, 1, 0),
        new aq(0, -1, 0),
        new aq(0, 0, 1),
        new aq(0, 0, -1),
      ],
      kh = [
        new aq(0, -1, 0),
        new aq(0, -1, 0),
        new aq(0, 0, 1),
        new aq(0, 0, -1),
        new aq(0, -1, 0),
        new aq(0, -1, 0),
      ],
      ki = new bd(),
      kj = new aq(),
      kk = new aq();
    function kl(a, b, c) {
      let d = new dL(),
        e = new ao(),
        f = new ao(),
        g = new aH(),
        h = new fN(),
        i = new fO(),
        j = {},
        k = c.maxTextureSize,
        l = { 0: 1, 1: 0, 2: 2 },
        m = new cH({
          defines: { VSM_SAMPLES: 8 },
          uniforms: {
            shadow_pass: { value: null },
            resolution: { value: new ao() },
            radius: { value: 4 },
          },
          vertexShader:
            'void main() {\n	gl_Position = vec4( position, 1.0 );\n}',
          fragmentShader:
            'uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );\n	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );\n}',
        }),
        n = m.clone();
      n.defines.HORIZONTAL_PASS = 1;
      let o = new co();
      o.setAttribute(
        'position',
        new b7(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3)
      );
      let p = new cA(o, m),
        q = this;
      ((this.enabled = !1),
        (this.autoUpdate = !0),
        (this.needsUpdate = !1),
        (this.type = 1));
      let r = this.type;
      function s(b, c, d, e) {
        let f = null,
          g =
            !0 === d.isPointLight
              ? b.customDistanceMaterial
              : b.customDepthMaterial;
        if (void 0 !== g) f = g;
        else if (
          ((f = !0 === d.isPointLight ? i : h),
          (a.localClippingEnabled &&
            !0 === c.clipShadows &&
            Array.isArray(c.clippingPlanes) &&
            0 !== c.clippingPlanes.length) ||
            (c.displacementMap && 0 !== c.displacementScale) ||
            (c.alphaMap && c.alphaTest > 0) ||
            (c.map && c.alphaTest > 0) ||
            !0 === c.alphaToCoverage)
        ) {
          let a = f.uuid,
            b = c.uuid,
            d = j[a];
          void 0 === d && ((d = {}), (j[a] = d));
          let e = d[b];
          (void 0 === e &&
            ((e = f.clone()), (d[b] = e), c.addEventListener('dispose', t)),
            (f = e));
        }
        return (
          (f.visible = c.visible),
          (f.wireframe = c.wireframe),
          3 === e
            ? (f.side = null !== c.shadowSide ? c.shadowSide : c.side)
            : (f.side = null !== c.shadowSide ? c.shadowSide : l[c.side]),
          (f.alphaMap = c.alphaMap),
          (f.alphaTest = !0 === c.alphaToCoverage ? 0.5 : c.alphaTest),
          (f.map = c.map),
          (f.clipShadows = c.clipShadows),
          (f.clippingPlanes = c.clippingPlanes),
          (f.clipIntersection = c.clipIntersection),
          (f.displacementMap = c.displacementMap),
          (f.displacementScale = c.displacementScale),
          (f.displacementBias = c.displacementBias),
          (f.wireframeLinewidth = c.wireframeLinewidth),
          (f.linewidth = c.linewidth),
          !0 === d.isPointLight &&
            !0 === f.isMeshDistanceMaterial &&
            (a.properties.get(f).light = d),
          f
        );
      }
      function t(a) {
        for (let b in (a.target.removeEventListener('dispose', t), j)) {
          let c = j[b],
            d = a.target.uuid;
          d in c && (c[d].dispose(), delete c[d]);
        }
      }
      this.render = function (c, h, i) {
        if (
          !1 === q.enabled ||
          (!1 === q.autoUpdate && !1 === q.needsUpdate) ||
          0 === c.length
        )
          return;
        2 === c.type &&
          (_(
            'WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead.'
          ),
          (c.type = 1));
        let j = a.getRenderTarget(),
          l = a.getActiveCubeFace(),
          o = a.getActiveMipmapLevel(),
          t = a.state;
        (t.setBlending(0),
          !0 === t.buffers.depth.getReversed()
            ? t.buffers.color.setClear(0, 0, 0, 0)
            : t.buffers.color.setClear(1, 1, 1, 1),
          t.buffers.depth.setTest(!0),
          t.setScissorTest(!1));
        let u = r !== this.type;
        u &&
          h.traverse(function (a) {
            a.material &&
              (Array.isArray(a.material)
                ? a.material.forEach((a) => (a.needsUpdate = !0))
                : (a.material.needsUpdate = !0));
          });
        for (let j = 0, l = c.length; j < l; j++) {
          let l = c[j],
            o = l.shadow;
          if (void 0 === o) {
            _('WebGLShadowMap:', l, 'has no shadow.');
            continue;
          }
          if (!1 === o.autoUpdate && !1 === o.needsUpdate) continue;
          e.copy(o.mapSize);
          let q = o.getFrameExtents();
          if (
            (e.multiply(q),
            f.copy(o.mapSize),
            (e.x > k || e.y > k) &&
              (e.x > k &&
                ((f.x = Math.floor(k / q.x)),
                (e.x = f.x * q.x),
                (o.mapSize.x = f.x)),
              e.y > k &&
                ((f.y = Math.floor(k / q.y)),
                (e.y = f.y * q.y),
                (o.mapSize.y = f.y))),
            null === o.map || !0 === u)
          ) {
            if (
              (null !== o.map &&
                (null !== o.map.depthTexture &&
                  (o.map.depthTexture.dispose(), (o.map.depthTexture = null)),
                o.map.dispose()),
              3 === this.type)
            ) {
              if (l.isPointLight) {
                _(
                  'WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.'
                );
                continue;
              }
              ((o.map = new aJ(e.x, e.y, {
                format: 1030,
                type: 1016,
                minFilter: 1006,
                magFilter: 1006,
                generateMipmaps: !1,
              })),
                (o.map.texture.name = l.name + '.shadowMap'),
                (o.map.depthTexture = new ew(e.x, e.y, 1015)),
                (o.map.depthTexture.name = l.name + '.shadowMapDepth'),
                (o.map.depthTexture.format = 1026),
                (o.map.depthTexture.compareFunction = null),
                (o.map.depthTexture.minFilter = 1003),
                (o.map.depthTexture.magFilter = 1003));
            } else {
              (l.isPointLight
                ? ((o.map = new cP(e.x)),
                  (o.map.depthTexture = new ex(e.x, 1014)))
                : ((o.map = new aJ(e.x, e.y)),
                  (o.map.depthTexture = new ew(e.x, e.y, 1014))),
                (o.map.depthTexture.name = l.name + '.shadowMap'),
                (o.map.depthTexture.format = 1026));
              let b = a.state.buffers.depth.getReversed();
              1 === this.type
                ? ((o.map.depthTexture.compareFunction = b ? 518 : 515),
                  (o.map.depthTexture.minFilter = 1006),
                  (o.map.depthTexture.magFilter = 1006))
                : ((o.map.depthTexture.compareFunction = null),
                  (o.map.depthTexture.minFilter = 1003),
                  (o.map.depthTexture.magFilter = 1003));
            }
            o.camera.updateProjectionMatrix();
          }
          let r = o.map.isWebGLCubeRenderTarget ? 6 : 1;
          for (let c = 0; c < r; c++) {
            if (o.map.isWebGLCubeRenderTarget)
              (a.setRenderTarget(o.map, c), a.clear());
            else {
              0 === c && (a.setRenderTarget(o.map), a.clear());
              let b = o.getViewport(c);
              (g.set(f.x * b.x, f.y * b.y, f.x * b.z, f.y * b.w),
                t.viewport(g));
            }
            if (l.isPointLight) {
              let a = o.camera,
                b = o.matrix,
                d = l.distance || a.far;
              (d !== a.far && ((a.far = d), a.updateProjectionMatrix()),
                kj.setFromMatrixPosition(l.matrixWorld),
                a.position.copy(kj),
                kk.copy(a.position),
                kk.add(kg[c]),
                a.up.copy(kh[c]),
                a.lookAt(kk),
                a.updateMatrixWorld(),
                b.makeTranslation(-kj.x, -kj.y, -kj.z),
                ki.multiplyMatrices(a.projectionMatrix, a.matrixWorldInverse),
                o._frustum.setFromProjectionMatrix(
                  ki,
                  a.coordinateSystem,
                  a.reversedDepth
                ));
            } else o.updateMatrices(l);
            ((d = o.getFrustum()),
              (function c(e, f, g, h, i) {
                if (!1 === e.visible) return;
                if (
                  e.layers.test(f.layers) &&
                  (e.isMesh || e.isLine || e.isPoints) &&
                  (e.castShadow || (e.receiveShadow && 3 === i)) &&
                  (!e.frustumCulled || d.intersectsObject(e))
                ) {
                  e.modelViewMatrix.multiplyMatrices(
                    g.matrixWorldInverse,
                    e.matrixWorld
                  );
                  let c = b.update(e),
                    d = e.material;
                  if (Array.isArray(d)) {
                    let b = c.groups;
                    for (let j = 0, k = b.length; j < k; j++) {
                      let k = b[j],
                        l = d[k.materialIndex];
                      if (l && l.visible) {
                        let b = s(e, l, h, i);
                        (e.onBeforeShadow(a, e, f, g, c, b, k),
                          a.renderBufferDirect(g, null, c, b, e, k),
                          e.onAfterShadow(a, e, f, g, c, b, k));
                      }
                    }
                  } else if (d.visible) {
                    let b = s(e, d, h, i);
                    (e.onBeforeShadow(a, e, f, g, c, b, null),
                      a.renderBufferDirect(g, null, c, b, e, null),
                      e.onAfterShadow(a, e, f, g, c, b, null));
                  }
                }
                let j = e.children;
                for (let a = 0, b = j.length; a < b; a++) c(j[a], f, g, h, i);
              })(h, i, o.camera, l, this.type));
          }
          (!0 !== o.isPointLightShadow &&
            3 === this.type &&
            (function (c, d) {
              let f = b.update(p);
              (m.defines.VSM_SAMPLES !== c.blurSamples &&
                ((m.defines.VSM_SAMPLES = c.blurSamples),
                (n.defines.VSM_SAMPLES = c.blurSamples),
                (m.needsUpdate = !0),
                (n.needsUpdate = !0)),
                null === c.mapPass &&
                  (c.mapPass = new aJ(e.x, e.y, { format: 1030, type: 1016 })),
                (m.uniforms.shadow_pass.value = c.map.depthTexture),
                (m.uniforms.resolution.value = c.mapSize),
                (m.uniforms.radius.value = c.radius),
                a.setRenderTarget(c.mapPass),
                a.clear(),
                a.renderBufferDirect(d, null, f, m, p, null),
                (n.uniforms.shadow_pass.value = c.mapPass.texture),
                (n.uniforms.resolution.value = c.mapSize),
                (n.uniforms.radius.value = c.radius),
                a.setRenderTarget(c.map),
                a.clear(),
                a.renderBufferDirect(d, null, f, n, p, null));
            })(o, i),
            (o.needsUpdate = !1));
        }
        ((r = this.type), (q.needsUpdate = !1), a.setRenderTarget(j, l, o));
      };
    }
    let km = { 0: 1, 2: 6, 4: 7, 3: 5, 1: 0, 6: 2, 7: 4, 5: 3 };
    function kn(a, b) {
      let c = new (function () {
          let b = !1,
            c = new aH(),
            d = null,
            e = new aH(0, 0, 0, 0);
          return {
            setMask: function (c) {
              d === c || b || (a.colorMask(c, c, c, c), (d = c));
            },
            setLocked: function (a) {
              b = a;
            },
            setClear: function (b, d, f, g, h) {
              (!0 === h && ((b *= g), (d *= g), (f *= g)),
                c.set(b, d, f, g),
                !1 === e.equals(c) && (a.clearColor(b, d, f, g), e.copy(c)));
            },
            reset: function () {
              ((b = !1), (d = null), e.set(-1, 0, 0, 0));
            },
          };
        })(),
        d = new (function () {
          let c = !1,
            d = !1,
            e = null,
            f = null,
            g = null;
          return {
            setReversed: function (a) {
              if (d !== a) {
                let c = b.get('EXT_clip_control');
                (a
                  ? c.clipControlEXT(c.LOWER_LEFT_EXT, c.ZERO_TO_ONE_EXT)
                  : c.clipControlEXT(
                      c.LOWER_LEFT_EXT,
                      c.NEGATIVE_ONE_TO_ONE_EXT
                    ),
                  (d = a));
                let e = g;
                ((g = null), this.setClear(e));
              }
            },
            getReversed: function () {
              return d;
            },
            setTest: function (b) {
              b ? N(a.DEPTH_TEST) : O(a.DEPTH_TEST);
            },
            setMask: function (b) {
              e === b || c || (a.depthMask(b), (e = b));
            },
            setFunc: function (b) {
              if ((d && (b = km[b]), f !== b)) {
                switch (b) {
                  case 0:
                    a.depthFunc(a.NEVER);
                    break;
                  case 1:
                    a.depthFunc(a.ALWAYS);
                    break;
                  case 2:
                    a.depthFunc(a.LESS);
                    break;
                  case 3:
                  default:
                    a.depthFunc(a.LEQUAL);
                    break;
                  case 4:
                    a.depthFunc(a.EQUAL);
                    break;
                  case 5:
                    a.depthFunc(a.GEQUAL);
                    break;
                  case 6:
                    a.depthFunc(a.GREATER);
                    break;
                  case 7:
                    a.depthFunc(a.NOTEQUAL);
                }
                f = b;
              }
            },
            setLocked: function (a) {
              c = a;
            },
            setClear: function (b) {
              g !== b && (d && (b = 1 - b), a.clearDepth(b), (g = b));
            },
            reset: function () {
              ((c = !1), (e = null), (f = null), (g = null), (d = !1));
            },
          };
        })(),
        e = new (function () {
          let b = !1,
            c = null,
            d = null,
            e = null,
            f = null,
            g = null,
            h = null,
            i = null,
            j = null;
          return {
            setTest: function (c) {
              b || (c ? N(a.STENCIL_TEST) : O(a.STENCIL_TEST));
            },
            setMask: function (d) {
              c === d || b || (a.stencilMask(d), (c = d));
            },
            setFunc: function (b, c, g) {
              (d !== b || e !== c || f !== g) &&
                (a.stencilFunc(b, c, g), (d = b), (e = c), (f = g));
            },
            setOp: function (b, c, d) {
              (g !== b || h !== c || i !== d) &&
                (a.stencilOp(b, c, d), (g = b), (h = c), (i = d));
            },
            setLocked: function (a) {
              b = a;
            },
            setClear: function (b) {
              j !== b && (a.clearStencil(b), (j = b));
            },
            reset: function () {
              ((b = !1),
                (c = null),
                (d = null),
                (e = null),
                (f = null),
                (g = null),
                (h = null),
                (i = null),
                (j = null));
            },
          };
        })(),
        f = new WeakMap(),
        g = new WeakMap(),
        h = {},
        i = {},
        j = new WeakMap(),
        k = [],
        l = null,
        m = !1,
        n = null,
        o = null,
        p = null,
        q = null,
        r = null,
        s = null,
        t = null,
        u = new bX(0, 0, 0),
        v = 0,
        w = !1,
        x = null,
        y = null,
        z = null,
        A = null,
        B = null,
        C = a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
        D = !1,
        E = a.getParameter(a.VERSION);
      -1 !== E.indexOf('WebGL')
        ? (D = parseFloat(/^WebGL (\d)/.exec(E)[1]) >= 1)
        : -1 !== E.indexOf('OpenGL ES') &&
          (D = parseFloat(/^OpenGL ES (\d)/.exec(E)[1]) >= 2);
      let F = null,
        G = {},
        H = a.getParameter(a.SCISSOR_BOX),
        I = a.getParameter(a.VIEWPORT),
        J = new aH().fromArray(H),
        K = new aH().fromArray(I);
      function L(b, c, d, e) {
        let f = new Uint8Array(4),
          g = a.createTexture();
        (a.bindTexture(b, g),
          a.texParameteri(b, a.TEXTURE_MIN_FILTER, a.NEAREST),
          a.texParameteri(b, a.TEXTURE_MAG_FILTER, a.NEAREST));
        for (let g = 0; g < d; g++)
          b === a.TEXTURE_3D || b === a.TEXTURE_2D_ARRAY
            ? a.texImage3D(c, 0, a.RGBA, 1, 1, e, 0, a.RGBA, a.UNSIGNED_BYTE, f)
            : a.texImage2D(
                c + g,
                0,
                a.RGBA,
                1,
                1,
                0,
                a.RGBA,
                a.UNSIGNED_BYTE,
                f
              );
        return g;
      }
      let M = {};
      function N(b) {
        !0 !== h[b] && (a.enable(b), (h[b] = !0));
      }
      function O(b) {
        !1 !== h[b] && (a.disable(b), (h[b] = !1));
      }
      ((M[a.TEXTURE_2D] = L(a.TEXTURE_2D, a.TEXTURE_2D, 1)),
        (M[a.TEXTURE_CUBE_MAP] = L(
          a.TEXTURE_CUBE_MAP,
          a.TEXTURE_CUBE_MAP_POSITIVE_X,
          6
        )),
        (M[a.TEXTURE_2D_ARRAY] = L(
          a.TEXTURE_2D_ARRAY,
          a.TEXTURE_2D_ARRAY,
          1,
          1
        )),
        (M[a.TEXTURE_3D] = L(a.TEXTURE_3D, a.TEXTURE_3D, 1, 1)),
        c.setClear(0, 0, 0, 1),
        d.setClear(1),
        e.setClear(0),
        N(a.DEPTH_TEST),
        d.setFunc(3),
        S(!1),
        T(1),
        N(a.CULL_FACE),
        R(0));
      let P = {
        100: a.FUNC_ADD,
        101: a.FUNC_SUBTRACT,
        102: a.FUNC_REVERSE_SUBTRACT,
      };
      ((P[103] = a.MIN), (P[104] = a.MAX));
      let Q = {
        200: a.ZERO,
        201: a.ONE,
        202: a.SRC_COLOR,
        204: a.SRC_ALPHA,
        210: a.SRC_ALPHA_SATURATE,
        208: a.DST_COLOR,
        206: a.DST_ALPHA,
        203: a.ONE_MINUS_SRC_COLOR,
        205: a.ONE_MINUS_SRC_ALPHA,
        209: a.ONE_MINUS_DST_COLOR,
        207: a.ONE_MINUS_DST_ALPHA,
        211: a.CONSTANT_COLOR,
        212: a.ONE_MINUS_CONSTANT_COLOR,
        213: a.CONSTANT_ALPHA,
        214: a.ONE_MINUS_CONSTANT_ALPHA,
      };
      function R(b, c, d, e, f, g, h, i, j, k) {
        if (0 === b) {
          !0 === m && (O(a.BLEND), (m = !1));
          return;
        }
        if ((!1 === m && (N(a.BLEND), (m = !0)), 5 !== b)) {
          if (b !== n || k !== w) {
            if (
              ((100 !== o || 100 !== r) &&
                (a.blendEquation(a.FUNC_ADD), (o = 100), (r = 100)),
              k)
            )
              switch (b) {
                case 1:
                  a.blendFuncSeparate(
                    a.ONE,
                    a.ONE_MINUS_SRC_ALPHA,
                    a.ONE,
                    a.ONE_MINUS_SRC_ALPHA
                  );
                  break;
                case 2:
                  a.blendFunc(a.ONE, a.ONE);
                  break;
                case 3:
                  a.blendFuncSeparate(
                    a.ZERO,
                    a.ONE_MINUS_SRC_COLOR,
                    a.ZERO,
                    a.ONE
                  );
                  break;
                case 4:
                  a.blendFuncSeparate(
                    a.DST_COLOR,
                    a.ONE_MINUS_SRC_ALPHA,
                    a.ZERO,
                    a.ONE
                  );
                  break;
                default:
                  aa('WebGLState: Invalid blending: ', b);
              }
            else
              switch (b) {
                case 1:
                  a.blendFuncSeparate(
                    a.SRC_ALPHA,
                    a.ONE_MINUS_SRC_ALPHA,
                    a.ONE,
                    a.ONE_MINUS_SRC_ALPHA
                  );
                  break;
                case 2:
                  a.blendFuncSeparate(a.SRC_ALPHA, a.ONE, a.ONE, a.ONE);
                  break;
                case 3:
                  aa(
                    'WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true'
                  );
                  break;
                case 4:
                  aa(
                    'WebGLState: MultiplyBlending requires material.premultipliedAlpha = true'
                  );
                  break;
                default:
                  aa('WebGLState: Invalid blending: ', b);
              }
            ((p = null),
              (q = null),
              (s = null),
              (t = null),
              u.set(0, 0, 0),
              (v = 0),
              (n = b),
              (w = k));
          }
          return;
        }
        ((f = f || c),
          (g = g || d),
          (h = h || e),
          (c !== o || f !== r) &&
            (a.blendEquationSeparate(P[c], P[f]), (o = c), (r = f)),
          (d !== p || e !== q || g !== s || h !== t) &&
            (a.blendFuncSeparate(Q[d], Q[e], Q[g], Q[h]),
            (p = d),
            (q = e),
            (s = g),
            (t = h)),
          (!1 === i.equals(u) || j !== v) &&
            (a.blendColor(i.r, i.g, i.b, j), u.copy(i), (v = j)),
          (n = b),
          (w = !1));
      }
      function S(b) {
        x !== b && (b ? a.frontFace(a.CW) : a.frontFace(a.CCW), (x = b));
      }
      function T(b) {
        (0 !== b
          ? (N(a.CULL_FACE),
            b !== y &&
              (1 === b
                ? a.cullFace(a.BACK)
                : 2 === b
                  ? a.cullFace(a.FRONT)
                  : a.cullFace(a.FRONT_AND_BACK)))
          : O(a.CULL_FACE),
          (y = b));
      }
      function U(b, c, d) {
        b
          ? (N(a.POLYGON_OFFSET_FILL),
            (A !== c || B !== d) && (a.polygonOffset(c, d), (A = c), (B = d)))
          : O(a.POLYGON_OFFSET_FILL);
      }
      return {
        buffers: { color: c, depth: d, stencil: e },
        enable: N,
        disable: O,
        bindFramebuffer: function (b, c) {
          return (
            i[b] !== c &&
            (a.bindFramebuffer(b, c),
            (i[b] = c),
            b === a.DRAW_FRAMEBUFFER && (i[a.FRAMEBUFFER] = c),
            b === a.FRAMEBUFFER && (i[a.DRAW_FRAMEBUFFER] = c),
            !0)
          );
        },
        drawBuffers: function (b, c) {
          let d = k,
            e = !1;
          if (b) {
            void 0 === (d = j.get(c)) && ((d = []), j.set(c, d));
            let f = b.textures;
            if (d.length !== f.length || d[0] !== a.COLOR_ATTACHMENT0) {
              for (let b = 0, c = f.length; b < c; b++)
                d[b] = a.COLOR_ATTACHMENT0 + b;
              ((d.length = f.length), (e = !0));
            }
          } else d[0] !== a.BACK && ((d[0] = a.BACK), (e = !0));
          e && a.drawBuffers(d);
        },
        useProgram: function (b) {
          return l !== b && (a.useProgram(b), (l = b), !0);
        },
        setBlending: R,
        setMaterial: function (b, f) {
          2 === b.side ? O(a.CULL_FACE) : N(a.CULL_FACE);
          let g = 1 === b.side;
          (f && (g = !g),
            S(g),
            1 === b.blending && !1 === b.transparent
              ? R(0)
              : R(
                  b.blending,
                  b.blendEquation,
                  b.blendSrc,
                  b.blendDst,
                  b.blendEquationAlpha,
                  b.blendSrcAlpha,
                  b.blendDstAlpha,
                  b.blendColor,
                  b.blendAlpha,
                  b.premultipliedAlpha
                ),
            d.setFunc(b.depthFunc),
            d.setTest(b.depthTest),
            d.setMask(b.depthWrite),
            c.setMask(b.colorWrite));
          let h = b.stencilWrite;
          (e.setTest(h),
            h &&
              (e.setMask(b.stencilWriteMask),
              e.setFunc(b.stencilFunc, b.stencilRef, b.stencilFuncMask),
              e.setOp(b.stencilFail, b.stencilZFail, b.stencilZPass)),
            U(b.polygonOffset, b.polygonOffsetFactor, b.polygonOffsetUnits),
            !0 === b.alphaToCoverage
              ? N(a.SAMPLE_ALPHA_TO_COVERAGE)
              : O(a.SAMPLE_ALPHA_TO_COVERAGE));
        },
        setFlipSided: S,
        setCullFace: T,
        setLineWidth: function (b) {
          b !== z && (D && a.lineWidth(b), (z = b));
        },
        setPolygonOffset: U,
        setScissorTest: function (b) {
          b ? N(a.SCISSOR_TEST) : O(a.SCISSOR_TEST);
        },
        activeTexture: function (b) {
          (void 0 === b && (b = a.TEXTURE0 + C - 1),
            F !== b && (a.activeTexture(b), (F = b)));
        },
        bindTexture: function (b, c, d) {
          void 0 === d && (d = null === F ? a.TEXTURE0 + C - 1 : F);
          let e = G[d];
          (void 0 === e &&
            ((e = { type: void 0, texture: void 0 }), (G[d] = e)),
            (e.type !== b || e.texture !== c) &&
              (F !== d && (a.activeTexture(d), (F = d)),
              a.bindTexture(b, c || M[b]),
              (e.type = b),
              (e.texture = c)));
        },
        unbindTexture: function () {
          let b = G[F];
          void 0 !== b &&
            void 0 !== b.type &&
            (a.bindTexture(b.type, null),
            (b.type = void 0),
            (b.texture = void 0));
        },
        compressedTexImage2D: function () {
          try {
            a.compressedTexImage2D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        compressedTexImage3D: function () {
          try {
            a.compressedTexImage3D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        texImage2D: function () {
          try {
            a.texImage2D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        texImage3D: function () {
          try {
            a.texImage3D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        updateUBOMapping: function (b, c) {
          let d = g.get(c);
          void 0 === d && ((d = new WeakMap()), g.set(c, d));
          let e = d.get(b);
          void 0 === e &&
            ((e = a.getUniformBlockIndex(c, b.name)), d.set(b, e));
        },
        uniformBlockBinding: function (b, c) {
          let d = g.get(c).get(b);
          f.get(c) !== d &&
            (a.uniformBlockBinding(c, d, b.__bindingPointIndex), f.set(c, d));
        },
        texStorage2D: function () {
          try {
            a.texStorage2D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        texStorage3D: function () {
          try {
            a.texStorage3D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        texSubImage2D: function () {
          try {
            a.texSubImage2D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        texSubImage3D: function () {
          try {
            a.texSubImage3D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        compressedTexSubImage2D: function () {
          try {
            a.compressedTexSubImage2D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        compressedTexSubImage3D: function () {
          try {
            a.compressedTexSubImage3D(...arguments);
          } catch (a) {
            aa('WebGLState:', a);
          }
        },
        scissor: function (b) {
          !1 === J.equals(b) && (a.scissor(b.x, b.y, b.z, b.w), J.copy(b));
        },
        viewport: function (b) {
          !1 === K.equals(b) && (a.viewport(b.x, b.y, b.z, b.w), K.copy(b));
        },
        reset: function () {
          (a.disable(a.BLEND),
            a.disable(a.CULL_FACE),
            a.disable(a.DEPTH_TEST),
            a.disable(a.POLYGON_OFFSET_FILL),
            a.disable(a.SCISSOR_TEST),
            a.disable(a.STENCIL_TEST),
            a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),
            a.blendEquation(a.FUNC_ADD),
            a.blendFunc(a.ONE, a.ZERO),
            a.blendFuncSeparate(a.ONE, a.ZERO, a.ONE, a.ZERO),
            a.blendColor(0, 0, 0, 0),
            a.colorMask(!0, !0, !0, !0),
            a.clearColor(0, 0, 0, 0),
            a.depthMask(!0),
            a.depthFunc(a.LESS),
            d.setReversed(!1),
            a.clearDepth(1),
            a.stencilMask(0xffffffff),
            a.stencilFunc(a.ALWAYS, 0, 0xffffffff),
            a.stencilOp(a.KEEP, a.KEEP, a.KEEP),
            a.clearStencil(0),
            a.cullFace(a.BACK),
            a.frontFace(a.CCW),
            a.polygonOffset(0, 0),
            a.activeTexture(a.TEXTURE0),
            a.bindFramebuffer(a.FRAMEBUFFER, null),
            a.bindFramebuffer(a.DRAW_FRAMEBUFFER, null),
            a.bindFramebuffer(a.READ_FRAMEBUFFER, null),
            a.useProgram(null),
            a.lineWidth(1),
            a.scissor(0, 0, a.canvas.width, a.canvas.height),
            a.viewport(0, 0, a.canvas.width, a.canvas.height),
            (h = {}),
            (F = null),
            (G = {}),
            (i = {}),
            (j = new WeakMap()),
            (k = []),
            (l = null),
            (m = !1),
            (n = null),
            (o = null),
            (p = null),
            (q = null),
            (r = null),
            (s = null),
            (t = null),
            (u = new bX(0, 0, 0)),
            (v = 0),
            (w = !1),
            (x = null),
            (y = null),
            (z = null),
            (A = null),
            (B = null),
            J.set(0, 0, a.canvas.width, a.canvas.height),
            K.set(0, 0, a.canvas.width, a.canvas.height),
            c.reset(),
            d.reset(),
            e.reset());
        },
      };
    }
    function ko(a, b, c, d, e, f, g) {
      let h,
        i = b.has('WEBGL_multisampled_render_to_texture')
          ? b.get('WEBGL_multisampled_render_to_texture')
          : null,
        j =
          'u' > typeof navigator && /OculusBrowser/g.test(navigator.userAgent),
        k = new ao(),
        l = new WeakMap(),
        m = new WeakMap(),
        n = !1;
      try {
        n =
          'u' > typeof OffscreenCanvas &&
          null !== new OffscreenCanvas(1, 1).getContext('2d');
      } catch (a) {}
      function o(a, b) {
        return n ? new OffscreenCanvas(a, b) : U('canvas');
      }
      function p(a, b, c) {
        let d = 1,
          e = T(a);
        if (
          ((e.width > c || e.height > c) &&
            (d = c / Math.max(e.width, e.height)),
          d < 1)
        )
          if (
            ('u' > typeof HTMLImageElement && a instanceof HTMLImageElement) ||
            ('u' > typeof HTMLCanvasElement &&
              a instanceof HTMLCanvasElement) ||
            ('u' > typeof ImageBitmap && a instanceof ImageBitmap) ||
            ('u' > typeof VideoFrame && a instanceof VideoFrame)
          ) {
            let c = Math.floor(d * e.width),
              f = Math.floor(d * e.height);
            void 0 === h && (h = o(c, f));
            let g = b ? o(c, f) : h;
            return (
              (g.width = c),
              (g.height = f),
              g.getContext('2d').drawImage(a, 0, 0, c, f),
              _(
                'WebGLRenderer: Texture has been resized from (' +
                  e.width +
                  'x' +
                  e.height +
                  ') to (' +
                  c +
                  'x' +
                  f +
                  ').'
              ),
              g
            );
          } else
            'data' in a &&
              _(
                'WebGLRenderer: Image in DataTexture is too big (' +
                  e.width +
                  'x' +
                  e.height +
                  ').'
              );
        return a;
      }
      function q(a) {
        return a.generateMipmaps;
      }
      function r(b) {
        a.generateMipmap(b);
      }
      function s(c, d, e, f, g = !1) {
        if (null !== c) {
          if (void 0 !== a[c]) return a[c];
          _(
            "WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
              c +
              "'"
          );
        }
        let h = d;
        if (
          (d === a.RED &&
            (e === a.FLOAT && (h = a.R32F),
            e === a.HALF_FLOAT && (h = a.R16F),
            e === a.UNSIGNED_BYTE && (h = a.R8)),
          d === a.RED_INTEGER &&
            (e === a.UNSIGNED_BYTE && (h = a.R8UI),
            e === a.UNSIGNED_SHORT && (h = a.R16UI),
            e === a.UNSIGNED_INT && (h = a.R32UI),
            e === a.BYTE && (h = a.R8I),
            e === a.SHORT && (h = a.R16I),
            e === a.INT && (h = a.R32I)),
          d === a.RG &&
            (e === a.FLOAT && (h = a.RG32F),
            e === a.HALF_FLOAT && (h = a.RG16F),
            e === a.UNSIGNED_BYTE && (h = a.RG8)),
          d === a.RG_INTEGER &&
            (e === a.UNSIGNED_BYTE && (h = a.RG8UI),
            e === a.UNSIGNED_SHORT && (h = a.RG16UI),
            e === a.UNSIGNED_INT && (h = a.RG32UI),
            e === a.BYTE && (h = a.RG8I),
            e === a.SHORT && (h = a.RG16I),
            e === a.INT && (h = a.RG32I)),
          d === a.RGB_INTEGER &&
            (e === a.UNSIGNED_BYTE && (h = a.RGB8UI),
            e === a.UNSIGNED_SHORT && (h = a.RGB16UI),
            e === a.UNSIGNED_INT && (h = a.RGB32UI),
            e === a.BYTE && (h = a.RGB8I),
            e === a.SHORT && (h = a.RGB16I),
            e === a.INT && (h = a.RGB32I)),
          d === a.RGBA_INTEGER &&
            (e === a.UNSIGNED_BYTE && (h = a.RGBA8UI),
            e === a.UNSIGNED_SHORT && (h = a.RGBA16UI),
            e === a.UNSIGNED_INT && (h = a.RGBA32UI),
            e === a.BYTE && (h = a.RGBA8I),
            e === a.SHORT && (h = a.RGBA16I),
            e === a.INT && (h = a.RGBA32I)),
          d === a.RGB &&
            (e === a.UNSIGNED_INT_5_9_9_9_REV && (h = a.RGB9_E5),
            e === a.UNSIGNED_INT_10F_11F_11F_REV && (h = a.R11F_G11F_B10F)),
          d === a.RGBA)
        ) {
          let b = g ? K : ax.getTransfer(f);
          (e === a.FLOAT && (h = a.RGBA32F),
            e === a.HALF_FLOAT && (h = a.RGBA16F),
            e === a.UNSIGNED_BYTE && (h = b === L ? a.SRGB8_ALPHA8 : a.RGBA8),
            e === a.UNSIGNED_SHORT_4_4_4_4 && (h = a.RGBA4),
            e === a.UNSIGNED_SHORT_5_5_5_1 && (h = a.RGB5_A1));
        }
        return (
          (h === a.R16F ||
            h === a.R32F ||
            h === a.RG16F ||
            h === a.RG32F ||
            h === a.RGBA16F ||
            h === a.RGBA32F) &&
            b.get('EXT_color_buffer_float'),
          h
        );
      }
      function t(b, c) {
        let d;
        return (
          b
            ? null === c || 1014 === c || 1020 === c
              ? (d = a.DEPTH24_STENCIL8)
              : 1015 === c
                ? (d = a.DEPTH32F_STENCIL8)
                : 1012 === c &&
                  ((d = a.DEPTH24_STENCIL8),
                  _(
                    'DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.'
                  ))
            : null === c || 1014 === c || 1020 === c
              ? (d = a.DEPTH_COMPONENT24)
              : 1015 === c
                ? (d = a.DEPTH_COMPONENT32F)
                : 1012 === c && (d = a.DEPTH_COMPONENT16),
          d
        );
      }
      function u(a, b) {
        return !0 === q(a) ||
          (a.isFramebufferTexture &&
            1003 !== a.minFilter &&
            1006 !== a.minFilter)
          ? Math.log2(Math.max(b.width, b.height)) + 1
          : void 0 !== a.mipmaps && a.mipmaps.length > 0
            ? a.mipmaps.length
            : a.isCompressedTexture && Array.isArray(a.image)
              ? b.mipmaps.length
              : 1;
      }
      function v(a) {
        let b = a.target;
        (b.removeEventListener('dispose', v),
          (function (a) {
            let b = d.get(a);
            if (void 0 === b.__webglInit) return;
            let c = a.source,
              e = m.get(c);
            if (e) {
              let d = e[b.__cacheKey];
              (d.usedTimes--,
                0 === d.usedTimes && x(a),
                0 === Object.keys(e).length && m.delete(c));
            }
            d.remove(a);
          })(b),
          b.isVideoTexture && l.delete(b));
      }
      function w(b) {
        let c = b.target;
        (c.removeEventListener('dispose', w),
          (function (b) {
            let c = d.get(b);
            if (
              (b.depthTexture &&
                (b.depthTexture.dispose(), d.remove(b.depthTexture)),
              b.isWebGLCubeRenderTarget)
            )
              for (let b = 0; b < 6; b++) {
                if (Array.isArray(c.__webglFramebuffer[b]))
                  for (let d = 0; d < c.__webglFramebuffer[b].length; d++)
                    a.deleteFramebuffer(c.__webglFramebuffer[b][d]);
                else a.deleteFramebuffer(c.__webglFramebuffer[b]);
                c.__webglDepthbuffer &&
                  a.deleteRenderbuffer(c.__webglDepthbuffer[b]);
              }
            else {
              if (Array.isArray(c.__webglFramebuffer))
                for (let b = 0; b < c.__webglFramebuffer.length; b++)
                  a.deleteFramebuffer(c.__webglFramebuffer[b]);
              else a.deleteFramebuffer(c.__webglFramebuffer);
              if (
                (c.__webglDepthbuffer &&
                  a.deleteRenderbuffer(c.__webglDepthbuffer),
                c.__webglMultisampledFramebuffer &&
                  a.deleteFramebuffer(c.__webglMultisampledFramebuffer),
                c.__webglColorRenderbuffer)
              )
                for (let b = 0; b < c.__webglColorRenderbuffer.length; b++)
                  c.__webglColorRenderbuffer[b] &&
                    a.deleteRenderbuffer(c.__webglColorRenderbuffer[b]);
              c.__webglDepthRenderbuffer &&
                a.deleteRenderbuffer(c.__webglDepthRenderbuffer);
            }
            let e = b.textures;
            for (let b = 0, c = e.length; b < c; b++) {
              let c = d.get(e[b]);
              (c.__webglTexture &&
                (a.deleteTexture(c.__webglTexture), g.memory.textures--),
                d.remove(e[b]));
            }
            d.remove(b);
          })(c));
      }
      function x(b) {
        let c = d.get(b);
        a.deleteTexture(c.__webglTexture);
        let e = b.source,
          f = m.get(e);
        (delete f[c.__cacheKey], g.memory.textures--);
      }
      let y = 0;
      function z(b, e) {
        var f;
        let h,
          i = d.get(b);
        if (
          (b.isVideoTexture &&
            ((f = b),
            (h = g.render.frame),
            l.get(f) !== h && (l.set(f, h), f.update())),
          !1 === b.isRenderTargetTexture &&
            !0 !== b.isExternalTexture &&
            b.version > 0 &&
            i.__version !== b.version)
        ) {
          let a = b.image;
          if (null === a)
            _(
              'WebGLRenderer: Texture marked for update but no image data found.'
            );
          else {
            if (!1 !== a.complete) return void G(i, b, e);
            _(
              'WebGLRenderer: Texture marked for update but image is incomplete'
            );
          }
        } else
          b.isExternalTexture &&
            (i.__webglTexture = b.sourceTexture ? b.sourceTexture : null);
        c.bindTexture(a.TEXTURE_2D, i.__webglTexture, a.TEXTURE0 + e);
      }
      let A = { 1e3: a.REPEAT, 1001: a.CLAMP_TO_EDGE, 1002: a.MIRRORED_REPEAT },
        B = {
          1003: a.NEAREST,
          1004: a.NEAREST_MIPMAP_NEAREST,
          1005: a.NEAREST_MIPMAP_LINEAR,
          1006: a.LINEAR,
          1007: a.LINEAR_MIPMAP_NEAREST,
          1008: a.LINEAR_MIPMAP_LINEAR,
        },
        C = {
          512: a.NEVER,
          519: a.ALWAYS,
          513: a.LESS,
          515: a.LEQUAL,
          514: a.EQUAL,
          518: a.GEQUAL,
          516: a.GREATER,
          517: a.NOTEQUAL,
        };
      function D(c, f) {
        if (
          (1015 === f.type &&
            !1 === b.has('OES_texture_float_linear') &&
            (1006 === f.magFilter ||
              1007 === f.magFilter ||
              1005 === f.magFilter ||
              1008 === f.magFilter ||
              1006 === f.minFilter ||
              1007 === f.minFilter ||
              1005 === f.minFilter ||
              1008 === f.minFilter) &&
            _(
              'WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.'
            ),
          a.texParameteri(c, a.TEXTURE_WRAP_S, A[f.wrapS]),
          a.texParameteri(c, a.TEXTURE_WRAP_T, A[f.wrapT]),
          (c === a.TEXTURE_3D || c === a.TEXTURE_2D_ARRAY) &&
            a.texParameteri(c, a.TEXTURE_WRAP_R, A[f.wrapR]),
          a.texParameteri(c, a.TEXTURE_MAG_FILTER, B[f.magFilter]),
          a.texParameteri(c, a.TEXTURE_MIN_FILTER, B[f.minFilter]),
          f.compareFunction &&
            (a.texParameteri(
              c,
              a.TEXTURE_COMPARE_MODE,
              a.COMPARE_REF_TO_TEXTURE
            ),
            a.texParameteri(c, a.TEXTURE_COMPARE_FUNC, C[f.compareFunction])),
          !0 === b.has('EXT_texture_filter_anisotropic')) &&
          1003 !== f.magFilter &&
          (1005 === f.minFilter || 1008 === f.minFilter) &&
          (1015 !== f.type || !1 !== b.has('OES_texture_float_linear')) &&
          (f.anisotropy > 1 || d.get(f).__currentAnisotropy)
        ) {
          let g = b.get('EXT_texture_filter_anisotropic');
          (a.texParameterf(
            c,
            g.TEXTURE_MAX_ANISOTROPY_EXT,
            Math.min(f.anisotropy, e.getMaxAnisotropy())
          ),
            (d.get(f).__currentAnisotropy = f.anisotropy));
        }
      }
      function E(b, c) {
        let d,
          e = !1;
        void 0 === b.__webglInit &&
          ((b.__webglInit = !0), c.addEventListener('dispose', v));
        let f = c.source,
          h = m.get(f);
        void 0 === h && ((h = {}), m.set(f, h));
        let i =
          ((d = []).push(c.wrapS),
          d.push(c.wrapT),
          d.push(c.wrapR || 0),
          d.push(c.magFilter),
          d.push(c.minFilter),
          d.push(c.anisotropy),
          d.push(c.internalFormat),
          d.push(c.format),
          d.push(c.type),
          d.push(c.generateMipmaps),
          d.push(c.premultiplyAlpha),
          d.push(c.flipY),
          d.push(c.unpackAlignment),
          d.push(c.colorSpace),
          d.join());
        if (i !== b.__cacheKey) {
          (void 0 === h[i] &&
            ((h[i] = { texture: a.createTexture(), usedTimes: 0 }),
            g.memory.textures++,
            (e = !0)),
            h[i].usedTimes++);
          let d = h[b.__cacheKey];
          (void 0 !== d &&
            (h[b.__cacheKey].usedTimes--, 0 === d.usedTimes && x(c)),
            (b.__cacheKey = i),
            (b.__webglTexture = h[i].texture));
        }
        return e;
      }
      function F(a, b, c) {
        return Math.floor(Math.floor(a / c) / b);
      }
      function G(b, g, h) {
        let i = a.TEXTURE_2D;
        ((g.isDataArrayTexture || g.isCompressedArrayTexture) &&
          (i = a.TEXTURE_2D_ARRAY),
          g.isData3DTexture && (i = a.TEXTURE_3D));
        let j = E(b, g),
          k = g.source;
        c.bindTexture(i, b.__webglTexture, a.TEXTURE0 + h);
        let l = d.get(k);
        if (k.version !== l.__version || !0 === j) {
          let b;
          c.activeTexture(a.TEXTURE0 + h);
          let d = ax.getPrimaries(ax.workingColorSpace),
            m = '' === g.colorSpace ? null : ax.getPrimaries(g.colorSpace),
            n =
              '' === g.colorSpace || d === m ? a.NONE : a.BROWSER_DEFAULT_WEBGL;
          (a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL, g.flipY),
            a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, g.premultiplyAlpha),
            a.pixelStorei(a.UNPACK_ALIGNMENT, g.unpackAlignment),
            a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL, n));
          let o = p(g.image, !1, e.maxTextureSize);
          o = S(g, o);
          let v = f.convert(g.format, g.colorSpace),
            w = f.convert(g.type),
            x = s(g.internalFormat, v, w, g.colorSpace, g.isVideoTexture);
          D(i, g);
          let y = g.mipmaps,
            z = !0 !== g.isVideoTexture,
            A = void 0 === l.__version || !0 === j,
            B = k.dataReady,
            C = u(g, o);
          if (g.isDepthTexture)
            ((x = t(1027 === g.format, g.type)),
              A &&
                (z
                  ? c.texStorage2D(a.TEXTURE_2D, 1, x, o.width, o.height)
                  : c.texImage2D(
                      a.TEXTURE_2D,
                      0,
                      x,
                      o.width,
                      o.height,
                      0,
                      v,
                      w,
                      null
                    )));
          else if (g.isDataTexture)
            if (y.length > 0) {
              z &&
                A &&
                c.texStorage2D(a.TEXTURE_2D, C, x, y[0].width, y[0].height);
              for (let d = 0, e = y.length; d < e; d++)
                ((b = y[d]),
                  z
                    ? B &&
                      c.texSubImage2D(
                        a.TEXTURE_2D,
                        d,
                        0,
                        0,
                        b.width,
                        b.height,
                        v,
                        w,
                        b.data
                      )
                    : c.texImage2D(
                        a.TEXTURE_2D,
                        d,
                        x,
                        b.width,
                        b.height,
                        0,
                        v,
                        w,
                        b.data
                      ));
              g.generateMipmaps = !1;
            } else
              z
                ? (A && c.texStorage2D(a.TEXTURE_2D, C, x, o.width, o.height),
                  B &&
                    (function (b, d, e, f) {
                      let g = b.updateRanges;
                      if (0 === g.length)
                        c.texSubImage2D(
                          a.TEXTURE_2D,
                          0,
                          0,
                          0,
                          d.width,
                          d.height,
                          e,
                          f,
                          d.data
                        );
                      else {
                        g.sort((a, b) => a.start - b.start);
                        let h = 0;
                        for (let a = 1; a < g.length; a++) {
                          let b = g[h],
                            c = g[a],
                            e = b.start + b.count,
                            f = F(c.start, d.width, 4),
                            i = F(b.start, d.width, 4);
                          c.start <= e + 1 &&
                          f === i &&
                          F(c.start + c.count - 1, d.width, 4) === f
                            ? (b.count = Math.max(
                                b.count,
                                c.start + c.count - b.start
                              ))
                            : (g[++h] = c);
                        }
                        g.length = h + 1;
                        let i = a.getParameter(a.UNPACK_ROW_LENGTH),
                          j = a.getParameter(a.UNPACK_SKIP_PIXELS),
                          k = a.getParameter(a.UNPACK_SKIP_ROWS);
                        a.pixelStorei(a.UNPACK_ROW_LENGTH, d.width);
                        for (let b = 0, h = g.length; b < h; b++) {
                          let h = g[b],
                            i = Math.floor(h.start / 4),
                            j = Math.ceil(h.count / 4),
                            k = i % d.width,
                            l = Math.floor(i / d.width);
                          (a.pixelStorei(a.UNPACK_SKIP_PIXELS, k),
                            a.pixelStorei(a.UNPACK_SKIP_ROWS, l),
                            c.texSubImage2D(
                              a.TEXTURE_2D,
                              0,
                              k,
                              l,
                              j,
                              1,
                              e,
                              f,
                              d.data
                            ));
                        }
                        (b.clearUpdateRanges(),
                          a.pixelStorei(a.UNPACK_ROW_LENGTH, i),
                          a.pixelStorei(a.UNPACK_SKIP_PIXELS, j),
                          a.pixelStorei(a.UNPACK_SKIP_ROWS, k));
                      }
                    })(g, o, v, w))
                : c.texImage2D(
                    a.TEXTURE_2D,
                    0,
                    x,
                    o.width,
                    o.height,
                    0,
                    v,
                    w,
                    o.data
                  );
          else if (g.isCompressedTexture)
            if (g.isCompressedArrayTexture) {
              z &&
                A &&
                c.texStorage3D(
                  a.TEXTURE_2D_ARRAY,
                  C,
                  x,
                  y[0].width,
                  y[0].height,
                  o.depth
                );
              for (let d = 0, e = y.length; d < e; d++)
                if (((b = y[d]), 1023 !== g.format))
                  if (null !== v)
                    if (z) {
                      if (B)
                        if (g.layerUpdates.size > 0) {
                          let e = h8(b.width, b.height, g.format, g.type);
                          for (let f of g.layerUpdates) {
                            let g = b.data.subarray(
                              (f * e) / b.data.BYTES_PER_ELEMENT,
                              ((f + 1) * e) / b.data.BYTES_PER_ELEMENT
                            );
                            c.compressedTexSubImage3D(
                              a.TEXTURE_2D_ARRAY,
                              d,
                              0,
                              0,
                              f,
                              b.width,
                              b.height,
                              1,
                              v,
                              g
                            );
                          }
                          g.clearLayerUpdates();
                        } else
                          c.compressedTexSubImage3D(
                            a.TEXTURE_2D_ARRAY,
                            d,
                            0,
                            0,
                            0,
                            b.width,
                            b.height,
                            o.depth,
                            v,
                            b.data
                          );
                    } else
                      c.compressedTexImage3D(
                        a.TEXTURE_2D_ARRAY,
                        d,
                        x,
                        b.width,
                        b.height,
                        o.depth,
                        0,
                        b.data,
                        0,
                        0
                      );
                  else
                    _(
                      'WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()'
                    );
                else
                  z
                    ? B &&
                      c.texSubImage3D(
                        a.TEXTURE_2D_ARRAY,
                        d,
                        0,
                        0,
                        0,
                        b.width,
                        b.height,
                        o.depth,
                        v,
                        w,
                        b.data
                      )
                    : c.texImage3D(
                        a.TEXTURE_2D_ARRAY,
                        d,
                        x,
                        b.width,
                        b.height,
                        o.depth,
                        0,
                        v,
                        w,
                        b.data
                      );
            } else {
              z &&
                A &&
                c.texStorage2D(a.TEXTURE_2D, C, x, y[0].width, y[0].height);
              for (let d = 0, e = y.length; d < e; d++)
                ((b = y[d]),
                  1023 !== g.format
                    ? null !== v
                      ? z
                        ? B &&
                          c.compressedTexSubImage2D(
                            a.TEXTURE_2D,
                            d,
                            0,
                            0,
                            b.width,
                            b.height,
                            v,
                            b.data
                          )
                        : c.compressedTexImage2D(
                            a.TEXTURE_2D,
                            d,
                            x,
                            b.width,
                            b.height,
                            0,
                            b.data
                          )
                      : _(
                          'WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()'
                        )
                    : z
                      ? B &&
                        c.texSubImage2D(
                          a.TEXTURE_2D,
                          d,
                          0,
                          0,
                          b.width,
                          b.height,
                          v,
                          w,
                          b.data
                        )
                      : c.texImage2D(
                          a.TEXTURE_2D,
                          d,
                          x,
                          b.width,
                          b.height,
                          0,
                          v,
                          w,
                          b.data
                        ));
            }
          else if (g.isDataArrayTexture)
            if (z) {
              if (
                (A &&
                  c.texStorage3D(
                    a.TEXTURE_2D_ARRAY,
                    C,
                    x,
                    o.width,
                    o.height,
                    o.depth
                  ),
                B)
              )
                if (g.layerUpdates.size > 0) {
                  let b = h8(o.width, o.height, g.format, g.type);
                  for (let d of g.layerUpdates) {
                    let e = o.data.subarray(
                      (d * b) / o.data.BYTES_PER_ELEMENT,
                      ((d + 1) * b) / o.data.BYTES_PER_ELEMENT
                    );
                    c.texSubImage3D(
                      a.TEXTURE_2D_ARRAY,
                      0,
                      0,
                      0,
                      d,
                      o.width,
                      o.height,
                      1,
                      v,
                      w,
                      e
                    );
                  }
                  g.clearLayerUpdates();
                } else
                  c.texSubImage3D(
                    a.TEXTURE_2D_ARRAY,
                    0,
                    0,
                    0,
                    0,
                    o.width,
                    o.height,
                    o.depth,
                    v,
                    w,
                    o.data
                  );
            } else
              c.texImage3D(
                a.TEXTURE_2D_ARRAY,
                0,
                x,
                o.width,
                o.height,
                o.depth,
                0,
                v,
                w,
                o.data
              );
          else if (g.isData3DTexture)
            z
              ? (A &&
                  c.texStorage3D(
                    a.TEXTURE_3D,
                    C,
                    x,
                    o.width,
                    o.height,
                    o.depth
                  ),
                B &&
                  c.texSubImage3D(
                    a.TEXTURE_3D,
                    0,
                    0,
                    0,
                    0,
                    o.width,
                    o.height,
                    o.depth,
                    v,
                    w,
                    o.data
                  ))
              : c.texImage3D(
                  a.TEXTURE_3D,
                  0,
                  x,
                  o.width,
                  o.height,
                  o.depth,
                  0,
                  v,
                  w,
                  o.data
                );
          else if (g.isFramebufferTexture) {
            if (A)
              if (z) c.texStorage2D(a.TEXTURE_2D, C, x, o.width, o.height);
              else {
                let b = o.width,
                  d = o.height;
                for (let e = 0; e < C; e++)
                  (c.texImage2D(a.TEXTURE_2D, e, x, b, d, 0, v, w, null),
                    (b >>= 1),
                    (d >>= 1));
              }
          } else if (y.length > 0) {
            if (z && A) {
              let b = T(y[0]);
              c.texStorage2D(a.TEXTURE_2D, C, x, b.width, b.height);
            }
            for (let d = 0, e = y.length; d < e; d++)
              ((b = y[d]),
                z
                  ? B && c.texSubImage2D(a.TEXTURE_2D, d, 0, 0, v, w, b)
                  : c.texImage2D(a.TEXTURE_2D, d, x, v, w, b));
            g.generateMipmaps = !1;
          } else if (z) {
            if (A) {
              let b = T(o);
              c.texStorage2D(a.TEXTURE_2D, C, x, b.width, b.height);
            }
            B && c.texSubImage2D(a.TEXTURE_2D, 0, 0, 0, v, w, o);
          } else c.texImage2D(a.TEXTURE_2D, 0, x, v, w, o);
          (q(g) && r(i),
            (l.__version = k.version),
            g.onUpdate && g.onUpdate(g));
        }
        b.__version = g.version;
      }
      function H(b, e, g, h, j, k) {
        let l = f.convert(g.format, g.colorSpace),
          m = f.convert(g.type),
          n = s(g.internalFormat, l, m, g.colorSpace),
          o = d.get(e),
          p = d.get(g);
        if (((p.__renderTarget = e), !o.__hasExternalTextures)) {
          let b = Math.max(1, e.width >> k),
            d = Math.max(1, e.height >> k);
          j === a.TEXTURE_3D || j === a.TEXTURE_2D_ARRAY
            ? c.texImage3D(j, k, n, b, d, e.depth, 0, l, m, null)
            : c.texImage2D(j, k, n, b, d, 0, l, m, null);
        }
        (c.bindFramebuffer(a.FRAMEBUFFER, b),
          R(e)
            ? i.framebufferTexture2DMultisampleEXT(
                a.FRAMEBUFFER,
                h,
                j,
                p.__webglTexture,
                0,
                Q(e)
              )
            : (j === a.TEXTURE_2D ||
                (j >= a.TEXTURE_CUBE_MAP_POSITIVE_X &&
                  j <= a.TEXTURE_CUBE_MAP_NEGATIVE_Z)) &&
              a.framebufferTexture2D(a.FRAMEBUFFER, h, j, p.__webglTexture, k),
          c.bindFramebuffer(a.FRAMEBUFFER, null));
      }
      function I(b, c, d) {
        if ((a.bindRenderbuffer(a.RENDERBUFFER, b), c.depthBuffer)) {
          let e = c.depthTexture,
            f = e && e.isDepthTexture ? e.type : null,
            g = t(c.stencilBuffer, f),
            h = c.stencilBuffer
              ? a.DEPTH_STENCIL_ATTACHMENT
              : a.DEPTH_ATTACHMENT;
          (R(c)
            ? i.renderbufferStorageMultisampleEXT(
                a.RENDERBUFFER,
                Q(c),
                g,
                c.width,
                c.height
              )
            : d
              ? a.renderbufferStorageMultisample(
                  a.RENDERBUFFER,
                  Q(c),
                  g,
                  c.width,
                  c.height
                )
              : a.renderbufferStorage(a.RENDERBUFFER, g, c.width, c.height),
            a.framebufferRenderbuffer(a.FRAMEBUFFER, h, a.RENDERBUFFER, b));
        } else {
          let b = c.textures;
          for (let e = 0; e < b.length; e++) {
            let g = b[e],
              h = f.convert(g.format, g.colorSpace),
              j = f.convert(g.type),
              k = s(g.internalFormat, h, j, g.colorSpace);
            R(c)
              ? i.renderbufferStorageMultisampleEXT(
                  a.RENDERBUFFER,
                  Q(c),
                  k,
                  c.width,
                  c.height
                )
              : d
                ? a.renderbufferStorageMultisample(
                    a.RENDERBUFFER,
                    Q(c),
                    k,
                    c.width,
                    c.height
                  )
                : a.renderbufferStorage(a.RENDERBUFFER, k, c.width, c.height);
          }
        }
        a.bindRenderbuffer(a.RENDERBUFFER, null);
      }
      function M(b, e, g) {
        let h = !0 === e.isWebGLCubeRenderTarget;
        if (
          (c.bindFramebuffer(a.FRAMEBUFFER, b),
          !(e.depthTexture && e.depthTexture.isDepthTexture))
        )
          throw Error(
            'renderTarget.depthTexture must be an instance of THREE.DepthTexture'
          );
        let j = d.get(e.depthTexture);
        if (
          ((j.__renderTarget = e),
          (j.__webglTexture &&
            e.depthTexture.image.width === e.width &&
            e.depthTexture.image.height === e.height) ||
            ((e.depthTexture.image.width = e.width),
            (e.depthTexture.image.height = e.height),
            (e.depthTexture.needsUpdate = !0)),
          h)
        ) {
          if (
            (void 0 === j.__webglInit &&
              ((j.__webglInit = !0),
              e.depthTexture.addEventListener('dispose', v)),
            void 0 === j.__webglTexture)
          ) {
            let b;
            ((j.__webglTexture = a.createTexture()),
              c.bindTexture(a.TEXTURE_CUBE_MAP, j.__webglTexture),
              D(a.TEXTURE_CUBE_MAP, e.depthTexture));
            let d = f.convert(e.depthTexture.format),
              g = f.convert(e.depthTexture.type);
            1026 === e.depthTexture.format
              ? (b = a.DEPTH_COMPONENT24)
              : 1027 === e.depthTexture.format && (b = a.DEPTH24_STENCIL8);
            for (let c = 0; c < 6; c++)
              a.texImage2D(
                a.TEXTURE_CUBE_MAP_POSITIVE_X + c,
                0,
                b,
                e.width,
                e.height,
                0,
                d,
                g,
                null
              );
          }
        } else z(e.depthTexture, 0);
        let k = j.__webglTexture,
          l = Q(e),
          m = h ? a.TEXTURE_CUBE_MAP_POSITIVE_X + g : a.TEXTURE_2D,
          n =
            1027 === e.depthTexture.format
              ? a.DEPTH_STENCIL_ATTACHMENT
              : a.DEPTH_ATTACHMENT;
        if (1026 === e.depthTexture.format)
          R(e)
            ? i.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER, n, m, k, 0, l)
            : a.framebufferTexture2D(a.FRAMEBUFFER, n, m, k, 0);
        else if (1027 === e.depthTexture.format)
          R(e)
            ? i.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER, n, m, k, 0, l)
            : a.framebufferTexture2D(a.FRAMEBUFFER, n, m, k, 0);
        else throw Error('Unknown depthTexture format');
      }
      function N(b) {
        let e = d.get(b),
          f = !0 === b.isWebGLCubeRenderTarget;
        if (e.__boundDepthTexture !== b.depthTexture) {
          let a = b.depthTexture;
          if ((e.__depthDisposeCallback && e.__depthDisposeCallback(), a)) {
            let b = () => {
              (delete e.__boundDepthTexture,
                delete e.__depthDisposeCallback,
                a.removeEventListener('dispose', b));
            };
            (a.addEventListener('dispose', b), (e.__depthDisposeCallback = b));
          }
          e.__boundDepthTexture = a;
        }
        if (b.depthTexture && !e.__autoAllocateDepthBuffer)
          if (f) for (let a = 0; a < 6; a++) M(e.__webglFramebuffer[a], b, a);
          else {
            let a = b.texture.mipmaps;
            a && a.length > 0
              ? M(e.__webglFramebuffer[0], b, 0)
              : M(e.__webglFramebuffer, b, 0);
          }
        else if (f) {
          e.__webglDepthbuffer = [];
          for (let d = 0; d < 6; d++)
            if (
              (c.bindFramebuffer(a.FRAMEBUFFER, e.__webglFramebuffer[d]),
              void 0 === e.__webglDepthbuffer[d])
            )
              ((e.__webglDepthbuffer[d] = a.createRenderbuffer()),
                I(e.__webglDepthbuffer[d], b, !1));
            else {
              let c = b.stencilBuffer
                  ? a.DEPTH_STENCIL_ATTACHMENT
                  : a.DEPTH_ATTACHMENT,
                f = e.__webglDepthbuffer[d];
              (a.bindRenderbuffer(a.RENDERBUFFER, f),
                a.framebufferRenderbuffer(a.FRAMEBUFFER, c, a.RENDERBUFFER, f));
            }
        } else {
          let d = b.texture.mipmaps;
          if (
            (d && d.length > 0
              ? c.bindFramebuffer(a.FRAMEBUFFER, e.__webglFramebuffer[0])
              : c.bindFramebuffer(a.FRAMEBUFFER, e.__webglFramebuffer),
            void 0 === e.__webglDepthbuffer)
          )
            ((e.__webglDepthbuffer = a.createRenderbuffer()),
              I(e.__webglDepthbuffer, b, !1));
          else {
            let c = b.stencilBuffer
                ? a.DEPTH_STENCIL_ATTACHMENT
                : a.DEPTH_ATTACHMENT,
              d = e.__webglDepthbuffer;
            (a.bindRenderbuffer(a.RENDERBUFFER, d),
              a.framebufferRenderbuffer(a.FRAMEBUFFER, c, a.RENDERBUFFER, d));
          }
        }
        c.bindFramebuffer(a.FRAMEBUFFER, null);
      }
      let O = [],
        P = [];
      function Q(a) {
        return Math.min(e.maxSamples, a.samples);
      }
      function R(a) {
        let c = d.get(a);
        return (
          a.samples > 0 &&
          !0 === b.has('WEBGL_multisampled_render_to_texture') &&
          !1 !== c.__useRenderToTexture
        );
      }
      function S(a, b) {
        let c = a.colorSpace,
          d = a.format,
          e = a.type;
        return (
          !0 === a.isCompressedTexture ||
            !0 === a.isVideoTexture ||
            (c !== J &&
              '' !== c &&
              (ax.getTransfer(c) === L
                ? (1023 !== d || 1009 !== e) &&
                  _(
                    'WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.'
                  )
                : aa('WebGLTextures: Unsupported texture color space:', c))),
          b
        );
      }
      function T(a) {
        return (
          'u' > typeof HTMLImageElement && a instanceof HTMLImageElement
            ? ((k.width = a.naturalWidth || a.width),
              (k.height = a.naturalHeight || a.height))
            : 'u' > typeof VideoFrame && a instanceof VideoFrame
              ? ((k.width = a.displayWidth), (k.height = a.displayHeight))
              : ((k.width = a.width), (k.height = a.height)),
          k
        );
      }
      ((this.allocateTextureUnit = function () {
        let a = y;
        return (
          a >= e.maxTextures &&
            _(
              'WebGLTextures: Trying to use ' +
                a +
                ' texture units while this GPU supports only ' +
                e.maxTextures
            ),
          (y += 1),
          a
        );
      }),
        (this.resetTextureUnits = function () {
          y = 0;
        }),
        (this.setTexture2D = z),
        (this.setTexture2DArray = function (b, e) {
          let f = d.get(b);
          !1 === b.isRenderTargetTexture &&
          b.version > 0 &&
          f.__version !== b.version
            ? G(f, b, e)
            : (b.isExternalTexture &&
                (f.__webglTexture = b.sourceTexture ? b.sourceTexture : null),
              c.bindTexture(
                a.TEXTURE_2D_ARRAY,
                f.__webglTexture,
                a.TEXTURE0 + e
              ));
        }),
        (this.setTexture3D = function (b, e) {
          let f = d.get(b);
          !1 === b.isRenderTargetTexture &&
          b.version > 0 &&
          f.__version !== b.version
            ? G(f, b, e)
            : c.bindTexture(a.TEXTURE_3D, f.__webglTexture, a.TEXTURE0 + e);
        }),
        (this.setTextureCube = function (b, g) {
          let h = d.get(b);
          !0 !== b.isCubeDepthTexture &&
          b.version > 0 &&
          h.__version !== b.version
            ? (function (b, g, h) {
                if (6 !== g.image.length) return;
                let i = E(b, g),
                  j = g.source;
                c.bindTexture(
                  a.TEXTURE_CUBE_MAP,
                  b.__webglTexture,
                  a.TEXTURE0 + h
                );
                let k = d.get(j);
                if (j.version !== k.__version || !0 === i) {
                  let b;
                  c.activeTexture(a.TEXTURE0 + h);
                  let d = ax.getPrimaries(ax.workingColorSpace),
                    l =
                      '' === g.colorSpace
                        ? null
                        : ax.getPrimaries(g.colorSpace),
                    m =
                      '' === g.colorSpace || d === l
                        ? a.NONE
                        : a.BROWSER_DEFAULT_WEBGL;
                  (a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL, g.flipY),
                    a.pixelStorei(
                      a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                      g.premultiplyAlpha
                    ),
                    a.pixelStorei(a.UNPACK_ALIGNMENT, g.unpackAlignment),
                    a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL, m));
                  let n =
                      g.isCompressedTexture || g.image[0].isCompressedTexture,
                    o = g.image[0] && g.image[0].isDataTexture,
                    t = [];
                  for (let a = 0; a < 6; a++)
                    (n || o
                      ? (t[a] = o ? g.image[a].image : g.image[a])
                      : (t[a] = p(g.image[a], !0, e.maxCubemapSize)),
                      (t[a] = S(g, t[a])));
                  let v = t[0],
                    w = f.convert(g.format, g.colorSpace),
                    x = f.convert(g.type),
                    y = s(g.internalFormat, w, x, g.colorSpace),
                    z = !0 !== g.isVideoTexture,
                    A = void 0 === k.__version || !0 === i,
                    B = j.dataReady,
                    C = u(g, v);
                  if ((D(a.TEXTURE_CUBE_MAP, g), n)) {
                    z &&
                      A &&
                      c.texStorage2D(
                        a.TEXTURE_CUBE_MAP,
                        C,
                        y,
                        v.width,
                        v.height
                      );
                    for (let d = 0; d < 6; d++) {
                      b = t[d].mipmaps;
                      for (let e = 0; e < b.length; e++) {
                        let f = b[e];
                        1023 !== g.format
                          ? null !== w
                            ? z
                              ? B &&
                                c.compressedTexSubImage2D(
                                  a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                  e,
                                  0,
                                  0,
                                  f.width,
                                  f.height,
                                  w,
                                  f.data
                                )
                              : c.compressedTexImage2D(
                                  a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                  e,
                                  y,
                                  f.width,
                                  f.height,
                                  0,
                                  f.data
                                )
                            : _(
                                'WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()'
                              )
                          : z
                            ? B &&
                              c.texSubImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e,
                                0,
                                0,
                                f.width,
                                f.height,
                                w,
                                x,
                                f.data
                              )
                            : c.texImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e,
                                y,
                                f.width,
                                f.height,
                                0,
                                w,
                                x,
                                f.data
                              );
                      }
                    }
                  } else {
                    if (((b = g.mipmaps), z && A)) {
                      b.length > 0 && C++;
                      let d = T(t[0]);
                      c.texStorage2D(
                        a.TEXTURE_CUBE_MAP,
                        C,
                        y,
                        d.width,
                        d.height
                      );
                    }
                    for (let d = 0; d < 6; d++)
                      if (o) {
                        z
                          ? B &&
                            c.texSubImage2D(
                              a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                              0,
                              0,
                              0,
                              t[d].width,
                              t[d].height,
                              w,
                              x,
                              t[d].data
                            )
                          : c.texImage2D(
                              a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                              0,
                              y,
                              t[d].width,
                              t[d].height,
                              0,
                              w,
                              x,
                              t[d].data
                            );
                        for (let e = 0; e < b.length; e++) {
                          let f = b[e].image[d].image;
                          z
                            ? B &&
                              c.texSubImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e + 1,
                                0,
                                0,
                                f.width,
                                f.height,
                                w,
                                x,
                                f.data
                              )
                            : c.texImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e + 1,
                                y,
                                f.width,
                                f.height,
                                0,
                                w,
                                x,
                                f.data
                              );
                        }
                      } else {
                        z
                          ? B &&
                            c.texSubImage2D(
                              a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                              0,
                              0,
                              0,
                              w,
                              x,
                              t[d]
                            )
                          : c.texImage2D(
                              a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                              0,
                              y,
                              w,
                              x,
                              t[d]
                            );
                        for (let e = 0; e < b.length; e++) {
                          let f = b[e];
                          z
                            ? B &&
                              c.texSubImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e + 1,
                                0,
                                0,
                                w,
                                x,
                                f.image[d]
                              )
                            : c.texImage2D(
                                a.TEXTURE_CUBE_MAP_POSITIVE_X + d,
                                e + 1,
                                y,
                                w,
                                x,
                                f.image[d]
                              );
                        }
                      }
                  }
                  (q(g) && r(a.TEXTURE_CUBE_MAP),
                    (k.__version = j.version),
                    g.onUpdate && g.onUpdate(g));
                }
                b.__version = g.version;
              })(h, b, g)
            : c.bindTexture(
                a.TEXTURE_CUBE_MAP,
                h.__webglTexture,
                a.TEXTURE0 + g
              );
        }),
        (this.rebindTextures = function (b, c, e) {
          let f = d.get(b);
          (void 0 !== c &&
            H(
              f.__webglFramebuffer,
              b,
              b.texture,
              a.COLOR_ATTACHMENT0,
              a.TEXTURE_2D,
              0
            ),
            void 0 !== e && N(b));
        }),
        (this.setupRenderTarget = function (b) {
          let e = b.texture,
            h = d.get(b),
            i = d.get(e);
          b.addEventListener('dispose', w);
          let j = b.textures,
            k = !0 === b.isWebGLCubeRenderTarget,
            l = j.length > 1;
          if (
            (!l &&
              (void 0 === i.__webglTexture &&
                (i.__webglTexture = a.createTexture()),
              (i.__version = e.version),
              g.memory.textures++),
            k)
          ) {
            h.__webglFramebuffer = [];
            for (let b = 0; b < 6; b++)
              if (e.mipmaps && e.mipmaps.length > 0) {
                h.__webglFramebuffer[b] = [];
                for (let c = 0; c < e.mipmaps.length; c++)
                  h.__webglFramebuffer[b][c] = a.createFramebuffer();
              } else h.__webglFramebuffer[b] = a.createFramebuffer();
          } else {
            if (e.mipmaps && e.mipmaps.length > 0) {
              h.__webglFramebuffer = [];
              for (let b = 0; b < e.mipmaps.length; b++)
                h.__webglFramebuffer[b] = a.createFramebuffer();
            } else h.__webglFramebuffer = a.createFramebuffer();
            if (l)
              for (let b = 0, c = j.length; b < c; b++) {
                let c = d.get(j[b]);
                void 0 === c.__webglTexture &&
                  ((c.__webglTexture = a.createTexture()), g.memory.textures++);
              }
            if (b.samples > 0 && !1 === R(b)) {
              ((h.__webglMultisampledFramebuffer = a.createFramebuffer()),
                (h.__webglColorRenderbuffer = []),
                c.bindFramebuffer(
                  a.FRAMEBUFFER,
                  h.__webglMultisampledFramebuffer
                ));
              for (let c = 0; c < j.length; c++) {
                let d = j[c];
                ((h.__webglColorRenderbuffer[c] = a.createRenderbuffer()),
                  a.bindRenderbuffer(
                    a.RENDERBUFFER,
                    h.__webglColorRenderbuffer[c]
                  ));
                let e = f.convert(d.format, d.colorSpace),
                  g = f.convert(d.type),
                  i = s(
                    d.internalFormat,
                    e,
                    g,
                    d.colorSpace,
                    !0 === b.isXRRenderTarget
                  ),
                  k = Q(b);
                (a.renderbufferStorageMultisample(
                  a.RENDERBUFFER,
                  k,
                  i,
                  b.width,
                  b.height
                ),
                  a.framebufferRenderbuffer(
                    a.FRAMEBUFFER,
                    a.COLOR_ATTACHMENT0 + c,
                    a.RENDERBUFFER,
                    h.__webglColorRenderbuffer[c]
                  ));
              }
              (a.bindRenderbuffer(a.RENDERBUFFER, null),
                b.depthBuffer &&
                  ((h.__webglDepthRenderbuffer = a.createRenderbuffer()),
                  I(h.__webglDepthRenderbuffer, b, !0)),
                c.bindFramebuffer(a.FRAMEBUFFER, null));
            }
          }
          if (k) {
            (c.bindTexture(a.TEXTURE_CUBE_MAP, i.__webglTexture),
              D(a.TEXTURE_CUBE_MAP, e));
            for (let c = 0; c < 6; c++)
              if (e.mipmaps && e.mipmaps.length > 0)
                for (let d = 0; d < e.mipmaps.length; d++)
                  H(
                    h.__webglFramebuffer[c][d],
                    b,
                    e,
                    a.COLOR_ATTACHMENT0,
                    a.TEXTURE_CUBE_MAP_POSITIVE_X + c,
                    d
                  );
              else
                H(
                  h.__webglFramebuffer[c],
                  b,
                  e,
                  a.COLOR_ATTACHMENT0,
                  a.TEXTURE_CUBE_MAP_POSITIVE_X + c,
                  0
                );
            (q(e) && r(a.TEXTURE_CUBE_MAP), c.unbindTexture());
          } else if (l) {
            for (let e = 0, f = j.length; e < f; e++) {
              let f = j[e],
                g = d.get(f),
                i = a.TEXTURE_2D;
              ((b.isWebGL3DRenderTarget || b.isWebGLArrayRenderTarget) &&
                (i = b.isWebGL3DRenderTarget
                  ? a.TEXTURE_3D
                  : a.TEXTURE_2D_ARRAY),
                c.bindTexture(i, g.__webglTexture),
                D(i, f),
                H(h.__webglFramebuffer, b, f, a.COLOR_ATTACHMENT0 + e, i, 0),
                q(f) && r(i));
            }
            c.unbindTexture();
          } else {
            let d = a.TEXTURE_2D;
            if (
              ((b.isWebGL3DRenderTarget || b.isWebGLArrayRenderTarget) &&
                (d = b.isWebGL3DRenderTarget
                  ? a.TEXTURE_3D
                  : a.TEXTURE_2D_ARRAY),
              c.bindTexture(d, i.__webglTexture),
              D(d, e),
              e.mipmaps && e.mipmaps.length > 0)
            )
              for (let c = 0; c < e.mipmaps.length; c++)
                H(h.__webglFramebuffer[c], b, e, a.COLOR_ATTACHMENT0, d, c);
            else H(h.__webglFramebuffer, b, e, a.COLOR_ATTACHMENT0, d, 0);
            (q(e) && r(d), c.unbindTexture());
          }
          b.depthBuffer && N(b);
        }),
        (this.updateRenderTargetMipmap = function (b) {
          let e = b.textures;
          for (let f = 0, g = e.length; f < g; f++) {
            let g = e[f];
            if (q(g)) {
              let e = b.isWebGLCubeRenderTarget
                  ? a.TEXTURE_CUBE_MAP
                  : b.isWebGL3DRenderTarget
                    ? a.TEXTURE_3D
                    : b.isWebGLArrayRenderTarget || b.isCompressedArrayTexture
                      ? a.TEXTURE_2D_ARRAY
                      : a.TEXTURE_2D,
                f = d.get(g).__webglTexture;
              (c.bindTexture(e, f), r(e), c.unbindTexture());
            }
          }
        }),
        (this.updateMultisampleRenderTarget = function (b) {
          if (b.samples > 0) {
            if (!1 === R(b)) {
              let e = b.textures,
                f = b.width,
                g = b.height,
                h = a.COLOR_BUFFER_BIT,
                i = b.stencilBuffer
                  ? a.DEPTH_STENCIL_ATTACHMENT
                  : a.DEPTH_ATTACHMENT,
                k = d.get(b),
                l = e.length > 1;
              if (l)
                for (let b = 0; b < e.length; b++)
                  (c.bindFramebuffer(
                    a.FRAMEBUFFER,
                    k.__webglMultisampledFramebuffer
                  ),
                    a.framebufferRenderbuffer(
                      a.FRAMEBUFFER,
                      a.COLOR_ATTACHMENT0 + b,
                      a.RENDERBUFFER,
                      null
                    ),
                    c.bindFramebuffer(a.FRAMEBUFFER, k.__webglFramebuffer),
                    a.framebufferTexture2D(
                      a.DRAW_FRAMEBUFFER,
                      a.COLOR_ATTACHMENT0 + b,
                      a.TEXTURE_2D,
                      null,
                      0
                    ));
              c.bindFramebuffer(
                a.READ_FRAMEBUFFER,
                k.__webglMultisampledFramebuffer
              );
              let m = b.texture.mipmaps;
              m && m.length > 0
                ? c.bindFramebuffer(a.DRAW_FRAMEBUFFER, k.__webglFramebuffer[0])
                : c.bindFramebuffer(a.DRAW_FRAMEBUFFER, k.__webglFramebuffer);
              for (let c = 0; c < e.length; c++) {
                if (
                  (b.resolveDepthBuffer &&
                    (b.depthBuffer && (h |= a.DEPTH_BUFFER_BIT),
                    b.stencilBuffer &&
                      b.resolveStencilBuffer &&
                      (h |= a.STENCIL_BUFFER_BIT)),
                  l)
                ) {
                  a.framebufferRenderbuffer(
                    a.READ_FRAMEBUFFER,
                    a.COLOR_ATTACHMENT0,
                    a.RENDERBUFFER,
                    k.__webglColorRenderbuffer[c]
                  );
                  let b = d.get(e[c]).__webglTexture;
                  a.framebufferTexture2D(
                    a.DRAW_FRAMEBUFFER,
                    a.COLOR_ATTACHMENT0,
                    a.TEXTURE_2D,
                    b,
                    0
                  );
                }
                (a.blitFramebuffer(0, 0, f, g, 0, 0, f, g, h, a.NEAREST),
                  !0 === j &&
                    ((O.length = 0),
                    (P.length = 0),
                    O.push(a.COLOR_ATTACHMENT0 + c),
                    b.depthBuffer &&
                      !1 === b.resolveDepthBuffer &&
                      (O.push(i),
                      P.push(i),
                      a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER, P)),
                    a.invalidateFramebuffer(a.READ_FRAMEBUFFER, O)));
              }
              if (
                (c.bindFramebuffer(a.READ_FRAMEBUFFER, null),
                c.bindFramebuffer(a.DRAW_FRAMEBUFFER, null),
                l)
              )
                for (let b = 0; b < e.length; b++) {
                  (c.bindFramebuffer(
                    a.FRAMEBUFFER,
                    k.__webglMultisampledFramebuffer
                  ),
                    a.framebufferRenderbuffer(
                      a.FRAMEBUFFER,
                      a.COLOR_ATTACHMENT0 + b,
                      a.RENDERBUFFER,
                      k.__webglColorRenderbuffer[b]
                    ));
                  let f = d.get(e[b]).__webglTexture;
                  (c.bindFramebuffer(a.FRAMEBUFFER, k.__webglFramebuffer),
                    a.framebufferTexture2D(
                      a.DRAW_FRAMEBUFFER,
                      a.COLOR_ATTACHMENT0 + b,
                      a.TEXTURE_2D,
                      f,
                      0
                    ));
                }
              c.bindFramebuffer(
                a.DRAW_FRAMEBUFFER,
                k.__webglMultisampledFramebuffer
              );
            } else if (b.depthBuffer && !1 === b.resolveDepthBuffer && j) {
              let c = b.stencilBuffer
                ? a.DEPTH_STENCIL_ATTACHMENT
                : a.DEPTH_ATTACHMENT;
              a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER, [c]);
            }
          }
        }),
        (this.setupDepthRenderbuffer = N),
        (this.setupFrameBufferTexture = H),
        (this.useMultisampledRTT = R),
        (this.isReversedDepthBuffer = function () {
          return c.buffers.depth.getReversed();
        }));
    }
    function kp(a, b) {
      return {
        convert: function (c, d = '') {
          let e,
            f = ax.getTransfer(d);
          if (1009 === c) return a.UNSIGNED_BYTE;
          if (1017 === c) return a.UNSIGNED_SHORT_4_4_4_4;
          if (1018 === c) return a.UNSIGNED_SHORT_5_5_5_1;
          if (35902 === c) return a.UNSIGNED_INT_5_9_9_9_REV;
          if (35899 === c) return a.UNSIGNED_INT_10F_11F_11F_REV;
          if (1010 === c) return a.BYTE;
          if (1011 === c) return a.SHORT;
          if (1012 === c) return a.UNSIGNED_SHORT;
          if (1013 === c) return a.INT;
          if (1014 === c) return a.UNSIGNED_INT;
          if (1015 === c) return a.FLOAT;
          if (1016 === c) return a.HALF_FLOAT;
          if (1021 === c) return a.ALPHA;
          if (1022 === c) return a.RGB;
          if (1023 === c) return a.RGBA;
          if (1026 === c) return a.DEPTH_COMPONENT;
          if (1027 === c) return a.DEPTH_STENCIL;
          if (1028 === c) return a.RED;
          if (1029 === c) return a.RED_INTEGER;
          if (1030 === c) return a.RG;
          if (1031 === c) return a.RG_INTEGER;
          if (1033 === c) return a.RGBA_INTEGER;
          if (33776 === c || 33777 === c || 33778 === c || 33779 === c)
            if (f === L) {
              if (null === (e = b.get('WEBGL_compressed_texture_s3tc_srgb')))
                return null;
              if (33776 === c) return e.COMPRESSED_SRGB_S3TC_DXT1_EXT;
              if (33777 === c) return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
              if (33778 === c) return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
              if (33779 === c) return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
            } else {
              if (null === (e = b.get('WEBGL_compressed_texture_s3tc')))
                return null;
              if (33776 === c) return e.COMPRESSED_RGB_S3TC_DXT1_EXT;
              if (33777 === c) return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;
              if (33778 === c) return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;
              if (33779 === c) return e.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            }
          if (35840 === c || 35841 === c || 35842 === c || 35843 === c) {
            if (null === (e = b.get('WEBGL_compressed_texture_pvrtc')))
              return null;
            if (35840 === c) return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            if (35841 === c) return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
            if (35842 === c) return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            if (35843 === c) return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
          }
          if (
            36196 === c ||
            37492 === c ||
            37496 === c ||
            37488 === c ||
            37489 === c ||
            37490 === c ||
            37491 === c
          ) {
            if (null === (e = b.get('WEBGL_compressed_texture_etc')))
              return null;
            if (36196 === c || 37492 === c)
              return f === L ? e.COMPRESSED_SRGB8_ETC2 : e.COMPRESSED_RGB8_ETC2;
            if (37496 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC
                : e.COMPRESSED_RGBA8_ETC2_EAC;
            if (37488 === c) return e.COMPRESSED_R11_EAC;
            if (37489 === c) return e.COMPRESSED_SIGNED_R11_EAC;
            if (37490 === c) return e.COMPRESSED_RG11_EAC;
            if (37491 === c) return e.COMPRESSED_SIGNED_RG11_EAC;
          }
          if (
            37808 === c ||
            37809 === c ||
            37810 === c ||
            37811 === c ||
            37812 === c ||
            37813 === c ||
            37814 === c ||
            37815 === c ||
            37816 === c ||
            37817 === c ||
            37818 === c ||
            37819 === c ||
            37820 === c ||
            37821 === c
          ) {
            if (null === (e = b.get('WEBGL_compressed_texture_astc')))
              return null;
            if (37808 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR
                : e.COMPRESSED_RGBA_ASTC_4x4_KHR;
            if (37809 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR
                : e.COMPRESSED_RGBA_ASTC_5x4_KHR;
            if (37810 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR
                : e.COMPRESSED_RGBA_ASTC_5x5_KHR;
            if (37811 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR
                : e.COMPRESSED_RGBA_ASTC_6x5_KHR;
            if (37812 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR
                : e.COMPRESSED_RGBA_ASTC_6x6_KHR;
            if (37813 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR
                : e.COMPRESSED_RGBA_ASTC_8x5_KHR;
            if (37814 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR
                : e.COMPRESSED_RGBA_ASTC_8x6_KHR;
            if (37815 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR
                : e.COMPRESSED_RGBA_ASTC_8x8_KHR;
            if (37816 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR
                : e.COMPRESSED_RGBA_ASTC_10x5_KHR;
            if (37817 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR
                : e.COMPRESSED_RGBA_ASTC_10x6_KHR;
            if (37818 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR
                : e.COMPRESSED_RGBA_ASTC_10x8_KHR;
            if (37819 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR
                : e.COMPRESSED_RGBA_ASTC_10x10_KHR;
            if (37820 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR
                : e.COMPRESSED_RGBA_ASTC_12x10_KHR;
            if (37821 === c)
              return f === L
                ? e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR
                : e.COMPRESSED_RGBA_ASTC_12x12_KHR;
          }
          if (36492 === c || 36494 === c || 36495 === c) {
            if (null === (e = b.get('EXT_texture_compression_bptc')))
              return null;
            if (36492 === c)
              return f === L
                ? e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT
                : e.COMPRESSED_RGBA_BPTC_UNORM_EXT;
            if (36494 === c) return e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;
            if (36495 === c) return e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;
          }
          if (36283 === c || 36284 === c || 36285 === c || 36286 === c) {
            if (null === (e = b.get('EXT_texture_compression_rgtc')))
              return null;
            if (36283 === c) return e.COMPRESSED_RED_RGTC1_EXT;
            if (36284 === c) return e.COMPRESSED_SIGNED_RED_RGTC1_EXT;
            if (36285 === c) return e.COMPRESSED_RED_GREEN_RGTC2_EXT;
            if (36286 === c) return e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
          }
          return 1020 === c
            ? a.UNSIGNED_INT_24_8
            : void 0 !== a[c]
              ? a[c]
              : null;
        },
      };
    }
    let kq = `
void main() {

	gl_Position = vec4( position, 1.0 );

}`,
      kr = `
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;
    class ks {
      constructor() {
        ((this.texture = null),
          (this.mesh = null),
          (this.depthNear = 0),
          (this.depthFar = 0));
      }
      init(a, b) {
        if (null === this.texture) {
          let c = new ey(a.texture);
          ((a.depthNear !== b.depthNear || a.depthFar !== b.depthFar) &&
            ((this.depthNear = a.depthNear), (this.depthFar = a.depthFar)),
            (this.texture = c));
        }
      }
      getMesh(a) {
        if (null !== this.texture && null === this.mesh) {
          let b = a.cameras[0].viewport,
            c = new cH({
              vertexShader: kq,
              fragmentShader: kr,
              uniforms: {
                depthColor: { value: this.texture },
                depthWidth: { value: b.z },
                depthHeight: { value: b.w },
              },
            });
          this.mesh = new cA(new fu(20, 20), c);
        }
        return this.mesh;
      }
      reset() {
        ((this.texture = null), (this.mesh = null));
      }
      getDepthTexture() {
        return this.texture;
      }
    }
    class kt extends ac {
      constructor(a, b) {
        super();
        const c = this;
        let d = null,
          e = 1,
          f = null,
          g = 'local-floor',
          h = 1,
          i = null,
          j = null,
          k = null,
          l = null,
          m = null,
          n = null;
        const o = 'u' > typeof XRWebGLBinding,
          p = new ks(),
          q = {},
          r = b.getContextAttributes();
        let s = null,
          t = null;
        const u = [],
          v = [],
          w = new ao();
        let x = null;
        const y = new cM();
        y.viewport = new aH();
        const z = new cM();
        z.viewport = new aH();
        const A = [y, z],
          B = new gS();
        let C = null,
          D = null;
        function E(a) {
          let b = v.indexOf(a.inputSource);
          if (-1 === b) return;
          let c = u[b];
          void 0 !== c &&
            (c.update(a.inputSource, a.frame, i || f),
            c.dispatchEvent({ type: a.type, data: a.inputSource }));
        }
        function F() {
          (d.removeEventListener('select', E),
            d.removeEventListener('selectstart', E),
            d.removeEventListener('selectend', E),
            d.removeEventListener('squeeze', E),
            d.removeEventListener('squeezestart', E),
            d.removeEventListener('squeezeend', E),
            d.removeEventListener('end', F),
            d.removeEventListener('inputsourceschange', G));
          for (let a = 0; a < u.length; a++) {
            let b = v[a];
            null !== b && ((v[a] = null), u[a].disconnect(b));
          }
          for (let a in ((C = null), (D = null), p.reset(), q)) delete q[a];
          (a.setRenderTarget(s),
            (m = null),
            (l = null),
            (k = null),
            (d = null),
            (t = null),
            L.stop(),
            (c.isPresenting = !1),
            a.setPixelRatio(x),
            a.setSize(w.width, w.height, !1),
            c.dispatchEvent({ type: 'sessionend' }));
        }
        function G(a) {
          for (let b = 0; b < a.removed.length; b++) {
            let c = a.removed[b],
              d = v.indexOf(c);
            d >= 0 && ((v[d] = null), u[d].disconnect(c));
          }
          for (let b = 0; b < a.added.length; b++) {
            let c = a.added[b],
              d = v.indexOf(c);
            if (-1 === d) {
              for (let a = 0; a < u.length; a++)
                if (a >= v.length) {
                  (v.push(c), (d = a));
                  break;
                } else if (null === v[a]) {
                  ((v[a] = c), (d = a));
                  break;
                }
              if (-1 === d) break;
            }
            let e = u[d];
            e && e.connect(c);
          }
        }
        ((this.cameraAutoUpdate = !0),
          (this.enabled = !1),
          (this.isPresenting = !1),
          (this.getController = function (a) {
            let b = u[a];
            return (
              void 0 === b && ((b = new cS()), (u[a] = b)),
              b.getTargetRaySpace()
            );
          }),
          (this.getControllerGrip = function (a) {
            let b = u[a];
            return (
              void 0 === b && ((b = new cS()), (u[a] = b)),
              b.getGripSpace()
            );
          }),
          (this.getHand = function (a) {
            let b = u[a];
            return (
              void 0 === b && ((b = new cS()), (u[a] = b)),
              b.getHandSpace()
            );
          }),
          (this.setFramebufferScaleFactor = function (a) {
            ((e = a),
              !0 === c.isPresenting &&
                _(
                  'WebXRManager: Cannot change framebuffer scale while presenting.'
                ));
          }),
          (this.setReferenceSpaceType = function (a) {
            ((g = a),
              !0 === c.isPresenting &&
                _(
                  'WebXRManager: Cannot change reference space type while presenting.'
                ));
          }),
          (this.getReferenceSpace = function () {
            return i || f;
          }),
          (this.setReferenceSpace = function (a) {
            i = a;
          }),
          (this.getBaseLayer = function () {
            return null !== l ? l : m;
          }),
          (this.getBinding = function () {
            return (null === k && o && (k = new XRWebGLBinding(d, b)), k);
          }),
          (this.getFrame = function () {
            return n;
          }),
          (this.getSession = function () {
            return d;
          }),
          (this.setSession = async function (j) {
            if (null !== (d = j)) {
              if (
                ((s = a.getRenderTarget()),
                d.addEventListener('select', E),
                d.addEventListener('selectstart', E),
                d.addEventListener('selectend', E),
                d.addEventListener('squeeze', E),
                d.addEventListener('squeezestart', E),
                d.addEventListener('squeezeend', E),
                d.addEventListener('end', F),
                d.addEventListener('inputsourceschange', G),
                !0 !== r.xrCompatible && (await b.makeXRCompatible()),
                (x = a.getPixelRatio()),
                a.getSize(w),
                o && 'createProjectionLayer' in XRWebGLBinding.prototype)
              ) {
                let c = null,
                  f = null,
                  g = null;
                r.depth &&
                  ((g = r.stencil ? b.DEPTH24_STENCIL8 : b.DEPTH_COMPONENT24),
                  (c = r.stencil ? 1027 : 1026),
                  (f = r.stencil ? 1020 : 1014));
                let h = {
                  colorFormat: b.RGBA8,
                  depthFormat: g,
                  scaleFactor: e,
                };
                ((l = (k = this.getBinding()).createProjectionLayer(h)),
                  d.updateRenderState({ layers: [l] }),
                  a.setPixelRatio(1),
                  a.setSize(l.textureWidth, l.textureHeight, !1),
                  (t = new aJ(l.textureWidth, l.textureHeight, {
                    format: 1023,
                    type: 1009,
                    depthTexture: new ew(
                      l.textureWidth,
                      l.textureHeight,
                      f,
                      void 0,
                      void 0,
                      void 0,
                      void 0,
                      void 0,
                      void 0,
                      c
                    ),
                    stencilBuffer: r.stencil,
                    colorSpace: a.outputColorSpace,
                    samples: 4 * !!r.antialias,
                    resolveDepthBuffer: !1 === l.ignoreDepthValues,
                    resolveStencilBuffer: !1 === l.ignoreDepthValues,
                  })));
              } else {
                let c = {
                  antialias: r.antialias,
                  alpha: !0,
                  depth: r.depth,
                  stencil: r.stencil,
                  framebufferScaleFactor: e,
                };
                ((m = new XRWebGLLayer(d, b, c)),
                  d.updateRenderState({ baseLayer: m }),
                  a.setPixelRatio(1),
                  a.setSize(m.framebufferWidth, m.framebufferHeight, !1),
                  (t = new aJ(m.framebufferWidth, m.framebufferHeight, {
                    format: 1023,
                    type: 1009,
                    colorSpace: a.outputColorSpace,
                    stencilBuffer: r.stencil,
                    resolveDepthBuffer: !1 === m.ignoreDepthValues,
                    resolveStencilBuffer: !1 === m.ignoreDepthValues,
                  })));
              }
              ((t.isXRRenderTarget = !0),
                this.setFoveation(h),
                (i = null),
                (f = await d.requestReferenceSpace(g)),
                L.setContext(d),
                L.start(),
                (c.isPresenting = !0),
                c.dispatchEvent({ type: 'sessionstart' }));
            }
          }),
          (this.getEnvironmentBlendMode = function () {
            if (null !== d) return d.environmentBlendMode;
          }),
          (this.getDepthTexture = function () {
            return p.getDepthTexture();
          }));
        const H = new aq(),
          I = new aq();
        function J(a, b) {
          (null === b
            ? a.matrixWorld.copy(a.matrix)
            : a.matrixWorld.multiplyMatrices(b.matrixWorld, a.matrix),
            a.matrixWorldInverse.copy(a.matrixWorld).invert());
        }
        ((this.updateCamera = function (a) {
          var b, c, e;
          if (null === d) return;
          let f = a.near,
            g = a.far;
          (null !== p.texture &&
            (p.depthNear > 0 && (f = p.depthNear),
            p.depthFar > 0 && (g = p.depthFar)),
            (B.near = z.near = y.near = f),
            (B.far = z.far = y.far = g),
            (C !== B.near || D !== B.far) &&
              (d.updateRenderState({ depthNear: B.near, depthFar: B.far }),
              (C = B.near),
              (D = B.far)),
            (B.layers.mask = 6 | a.layers.mask),
            (y.layers.mask = 3 & B.layers.mask),
            (z.layers.mask = 5 & B.layers.mask));
          let h = a.parent,
            i = B.cameras;
          J(B, h);
          for (let a = 0; a < i.length; a++) J(i[a], h);
          (2 === i.length
            ? (function (a, b, c) {
                (H.setFromMatrixPosition(b.matrixWorld),
                  I.setFromMatrixPosition(c.matrixWorld));
                let d = H.distanceTo(I),
                  e = b.projectionMatrix.elements,
                  f = c.projectionMatrix.elements,
                  g = e[14] / (e[10] - 1),
                  h = e[14] / (e[10] + 1),
                  i = (e[9] + 1) / e[5],
                  j = (e[9] - 1) / e[5],
                  k = (e[8] - 1) / e[0],
                  l = (f[8] + 1) / f[0],
                  m = d / (-k + l),
                  n = -(m * k);
                if (
                  (b.matrixWorld.decompose(a.position, a.quaternion, a.scale),
                  a.translateX(n),
                  a.translateZ(m),
                  a.matrixWorld.compose(a.position, a.quaternion, a.scale),
                  a.matrixWorldInverse.copy(a.matrixWorld).invert(),
                  -1 === e[10])
                )
                  (a.projectionMatrix.copy(b.projectionMatrix),
                    a.projectionMatrixInverse.copy(b.projectionMatrixInverse));
                else {
                  let b = g + m,
                    c = h + m;
                  (a.projectionMatrix.makePerspective(
                    g * k - n,
                    g * l + (d - n),
                    ((i * h) / c) * b,
                    ((j * h) / c) * b,
                    b,
                    c
                  ),
                    a.projectionMatrixInverse
                      .copy(a.projectionMatrix)
                      .invert());
                }
              })(B, y, z)
            : B.projectionMatrix.copy(y.projectionMatrix),
            (b = a),
            (c = B),
            null === (e = h)
              ? b.matrix.copy(c.matrixWorld)
              : (b.matrix.copy(e.matrixWorld),
                b.matrix.invert(),
                b.matrix.multiply(c.matrixWorld)),
            b.matrix.decompose(b.position, b.quaternion, b.scale),
            b.updateMatrixWorld(!0),
            b.projectionMatrix.copy(c.projectionMatrix),
            b.projectionMatrixInverse.copy(c.projectionMatrixInverse),
            b.isPerspectiveCamera &&
              ((b.fov = 2 * ag * Math.atan(1 / b.projectionMatrix.elements[5])),
              (b.zoom = 1)));
        }),
          (this.getCamera = function () {
            return B;
          }),
          (this.getFoveation = function () {
            if (null !== l || null !== m) return h;
          }),
          (this.setFoveation = function (a) {
            ((h = a),
              null !== l && (l.fixedFoveation = a),
              null !== m &&
                void 0 !== m.fixedFoveation &&
                (m.fixedFoveation = a));
          }),
          (this.hasDepthSensing = function () {
            return null !== p.texture;
          }),
          (this.getDepthSensingMesh = function () {
            return p.getMesh(B);
          }),
          (this.getCameraTexture = function (a) {
            return q[a];
          }));
        let K = null;
        const L = new ia();
        (L.setAnimationLoop(function (b, e) {
          if (((j = e.getViewerPose(i || f)), (n = e), null !== j)) {
            let b = j.views;
            null !== m &&
              (a.setRenderTargetFramebuffer(t, m.framebuffer),
              a.setRenderTarget(t));
            let e = !1;
            b.length !== B.cameras.length && ((B.cameras.length = 0), (e = !0));
            for (let c = 0; c < b.length; c++) {
              let d = b[c],
                f = null;
              if (null !== m) f = m.getViewport(d);
              else {
                let b = k.getViewSubImage(l, d);
                ((f = b.viewport),
                  0 === c &&
                    (a.setRenderTargetTextures(
                      t,
                      b.colorTexture,
                      b.depthStencilTexture
                    ),
                    a.setRenderTarget(t)));
              }
              let g = A[c];
              (void 0 === g &&
                ((g = new cM()).layers.enable(c),
                (g.viewport = new aH()),
                (A[c] = g)),
                g.matrix.fromArray(d.transform.matrix),
                g.matrix.decompose(g.position, g.quaternion, g.scale),
                g.projectionMatrix.fromArray(d.projectionMatrix),
                g.projectionMatrixInverse.copy(g.projectionMatrix).invert(),
                g.viewport.set(f.x, f.y, f.width, f.height),
                0 === c &&
                  (B.matrix.copy(g.matrix),
                  B.matrix.decompose(B.position, B.quaternion, B.scale)),
                !0 === e && B.cameras.push(g));
            }
            let f = d.enabledFeatures;
            if (
              f &&
              f.includes('depth-sensing') &&
              'gpu-optimized' == d.depthUsage &&
              o
            ) {
              let a = (k = c.getBinding()).getDepthInformation(b[0]);
              a && a.isValid && a.texture && p.init(a, d.renderState);
            }
            if (f && f.includes('camera-access') && o) {
              (a.state.unbindTexture(), (k = c.getBinding()));
              for (let a = 0; a < b.length; a++) {
                let c = b[a].camera;
                if (c) {
                  let a = q[c];
                  a || ((a = new ey()), (q[c] = a));
                  let b = k.getCameraImage(c);
                  a.sourceTexture = b;
                }
              }
            }
          }
          for (let a = 0; a < u.length; a++) {
            let b = v[a],
              c = u[a];
            null !== b && void 0 !== c && c.update(b, e, i || f);
          }
          (K && K(b, e),
            e.detectedPlanes &&
              c.dispatchEvent({ type: 'planesdetected', data: e }),
            (n = null));
        }),
          (this.setAnimationLoop = function (a) {
            K = a;
          }),
          (this.dispose = function () {}));
      }
    }
    let ku = new bn(),
      kv = new bd();
    function kw(a, b) {
      function c(a, b) {
        (!0 === a.matrixAutoUpdate && a.updateMatrix(), b.value.copy(a.matrix));
      }
      function d(a, d) {
        ((a.opacity.value = d.opacity),
          d.color && a.diffuse.value.copy(d.color),
          d.emissive &&
            a.emissive.value
              .copy(d.emissive)
              .multiplyScalar(d.emissiveIntensity),
          d.map && ((a.map.value = d.map), c(d.map, a.mapTransform)),
          d.alphaMap &&
            ((a.alphaMap.value = d.alphaMap),
            c(d.alphaMap, a.alphaMapTransform)),
          d.bumpMap &&
            ((a.bumpMap.value = d.bumpMap),
            c(d.bumpMap, a.bumpMapTransform),
            (a.bumpScale.value = d.bumpScale),
            1 === d.side && (a.bumpScale.value *= -1)),
          d.normalMap &&
            ((a.normalMap.value = d.normalMap),
            c(d.normalMap, a.normalMapTransform),
            a.normalScale.value.copy(d.normalScale),
            1 === d.side && a.normalScale.value.negate()),
          d.displacementMap &&
            ((a.displacementMap.value = d.displacementMap),
            c(d.displacementMap, a.displacementMapTransform),
            (a.displacementScale.value = d.displacementScale),
            (a.displacementBias.value = d.displacementBias)),
          d.emissiveMap &&
            ((a.emissiveMap.value = d.emissiveMap),
            c(d.emissiveMap, a.emissiveMapTransform)),
          d.specularMap &&
            ((a.specularMap.value = d.specularMap),
            c(d.specularMap, a.specularMapTransform)),
          d.alphaTest > 0 && (a.alphaTest.value = d.alphaTest));
        let e = b.get(d),
          f = e.envMap,
          g = e.envMapRotation;
        (f &&
          ((a.envMap.value = f),
          ku.copy(g),
          (ku.x *= -1),
          (ku.y *= -1),
          (ku.z *= -1),
          f.isCubeTexture &&
            !1 === f.isRenderTargetTexture &&
            ((ku.y *= -1), (ku.z *= -1)),
          a.envMapRotation.value.setFromMatrix4(kv.makeRotationFromEuler(ku)),
          (a.flipEnvMap.value =
            f.isCubeTexture && !1 === f.isRenderTargetTexture ? -1 : 1),
          (a.reflectivity.value = d.reflectivity),
          (a.ior.value = d.ior),
          (a.refractionRatio.value = d.refractionRatio)),
          d.lightMap &&
            ((a.lightMap.value = d.lightMap),
            (a.lightMapIntensity.value = d.lightMapIntensity),
            c(d.lightMap, a.lightMapTransform)),
          d.aoMap &&
            ((a.aoMap.value = d.aoMap),
            (a.aoMapIntensity.value = d.aoMapIntensity),
            c(d.aoMap, a.aoMapTransform)));
      }
      return {
        refreshFogUniforms: function (b, c) {
          (c.color.getRGB(b.fogColor.value, cF(a)),
            c.isFog
              ? ((b.fogNear.value = c.near), (b.fogFar.value = c.far))
              : c.isFogExp2 && (b.fogDensity.value = c.density));
        },
        refreshMaterialUniforms: function (a, e, f, g, h) {
          var i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t,
            u,
            v,
            w,
            x,
            y,
            z,
            A,
            B,
            C,
            D,
            E;
          let F;
          e.isMeshBasicMaterial || e.isMeshLambertMaterial
            ? d(a, e)
            : e.isMeshToonMaterial
              ? (d(a, e),
                (i = a),
                (j = e).gradientMap && (i.gradientMap.value = j.gradientMap))
              : e.isMeshPhongMaterial
                ? (d(a, e),
                  (k = a),
                  (l = e),
                  k.specular.value.copy(l.specular),
                  (k.shininess.value = Math.max(l.shininess, 1e-4)))
                : e.isMeshStandardMaterial
                  ? (d(a, e),
                    (m = a),
                    (n = e),
                    (m.metalness.value = n.metalness),
                    n.metalnessMap &&
                      ((m.metalnessMap.value = n.metalnessMap),
                      c(n.metalnessMap, m.metalnessMapTransform)),
                    (m.roughness.value = n.roughness),
                    n.roughnessMap &&
                      ((m.roughnessMap.value = n.roughnessMap),
                      c(n.roughnessMap, m.roughnessMapTransform)),
                    n.envMap && (m.envMapIntensity.value = n.envMapIntensity),
                    e.isMeshPhysicalMaterial &&
                      ((o = a),
                      (p = e),
                      (q = h),
                      (o.ior.value = p.ior),
                      p.sheen > 0 &&
                        (o.sheenColor.value
                          .copy(p.sheenColor)
                          .multiplyScalar(p.sheen),
                        (o.sheenRoughness.value = p.sheenRoughness),
                        p.sheenColorMap &&
                          ((o.sheenColorMap.value = p.sheenColorMap),
                          c(p.sheenColorMap, o.sheenColorMapTransform)),
                        p.sheenRoughnessMap &&
                          ((o.sheenRoughnessMap.value = p.sheenRoughnessMap),
                          c(
                            p.sheenRoughnessMap,
                            o.sheenRoughnessMapTransform
                          ))),
                      p.clearcoat > 0 &&
                        ((o.clearcoat.value = p.clearcoat),
                        (o.clearcoatRoughness.value = p.clearcoatRoughness),
                        p.clearcoatMap &&
                          ((o.clearcoatMap.value = p.clearcoatMap),
                          c(p.clearcoatMap, o.clearcoatMapTransform)),
                        p.clearcoatRoughnessMap &&
                          ((o.clearcoatRoughnessMap.value =
                            p.clearcoatRoughnessMap),
                          c(
                            p.clearcoatRoughnessMap,
                            o.clearcoatRoughnessMapTransform
                          )),
                        p.clearcoatNormalMap &&
                          ((o.clearcoatNormalMap.value = p.clearcoatNormalMap),
                          c(
                            p.clearcoatNormalMap,
                            o.clearcoatNormalMapTransform
                          ),
                          o.clearcoatNormalScale.value.copy(
                            p.clearcoatNormalScale
                          ),
                          1 === p.side &&
                            o.clearcoatNormalScale.value.negate())),
                      p.dispersion > 0 && (o.dispersion.value = p.dispersion),
                      p.iridescence > 0 &&
                        ((o.iridescence.value = p.iridescence),
                        (o.iridescenceIOR.value = p.iridescenceIOR),
                        (o.iridescenceThicknessMinimum.value =
                          p.iridescenceThicknessRange[0]),
                        (o.iridescenceThicknessMaximum.value =
                          p.iridescenceThicknessRange[1]),
                        p.iridescenceMap &&
                          ((o.iridescenceMap.value = p.iridescenceMap),
                          c(p.iridescenceMap, o.iridescenceMapTransform)),
                        p.iridescenceThicknessMap &&
                          ((o.iridescenceThicknessMap.value =
                            p.iridescenceThicknessMap),
                          c(
                            p.iridescenceThicknessMap,
                            o.iridescenceThicknessMapTransform
                          ))),
                      p.transmission > 0 &&
                        ((o.transmission.value = p.transmission),
                        (o.transmissionSamplerMap.value = q.texture),
                        o.transmissionSamplerSize.value.set(q.width, q.height),
                        p.transmissionMap &&
                          ((o.transmissionMap.value = p.transmissionMap),
                          c(p.transmissionMap, o.transmissionMapTransform)),
                        (o.thickness.value = p.thickness),
                        p.thicknessMap &&
                          ((o.thicknessMap.value = p.thicknessMap),
                          c(p.thicknessMap, o.thicknessMapTransform)),
                        (o.attenuationDistance.value = p.attenuationDistance),
                        o.attenuationColor.value.copy(p.attenuationColor)),
                      p.anisotropy > 0 &&
                        (o.anisotropyVector.value.set(
                          p.anisotropy * Math.cos(p.anisotropyRotation),
                          p.anisotropy * Math.sin(p.anisotropyRotation)
                        ),
                        p.anisotropyMap &&
                          ((o.anisotropyMap.value = p.anisotropyMap),
                          c(p.anisotropyMap, o.anisotropyMapTransform))),
                      (o.specularIntensity.value = p.specularIntensity),
                      o.specularColor.value.copy(p.specularColor),
                      p.specularColorMap &&
                        ((o.specularColorMap.value = p.specularColorMap),
                        c(p.specularColorMap, o.specularColorMapTransform)),
                      p.specularIntensityMap &&
                        ((o.specularIntensityMap.value =
                          p.specularIntensityMap),
                        c(
                          p.specularIntensityMap,
                          o.specularIntensityMapTransform
                        ))))
                  : e.isMeshMatcapMaterial
                    ? (d(a, e),
                      (r = a),
                      (s = e).matcap && (r.matcap.value = s.matcap))
                    : e.isMeshDepthMaterial
                      ? d(a, e)
                      : e.isMeshDistanceMaterial
                        ? (d(a, e),
                          (t = a),
                          (u = e),
                          (F = b.get(u).light),
                          t.referencePosition.value.setFromMatrixPosition(
                            F.matrixWorld
                          ),
                          (t.nearDistance.value = F.shadow.camera.near),
                          (t.farDistance.value = F.shadow.camera.far))
                        : e.isMeshNormalMaterial
                          ? d(a, e)
                          : e.isLineBasicMaterial
                            ? ((v = a),
                              (w = e),
                              v.diffuse.value.copy(w.color),
                              (v.opacity.value = w.opacity),
                              w.map &&
                                ((v.map.value = w.map),
                                c(w.map, v.mapTransform)),
                              e.isLineDashedMaterial &&
                                ((x = a),
                                (y = e),
                                (x.dashSize.value = y.dashSize),
                                (x.totalSize.value = y.dashSize + y.gapSize),
                                (x.scale.value = y.scale)))
                            : e.isPointsMaterial
                              ? ((z = a),
                                (A = e),
                                (B = f),
                                (C = g),
                                z.diffuse.value.copy(A.color),
                                (z.opacity.value = A.opacity),
                                (z.size.value = A.size * B),
                                (z.scale.value = 0.5 * C),
                                A.map &&
                                  ((z.map.value = A.map),
                                  c(A.map, z.uvTransform)),
                                A.alphaMap &&
                                  ((z.alphaMap.value = A.alphaMap),
                                  c(A.alphaMap, z.alphaMapTransform)),
                                A.alphaTest > 0 &&
                                  (z.alphaTest.value = A.alphaTest))
                              : e.isSpriteMaterial
                                ? ((D = a),
                                  (E = e),
                                  D.diffuse.value.copy(E.color),
                                  (D.opacity.value = E.opacity),
                                  (D.rotation.value = E.rotation),
                                  E.map &&
                                    ((D.map.value = E.map),
                                    c(E.map, D.mapTransform)),
                                  E.alphaMap &&
                                    ((D.alphaMap.value = E.alphaMap),
                                    c(E.alphaMap, D.alphaMapTransform)),
                                  E.alphaTest > 0 &&
                                    (D.alphaTest.value = E.alphaTest))
                                : e.isShadowMaterial
                                  ? (a.color.value.copy(e.color),
                                    (a.opacity.value = e.opacity))
                                  : e.isShaderMaterial &&
                                    (e.uniformsNeedUpdate = !1);
        },
      };
    }
    function kx(a, b, c, d) {
      let e = {},
        f = {},
        g = [],
        h = a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);
      function i(a) {
        let b = { boundary: 0, storage: 0 };
        return (
          'number' == typeof a || 'boolean' == typeof a
            ? ((b.boundary = 4), (b.storage = 4))
            : a.isVector2
              ? ((b.boundary = 8), (b.storage = 8))
              : a.isVector3 || a.isColor
                ? ((b.boundary = 16), (b.storage = 12))
                : a.isVector4
                  ? ((b.boundary = 16), (b.storage = 16))
                  : a.isMatrix3
                    ? ((b.boundary = 48), (b.storage = 48))
                    : a.isMatrix4
                      ? ((b.boundary = 64), (b.storage = 64))
                      : a.isTexture
                        ? _(
                            'WebGLRenderer: Texture samplers can not be part of an uniforms group.'
                          )
                        : _(
                            'WebGLRenderer: Unsupported uniform value type.',
                            a
                          ),
          b
        );
      }
      function j(b) {
        let c = b.target;
        c.removeEventListener('dispose', j);
        let d = g.indexOf(c.__bindingPointIndex);
        (g.splice(d, 1),
          a.deleteBuffer(e[c.id]),
          delete e[c.id],
          delete f[c.id]);
      }
      return {
        bind: function (a, b) {
          let c = b.program;
          d.uniformBlockBinding(a, c);
        },
        update: function (c, k) {
          var l;
          let m,
            n,
            o,
            p,
            q = e[c.id];
          void 0 === q &&
            ((function (a) {
              let b = a.uniforms,
                c = 0;
              for (let a = 0, d = b.length; a < d; a++) {
                let d = Array.isArray(b[a]) ? b[a] : [b[a]];
                for (let a = 0, b = d.length; a < b; a++) {
                  let b = d[a],
                    e = Array.isArray(b.value) ? b.value : [b.value];
                  for (let a = 0, d = e.length; a < d; a++) {
                    let d = i(e[a]),
                      f = c % 16,
                      g = f % d.boundary,
                      h = f + g;
                    ((c += g),
                      0 !== h && 16 - h < d.storage && (c += 16 - h),
                      (b.__data = new Float32Array(
                        d.storage / Float32Array.BYTES_PER_ELEMENT
                      )),
                      (b.__offset = c),
                      (c += d.storage));
                  }
                }
              }
              let d = c % 16;
              (d > 0 && (c += 16 - d), (a.__size = c), (a.__cache = {}));
            })(c),
            ((l = c).__bindingPointIndex = m =
              (function () {
                for (let a = 0; a < h; a++)
                  if (-1 === g.indexOf(a)) return (g.push(a), a);
                return (
                  aa(
                    'WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.'
                  ),
                  0
                );
              })()),
            (n = a.createBuffer()),
            (o = l.__size),
            (p = l.usage),
            a.bindBuffer(a.UNIFORM_BUFFER, n),
            a.bufferData(a.UNIFORM_BUFFER, o, p),
            a.bindBuffer(a.UNIFORM_BUFFER, null),
            a.bindBufferBase(a.UNIFORM_BUFFER, m, n),
            (q = n),
            (e[c.id] = q),
            c.addEventListener('dispose', j));
          let r = k.program;
          d.updateUBOMapping(c, r);
          let s = b.render.frame;
          f[c.id] !== s &&
            ((function (b) {
              let c = e[b.id],
                d = b.uniforms,
                f = b.__cache;
              a.bindBuffer(a.UNIFORM_BUFFER, c);
              for (let b = 0, c = d.length; b < c; b++) {
                let c = Array.isArray(d[b]) ? d[b] : [d[b]];
                for (let d = 0, e = c.length; d < e; d++) {
                  let e = c[d];
                  if (
                    !0 ===
                    (function (a, b, c, d) {
                      let e = a.value,
                        f = b + '_' + c;
                      if (void 0 === d[f])
                        return (
                          'number' == typeof e || 'boolean' == typeof e
                            ? (d[f] = e)
                            : (d[f] = e.clone()),
                          !0
                        );
                      {
                        let a = d[f];
                        if ('number' == typeof e || 'boolean' == typeof e) {
                          if (a !== e) return ((d[f] = e), !0);
                        } else if (!1 === a.equals(e)) return (a.copy(e), !0);
                      }
                      return !1;
                    })(e, b, d, f)
                  ) {
                    let b = e.__offset,
                      c = Array.isArray(e.value) ? e.value : [e.value],
                      d = 0;
                    for (let f = 0; f < c.length; f++) {
                      let g = c[f],
                        h = i(g);
                      'number' == typeof g || 'boolean' == typeof g
                        ? ((e.__data[0] = g),
                          a.bufferSubData(a.UNIFORM_BUFFER, b + d, e.__data))
                        : g.isMatrix3
                          ? ((e.__data[0] = g.elements[0]),
                            (e.__data[1] = g.elements[1]),
                            (e.__data[2] = g.elements[2]),
                            (e.__data[3] = 0),
                            (e.__data[4] = g.elements[3]),
                            (e.__data[5] = g.elements[4]),
                            (e.__data[6] = g.elements[5]),
                            (e.__data[7] = 0),
                            (e.__data[8] = g.elements[6]),
                            (e.__data[9] = g.elements[7]),
                            (e.__data[10] = g.elements[8]),
                            (e.__data[11] = 0))
                          : (g.toArray(e.__data, d),
                            (d += h.storage / Float32Array.BYTES_PER_ELEMENT));
                    }
                    a.bufferSubData(a.UNIFORM_BUFFER, b, e.__data);
                  }
                }
              }
              a.bindBuffer(a.UNIFORM_BUFFER, null);
            })(c),
            (f[c.id] = s));
        },
        dispose: function () {
          for (let b in e) a.deleteBuffer(e[b]);
          ((g = []), (e = {}), (f = {}));
        },
      };
    }
    let ky = new Uint16Array([
        12469, 15057, 12620, 14925, 13266, 14620, 13807, 14376, 14323, 13990,
        14545, 13625, 14713, 13328, 14840, 12882, 14931, 12528, 14996, 12233,
        15039, 11829, 15066, 11525, 15080, 11295, 15085, 10976, 15082, 10705,
        15073, 10495, 13880, 14564, 13898, 14542, 13977, 14430, 14158, 14124,
        14393, 13732, 14556, 13410, 14702, 12996, 14814, 12596, 14891, 12291,
        14937, 11834, 14957, 11489, 14958, 11194, 14943, 10803, 14921, 10506,
        14893, 10278, 14858, 9960, 14484, 14039, 14487, 14025, 14499, 13941,
        14524, 13740, 14574, 13468, 14654, 13106, 14743, 12678, 14818, 12344,
        14867, 11893, 14889, 11509, 14893, 11180, 14881, 10751, 14852, 10428,
        14812, 10128, 14765, 9754, 14712, 9466, 14764, 13480, 14764, 13475,
        14766, 13440, 14766, 13347, 14769, 13070, 14786, 12713, 14816, 12387,
        14844, 11957, 14860, 11549, 14868, 11215, 14855, 10751, 14825, 10403,
        14782, 10044, 14729, 9651, 14666, 9352, 14599, 9029, 14967, 12835,
        14966, 12831, 14963, 12804, 14954, 12723, 14936, 12564, 14917, 12347,
        14900, 11958, 14886, 11569, 14878, 11247, 14859, 10765, 14828, 10401,
        14784, 10011, 14727, 9600, 14660, 9289, 14586, 8893, 14508, 8533, 15111,
        12234, 15110, 12234, 15104, 12216, 15092, 12156, 15067, 12010, 15028,
        11776, 14981, 11500, 14942, 11205, 14902, 10752, 14861, 10393, 14812,
        9991, 14752, 9570, 14682, 9252, 14603, 8808, 14519, 8445, 14431, 8145,
        15209, 11449, 15208, 11451, 15202, 11451, 15190, 11438, 15163, 11384,
        15117, 11274, 15055, 10979, 14994, 10648, 14932, 10343, 14871, 9936,
        14803, 9532, 14729, 9218, 14645, 8742, 14556, 8381, 14461, 8020, 14365,
        7603, 15273, 10603, 15272, 10607, 15267, 10619, 15256, 10631, 15231,
        10614, 15182, 10535, 15118, 10389, 15042, 10167, 14963, 9787, 14883,
        9447, 14800, 9115, 14710, 8665, 14615, 8318, 14514, 7911, 14411, 7507,
        14279, 7198, 15314, 9675, 15313, 9683, 15309, 9712, 15298, 9759, 15277,
        9797, 15229, 9773, 15166, 9668, 15084, 9487, 14995, 9274, 14898, 8910,
        14800, 8539, 14697, 8234, 14590, 7790, 14479, 7409, 14367, 7067, 14178,
        6621, 15337, 8619, 15337, 8631, 15333, 8677, 15325, 8769, 15305, 8871,
        15264, 8940, 15202, 8909, 15119, 8775, 15022, 8565, 14916, 8328, 14804,
        8009, 14688, 7614, 14569, 7287, 14448, 6888, 14321, 6483, 14088, 6171,
        15350, 7402, 15350, 7419, 15347, 7480, 15340, 7613, 15322, 7804, 15287,
        7973, 15229, 8057, 15148, 8012, 15046, 7846, 14933, 7611, 14810, 7357,
        14682, 7069, 14552, 6656, 14421, 6316, 14251, 5948, 14007, 5528, 15356,
        5942, 15356, 5977, 15353, 6119, 15348, 6294, 15332, 6551, 15302, 6824,
        15249, 7044, 15171, 7122, 15070, 7050, 14949, 6861, 14818, 6611, 14679,
        6349, 14538, 6067, 14398, 5651, 14189, 5311, 13935, 4958, 15359, 4123,
        15359, 4153, 15356, 4296, 15353, 4646, 15338, 5160, 15311, 5508, 15263,
        5829, 15188, 6042, 15088, 6094, 14966, 6001, 14826, 5796, 14678, 5543,
        14527, 5287, 14377, 4985, 14133, 4586, 13869, 4257, 15360, 1563, 15360,
        1642, 15358, 2076, 15354, 2636, 15341, 3350, 15317, 4019, 15273, 4429,
        15203, 4732, 15105, 4911, 14981, 4932, 14836, 4818, 14679, 4621, 14517,
        4386, 14359, 4156, 14083, 3795, 13808, 3437, 15360, 122, 15360, 137,
        15358, 285, 15355, 636, 15344, 1274, 15322, 2177, 15281, 2765, 15215,
        3223, 15120, 3451, 14995, 3569, 14846, 3567, 14681, 3466, 14511, 3305,
        14344, 3121, 14037, 2800, 13753, 2467, 15360, 0, 15360, 1, 15359, 21,
        15355, 89, 15346, 253, 15325, 479, 15287, 796, 15225, 1148, 15133, 1492,
        15008, 1749, 14856, 1882, 14685, 1886, 14506, 1783, 14324, 1608, 13996,
        1398, 13702, 1183,
      ]),
      kz = null;
    class kA {
      constructor(a = {}) {
        let b,
          c,
          d,
          e,
          f,
          g,
          h,
          i,
          j,
          k,
          l,
          m,
          n,
          o,
          p,
          q,
          r,
          s,
          t,
          u,
          v,
          w,
          x,
          y,
          z;
        const {
          canvas: A = V(),
          context: B = null,
          depth: C = !0,
          stencil: D = !1,
          alpha: E = !1,
          antialias: F = !1,
          premultipliedAlpha: G = !0,
          preserveDrawingBuffer: H = !1,
          powerPreference: K = 'default',
          failIfMajorPerformanceCaveat: L = !1,
          reversedDepthBuffer: M = !1,
          outputBufferType: N = 1009,
        } = a;
        if (((this.isWebGLRenderer = !0), null !== B)) {
          if (
            'u' > typeof WebGLRenderingContext &&
            B instanceof WebGLRenderingContext
          )
            throw Error(
              'THREE.WebGLRenderer: WebGL 1 is not supported since r163.'
            );
          b = B.getContextAttributes().alpha;
        } else b = E;
        const O = new Set([1033, 1031, 1029]),
          P = new Set([1009, 1014, 1012, 1020, 1017, 1018]),
          Q = new Uint32Array(4),
          R = new Int32Array(4);
        let S = null,
          T = null;
        const U = [],
          W = [];
        let X = null;
        ((this.domElement = A),
          (this.debug = { checkShaderErrors: !0, onShaderError: null }),
          (this.autoClear = !0),
          (this.autoClearColor = !0),
          (this.autoClearDepth = !0),
          (this.autoClearStencil = !0),
          (this.sortObjects = !0),
          (this.clippingPlanes = []),
          (this.localClippingEnabled = !1),
          (this.toneMapping = 0),
          (this.toneMappingExposure = 1),
          (this.transmissionResolutionScale = 1));
        const Y = this;
        let Z = !1;
        this._outputColorSpace = I;
        let ac = 0,
          ad = 0,
          ae = null,
          af = -1,
          ag = null;
        const ah = new aH(),
          ai = new aH();
        let aj = null;
        const ak = new bX(0);
        let al = 0,
          am = A.width,
          an = A.height,
          ao = 1,
          ap = null,
          ar = null;
        const as = new aH(0, 0, am, an),
          at = new aH(0, 0, am, an);
        let au = !1;
        const av = new dL();
        let aw = !1,
          ay = !1;
        const az = new bd(),
          aA = new aq(),
          aB = new aH(),
          aC = {
            background: null,
            fog: null,
            environment: null,
            overrideMaterial: null,
            isScene: !0,
          };
        let aD = !1;
        function aE() {
          return null === ae ? ao : 1;
        }
        let aF = B;
        function aG(a, b) {
          return A.getContext(a, b);
        }
        try {
          if (
            ('setAttribute' in A &&
              A.setAttribute('data-engine', 'three.js r182'),
            A.addEventListener('webglcontextlost', aL, !1),
            A.addEventListener('webglcontextrestored', aM, !1),
            A.addEventListener('webglcontextcreationerror', aN, !1),
            null === aF)
          ) {
            const a = 'webgl2';
            if (
              ((aF = aG(a, {
                alpha: !0,
                depth: C,
                stencil: D,
                antialias: F,
                premultipliedAlpha: G,
                preserveDrawingBuffer: H,
                powerPreference: K,
                failIfMajorPerformanceCaveat: L,
              })),
              null === aF)
            )
              if (aG(a))
                throw Error(
                  'Error creating WebGL context with your selected attributes.'
                );
              else throw Error('Error creating WebGL context.');
          }
        } catch (a) {
          throw (aa('WebGLRenderer: ' + a.message), a);
        }
        function aI() {
          ((c = new iF(aF)).init(),
            (x = new kp(aF, c)),
            (d = new im(aF, c, a, x)),
            (e = new kn(aF, c)),
            d.reversedDepthBuffer && M && e.buffers.depth.setReversed(!0),
            (f = new iI(aF)),
            (g = new j5()),
            (h = new ko(aF, c, e, g, d, x, f)),
            (i = new ip(Y)),
            (j = new iE(Y)),
            (k = new ib(aF)),
            (y = new ik(aF, k)),
            (l = new iG(aF, k, f, y)),
            (m = new iK(aF, l, k, f)),
            (u = new iJ(aF, d, h)),
            (r = new io(g)),
            (n = new j4(Y, i, j, c, d, y, r)),
            (o = new kw(Y, g)),
            (p = new j9()),
            (q = new kf(c)),
            (t = new ij(Y, i, j, e, m, b, G)),
            (s = new kl(Y, m, d)),
            (z = new kx(aF, f, d, e)),
            (v = new il(aF, c, f)),
            (w = new iH(aF, c, f)),
            (f.programs = n.programs),
            (Y.capabilities = d),
            (Y.extensions = c),
            (Y.properties = g),
            (Y.renderLists = p),
            (Y.shadowMap = s),
            (Y.state = e),
            (Y.info = f));
        }
        (aI(), 1009 !== N && (X = new iM(N, A.width, A.height, C, D)));
        const aK = new kt(Y, aF);
        function aL(a) {
          (a.preventDefault(), $('WebGLRenderer: Context Lost.'), (Z = !0));
        }
        function aM() {
          ($('WebGLRenderer: Context Restored.'), (Z = !1));
          let a = f.autoReset,
            b = s.enabled,
            c = s.autoUpdate,
            d = s.needsUpdate,
            e = s.type;
          (aI(),
            (f.autoReset = a),
            (s.enabled = b),
            (s.autoUpdate = c),
            (s.needsUpdate = d),
            (s.type = e));
        }
        function aN(a) {
          aa(
            'WebGLRenderer: A WebGL context could not be created. Reason: ',
            a.statusMessage
          );
        }
        function aO(a) {
          var b, c;
          let d,
            e = a.target;
          (e.removeEventListener('dispose', aO),
            (c = b = e),
            void 0 !== (d = g.get(c).programs) &&
              (d.forEach(function (a) {
                n.releaseProgram(a);
              }),
              c.isShaderMaterial && n.releaseShaderCache(c)),
            g.remove(b));
        }
        function aP(a, b, c) {
          !0 === a.transparent && 2 === a.side && !1 === a.forceSinglePass
            ? ((a.side = 1),
              (a.needsUpdate = !0),
              aZ(a, b, c),
              (a.side = 0),
              (a.needsUpdate = !0),
              aZ(a, b, c),
              (a.side = 2))
            : aZ(a, b, c);
        }
        ((this.xr = aK),
          (this.getContext = function () {
            return aF;
          }),
          (this.getContextAttributes = function () {
            return aF.getContextAttributes();
          }),
          (this.forceContextLoss = function () {
            let a = c.get('WEBGL_lose_context');
            a && a.loseContext();
          }),
          (this.forceContextRestore = function () {
            let a = c.get('WEBGL_lose_context');
            a && a.restoreContext();
          }),
          (this.getPixelRatio = function () {
            return ao;
          }),
          (this.setPixelRatio = function (a) {
            void 0 !== a && ((ao = a), this.setSize(am, an, !1));
          }),
          (this.getSize = function (a) {
            return a.set(am, an);
          }),
          (this.setSize = function (a, b, c = !0) {
            aK.isPresenting
              ? _(
                  "WebGLRenderer: Can't change size while VR device is presenting."
                )
              : ((am = a),
                (an = b),
                (A.width = Math.floor(a * ao)),
                (A.height = Math.floor(b * ao)),
                !0 === c &&
                  ((A.style.width = a + 'px'), (A.style.height = b + 'px')),
                null !== X && X.setSize(A.width, A.height),
                this.setViewport(0, 0, a, b));
          }),
          (this.getDrawingBufferSize = function (a) {
            return a.set(am * ao, an * ao).floor();
          }),
          (this.setDrawingBufferSize = function (a, b, c) {
            ((am = a),
              (an = b),
              (ao = c),
              (A.width = Math.floor(a * c)),
              (A.height = Math.floor(b * c)),
              this.setViewport(0, 0, a, b));
          }),
          (this.setEffects = function (a) {
            if (1009 === N)
              return void console.error(
                'THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.'
              );
            if (a) {
              for (let b = 0; b < a.length; b++)
                if (!0 === a[b].isOutputPass) {
                  console.warn(
                    'THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.'
                  );
                  break;
                }
            }
            X.setEffects(a || []);
          }),
          (this.getCurrentViewport = function (a) {
            return a.copy(ah);
          }),
          (this.getViewport = function (a) {
            return a.copy(as);
          }),
          (this.setViewport = function (a, b, c, d) {
            (a.isVector4 ? as.set(a.x, a.y, a.z, a.w) : as.set(a, b, c, d),
              e.viewport(ah.copy(as).multiplyScalar(ao).round()));
          }),
          (this.getScissor = function (a) {
            return a.copy(at);
          }),
          (this.setScissor = function (a, b, c, d) {
            (a.isVector4 ? at.set(a.x, a.y, a.z, a.w) : at.set(a, b, c, d),
              e.scissor(ai.copy(at).multiplyScalar(ao).round()));
          }),
          (this.getScissorTest = function () {
            return au;
          }),
          (this.setScissorTest = function (a) {
            e.setScissorTest((au = a));
          }),
          (this.setOpaqueSort = function (a) {
            ap = a;
          }),
          (this.setTransparentSort = function (a) {
            ar = a;
          }),
          (this.getClearColor = function (a) {
            return a.copy(t.getClearColor());
          }),
          (this.setClearColor = function () {
            t.setClearColor(...arguments);
          }),
          (this.getClearAlpha = function () {
            return t.getClearAlpha();
          }),
          (this.setClearAlpha = function () {
            t.setClearAlpha(...arguments);
          }),
          (this.clear = function (a = !0, b = !0, c = !0) {
            let d = 0;
            if (a) {
              let a = !1;
              if (null !== ae) {
                let b = ae.texture.format;
                a = O.has(b);
              }
              if (a) {
                let a = ae.texture.type,
                  b = P.has(a),
                  c = t.getClearColor(),
                  d = t.getClearAlpha(),
                  e = c.r,
                  f = c.g,
                  g = c.b;
                b
                  ? ((Q[0] = e),
                    (Q[1] = f),
                    (Q[2] = g),
                    (Q[3] = d),
                    aF.clearBufferuiv(aF.COLOR, 0, Q))
                  : ((R[0] = e),
                    (R[1] = f),
                    (R[2] = g),
                    (R[3] = d),
                    aF.clearBufferiv(aF.COLOR, 0, R));
              } else d |= aF.COLOR_BUFFER_BIT;
            }
            (b && (d |= aF.DEPTH_BUFFER_BIT),
              c &&
                ((d |= aF.STENCIL_BUFFER_BIT),
                this.state.buffers.stencil.setMask(0xffffffff)),
              aF.clear(d));
          }),
          (this.clearColor = function () {
            this.clear(!0, !1, !1);
          }),
          (this.clearDepth = function () {
            this.clear(!1, !0, !1);
          }),
          (this.clearStencil = function () {
            this.clear(!1, !1, !0);
          }),
          (this.dispose = function () {
            (A.removeEventListener('webglcontextlost', aL, !1),
              A.removeEventListener('webglcontextrestored', aM, !1),
              A.removeEventListener('webglcontextcreationerror', aN, !1),
              t.dispose(),
              p.dispose(),
              q.dispose(),
              g.dispose(),
              i.dispose(),
              j.dispose(),
              m.dispose(),
              y.dispose(),
              z.dispose(),
              n.dispose(),
              aK.dispose(),
              aK.removeEventListener('sessionstart', aR),
              aK.removeEventListener('sessionend', aS),
              aT.stop());
          }),
          (this.renderBufferDirect = function (a, b, f, m, n, p) {
            let q;
            null === b && (b = aC);
            let s = n.isMesh && 0 > n.matrixWorld.determinant(),
              t = (function (a, b, c, f, k) {
                var l, m;
                (!0 !== b.isScene && (b = aC), h.resetTextureUnits());
                let n = b.fog,
                  p = f.isMeshStandardMaterial ? b.environment : null,
                  q =
                    null === ae
                      ? Y.outputColorSpace
                      : !0 === ae.isXRRenderTarget
                        ? ae.texture.colorSpace
                        : J,
                  s = (f.isMeshStandardMaterial ? j : i).get(f.envMap || p),
                  t =
                    !0 === f.vertexColors &&
                    !!c.attributes.color &&
                    4 === c.attributes.color.itemSize,
                  v =
                    !!c.attributes.tangent &&
                    (!!f.normalMap || f.anisotropy > 0),
                  w = !!c.morphAttributes.position,
                  x = !!c.morphAttributes.normal,
                  y = !!c.morphAttributes.color,
                  A = 0;
                f.toneMapped &&
                  (null === ae || !0 === ae.isXRRenderTarget) &&
                  (A = Y.toneMapping);
                let B =
                    c.morphAttributes.position ||
                    c.morphAttributes.normal ||
                    c.morphAttributes.color,
                  C = void 0 !== B ? B.length : 0,
                  D = g.get(f),
                  E = T.state.lights;
                if (!0 === aw && (!0 === ay || a !== ag)) {
                  let b = a === ag && f.id === af;
                  r.setState(f, a, b);
                }
                let F = !1;
                f.version === D.__version
                  ? (D.needsLights &&
                      D.lightsStateVersion !== E.state.version) ||
                    D.outputColorSpace !== q ||
                    (k.isBatchedMesh && !1 === D.batching)
                    ? (F = !0)
                    : k.isBatchedMesh || !0 !== D.batching
                      ? (k.isBatchedMesh &&
                          !0 === D.batchingColor &&
                          null === k.colorTexture) ||
                        (k.isBatchedMesh &&
                          !1 === D.batchingColor &&
                          null !== k.colorTexture) ||
                        (k.isInstancedMesh && !1 === D.instancing)
                        ? (F = !0)
                        : k.isInstancedMesh || !0 !== D.instancing
                          ? k.isSkinnedMesh && !1 === D.skinning
                            ? (F = !0)
                            : k.isSkinnedMesh || !0 !== D.skinning
                              ? (k.isInstancedMesh &&
                                  !0 === D.instancingColor &&
                                  null === k.instanceColor) ||
                                (k.isInstancedMesh &&
                                  !1 === D.instancingColor &&
                                  null !== k.instanceColor) ||
                                (k.isInstancedMesh &&
                                  !0 === D.instancingMorph &&
                                  null === k.morphTexture) ||
                                (k.isInstancedMesh &&
                                  !1 === D.instancingMorph &&
                                  null !== k.morphTexture) ||
                                D.envMap !== s ||
                                (!0 === f.fog && D.fog !== n) ||
                                (void 0 !== D.numClippingPlanes &&
                                  (D.numClippingPlanes !== r.numPlanes ||
                                    D.numIntersection !== r.numIntersection)) ||
                                D.vertexAlphas !== t ||
                                D.vertexTangents !== v ||
                                D.morphTargets !== w ||
                                D.morphNormals !== x ||
                                D.morphColors !== y ||
                                D.toneMapping !== A
                                ? (F = !0)
                                : D.morphTargetsCount !== C && (F = !0)
                              : (F = !0)
                          : (F = !0)
                      : (F = !0)
                  : ((F = !0), (D.__version = f.version));
                let G = D.currentProgram;
                !0 === F && (G = aZ(f, b, k));
                let H = !1,
                  I = !1,
                  K = !1,
                  L = G.getUniforms(),
                  M = D.uniforms;
                if (
                  (e.useProgram(G.program) && ((H = !0), (I = !0), (K = !0)),
                  f.id !== af && ((af = f.id), (I = !0)),
                  H || ag !== a)
                ) {
                  (e.buffers.depth.getReversed() &&
                    !0 !== a.reversedDepth &&
                    ((a._reversedDepth = !0), a.updateProjectionMatrix()),
                    L.setValue(aF, 'projectionMatrix', a.projectionMatrix),
                    L.setValue(aF, 'viewMatrix', a.matrixWorldInverse));
                  let b = L.map.cameraPosition;
                  (void 0 !== b &&
                    b.setValue(aF, aA.setFromMatrixPosition(a.matrixWorld)),
                    d.logarithmicDepthBuffer &&
                      L.setValue(
                        aF,
                        'logDepthBufFC',
                        2 / (Math.log(a.far + 1) / Math.LN2)
                      ),
                    (f.isMeshPhongMaterial ||
                      f.isMeshToonMaterial ||
                      f.isMeshLambertMaterial ||
                      f.isMeshBasicMaterial ||
                      f.isMeshStandardMaterial ||
                      f.isShaderMaterial) &&
                      L.setValue(
                        aF,
                        'isOrthographic',
                        !0 === a.isOrthographicCamera
                      ),
                    ag !== a && ((ag = a), (I = !0), (K = !0)));
                }
                if (
                  (D.needsLights &&
                    (E.state.directionalShadowMap.length > 0 &&
                      L.setValue(
                        aF,
                        'directionalShadowMap',
                        E.state.directionalShadowMap,
                        h
                      ),
                    E.state.spotShadowMap.length > 0 &&
                      L.setValue(aF, 'spotShadowMap', E.state.spotShadowMap, h),
                    E.state.pointShadowMap.length > 0 &&
                      L.setValue(
                        aF,
                        'pointShadowMap',
                        E.state.pointShadowMap,
                        h
                      )),
                  k.isSkinnedMesh)
                ) {
                  (L.setOptional(aF, k, 'bindMatrix'),
                    L.setOptional(aF, k, 'bindMatrixInverse'));
                  let a = k.skeleton;
                  a &&
                    (null === a.boneTexture && a.computeBoneTexture(),
                    L.setValue(aF, 'boneTexture', a.boneTexture, h));
                }
                k.isBatchedMesh &&
                  (L.setOptional(aF, k, 'batchingTexture'),
                  L.setValue(aF, 'batchingTexture', k._matricesTexture, h),
                  L.setOptional(aF, k, 'batchingIdTexture'),
                  L.setValue(aF, 'batchingIdTexture', k._indirectTexture, h),
                  L.setOptional(aF, k, 'batchingColorTexture'),
                  null !== k._colorsTexture &&
                    L.setValue(
                      aF,
                      'batchingColorTexture',
                      k._colorsTexture,
                      h
                    ));
                let N = c.morphAttributes;
                if (
                  ((void 0 !== N.position ||
                    void 0 !== N.normal ||
                    void 0 !== N.color) &&
                    u.update(k, c, G),
                  (I || D.receiveShadow !== k.receiveShadow) &&
                    ((D.receiveShadow = k.receiveShadow),
                    L.setValue(aF, 'receiveShadow', k.receiveShadow)),
                  f.isMeshGouraudMaterial &&
                    null !== f.envMap &&
                    ((M.envMap.value = s),
                    (M.flipEnvMap.value =
                      s.isCubeTexture && !1 === s.isRenderTargetTexture
                        ? -1
                        : 1)),
                  f.isMeshStandardMaterial &&
                    null === f.envMap &&
                    null !== b.environment &&
                    (M.envMapIntensity.value = b.environmentIntensity),
                  void 0 !== M.dfgLUT &&
                    (M.dfgLUT.value =
                      (null === kz &&
                        (((kz = new dr(ky, 16, 16, 1030, 1016)).name =
                          'DFG_LUT'),
                        (kz.minFilter = 1006),
                        (kz.magFilter = 1006),
                        (kz.wrapS = 1001),
                        (kz.wrapT = 1001),
                        (kz.generateMipmaps = !1),
                        (kz.needsUpdate = !0)),
                      kz)),
                  I &&
                    (L.setValue(
                      aF,
                      'toneMappingExposure',
                      Y.toneMappingExposure
                    ),
                    D.needsLights &&
                      ((l = M),
                      (m = K),
                      (l.ambientLightColor.needsUpdate = m),
                      (l.lightProbe.needsUpdate = m),
                      (l.directionalLights.needsUpdate = m),
                      (l.directionalLightShadows.needsUpdate = m),
                      (l.pointLights.needsUpdate = m),
                      (l.pointLightShadows.needsUpdate = m),
                      (l.spotLights.needsUpdate = m),
                      (l.spotLightShadows.needsUpdate = m),
                      (l.rectAreaLights.needsUpdate = m),
                      (l.hemisphereLights.needsUpdate = m)),
                    n && !0 === f.fog && o.refreshFogUniforms(M, n),
                    o.refreshMaterialUniforms(
                      M,
                      f,
                      ao,
                      an,
                      T.state.transmissionRenderTarget[a.id]
                    ),
                    jG.upload(aF, a$(D), M, h)),
                  f.isShaderMaterial &&
                    !0 === f.uniformsNeedUpdate &&
                    (jG.upload(aF, a$(D), M, h), (f.uniformsNeedUpdate = !1)),
                  f.isSpriteMaterial && L.setValue(aF, 'center', k.center),
                  L.setValue(aF, 'modelViewMatrix', k.modelViewMatrix),
                  L.setValue(aF, 'normalMatrix', k.normalMatrix),
                  L.setValue(aF, 'modelMatrix', k.matrixWorld),
                  f.isShaderMaterial || f.isRawShaderMaterial)
                ) {
                  let a = f.uniformsGroups;
                  for (let b = 0, c = a.length; b < c; b++) {
                    let c = a[b];
                    (z.update(c, G), z.bind(c, G));
                  }
                }
                return G;
              })(a, b, f, m, n);
            e.setMaterial(m, s);
            let x = f.index,
              A = 1;
            if (!0 === m.wireframe) {
              if (void 0 === (x = l.getWireframeAttribute(f))) return;
              A = 2;
            }
            let B = f.drawRange,
              C = f.attributes.position,
              D = B.start * A,
              E = (B.start + B.count) * A;
            (null !== p &&
              ((D = Math.max(D, p.start * A)),
              (E = Math.min(E, (p.start + p.count) * A))),
              null !== x
                ? ((D = Math.max(D, 0)), (E = Math.min(E, x.count)))
                : null != C &&
                  ((D = Math.max(D, 0)), (E = Math.min(E, C.count))));
            let F = E - D;
            if (F < 0 || F === 1 / 0) return;
            y.setup(n, m, t, f, x);
            let G = v;
            if ((null !== x && ((q = k.get(x)), (G = w).setIndex(q)), n.isMesh))
              !0 === m.wireframe
                ? (e.setLineWidth(m.wireframeLinewidth * aE()),
                  G.setMode(aF.LINES))
                : G.setMode(aF.TRIANGLES);
            else if (n.isLine) {
              let a = m.linewidth;
              (void 0 === a && (a = 1),
                e.setLineWidth(a * aE()),
                n.isLineSegments
                  ? G.setMode(aF.LINES)
                  : n.isLineLoop
                    ? G.setMode(aF.LINE_LOOP)
                    : G.setMode(aF.LINE_STRIP));
            } else
              n.isPoints
                ? G.setMode(aF.POINTS)
                : n.isSprite && G.setMode(aF.TRIANGLES);
            if (n.isBatchedMesh)
              if (null !== n._multiDrawInstances)
                (ab(
                  'WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.'
                ),
                  G.renderMultiDrawInstances(
                    n._multiDrawStarts,
                    n._multiDrawCounts,
                    n._multiDrawCount,
                    n._multiDrawInstances
                  ));
              else if (c.get('WEBGL_multi_draw'))
                G.renderMultiDraw(
                  n._multiDrawStarts,
                  n._multiDrawCounts,
                  n._multiDrawCount
                );
              else {
                let a = n._multiDrawStarts,
                  b = n._multiDrawCounts,
                  c = n._multiDrawCount,
                  d = x ? k.get(x).bytesPerElement : 1,
                  e = g.get(m).currentProgram.getUniforms();
                for (let f = 0; f < c; f++)
                  (e.setValue(aF, '_gl_DrawID', f), G.render(a[f] / d, b[f]));
              }
            else if (n.isInstancedMesh) G.renderInstances(D, F, n.count);
            else if (f.isInstancedBufferGeometry) {
              let a =
                  void 0 !== f._maxInstanceCount ? f._maxInstanceCount : 1 / 0,
                b = Math.min(f.instanceCount, a);
              G.renderInstances(D, F, b);
            } else G.render(D, F);
          }),
          (this.compile = function (a, b, c = null) {
            (null === c && (c = a),
              (T = q.get(c)).init(b),
              W.push(T),
              c.traverseVisible(function (a) {
                a.isLight &&
                  a.layers.test(b.layers) &&
                  (T.pushLight(a), a.castShadow && T.pushShadow(a));
              }),
              a !== c &&
                a.traverseVisible(function (a) {
                  a.isLight &&
                    a.layers.test(b.layers) &&
                    (T.pushLight(a), a.castShadow && T.pushShadow(a));
                }),
              T.setupLights());
            let d = new Set();
            return (
              a.traverse(function (a) {
                if (!(a.isMesh || a.isPoints || a.isLine || a.isSprite)) return;
                let b = a.material;
                if (b)
                  if (Array.isArray(b))
                    for (let e = 0; e < b.length; e++) {
                      let f = b[e];
                      (aP(f, c, a), d.add(f));
                    }
                  else (aP(b, c, a), d.add(b));
              }),
              (T = W.pop()),
              d
            );
          }),
          (this.compileAsync = function (a, b, d = null) {
            let e = this.compile(a, b, d);
            return new Promise((b) => {
              function d() {
                (e.forEach(function (a) {
                  g.get(a).currentProgram.isReady() && e.delete(a);
                }),
                0 === e.size)
                  ? b(a)
                  : setTimeout(d, 10);
              }
              null !== c.get('KHR_parallel_shader_compile')
                ? d()
                : setTimeout(d, 10);
            });
          }));
        let aQ = null;
        function aR() {
          aT.stop();
        }
        function aS() {
          aT.start();
        }
        const aT = new ia();
        function aU(a, b, c, d) {
          if (!1 === a.visible) return;
          if (a.layers.test(b.layers)) {
            if (a.isGroup) c = a.renderOrder;
            else if (a.isLOD) !0 === a.autoUpdate && a.update(b);
            else if (a.isLight)
              (T.pushLight(a), a.castShadow && T.pushShadow(a));
            else if (a.isSprite) {
              if (!a.frustumCulled || av.intersectsSprite(a)) {
                d && aB.setFromMatrixPosition(a.matrixWorld).applyMatrix4(az);
                let b = m.update(a),
                  e = a.material;
                e.visible && S.push(a, b, e, c, aB.z, null);
              }
            } else if (
              (a.isMesh || a.isLine || a.isPoints) &&
              (!a.frustumCulled || av.intersectsObject(a))
            ) {
              let b = m.update(a),
                e = a.material;
              if (
                (d &&
                  (void 0 !== a.boundingSphere
                    ? (null === a.boundingSphere && a.computeBoundingSphere(),
                      aB.copy(a.boundingSphere.center))
                    : (null === b.boundingSphere && b.computeBoundingSphere(),
                      aB.copy(b.boundingSphere.center)),
                  aB.applyMatrix4(a.matrixWorld).applyMatrix4(az)),
                Array.isArray(e))
              ) {
                let d = b.groups;
                for (let f = 0, g = d.length; f < g; f++) {
                  let g = d[f],
                    h = e[g.materialIndex];
                  h && h.visible && S.push(a, b, h, c, aB.z, g);
                }
              } else e.visible && S.push(a, b, e, c, aB.z, null);
            }
          }
          let e = a.children;
          for (let a = 0, f = e.length; a < f; a++) aU(e[a], b, c, d);
        }
        function aV(a, b, c, d) {
          let { opaque: f, transmissive: g, transparent: h } = a;
          (T.setupLightsView(c),
            !0 === aw && r.setGlobalState(Y.clippingPlanes, c),
            d && e.viewport(ah.copy(d)),
            f.length > 0 && aX(f, b, c),
            g.length > 0 && aX(g, b, c),
            h.length > 0 && aX(h, b, c),
            e.buffers.depth.setTest(!0),
            e.buffers.depth.setMask(!0),
            e.buffers.color.setMask(!0),
            e.setPolygonOffset(!1));
        }
        function aW(a, b, e, f) {
          if (null !== (!0 === e.isScene ? e.overrideMaterial : null)) return;
          if (void 0 === T.state.transmissionRenderTarget[f.id]) {
            let a =
              c.has('EXT_color_buffer_half_float') ||
              c.has('EXT_color_buffer_float');
            T.state.transmissionRenderTarget[f.id] = new aJ(1, 1, {
              generateMipmaps: !0,
              type: a ? 1016 : 1009,
              minFilter: 1008,
              samples: d.samples,
              stencilBuffer: D,
              resolveDepthBuffer: !1,
              resolveStencilBuffer: !1,
              colorSpace: ax.workingColorSpace,
            });
          }
          let g = T.state.transmissionRenderTarget[f.id],
            i = f.viewport || ah;
          g.setSize(
            i.z * Y.transmissionResolutionScale,
            i.w * Y.transmissionResolutionScale
          );
          let j = Y.getRenderTarget(),
            k = Y.getActiveCubeFace(),
            l = Y.getActiveMipmapLevel();
          (Y.setRenderTarget(g),
            Y.getClearColor(ak),
            (al = Y.getClearAlpha()) < 1 && Y.setClearColor(0xffffff, 0.5),
            Y.clear(),
            aD && t.render(e));
          let m = Y.toneMapping;
          Y.toneMapping = 0;
          let n = f.viewport;
          if (
            (void 0 !== f.viewport && (f.viewport = void 0),
            T.setupLightsView(f),
            !0 === aw && r.setGlobalState(Y.clippingPlanes, f),
            aX(a, e, f),
            h.updateMultisampleRenderTarget(g),
            h.updateRenderTargetMipmap(g),
            !1 === c.has('WEBGL_multisampled_render_to_texture'))
          ) {
            let a = !1;
            for (let c = 0, d = b.length; c < d; c++) {
              let { object: d, geometry: g, material: h, group: i } = b[c];
              if (2 === h.side && d.layers.test(f.layers)) {
                let b = h.side;
                ((h.side = 1),
                  (h.needsUpdate = !0),
                  aY(d, e, f, g, h, i),
                  (h.side = b),
                  (h.needsUpdate = !0),
                  (a = !0));
              }
            }
            !0 === a &&
              (h.updateMultisampleRenderTarget(g),
              h.updateRenderTargetMipmap(g));
          }
          (Y.setRenderTarget(j, k, l),
            Y.setClearColor(ak, al),
            void 0 !== n && (f.viewport = n),
            (Y.toneMapping = m));
        }
        function aX(a, b, c) {
          let d = !0 === b.isScene ? b.overrideMaterial : null;
          for (let e = 0, f = a.length; e < f; e++) {
            let f = a[e],
              { object: g, geometry: h, group: i } = f,
              j = f.material;
            (!0 === j.allowOverride && null !== d && (j = d),
              g.layers.test(c.layers) && aY(g, b, c, h, j, i));
          }
        }
        function aY(a, b, c, d, e, f) {
          (a.onBeforeRender(Y, b, c, d, e, f),
            a.modelViewMatrix.multiplyMatrices(
              c.matrixWorldInverse,
              a.matrixWorld
            ),
            a.normalMatrix.getNormalMatrix(a.modelViewMatrix),
            e.onBeforeRender(Y, b, c, d, a, f),
            !0 === e.transparent && 2 === e.side && !1 === e.forceSinglePass
              ? ((e.side = 1),
                (e.needsUpdate = !0),
                Y.renderBufferDirect(c, b, d, e, a, f),
                (e.side = 0),
                (e.needsUpdate = !0),
                Y.renderBufferDirect(c, b, d, e, a, f),
                (e.side = 2))
              : Y.renderBufferDirect(c, b, d, e, a, f),
            a.onAfterRender(Y, b, c, d, e, f));
        }
        function aZ(a, b, c) {
          var d;
          !0 !== b.isScene && (b = aC);
          let e = g.get(a),
            f = T.state.lights,
            h = T.state.shadowsArray,
            k = f.state.version,
            l = n.getParameters(a, f.state, h, b, c),
            m = n.getProgramCacheKey(l),
            o = e.programs;
          ((e.environment = a.isMeshStandardMaterial ? b.environment : null),
            (e.fog = b.fog),
            (e.envMap = (a.isMeshStandardMaterial ? j : i).get(
              a.envMap || e.environment
            )),
            (e.envMapRotation =
              null !== e.environment && null === a.envMap
                ? b.environmentRotation
                : a.envMapRotation),
            void 0 === o &&
              (a.addEventListener('dispose', aO),
              (e.programs = o = new Map())));
          let p = o.get(m);
          if (void 0 !== p) {
            if (e.currentProgram === p && e.lightsStateVersion === k)
              return (a_(a, l), p);
          } else
            ((l.uniforms = n.getUniforms(a)),
              a.onBeforeCompile(l, Y),
              (p = n.acquireProgram(l, m)),
              o.set(m, p),
              (e.uniforms = l.uniforms));
          let q = e.uniforms;
          return (
            ((a.isShaderMaterial || a.isRawShaderMaterial) &&
              !0 !== a.clipping) ||
              (q.clippingPlanes = r.uniform),
            a_(a, l),
            (e.needsLights =
              (d = a).isMeshLambertMaterial ||
              d.isMeshToonMaterial ||
              d.isMeshPhongMaterial ||
              d.isMeshStandardMaterial ||
              d.isShadowMaterial ||
              (d.isShaderMaterial && !0 === d.lights)),
            (e.lightsStateVersion = k),
            e.needsLights &&
              ((q.ambientLightColor.value = f.state.ambient),
              (q.lightProbe.value = f.state.probe),
              (q.directionalLights.value = f.state.directional),
              (q.directionalLightShadows.value = f.state.directionalShadow),
              (q.spotLights.value = f.state.spot),
              (q.spotLightShadows.value = f.state.spotShadow),
              (q.rectAreaLights.value = f.state.rectArea),
              (q.ltc_1.value = f.state.rectAreaLTC1),
              (q.ltc_2.value = f.state.rectAreaLTC2),
              (q.pointLights.value = f.state.point),
              (q.pointLightShadows.value = f.state.pointShadow),
              (q.hemisphereLights.value = f.state.hemi),
              (q.directionalShadowMap.value = f.state.directionalShadowMap),
              (q.directionalShadowMatrix.value =
                f.state.directionalShadowMatrix),
              (q.spotShadowMap.value = f.state.spotShadowMap),
              (q.spotLightMatrix.value = f.state.spotLightMatrix),
              (q.spotLightMap.value = f.state.spotLightMap),
              (q.pointShadowMap.value = f.state.pointShadowMap),
              (q.pointShadowMatrix.value = f.state.pointShadowMatrix)),
            (e.currentProgram = p),
            (e.uniformsList = null),
            p
          );
        }
        function a$(a) {
          if (null === a.uniformsList) {
            let b = a.currentProgram.getUniforms();
            a.uniformsList = jG.seqWithValue(b.seq, a.uniforms);
          }
          return a.uniformsList;
        }
        function a_(a, b) {
          let c = g.get(a);
          ((c.outputColorSpace = b.outputColorSpace),
            (c.batching = b.batching),
            (c.batchingColor = b.batchingColor),
            (c.instancing = b.instancing),
            (c.instancingColor = b.instancingColor),
            (c.instancingMorph = b.instancingMorph),
            (c.skinning = b.skinning),
            (c.morphTargets = b.morphTargets),
            (c.morphNormals = b.morphNormals),
            (c.morphColors = b.morphColors),
            (c.morphTargetsCount = b.morphTargetsCount),
            (c.numClippingPlanes = b.numClippingPlanes),
            (c.numIntersection = b.numClipIntersection),
            (c.vertexAlphas = b.vertexAlphas),
            (c.vertexTangents = b.vertexTangents),
            (c.toneMapping = b.toneMapping));
        }
        (aT.setAnimationLoop(function (a) {
          aQ && aQ(a);
        }),
          'u' > typeof self && aT.setContext(self),
          (this.setAnimationLoop = function (a) {
            ((aQ = a),
              aK.setAnimationLoop(a),
              null === a ? aT.stop() : aT.start());
          }),
          aK.addEventListener('sessionstart', aR),
          aK.addEventListener('sessionend', aS),
          (this.render = function (a, b) {
            if (void 0 !== b && !0 !== b.isCamera)
              return void aa(
                'WebGLRenderer.render: camera is not an instance of THREE.Camera.'
              );
            if (!0 === Z) return;
            let c = !0 === aK.enabled && !0 === aK.isPresenting,
              d = null !== X && (null === ae || c) && X.begin(Y, ae);
            if (
              (!0 === a.matrixWorldAutoUpdate && a.updateMatrixWorld(),
              null === b.parent &&
                !0 === b.matrixWorldAutoUpdate &&
                b.updateMatrixWorld(),
              !0 === aK.enabled &&
                !0 === aK.isPresenting &&
                (null === X || !1 === X.isCompositing()) &&
                (!0 === aK.cameraAutoUpdate && aK.updateCamera(b),
                (b = aK.getCamera())),
              !0 === a.isScene && a.onBeforeRender(Y, a, b, ae),
              (T = q.get(a, W.length)).init(b),
              W.push(T),
              az.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse),
              av.setFromProjectionMatrix(az, 2e3, b.reversedDepth),
              (ay = this.localClippingEnabled),
              (aw = r.init(this.clippingPlanes, ay)),
              (S = p.get(a, U.length)).init(),
              U.push(S),
              !0 === aK.enabled && !0 === aK.isPresenting)
            ) {
              let a = Y.xr.getDepthSensingMesh();
              null !== a && aU(a, b, -1 / 0, Y.sortObjects);
            }
            (aU(a, b, 0, Y.sortObjects),
              S.finish(),
              !0 === Y.sortObjects && S.sort(ap, ar),
              (aD =
                !1 === aK.enabled ||
                !1 === aK.isPresenting ||
                !1 === aK.hasDepthSensing()) && t.addToRenderList(S, a),
              this.info.render.frame++,
              !0 === aw && r.beginShadows());
            let e = T.state.shadowsArray;
            if (
              (s.render(e, a, b),
              !0 === aw && r.endShadows(),
              !0 === this.info.autoReset && this.info.reset(),
              !1 === (d && X.hasRenderPass()))
            ) {
              let c = S.opaque,
                d = S.transmissive;
              if ((T.setupLights(), b.isArrayCamera)) {
                let e = b.cameras;
                if (d.length > 0)
                  for (let b = 0, f = e.length; b < f; b++) aW(c, d, a, e[b]);
                aD && t.render(a);
                for (let b = 0, c = e.length; b < c; b++) {
                  let c = e[b];
                  aV(S, a, c, c.viewport);
                }
              } else
                (d.length > 0 && aW(c, d, a, b),
                  aD && t.render(a),
                  aV(S, a, b));
            }
            (null !== ae &&
              0 === ad &&
              (h.updateMultisampleRenderTarget(ae),
              h.updateRenderTargetMipmap(ae)),
              d && X.end(Y),
              !0 === a.isScene && a.onAfterRender(Y, a, b),
              y.resetDefaultState(),
              (af = -1),
              (ag = null),
              W.pop(),
              W.length > 0
                ? ((T = W[W.length - 1]),
                  !0 === aw &&
                    r.setGlobalState(Y.clippingPlanes, T.state.camera))
                : (T = null),
              U.pop(),
              (S = U.length > 0 ? U[U.length - 1] : null));
          }),
          (this.getActiveCubeFace = function () {
            return ac;
          }),
          (this.getActiveMipmapLevel = function () {
            return ad;
          }),
          (this.getRenderTarget = function () {
            return ae;
          }),
          (this.setRenderTargetTextures = function (a, b, c) {
            let d = g.get(a);
            ((d.__autoAllocateDepthBuffer = !1 === a.resolveDepthBuffer),
              !1 === d.__autoAllocateDepthBuffer &&
                (d.__useRenderToTexture = !1),
              (g.get(a.texture).__webglTexture = b),
              (g.get(a.depthTexture).__webglTexture =
                d.__autoAllocateDepthBuffer ? void 0 : c),
              (d.__hasExternalTextures = !0));
          }),
          (this.setRenderTargetFramebuffer = function (a, b) {
            let c = g.get(a);
            ((c.__webglFramebuffer = b),
              (c.__useDefaultFramebuffer = void 0 === b));
          }));
        const a0 = aF.createFramebuffer();
        ((this.setRenderTarget = function (a, b = 0, c = 0) {
          ((ae = a), (ac = b), (ad = c));
          let d = null,
            f = !1,
            i = !1;
          if (a) {
            let j = g.get(a);
            if (void 0 !== j.__useDefaultFramebuffer) {
              (e.bindFramebuffer(aF.FRAMEBUFFER, j.__webglFramebuffer),
                ah.copy(a.viewport),
                ai.copy(a.scissor),
                (aj = a.scissorTest),
                e.viewport(ah),
                e.scissor(ai),
                e.setScissorTest(aj),
                (af = -1));
              return;
            }
            if (void 0 === j.__webglFramebuffer) h.setupRenderTarget(a);
            else if (j.__hasExternalTextures)
              h.rebindTextures(
                a,
                g.get(a.texture).__webglTexture,
                g.get(a.depthTexture).__webglTexture
              );
            else if (a.depthBuffer) {
              let b = a.depthTexture;
              if (j.__boundDepthTexture !== b) {
                if (
                  null !== b &&
                  g.has(b) &&
                  (a.width !== b.image.width || a.height !== b.image.height)
                )
                  throw Error(
                    'WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.'
                  );
                h.setupDepthRenderbuffer(a);
              }
            }
            let k = a.texture;
            (k.isData3DTexture ||
              k.isDataArrayTexture ||
              k.isCompressedArrayTexture) &&
              (i = !0);
            let l = g.get(a).__webglFramebuffer;
            (a.isWebGLCubeRenderTarget
              ? ((d = Array.isArray(l[b]) ? l[b][c] : l[b]), (f = !0))
              : (d =
                  a.samples > 0 && !1 === h.useMultisampledRTT(a)
                    ? g.get(a).__webglMultisampledFramebuffer
                    : Array.isArray(l)
                      ? l[c]
                      : l),
              ah.copy(a.viewport),
              ai.copy(a.scissor),
              (aj = a.scissorTest));
          } else
            (ah.copy(as).multiplyScalar(ao).floor(),
              ai.copy(at).multiplyScalar(ao).floor(),
              (aj = au));
          if (
            (0 !== c && (d = a0),
            e.bindFramebuffer(aF.FRAMEBUFFER, d) && e.drawBuffers(a, d),
            e.viewport(ah),
            e.scissor(ai),
            e.setScissorTest(aj),
            f)
          ) {
            let d = g.get(a.texture);
            aF.framebufferTexture2D(
              aF.FRAMEBUFFER,
              aF.COLOR_ATTACHMENT0,
              aF.TEXTURE_CUBE_MAP_POSITIVE_X + b,
              d.__webglTexture,
              c
            );
          } else if (i)
            for (let d = 0; d < a.textures.length; d++) {
              let e = g.get(a.textures[d]);
              aF.framebufferTextureLayer(
                aF.FRAMEBUFFER,
                aF.COLOR_ATTACHMENT0 + d,
                e.__webglTexture,
                c,
                b
              );
            }
          else if (null !== a && 0 !== c) {
            let b = g.get(a.texture);
            aF.framebufferTexture2D(
              aF.FRAMEBUFFER,
              aF.COLOR_ATTACHMENT0,
              aF.TEXTURE_2D,
              b.__webglTexture,
              c
            );
          }
          af = -1;
        }),
          (this.readRenderTargetPixels = function (a, b, c, f, h, i, j, k = 0) {
            if (!(a && a.isWebGLRenderTarget))
              return void aa(
                'WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.'
              );
            let l = g.get(a).__webglFramebuffer;
            if ((a.isWebGLCubeRenderTarget && void 0 !== j && (l = l[j]), l)) {
              e.bindFramebuffer(aF.FRAMEBUFFER, l);
              try {
                let e = a.textures[k],
                  g = e.format,
                  j = e.type;
                if (!d.textureFormatReadable(g))
                  return void aa(
                    'WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.'
                  );
                if (!d.textureTypeReadable(j))
                  return void aa(
                    'WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.'
                  );
                b >= 0 &&
                  b <= a.width - f &&
                  c >= 0 &&
                  c <= a.height - h &&
                  (a.textures.length > 1 &&
                    aF.readBuffer(aF.COLOR_ATTACHMENT0 + k),
                  aF.readPixels(b, c, f, h, x.convert(g), x.convert(j), i));
              } finally {
                let a = null !== ae ? g.get(ae).__webglFramebuffer : null;
                e.bindFramebuffer(aF.FRAMEBUFFER, a);
              }
            }
          }),
          (this.readRenderTargetPixelsAsync = async function (
            a,
            b,
            c,
            f,
            h,
            i,
            j,
            k = 0
          ) {
            if (!(a && a.isWebGLRenderTarget))
              throw Error(
                'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.'
              );
            let l = g.get(a).__webglFramebuffer;
            if ((a.isWebGLCubeRenderTarget && void 0 !== j && (l = l[j]), l))
              if (b >= 0 && b <= a.width - f && c >= 0 && c <= a.height - h) {
                var m;
                e.bindFramebuffer(aF.FRAMEBUFFER, l);
                let j = a.textures[k],
                  n = j.format,
                  o = j.type;
                if (!d.textureFormatReadable(n))
                  throw Error(
                    'THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.'
                  );
                if (!d.textureTypeReadable(o))
                  throw Error(
                    'THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.'
                  );
                let p = aF.createBuffer();
                (aF.bindBuffer(aF.PIXEL_PACK_BUFFER, p),
                  aF.bufferData(
                    aF.PIXEL_PACK_BUFFER,
                    i.byteLength,
                    aF.STREAM_READ
                  ),
                  a.textures.length > 1 &&
                    aF.readBuffer(aF.COLOR_ATTACHMENT0 + k),
                  aF.readPixels(b, c, f, h, x.convert(n), x.convert(o), 0));
                let q = null !== ae ? g.get(ae).__webglFramebuffer : null;
                e.bindFramebuffer(aF.FRAMEBUFFER, q);
                let r = aF.fenceSync(aF.SYNC_GPU_COMMANDS_COMPLETE, 0);
                return (
                  aF.flush(),
                  await ((m = aF),
                  new Promise(function (a, b) {
                    setTimeout(function c() {
                      switch (
                        m.clientWaitSync(r, m.SYNC_FLUSH_COMMANDS_BIT, 0)
                      ) {
                        case m.WAIT_FAILED:
                          b();
                          break;
                        case m.TIMEOUT_EXPIRED:
                          setTimeout(c, 4);
                          break;
                        default:
                          a();
                      }
                    }, 4);
                  })),
                  aF.bindBuffer(aF.PIXEL_PACK_BUFFER, p),
                  aF.getBufferSubData(aF.PIXEL_PACK_BUFFER, 0, i),
                  aF.deleteBuffer(p),
                  aF.deleteSync(r),
                  i
                );
              } else
                throw Error(
                  'THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.'
                );
          }),
          (this.copyFramebufferToTexture = function (a, b = null, c = 0) {
            let d = Math.pow(2, -c),
              f = Math.floor(a.image.width * d),
              g = Math.floor(a.image.height * d),
              i = null !== b ? b.x : 0,
              j = null !== b ? b.y : 0;
            (h.setTexture2D(a, 0),
              aF.copyTexSubImage2D(aF.TEXTURE_2D, c, 0, 0, i, j, f, g),
              e.unbindTexture());
          }));
        const a1 = aF.createFramebuffer(),
          a2 = aF.createFramebuffer();
        ((this.copyTextureToTexture = function (
          a,
          b,
          c = null,
          d = null,
          f = 0,
          i = null
        ) {
          let j, k, l, m, n, o, p, q, r, s;
          null === i &&
            (0 !== f
              ? (ab(
                  'WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.'
                ),
                (i = f),
                (f = 0))
              : (i = 0));
          let t = a.isCompressedTexture ? a.mipmaps[i] : a.image;
          if (null !== c)
            ((j = c.max.x - c.min.x),
              (k = c.max.y - c.min.y),
              (l = c.isBox3 ? c.max.z - c.min.z : 1),
              (m = c.min.x),
              (n = c.min.y),
              (o = c.isBox3 ? c.min.z : 0));
          else {
            let b = Math.pow(2, -f);
            ((j = Math.floor(t.width * b)),
              (k = Math.floor(t.height * b)),
              (l = a.isDataArrayTexture
                ? t.depth
                : a.isData3DTexture
                  ? Math.floor(t.depth * b)
                  : 1),
              (m = 0),
              (n = 0),
              (o = 0));
          }
          null !== d
            ? ((p = d.x), (q = d.y), (r = d.z))
            : ((p = 0), (q = 0), (r = 0));
          let u = x.convert(b.format),
            v = x.convert(b.type);
          (b.isData3DTexture
            ? (h.setTexture3D(b, 0), (s = aF.TEXTURE_3D))
            : b.isDataArrayTexture || b.isCompressedArrayTexture
              ? (h.setTexture2DArray(b, 0), (s = aF.TEXTURE_2D_ARRAY))
              : (h.setTexture2D(b, 0), (s = aF.TEXTURE_2D)),
            aF.pixelStorei(aF.UNPACK_FLIP_Y_WEBGL, b.flipY),
            aF.pixelStorei(
              aF.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
              b.premultiplyAlpha
            ),
            aF.pixelStorei(aF.UNPACK_ALIGNMENT, b.unpackAlignment));
          let w = aF.getParameter(aF.UNPACK_ROW_LENGTH),
            y = aF.getParameter(aF.UNPACK_IMAGE_HEIGHT),
            z = aF.getParameter(aF.UNPACK_SKIP_PIXELS),
            A = aF.getParameter(aF.UNPACK_SKIP_ROWS),
            B = aF.getParameter(aF.UNPACK_SKIP_IMAGES);
          (aF.pixelStorei(aF.UNPACK_ROW_LENGTH, t.width),
            aF.pixelStorei(aF.UNPACK_IMAGE_HEIGHT, t.height),
            aF.pixelStorei(aF.UNPACK_SKIP_PIXELS, m),
            aF.pixelStorei(aF.UNPACK_SKIP_ROWS, n),
            aF.pixelStorei(aF.UNPACK_SKIP_IMAGES, o));
          let C = a.isDataArrayTexture || a.isData3DTexture,
            D = b.isDataArrayTexture || b.isData3DTexture;
          if (a.isDepthTexture) {
            let c = g.get(a),
              d = g.get(b),
              h = g.get(c.__renderTarget),
              s = g.get(d.__renderTarget);
            (e.bindFramebuffer(aF.READ_FRAMEBUFFER, h.__webglFramebuffer),
              e.bindFramebuffer(aF.DRAW_FRAMEBUFFER, s.__webglFramebuffer));
            for (let c = 0; c < l; c++)
              (C &&
                (aF.framebufferTextureLayer(
                  aF.READ_FRAMEBUFFER,
                  aF.COLOR_ATTACHMENT0,
                  g.get(a).__webglTexture,
                  f,
                  o + c
                ),
                aF.framebufferTextureLayer(
                  aF.DRAW_FRAMEBUFFER,
                  aF.COLOR_ATTACHMENT0,
                  g.get(b).__webglTexture,
                  i,
                  r + c
                )),
                aF.blitFramebuffer(
                  m,
                  n,
                  j,
                  k,
                  p,
                  q,
                  j,
                  k,
                  aF.DEPTH_BUFFER_BIT,
                  aF.NEAREST
                ));
            (e.bindFramebuffer(aF.READ_FRAMEBUFFER, null),
              e.bindFramebuffer(aF.DRAW_FRAMEBUFFER, null));
          } else if (0 !== f || a.isRenderTargetTexture || g.has(a)) {
            let c = g.get(a),
              d = g.get(b);
            (e.bindFramebuffer(aF.READ_FRAMEBUFFER, a1),
              e.bindFramebuffer(aF.DRAW_FRAMEBUFFER, a2));
            for (let a = 0; a < l; a++)
              (C
                ? aF.framebufferTextureLayer(
                    aF.READ_FRAMEBUFFER,
                    aF.COLOR_ATTACHMENT0,
                    c.__webglTexture,
                    f,
                    o + a
                  )
                : aF.framebufferTexture2D(
                    aF.READ_FRAMEBUFFER,
                    aF.COLOR_ATTACHMENT0,
                    aF.TEXTURE_2D,
                    c.__webglTexture,
                    f
                  ),
                D
                  ? aF.framebufferTextureLayer(
                      aF.DRAW_FRAMEBUFFER,
                      aF.COLOR_ATTACHMENT0,
                      d.__webglTexture,
                      i,
                      r + a
                    )
                  : aF.framebufferTexture2D(
                      aF.DRAW_FRAMEBUFFER,
                      aF.COLOR_ATTACHMENT0,
                      aF.TEXTURE_2D,
                      d.__webglTexture,
                      i
                    ),
                0 !== f
                  ? aF.blitFramebuffer(
                      m,
                      n,
                      j,
                      k,
                      p,
                      q,
                      j,
                      k,
                      aF.COLOR_BUFFER_BIT,
                      aF.NEAREST
                    )
                  : D
                    ? aF.copyTexSubImage3D(s, i, p, q, r + a, m, n, j, k)
                    : aF.copyTexSubImage2D(s, i, p, q, m, n, j, k));
            (e.bindFramebuffer(aF.READ_FRAMEBUFFER, null),
              e.bindFramebuffer(aF.DRAW_FRAMEBUFFER, null));
          } else
            D
              ? a.isDataTexture || a.isData3DTexture
                ? aF.texSubImage3D(s, i, p, q, r, j, k, l, u, v, t.data)
                : b.isCompressedArrayTexture
                  ? aF.compressedTexSubImage3D(
                      s,
                      i,
                      p,
                      q,
                      r,
                      j,
                      k,
                      l,
                      u,
                      t.data
                    )
                  : aF.texSubImage3D(s, i, p, q, r, j, k, l, u, v, t)
              : a.isDataTexture
                ? aF.texSubImage2D(aF.TEXTURE_2D, i, p, q, j, k, u, v, t.data)
                : a.isCompressedTexture
                  ? aF.compressedTexSubImage2D(
                      aF.TEXTURE_2D,
                      i,
                      p,
                      q,
                      t.width,
                      t.height,
                      u,
                      t.data
                    )
                  : aF.texSubImage2D(aF.TEXTURE_2D, i, p, q, j, k, u, v, t);
          (aF.pixelStorei(aF.UNPACK_ROW_LENGTH, w),
            aF.pixelStorei(aF.UNPACK_IMAGE_HEIGHT, y),
            aF.pixelStorei(aF.UNPACK_SKIP_PIXELS, z),
            aF.pixelStorei(aF.UNPACK_SKIP_ROWS, A),
            aF.pixelStorei(aF.UNPACK_SKIP_IMAGES, B),
            0 === i && b.generateMipmaps && aF.generateMipmap(s),
            e.unbindTexture());
        }),
          (this.initRenderTarget = function (a) {
            void 0 === g.get(a).__webglFramebuffer && h.setupRenderTarget(a);
          }),
          (this.initTexture = function (a) {
            (a.isCubeTexture
              ? h.setTextureCube(a, 0)
              : a.isData3DTexture
                ? h.setTexture3D(a, 0)
                : a.isDataArrayTexture || a.isCompressedArrayTexture
                  ? h.setTexture2DArray(a, 0)
                  : h.setTexture2D(a, 0),
              e.unbindTexture());
          }),
          (this.resetState = function () {
            ((ac = 0), (ad = 0), (ae = null), e.reset(), y.reset());
          }),
          'u' > typeof __THREE_DEVTOOLS__ &&
            __THREE_DEVTOOLS__.dispatchEvent(
              new CustomEvent('observe', { detail: this })
            ));
      }
      get coordinateSystem() {
        return 2e3;
      }
      get outputColorSpace() {
        return this._outputColorSpace;
      }
      set outputColorSpace(a) {
        this._outputColorSpace = a;
        let b = this.getContext();
        ((b.drawingBufferColorSpace = ax._getDrawingBufferColorSpace(a)),
          (b.unpackColorSpace = ax._getUnpackColorSpace()));
      }
    }
    a.s(
      [
        'PMREMGenerator',
        () => iy,
        'ShaderChunk',
        () => ic,
        'ShaderLib',
        () => ie,
        'UniformsLib',
        () => id,
        'WebGLRenderer',
        () => kA,
        'WebGLUtils',
        () => kp,
      ],
      60614
    );
    var kB = a.i(11456),
      kC = a.i(52339);
    let { useSyncExternalStoreWithSelector: kD } = kB.default,
      kE = (a, b) => {
        let c = (0, kC.createStore)(a),
          d = (a, d = b) =>
            (function (a, b = (a) => a, c) {
              let d = kD(a.subscribe, a.getState, a.getInitialState, b, c);
              return (z.default.useDebugValue(d), d);
            })(c, a, d);
        return (Object.assign(d, c), d);
      },
      kF = (a, b) => (a ? kE(a, b) : kE),
      kG = [];
    function kH(a, b, c = (a, b) => a === b) {
      if (a === b) return !0;
      if (!a || !b) return !1;
      let d = a.length;
      if (b.length !== d) return !1;
      for (let e = 0; e < d; e++) if (!c(a[e], b[e])) return !1;
      return !0;
    }
    function kI(a, b = null, c = !1, d = {}) {
      for (let e of (null === b && (b = [a]), kG))
        if (kH(b, e.keys, e.equal)) {
          if (c) return;
          if (Object.prototype.hasOwnProperty.call(e, 'error')) throw e.error;
          if (Object.prototype.hasOwnProperty.call(e, 'response'))
            return (
              d.lifespan &&
                d.lifespan > 0 &&
                (e.timeout && clearTimeout(e.timeout),
                (e.timeout = setTimeout(e.remove, d.lifespan))),
              e.response
            );
          if (!c) throw e.promise;
        }
      let e = {
        keys: b,
        equal: d.equal,
        remove: () => {
          let a = kG.indexOf(e);
          -1 !== a && kG.splice(a, 1);
        },
        promise: ('object' == typeof a && 'function' == typeof a.then
          ? a
          : a(...b)
        )
          .then((a) => {
            ((e.response = a),
              d.lifespan &&
                d.lifespan > 0 &&
                (e.timeout = setTimeout(e.remove, d.lifespan)));
          })
          .catch((a) => (e.error = a)),
      };
      if ((kG.push(e), !c)) throw e.promise;
    }
    var kJ = a.i(14386),
      kK = z;
    function kL(a, b, c) {
      if (!a) return;
      if (!0 === c(a)) return a;
      let d = b ? a.return : a.child;
      for (; d; ) {
        let a = kL(d, b, c);
        if (a) return a;
        d = b ? null : d.sibling;
      }
    }
    function kM(a) {
      try {
        return Object.defineProperties(a, {
          _currentRenderer: { get: () => null, set() {} },
          _currentRenderer2: { get: () => null, set() {} },
        });
      } catch (b) {
        return a;
      }
    }
    kK.useEffect;
    let kN = kM(kK.createContext(null));
    class kO extends kK.Component {
      render() {
        return kK.createElement(
          kN.Provider,
          { value: this._reactInternals },
          this.props.children
        );
      }
    }
    function kP() {
      let a = kK.useContext(kN);
      if (null === a)
        throw Error(
          'its-fine: useFiber must be called within a <FiberProvider />!'
        );
      let b = kK.useId();
      return kK.useMemo(() => {
        for (let c of [a, null == a ? void 0 : a.alternate]) {
          if (!c) continue;
          let a = kL(c, !1, (a) => {
            let c = a.memoizedState;
            for (; c; ) {
              if (c.memoizedState === b) return !0;
              c = c.next;
            }
          });
          if (a) return a;
        }
      }, [a, b]);
    }
    let kQ = Symbol.for('react.context'),
      kR = (a) =>
        null !== a &&
        'object' == typeof a &&
        '$$typeof' in a &&
        a.$$typeof === kQ;
    function kS(a) {
      let b = a.root;
      for (; b.getState().previousRoot; ) b = b.getState().previousRoot;
      return b;
    }
    D.act;
    let kT = (a) =>
        null != a &&
        ('string' == typeof a || 'number' == typeof a || a.isColor),
      kU = D.useEffect;
    function kV(a) {
      let b = D.useRef(a);
      return (kU(() => void (b.current = a), [a]), b);
    }
    function kW({ set: a }) {
      return (kU(() => (a(new Promise(() => null)), () => a(!1)), [a]), null);
    }
    let kX =
      (((r = class extends D.Component {
        constructor(...a) {
          (super(...a), (this.state = { error: !1 }));
        }
        componentDidCatch(a) {
          this.props.set(a);
        }
        render() {
          return this.state.error ? null : this.props.children;
        }
      }).getDerivedStateFromError = () => ({ error: !0 })),
      r);
    function kY(a) {
      return Array.isArray(a) ? Math.min(Math.max(a[0], 1), a[1]) : a;
    }
    function kZ(a) {
      var b;
      return null == (b = a.__r3f) ? void 0 : b.root.getState();
    }
    let k$ = {
        obj: (a) => a === Object(a) && !k$.arr(a) && 'function' != typeof a,
        fun: (a) => 'function' == typeof a,
        str: (a) => 'string' == typeof a,
        num: (a) => 'number' == typeof a,
        boo: (a) => 'boolean' == typeof a,
        und: (a) => void 0 === a,
        nul: (a) => null === a,
        arr: (a) => Array.isArray(a),
        equ(
          a,
          b,
          {
            arrays: c = 'shallow',
            objects: d = 'reference',
            strict: e = !0,
          } = {}
        ) {
          let f;
          if (typeof a != typeof b || !!a != !!b) return !1;
          if (k$.str(a) || k$.num(a) || k$.boo(a)) return a === b;
          let g = k$.obj(a);
          if (g && 'reference' === d) return a === b;
          let h = k$.arr(a);
          if (h && 'reference' === c) return a === b;
          if ((h || g) && a === b) return !0;
          for (f in a) if (!(f in b)) return !1;
          if (g && 'shallow' === c && 'shallow' === d) {
            for (f in e ? b : a)
              if (!k$.equ(a[f], b[f], { strict: e, objects: 'reference' }))
                return !1;
          } else for (f in e ? b : a) if (a[f] !== b[f]) return !1;
          if (k$.und(f)) {
            if (
              (h && 0 === a.length && 0 === b.length) ||
              (g && 0 === Object.keys(a).length && 0 === Object.keys(b).length)
            )
              return !0;
            if (a !== b) return !1;
          }
          return !0;
        },
      },
      k_ = ['children', 'key', 'ref'];
    function k0(a, b, c, d) {
      let e = null == a ? void 0 : a.__r3f;
      return (
        !e &&
          ((e = {
            root: b,
            type: c,
            parent: null,
            children: [],
            props: (function (a) {
              let b = {};
              for (let c in a) k_.includes(c) || (b[c] = a[c]);
              return b;
            })(d),
            object: a,
            eventCount: 0,
            handlers: {},
            isHidden: !1,
          }),
          a && (a.__r3f = e)),
        e
      );
    }
    function k1(a, b) {
      if (!b.includes('-') || b in a) return { root: a, key: b, target: a[b] };
      let c = a,
        d = b.split('-');
      for (let e of d) {
        if ('object' != typeof c || null === c) {
          if (void 0 !== c)
            return {
              root: c,
              key: d.slice(d.indexOf(e)).join('-'),
              target: void 0,
            };
          return { root: a, key: b, target: void 0 };
        }
        ((b = e), (a = c), (c = c[b]));
      }
      return { root: a, key: b, target: c };
    }
    let k2 = /-\d+$/;
    function k3(a, b) {
      if (k$.str(b.props.attach)) {
        if (k2.test(b.props.attach)) {
          let c = b.props.attach.replace(k2, ''),
            { root: d, key: e } = k1(a.object, c);
          Array.isArray(d[e]) || (d[e] = []);
        }
        let { root: c, key: d } = k1(a.object, b.props.attach);
        ((b.previousAttach = c[d]), (c[d] = b.object));
      } else
        k$.fun(b.props.attach) &&
          (b.previousAttach = b.props.attach(a.object, b.object));
    }
    function k4(a, b) {
      if (k$.str(b.props.attach)) {
        let { root: c, key: d } = k1(a.object, b.props.attach),
          e = b.previousAttach;
        void 0 === e ? delete c[d] : (c[d] = e);
      } else null == b.previousAttach || b.previousAttach(a.object, b.object);
      delete b.previousAttach;
    }
    let k5 = [
        ...k_,
        'args',
        'dispose',
        'attach',
        'object',
        'onUpdate',
        'dispose',
      ],
      k6 = new Map(),
      k7 = [
        'map',
        'emissiveMap',
        'sheenColorMap',
        'specularColorMap',
        'envMap',
      ],
      k8 = /^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;
    function k9(a, b) {
      var c, d;
      let e = a.__r3f,
        f = e && kS(e).getState(),
        g = null == e ? void 0 : e.eventCount;
      for (let c in b) {
        let g = b[c];
        if (k5.includes(c)) continue;
        if (e && k8.test(c)) {
          ('function' == typeof g ? (e.handlers[c] = g) : delete e.handlers[c],
            (e.eventCount = Object.keys(e.handlers).length));
          continue;
        }
        if (void 0 === g) continue;
        let { root: h, key: i, target: j } = k1(a, c);
        if (void 0 === j && ('object' != typeof h || null === h))
          throw Error(
            `R3F: Cannot set "${c}". Ensure it is an object before setting "${i}".`
          );
        j instanceof bo && g instanceof bo
          ? (j.mask = g.mask)
          : j instanceof bX && kT(g)
            ? j.set(g)
            : null !== j &&
                'object' == typeof j &&
                'function' == typeof j.set &&
                'function' == typeof j.copy &&
                null != g &&
                g.constructor &&
                j.constructor === g.constructor
              ? j.copy(g)
              : null !== j &&
                  'object' == typeof j &&
                  'function' == typeof j.set &&
                  Array.isArray(g)
                ? 'function' == typeof j.fromArray
                  ? j.fromArray(g)
                  : j.set(...g)
                : null !== j &&
                    'object' == typeof j &&
                    'function' == typeof j.set &&
                    'number' == typeof g
                  ? 'function' == typeof j.setScalar
                    ? j.setScalar(g)
                    : j.set(g)
                  : ((h[i] = g),
                    f &&
                      !f.linear &&
                      k7.includes(i) &&
                      null != (d = h[i]) &&
                      d.isTexture &&
                      1023 === h[i].format &&
                      1009 === h[i].type &&
                      (h[i].colorSpace = I));
      }
      if (
        null != e &&
        e.parent &&
        null != f &&
        f.internal &&
        null != (c = e.object) &&
        c.isObject3D &&
        g !== e.eventCount
      ) {
        let a = e.object,
          b = f.internal.interaction.indexOf(a);
        (b > -1 && f.internal.interaction.splice(b, 1),
          e.eventCount && null !== a.raycast && f.internal.interaction.push(a));
      }
      return (
        e &&
          void 0 === e.props.attach &&
          (e.object.isBufferGeometry
            ? (e.props.attach = 'geometry')
            : e.object.isMaterial && (e.props.attach = 'material')),
        e && la(e),
        a
      );
    }
    function la(a) {
      var b;
      if (!a.parent) return;
      null == a.props.onUpdate || a.props.onUpdate(a.object);
      let c =
        null == (b = a.root) || null == b.getState ? void 0 : b.getState();
      c && 0 === c.internal.frames && c.invalidate();
    }
    function lb(a, b) {
      !a.manual &&
        (a && a.isOrthographicCamera
          ? ((a.left = -(b.width / 2)),
            (a.right = b.width / 2),
            (a.top = b.height / 2),
            (a.bottom = -(b.height / 2)))
          : (a.aspect = b.width / b.height),
        a.updateProjectionMatrix());
    }
    let lc = (a) => (null == a ? void 0 : a.isObject3D);
    function ld(a) {
      return (a.eventObject || a.object).uuid + '/' + a.index + a.instanceId;
    }
    function le(a, b, c, d) {
      let e = c.get(b);
      e &&
        (c.delete(b),
        0 === c.size && (a.delete(d), e.target.releasePointerCapture(d)));
    }
    let lf = (a) => !!(null != a && a.render),
      lg = D.createContext(null);
    function lh() {
      let a = D.useContext(lg);
      if (!a)
        throw Error('R3F: Hooks can only be used within the Canvas component!');
      return a;
    }
    function li(a = (a) => a, b) {
      return lh()(a, b);
    }
    function lj(a, b = 0) {
      let c = lh(),
        d = c.getState().internal.subscribe,
        e = kV(a);
      return (kU(() => d(e, b, c), [b, d, c]), null);
    }
    let lk = new WeakMap();
    function ll(a, b) {
      return function (c, ...d) {
        var e;
        let f;
        return (
          'function' == typeof c &&
          (null == c || null == (e = c.prototype) ? void 0 : e.constructor) ===
            c
            ? (f = lk.get(c)) || ((f = new c()), lk.set(c, f))
            : (f = c),
          a && a(f),
          Promise.all(
            d.map(
              (a) =>
                new Promise((c, d) =>
                  f.load(
                    a,
                    (a) => {
                      var b;
                      let d;
                      (lc(null == a ? void 0 : a.scene) &&
                        Object.assign(
                          a,
                          ((b = a.scene),
                          (d = { nodes: {}, materials: {}, meshes: {} }),
                          b &&
                            b.traverse((a) => {
                              (a.name && (d.nodes[a.name] = a),
                                a.material &&
                                  !d.materials[a.material.name] &&
                                  (d.materials[a.material.name] = a.material),
                                a.isMesh &&
                                  !d.meshes[a.name] &&
                                  (d.meshes[a.name] = a));
                            }),
                          d)
                        ),
                        c(a));
                    },
                    b,
                    (b) =>
                      d(
                        Error(
                          `Could not load ${a}: ${null == b ? void 0 : b.message}`
                        )
                      )
                  )
                )
            )
          )
        );
      };
    }
    function lm(a, b, c, d) {
      let e = Array.isArray(b) ? b : [b],
        f = kI(ll(c, d), [a, ...e], !1, { equal: k$.equ });
      return Array.isArray(b) ? f : f[0];
    }
    ((lm.preload = function (a, b, c) {
      let d,
        e = Array.isArray(b) ? b : [b];
      kI(ll(c), [a, ...e], !0, d);
    }),
      (lm.clear = function (a, b) {
        var c = [a, ...(Array.isArray(b) ? b : [b])];
        if (void 0 === c || 0 === c.length) kG.splice(0, kG.length);
        else {
          let a = kG.find((a) => kH(c, a.keys, a.equal));
          a && a.remove();
        }
      }));
    var ln = { exports: {} },
      lo = { exports: {} };
    lo.exports;
    let lp = (w ||
        ((w = 1),
        v ||
          ((v = 1),
          (lo.exports = function (a) {
            function b(a, b, c, d) {
              return new dW(a, b, c, d);
            }
            function c() {}
            function d(a) {
              var b = 'https://react.dev/errors/' + a;
              if (1 < arguments.length) {
                b += '?args[]=' + encodeURIComponent(arguments[1]);
                for (var c = 2; c < arguments.length; c++)
                  b += '&args[]=' + encodeURIComponent(arguments[c]);
              }
              return (
                'Minified React error #' +
                a +
                '; visit ' +
                b +
                ' for the full message or use the non-minified dev environment for full errors and additional helpful warnings.'
              );
            }
            function e(a) {
              var b = a,
                c = a;
              if (a.alternate) for (; b.return; ) b = b.return;
              else {
                a = b;
                do
                  ((4098 & (b = a).flags) != 0 && (c = b.return),
                    (a = b.return));
                while (a);
              }
              return 3 === b.tag ? c : null;
            }
            function f(a) {
              if (e(a) !== a) throw Error(d(188));
            }
            function g(a) {
              var b = a.alternate;
              if (!b) {
                if (null === (b = e(a))) throw Error(d(188));
                return b !== a ? null : a;
              }
              for (var c = a, g = b; ; ) {
                var h = c.return;
                if (null === h) break;
                var i = h.alternate;
                if (null === i) {
                  if (null !== (g = h.return)) {
                    c = g;
                    continue;
                  }
                  break;
                }
                if (h.child === i.child) {
                  for (i = h.child; i; ) {
                    if (i === c) return (f(h), a);
                    if (i === g) return (f(h), b);
                    i = i.sibling;
                  }
                  throw Error(d(188));
                }
                if (c.return !== g.return) ((c = h), (g = i));
                else {
                  for (var j = !1, k = h.child; k; ) {
                    if (k === c) {
                      ((j = !0), (c = h), (g = i));
                      break;
                    }
                    if (k === g) {
                      ((j = !0), (g = h), (c = i));
                      break;
                    }
                    k = k.sibling;
                  }
                  if (!j) {
                    for (k = i.child; k; ) {
                      if (k === c) {
                        ((j = !0), (c = i), (g = h));
                        break;
                      }
                      if (k === g) {
                        ((j = !0), (g = i), (c = h));
                        break;
                      }
                      k = k.sibling;
                    }
                    if (!j) throw Error(d(189));
                  }
                }
                if (c.alternate !== g) throw Error(d(190));
              }
              if (3 !== c.tag) throw Error(d(188));
              return c.stateNode.current === c ? a : b;
            }
            function h(a) {
              return null === a || 'object' != typeof a
                ? null
                : 'function' == typeof (a = (es && a[es]) || a['@@iterator'])
                  ? a
                  : null;
            }
            function i(a) {
              if (null == a) return null;
              if ('function' == typeof a)
                return a.$$typeof === et
                  ? null
                  : a.displayName || a.name || null;
              if ('string' == typeof a) return a;
              switch (a) {
                case eg:
                  return 'Fragment';
                case ei:
                  return 'Profiler';
                case eh:
                  return 'StrictMode';
                case em:
                  return 'Suspense';
                case en:
                  return 'SuspenseList';
                case eq:
                  return 'Activity';
              }
              if ('object' == typeof a)
                switch (a.$$typeof) {
                  case ef:
                    return 'Portal';
                  case ek:
                    return a.displayName || 'Context';
                  case ej:
                    return (a._context.displayName || 'Context') + '.Consumer';
                  case el:
                    var b = a.render;
                    return (
                      (a = a.displayName) ||
                        (a =
                          '' !== (a = b.displayName || b.name || '')
                            ? 'ForwardRef(' + a + ')'
                            : 'ForwardRef'),
                      a
                    );
                  case eo:
                    return null !== (b = a.displayName || null)
                      ? b
                      : i(a.type) || 'Memo';
                  case ep:
                    ((b = a._payload), (a = a._init));
                    try {
                      return i(a(b));
                    } catch {}
                }
              return null;
            }
            function j(a) {
              return { current: a };
            }
            function k(a) {
              0 > gw || ((a.current = gv[gw]), (gv[gw] = null), gw--);
            }
            function l(a, b) {
              ((gv[++gw] = a.current), (a.current = b));
            }
            function m(a) {
              var b = 42 & a;
              if (0 !== b) return b;
              switch (a & -a) {
                case 1:
                  return 1;
                case 2:
                  return 2;
                case 4:
                  return 4;
                case 8:
                  return 8;
                case 16:
                  return 16;
                case 32:
                  return 32;
                case 64:
                  return 64;
                case 128:
                  return 128;
                case 256:
                case 512:
                case 1024:
                case 2048:
                case 4096:
                case 8192:
                case 16384:
                case 32768:
                case 65536:
                case 131072:
                  return 261888 & a;
                case 262144:
                case 524288:
                case 1048576:
                case 2097152:
                  return 3932160 & a;
                case 4194304:
                case 8388608:
                case 0x1000000:
                case 0x2000000:
                  return 0x3c00000 & a;
                case 0x4000000:
                  return 0x4000000;
                case 0x8000000:
                  return 0x8000000;
                case 0x10000000:
                  return 0x10000000;
                case 0x20000000:
                  return 0x20000000;
                case 0x40000000:
                  return 0;
                default:
                  return a;
              }
            }
            function n(a, b, c) {
              var d = a.pendingLanes;
              if (0 === d) return 0;
              var e = 0,
                f = a.suspendedLanes,
                g = a.pingedLanes;
              a = a.warmLanes;
              var h = 0x7ffffff & d;
              return (
                0 !== h
                  ? 0 != (d = h & ~f)
                    ? (e = m(d))
                    : 0 != (g &= h)
                      ? (e = m(g))
                      : c || (0 != (c = h & ~a) && (e = m(c)))
                  : 0 != (h = d & ~f)
                    ? (e = m(h))
                    : 0 !== g
                      ? (e = m(g))
                      : c || (0 != (c = d & ~a) && (e = m(c))),
                0 === e
                  ? 0
                  : 0 !== b &&
                      b !== e &&
                      (b & f) == 0 &&
                      ((f = e & -e) >= (c = b & -b) ||
                        (32 === f && (4194048 & c) != 0))
                    ? b
                    : e
              );
            }
            function o(a, b) {
              return (
                (a.pendingLanes & ~(a.suspendedLanes & ~a.pingedLanes) & b) == 0
              );
            }
            function p() {
              var a = gD;
              return ((0x3c00000 & (gD <<= 1)) == 0 && (gD = 4194304), a);
            }
            function q(a) {
              for (var b = [], c = 0; 31 > c; c++) b.push(a);
              return b;
            }
            function r(a, b) {
              ((a.pendingLanes |= b),
                0x10000000 !== b &&
                  ((a.suspendedLanes = 0),
                  (a.pingedLanes = 0),
                  (a.warmLanes = 0)));
            }
            function s(a, b, c) {
              ((a.pendingLanes |= b), (a.suspendedLanes &= ~b));
              var d = 31 - gy(b);
              ((a.entangledLanes |= b),
                (a.entanglements[d] =
                  0x40000000 | a.entanglements[d] | (261930 & c)));
            }
            function t(a, b) {
              var c = (a.entangledLanes |= b);
              for (a = a.entanglements; c; ) {
                var d = 31 - gy(c),
                  e = 1 << d;
                ((e & b) | (a[d] & b) && (a[d] |= b), (c &= ~e));
              }
            }
            function u(a, b) {
              var c = b & -b;
              return ((c = (42 & c) != 0 ? 1 : v(c)) &
                (a.suspendedLanes | b)) !=
                0
                ? 0
                : c;
            }
            function v(a) {
              switch (a) {
                case 2:
                  a = 1;
                  break;
                case 8:
                  a = 4;
                  break;
                case 32:
                  a = 16;
                  break;
                case 256:
                case 512:
                case 1024:
                case 2048:
                case 4096:
                case 8192:
                case 16384:
                case 32768:
                case 65536:
                case 131072:
                case 262144:
                case 524288:
                case 1048576:
                case 2097152:
                case 4194304:
                case 8388608:
                case 0x1000000:
                case 0x2000000:
                  a = 128;
                  break;
                case 0x10000000:
                  a = 0x8000000;
                  break;
                default:
                  a = 0;
              }
              return a;
            }
            function w(a) {
              return 2 < (a &= -a)
                ? 8 < a
                  ? (0x7ffffff & a) != 0
                    ? 32
                    : 0x10000000
                  : 8
                : 2;
            }
            function x(a) {
              if (
                ('function' == typeof gN && gO(a),
                gQ && 'function' == typeof gQ.setStrictMode)
              )
                try {
                  gQ.setStrictMode(gP, a);
                } catch {}
            }
            function y(a) {
              if (void 0 === f7)
                try {
                  throw Error();
                } catch (a) {
                  var b = a.stack.trim().match(/\n( *(at )?)/);
                  ((f7 = (b && b[1]) || ''),
                    (f8 =
                      -1 <
                      a.stack.indexOf(`
    at`)
                        ? ' (<anonymous>)'
                        : -1 < a.stack.indexOf('@')
                          ? '@unknown:0:0'
                          : ''));
                }
              return (
                `
` +
                f7 +
                a +
                f8
              );
            }
            function z(a, b) {
              if (!a || gU) return '';
              gU = !0;
              var c = Error.prepareStackTrace;
              Error.prepareStackTrace = void 0;
              try {
                var d = {
                  DetermineComponentFrameRoot: function () {
                    try {
                      if (b) {
                        var c = function () {
                          throw Error();
                        };
                        if (
                          (Object.defineProperty(c.prototype, 'props', {
                            set: function () {
                              throw Error();
                            },
                          }),
                          'object' == typeof Reflect && Reflect.construct)
                        ) {
                          try {
                            Reflect.construct(c, []);
                          } catch (a) {
                            var d = a;
                          }
                          Reflect.construct(a, [], c);
                        } else {
                          try {
                            c.call();
                          } catch (a) {
                            d = a;
                          }
                          a.call(c.prototype);
                        }
                      } else {
                        try {
                          throw Error();
                        } catch (a) {
                          d = a;
                        }
                        (c = a()) &&
                          'function' == typeof c.catch &&
                          c.catch(function () {});
                      }
                    } catch (a) {
                      if (a && d && 'string' == typeof a.stack)
                        return [a.stack, d.stack];
                    }
                    return [null, null];
                  },
                };
                d.DetermineComponentFrameRoot.displayName =
                  'DetermineComponentFrameRoot';
                var e = Object.getOwnPropertyDescriptor(
                  d.DetermineComponentFrameRoot,
                  'name'
                );
                e &&
                  e.configurable &&
                  Object.defineProperty(d.DetermineComponentFrameRoot, 'name', {
                    value: 'DetermineComponentFrameRoot',
                  });
                var f = d.DetermineComponentFrameRoot(),
                  g = f[0],
                  h = f[1];
                if (g && h) {
                  var i = g.split(`
`),
                    j = h.split(`
`);
                  for (
                    e = d = 0;
                    d < i.length &&
                    !i[d].includes('DetermineComponentFrameRoot');
                  )
                    d++;
                  for (
                    ;
                    e < j.length &&
                    !j[e].includes('DetermineComponentFrameRoot');
                  )
                    e++;
                  if (d === i.length || e === j.length)
                    for (
                      d = i.length - 1, e = j.length - 1;
                      1 <= d && 0 <= e && i[d] !== j[e];
                    )
                      e--;
                  for (; 1 <= d && 0 <= e; d--, e--)
                    if (i[d] !== j[e]) {
                      if (1 !== d || 1 !== e)
                        do
                          if ((d--, e--, 0 > e || i[d] !== j[e])) {
                            var k =
                              `
` + i[d].replace(' at new ', ' at ');
                            return (
                              a.displayName &&
                                k.includes('<anonymous>') &&
                                (k = k.replace('<anonymous>', a.displayName)),
                              k
                            );
                          }
                        while (1 <= d && 0 <= e);
                      break;
                    }
                }
              } finally {
                ((gU = !1), (Error.prepareStackTrace = c));
              }
              return (c = a ? a.displayName || a.name : '') ? y(c) : '';
            }
            function A(a) {
              try {
                var b = '',
                  c = null;
                do
                  ((b += (function (a, b) {
                    switch (a.tag) {
                      case 26:
                      case 27:
                      case 5:
                        return y(a.type);
                      case 16:
                        return y('Lazy');
                      case 13:
                        return a.child !== b && null !== b
                          ? y('Suspense Fallback')
                          : y('Suspense');
                      case 19:
                        return y('SuspenseList');
                      case 0:
                      case 15:
                        return z(a.type, !1);
                      case 11:
                        return z(a.type.render, !1);
                      case 1:
                        return z(a.type, !0);
                      case 31:
                        return y('Activity');
                      default:
                        return '';
                    }
                  })(a, c)),
                    (c = a),
                    (a = a.return));
                while (a);
                return b;
              } catch (a) {
                return (
                  `
Error generating stack: ` +
                  a.message +
                  `
` +
                  a.stack
                );
              }
            }
            function B(a, b) {
              if ('object' == typeof a && null !== a) {
                var c = gV.get(a);
                return void 0 !== c
                  ? c
                  : ((b = { value: a, source: b, stack: A(b) }),
                    gV.set(a, b),
                    b);
              }
              return { value: a, source: b, stack: A(b) };
            }
            function C(a, b) {
              ((gW[gX++] = gZ), (gW[gX++] = gY), (gY = a), (gZ = b));
            }
            function E(a, b, c) {
              ((g$[g_++] = g1), (g$[g_++] = g2), (g$[g_++] = g0), (g0 = a));
              var d = g1;
              a = g2;
              var e = 32 - gy(d) - 1;
              ((d &= ~(1 << e)), (c += 1));
              var f = 32 - gy(b) + e;
              if (30 < f) {
                var g = e - (e % 5);
                ((f = (d & ((1 << g) - 1)).toString(32)),
                  (d >>= g),
                  (e -= g),
                  (g1 = (1 << (32 - gy(b) + e)) | (c << e) | d),
                  (g2 = f + a));
              } else ((g1 = (1 << f) | (c << e) | d), (g2 = a));
            }
            function F(a) {
              null !== a.return && (C(a, 1), E(a, 1, 0));
            }
            function G(a) {
              for (; a === gY; )
                ((gY = gW[--gX]),
                  (gW[gX] = null),
                  (gZ = gW[--gX]),
                  (gW[gX] = null));
              for (; a === g0; )
                ((g0 = g$[--g_]),
                  (g$[g_] = null),
                  (g2 = g$[--g_]),
                  (g$[g_] = null),
                  (g1 = g$[--g_]),
                  (g$[g_] = null));
            }
            function H(a, b) {
              ((g$[g_++] = g1),
                (g$[g_++] = g2),
                (g$[g_++] = g0),
                (g1 = b.id),
                (g2 = b.overflow),
                (g0 = a));
            }
            function I(a, b) {
              (l(g5, b), l(g4, a), l(g3, null), (a = eA(b)), k(g3), l(g3, a));
            }
            function J() {
              (k(g3), k(g4), k(g5));
            }
            function K(a) {
              null !== a.memoizedState && l(g6, a);
              var b = g3.current,
                c = eB(b, a.type);
              b !== c && (l(g4, a), l(g3, c));
            }
            function L(a) {
              (g4.current === a && (k(g3), k(g4)),
                g6.current === a &&
                  (k(g6),
                  eM ? (e3._currentValue = e2) : (e3._currentValue2 = e2)));
            }
            function M(a) {
              var b = Error(
                d(
                  418,
                  1 < arguments.length &&
                    void 0 !== arguments[1] &&
                    arguments[1]
                    ? 'text'
                    : 'HTML',
                  ''
                )
              );
              throw (S(B(b, a)), hc);
            }
            function N(a, b) {
              if (!eP) throw Error(d(175));
              fS(a.stateNode, a.type, a.memoizedProps, b, a) || M(a, !0);
            }
            function O(a) {
              for (g7 = a.return; g7; )
                switch (g7.tag) {
                  case 5:
                  case 31:
                  case 13:
                    hb = !1;
                    return;
                  case 27:
                  case 3:
                    hb = !0;
                    return;
                  default:
                    g7 = g7.return;
                }
            }
            function P(a) {
              if (!eP || a !== g7) return !1;
              if (!g9) return (O(a), (g9 = !0), !1);
              var b = a.tag;
              if (
                (gp
                  ? 3 !== b &&
                    27 !== b &&
                    (5 !== b || (f6(a.type) && !eH(a.type, a.memoizedProps))) &&
                    g8 &&
                    M(a)
                  : 3 !== b &&
                    (5 !== b || (f6(a.type) && !eH(a.type, a.memoizedProps))) &&
                    g8 &&
                    M(a),
                O(a),
                13 === b)
              ) {
                if (!eP) throw Error(d(316));
                if (!(a = null !== (a = a.memoizedState) ? a.dehydrated : null))
                  throw Error(d(317));
                g8 = fX(a);
              } else if (31 === b) {
                if (!(a = null !== (a = a.memoizedState) ? a.dehydrated : null))
                  throw Error(d(317));
                g8 = fW(a);
              } else
                g8 =
                  gp && 27 === b ? fI(a.type, g8) : g7 ? fH(a.stateNode) : null;
              return !0;
            }
            function Q() {
              eP && ((g8 = g7 = null), (g9 = !1));
            }
            function R() {
              var a = ha;
              return (
                null !== a &&
                  (null === iG ? (iG = a) : iG.push.apply(iG, a), (ha = null)),
                a
              );
            }
            function S(a) {
              null === ha ? (ha = [a]) : ha.push(a);
            }
            function T(a, b, c) {
              eM
                ? (l(hd, b._currentValue), (b._currentValue = c))
                : (l(hd, b._currentValue2), (b._currentValue2 = c));
            }
            function U(a) {
              var b = hd.current;
              (eM ? (a._currentValue = b) : (a._currentValue2 = b), k(hd));
            }
            function V(a, b, c) {
              for (; null !== a; ) {
                var d = a.alternate;
                if (
                  ((a.childLanes & b) !== b
                    ? ((a.childLanes |= b), null !== d && (d.childLanes |= b))
                    : null !== d &&
                      (d.childLanes & b) !== b &&
                      (d.childLanes |= b),
                  a === c)
                )
                  break;
                a = a.return;
              }
            }
            function W(a, b, c, e) {
              var f = a.child;
              for (null !== f && (f.return = a); null !== f; ) {
                var g = f.dependencies;
                if (null !== g) {
                  var h = f.child;
                  g = g.firstContext;
                  h: for (; null !== g; ) {
                    var i = g;
                    g = f;
                    for (var j = 0; j < b.length; j++)
                      if (i.context === b[j]) {
                        ((g.lanes |= c),
                          null !== (i = g.alternate) && (i.lanes |= c),
                          V(g.return, c, a),
                          e || (h = null));
                        break h;
                      }
                    g = i.next;
                  }
                } else if (18 === f.tag) {
                  if (null === (h = f.return)) throw Error(d(341));
                  ((h.lanes |= c),
                    null !== (g = h.alternate) && (g.lanes |= c),
                    V(h, c, a),
                    (h = null));
                } else h = f.child;
                if (null !== h) h.return = f;
                else
                  for (h = f; null !== h; ) {
                    if (h === a) {
                      h = null;
                      break;
                    }
                    if (null !== (f = h.sibling)) {
                      ((f.return = h.return), (h = f));
                      break;
                    }
                    h = h.return;
                  }
                f = h;
              }
            }
            function X(a, b, c, e) {
              a = null;
              for (var f = b, g = !1; null !== f; ) {
                if (!g) {
                  if ((524288 & f.flags) != 0) g = !0;
                  else if ((262144 & f.flags) != 0) break;
                }
                if (10 === f.tag) {
                  var h = f.alternate;
                  if (null === h) throw Error(d(387));
                  if (null !== (h = h.memoizedProps)) {
                    var i = f.type;
                    gR(f.pendingProps.value, h.value) ||
                      (null !== a ? a.push(i) : (a = [i]));
                  }
                } else if (f === g6.current) {
                  if (null === (h = f.alternate)) throw Error(d(387));
                  h.memoizedState.memoizedState !==
                    f.memoizedState.memoizedState &&
                    (null !== a ? a.push(e3) : (a = [e3]));
                }
                f = f.return;
              }
              (null !== a && W(b, a, c, e), (b.flags |= 262144));
            }
            function Y(a) {
              for (a = a.firstContext; null !== a; ) {
                var b = a.context;
                if (
                  !gR(eM ? b._currentValue : b._currentValue2, a.memoizedValue)
                )
                  return !0;
                a = a.next;
              }
              return !1;
            }
            function Z(a) {
              ((he = a),
                (hf = null),
                null !== (a = a.dependencies) && (a.firstContext = null));
            }
            function $(a) {
              return aa(he, a);
            }
            function _(a, b) {
              return (null === he && Z(a), aa(a, b));
            }
            function aa(a, b) {
              var c = eM ? b._currentValue : b._currentValue2;
              if (
                ((b = { context: b, memoizedValue: c, next: null }),
                null === hf)
              ) {
                if (null === a) throw Error(d(308));
                ((hf = b),
                  (a.dependencies = { lanes: 0, firstContext: b }),
                  (a.flags |= 524288));
              } else hf = hf.next = b;
              return c;
            }
            function ab() {
              return { controller: new hg(), data: new Map(), refCount: 0 };
            }
            function ac(a) {
              (a.refCount--,
                0 === a.refCount &&
                  hh(hi, function () {
                    a.controller.abort();
                  }));
            }
            function ad() {}
            function ae(a) {
              (a !== hl &&
                null === a.next &&
                (null === hl ? (hk = hl = a) : (hl = hl.next = a)),
                (hn = !0),
                hm ||
                  ((hm = !0),
                  e5
                    ? e6(function () {
                        (6 & ip) != 0 ? gE(gJ, ag) : ah();
                      })
                    : gE(gJ, ag)));
            }
            function af(a, b) {
              if (!ho && hn) {
                ho = !0;
                do
                  for (var c = !1, d = hk; null !== d; ) {
                    if (!b)
                      if (0 !== a) {
                        var e = d.pendingLanes;
                        if (0 === e) var f = 0;
                        else {
                          var g = d.suspendedLanes,
                            h = d.pingedLanes;
                          f =
                            0xc000095 &
                            (f =
                              ((1 << (31 - gy(42 | a) + 1)) - 1) &
                              (e & ~(g & ~h)))
                              ? (0xc000095 & f) | 1
                              : f
                                ? 2 | f
                                : 0;
                        }
                        0 !== f && ((c = !0), ak(d, f));
                      } else
                        ((f = is),
                          (3 &
                            (f = n(
                              d,
                              d === iq ? f : 0,
                              null !== d.cancelPendingCommit ||
                                d.timeoutHandle !== eL
                            ))) ==
                            0 ||
                            o(d, f) ||
                            ((c = !0), ak(d, f)));
                    d = d.next;
                  }
                while (c);
                ho = !1;
              }
            }
            function ag() {
              ah();
            }
            function ah() {
              hn = hm = !1;
              var a = 0;
              0 !== hp && eV() && (a = hp);
              for (var b = gI(), c = null, d = hk; null !== d; ) {
                var e = d.next,
                  f = ai(d, b);
                (0 === f
                  ? ((d.next = null),
                    null === c ? (hk = e) : (c.next = e),
                    null === e && (hl = c))
                  : ((c = d), (0 !== a || (3 & f) != 0) && (hn = !0)),
                  (d = e));
              }
              ((0 !== iN && 5 !== iN) || af(a, !1), 0 !== hp && (hp = 0));
            }
            function ai(a, b) {
              for (
                var c = a.suspendedLanes,
                  d = a.pingedLanes,
                  e = a.expirationTimes,
                  f = -0x3c00001 & a.pendingLanes;
                0 < f;
              ) {
                var g = 31 - gy(f),
                  h = 1 << g,
                  i = e[g];
                (-1 === i
                  ? ((h & c) == 0 || (h & d) != 0) &&
                    (e[g] = (function (a, b) {
                      switch (a) {
                        case 1:
                        case 2:
                        case 4:
                        case 8:
                        case 64:
                          return b + 250;
                        case 16:
                        case 32:
                        case 128:
                        case 256:
                        case 512:
                        case 1024:
                        case 2048:
                        case 4096:
                        case 8192:
                        case 16384:
                        case 32768:
                        case 65536:
                        case 131072:
                        case 262144:
                        case 524288:
                        case 1048576:
                        case 2097152:
                          return b + 5e3;
                        default:
                          return -1;
                      }
                    })(h, b))
                  : i <= b && (a.expiredLanes |= h),
                  (f &= ~h));
              }
              if (
                ((b = iq),
                (c = is),
                (c = n(
                  a,
                  a === b ? c : 0,
                  null !== a.cancelPendingCommit || a.timeoutHandle !== eL
                )),
                (d = a.callbackNode),
                0 === c ||
                  (a === b && (2 === it || 9 === it)) ||
                  null !== a.cancelPendingCommit)
              )
                return (
                  null !== d && null !== d && gF(d),
                  (a.callbackNode = null),
                  (a.callbackPriority = 0)
                );
              if ((3 & c) == 0 || o(a, c)) {
                if ((b = c & -c) === a.callbackPriority) return b;
                switch ((null !== d && gF(d), w(c))) {
                  case 2:
                  case 8:
                    c = gK;
                    break;
                  case 32:
                  default:
                    c = gL;
                    break;
                  case 0x10000000:
                    c = gM;
                }
                return (
                  (c = gE(c, (d = aj.bind(null, a)))),
                  (a.callbackPriority = b),
                  (a.callbackNode = c),
                  b
                );
              }
              return (
                null !== d && null !== d && gF(d),
                (a.callbackPriority = 2),
                (a.callbackNode = null),
                2
              );
            }
            function aj(a, b) {
              if (0 !== iN && 5 !== iN)
                return (
                  (a.callbackNode = null),
                  (a.callbackPriority = 0),
                  null
                );
              var c = a.callbackNode;
              if (dN() && a.callbackNode !== c) return null;
              var d = is;
              return 0 ===
                (d = n(
                  a,
                  a === iq ? d : 0,
                  null !== a.cancelPendingCommit || a.timeoutHandle !== eL
                ))
                ? null
                : (dr(a, d, b),
                  ai(a, gI()),
                  null != a.callbackNode && a.callbackNode === c
                    ? aj.bind(null, a)
                    : null);
            }
            function ak(a, b) {
              if (dN()) return null;
              dr(a, b, !0);
            }
            function al() {
              if (0 === hp) {
                var a = hs;
                (0 === a &&
                  ((a = gB), (261888 & (gB <<= 1)) == 0 && (gB = 256)),
                  (hp = a));
              }
              return hp;
            }
            function am() {
              if (0 == --hr && null !== hq) {
                null !== ht && (ht.status = 'fulfilled');
                var a = hq;
                ((hq = null), (hs = 0), (ht = null));
                for (var b = 0; b < a.length; b++) (0, a[b])();
              }
            }
            function an() {
              var a = hv.current;
              return null !== a ? a : iq.pooledCache;
            }
            function ao(a, b) {
              null === b ? l(hv, hv.current) : l(hv, b.pool);
            }
            function ap() {
              var a = an();
              return null === a
                ? null
                : {
                    parent: eM ? hj._currentValue : hj._currentValue2,
                    pool: a,
                  };
            }
            function aq(a, b) {
              if (gR(a, b)) return !0;
              if (
                'object' != typeof a ||
                null === a ||
                'object' != typeof b ||
                null === b
              )
                return !1;
              var c = Object.keys(a),
                d = Object.keys(b);
              if (c.length !== d.length) return !1;
              for (d = 0; d < c.length; d++) {
                var e = c[d];
                if (!gT.call(b, e) || !gR(a[e], b[e])) return !1;
              }
              return !0;
            }
            function ar(a) {
              return 'fulfilled' === (a = a.status) || 'rejected' === a;
            }
            function as(a, b, c) {
              switch (
                (void 0 === (c = a[c])
                  ? a.push(b)
                  : c !== b && (b.then(ad, ad), (b = c)),
                b.status)
              ) {
                case 'fulfilled':
                  return b.value;
                case 'rejected':
                  throw (av((a = b.reason)), a);
                default:
                  if ('string' == typeof b.status) b.then(ad, ad);
                  else {
                    if (null !== (a = iq) && 100 < a.shellSuspendCounter)
                      throw Error(d(482));
                    (((a = b).status = 'pending'),
                      a.then(
                        function (a) {
                          if ('pending' === b.status) {
                            var c = b;
                            ((c.status = 'fulfilled'), (c.value = a));
                          }
                        },
                        function (a) {
                          if ('pending' === b.status) {
                            var c = b;
                            ((c.status = 'rejected'), (c.reason = a));
                          }
                        }
                      ));
                  }
                  switch (b.status) {
                    case 'fulfilled':
                      return b.value;
                    case 'rejected':
                      throw (av((a = b.reason)), a);
                  }
                  throw ((hA = b), hw);
              }
            }
            function at(a) {
              try {
                return (0, a._init)(a._payload);
              } catch (a) {
                throw null !== a &&
                  'object' == typeof a &&
                  'function' == typeof a.then
                  ? ((hA = a), hw)
                  : a;
              }
            }
            function au() {
              if (null === hA) throw Error(d(459));
              var a = hA;
              return ((hA = null), a);
            }
            function av(a) {
              if (a === hw || a === hy) throw Error(d(483));
            }
            function aw(a) {
              var b = hC;
              return ((hC += 1), null === hB && (hB = []), as(hB, a, b));
            }
            function ax(a, b) {
              a.ref = void 0 !== (b = b.props.ref) ? b : null;
            }
            function ay(a, b) {
              throw b.$$typeof === ed
                ? Error(d(525))
                : Error(
                    d(
                      31,
                      '[object Object]' ===
                        (a = Object.prototype.toString.call(b))
                        ? 'object with keys {' + Object.keys(b).join(', ') + '}'
                        : a
                    )
                  );
            }
            function az(a) {
              function c(b, c) {
                if (a) {
                  var d = b.deletions;
                  null === d
                    ? ((b.deletions = [c]), (b.flags |= 16))
                    : d.push(c);
                }
              }
              function e(b, d) {
                if (!a) return null;
                for (; null !== d; ) (c(b, d), (d = d.sibling));
                return null;
              }
              function f(a) {
                for (var b = new Map(); null !== a; )
                  (null !== a.key ? b.set(a.key, a) : b.set(a.index, a),
                    (a = a.sibling));
                return b;
              }
              function g(a, b) {
                return (((a = dY(a, b)).index = 0), (a.sibling = null), a);
              }
              function i(b, c, d) {
                return (
                  (b.index = d),
                  a
                    ? null !== (d = b.alternate)
                      ? (d = d.index) < c
                        ? ((b.flags |= 0x4000002), c)
                        : d
                      : ((b.flags |= 0x4000002), c)
                    : ((b.flags |= 1048576), c)
                );
              }
              function j(b) {
                return (a && null === b.alternate && (b.flags |= 0x4000002), b);
              }
              function k(a, b, c, d) {
                return (
                  null === b || 6 !== b.tag
                    ? ((b = d0(c, a.mode, d)).return = a)
                    : ((b = g(b, c)).return = a),
                  b
                );
              }
              function l(a, b, c, d) {
                var e = c.type;
                return e === eg
                  ? n(a, b, c.props.children, d, c.key)
                  : (null !== b &&
                    (b.elementType === e ||
                      ('object' == typeof e &&
                        null !== e &&
                        e.$$typeof === ep &&
                        at(e) === b.type))
                      ? ax((b = g(b, c.props)), c)
                      : ax(
                          (b = d$(c.type, c.key, c.props, null, a.mode, d)),
                          c
                        ),
                    (b.return = a),
                    b);
              }
              function m(a, b, c, d) {
                return (
                  null === b ||
                  4 !== b.tag ||
                  b.stateNode.containerInfo !== c.containerInfo ||
                  b.stateNode.implementation !== c.implementation
                    ? ((b = d2(c, a.mode, d)).return = a)
                    : ((b = g(b, c.children || [])).return = a),
                  b
                );
              }
              function n(a, b, c, d, e) {
                return (
                  null === b || 7 !== b.tag
                    ? ((b = d_(c, a.mode, d, e)).return = a)
                    : ((b = g(b, c)).return = a),
                  b
                );
              }
              function o(a, b, c) {
                if (
                  ('string' == typeof b && '' !== b) ||
                  'number' == typeof b ||
                  'bigint' == typeof b
                )
                  return (((b = d0('' + b, a.mode, c)).return = a), b);
                if ('object' == typeof b && null !== b) {
                  switch (b.$$typeof) {
                    case ee:
                      return (
                        ax(
                          (c = d$(b.type, b.key, b.props, null, a.mode, c)),
                          b
                        ),
                        (c.return = a),
                        c
                      );
                    case ef:
                      return (((b = d2(b, a.mode, c)).return = a), b);
                    case ep:
                      return o(a, (b = at(b)), c);
                  }
                  if (eu(b) || h(b))
                    return (((b = d_(b, a.mode, c, null)).return = a), b);
                  if ('function' == typeof b.then) return o(a, aw(b), c);
                  if (b.$$typeof === ek) return o(a, _(a, b), c);
                  ay(a, b);
                }
                return null;
              }
              function p(a, b, c, d) {
                var e = null !== b ? b.key : null;
                if (
                  ('string' == typeof c && '' !== c) ||
                  'number' == typeof c ||
                  'bigint' == typeof c
                )
                  return null !== e ? null : k(a, b, '' + c, d);
                if ('object' == typeof c && null !== c) {
                  switch (c.$$typeof) {
                    case ee:
                      return c.key === e ? l(a, b, c, d) : null;
                    case ef:
                      return c.key === e ? m(a, b, c, d) : null;
                    case ep:
                      return p(a, b, (c = at(c)), d);
                  }
                  if (eu(c) || h(c))
                    return null !== e ? null : n(a, b, c, d, null);
                  if ('function' == typeof c.then) return p(a, b, aw(c), d);
                  if (c.$$typeof === ek) return p(a, b, _(a, c), d);
                  ay(a, c);
                }
                return null;
              }
              function q(a, b, c, d, e) {
                if (
                  ('string' == typeof d && '' !== d) ||
                  'number' == typeof d ||
                  'bigint' == typeof d
                )
                  return k(b, (a = a.get(c) || null), '' + d, e);
                if ('object' == typeof d && null !== d) {
                  switch (d.$$typeof) {
                    case ee:
                      return l(
                        b,
                        (a = a.get(null === d.key ? c : d.key) || null),
                        d,
                        e
                      );
                    case ef:
                      return m(
                        b,
                        (a = a.get(null === d.key ? c : d.key) || null),
                        d,
                        e
                      );
                    case ep:
                      return q(a, b, c, (d = at(d)), e);
                  }
                  if (eu(d) || h(d))
                    return n(b, (a = a.get(c) || null), d, e, null);
                  if ('function' == typeof d.then) return q(a, b, c, aw(d), e);
                  if (d.$$typeof === ek) return q(a, b, c, _(b, d), e);
                  ay(b, d);
                }
                return null;
              }
              return function (k, l, m, n) {
                try {
                  hC = 0;
                  var r = (function b(k, l, m, n) {
                    if (
                      ('object' == typeof m &&
                        null !== m &&
                        m.type === eg &&
                        null === m.key &&
                        (m = m.props.children),
                      'object' == typeof m && null !== m)
                    ) {
                      switch (m.$$typeof) {
                        case ee:
                          h: {
                            for (var r = m.key; null !== l; ) {
                              if (l.key === r) {
                                if ((r = m.type) === eg) {
                                  if (7 === l.tag) {
                                    (e(k, l.sibling),
                                      ((n = g(l, m.props.children)).return = k),
                                      (k = n));
                                    break h;
                                  }
                                } else if (
                                  l.elementType === r ||
                                  ('object' == typeof r &&
                                    null !== r &&
                                    r.$$typeof === ep &&
                                    at(r) === l.type)
                                ) {
                                  (e(k, l.sibling),
                                    ax((n = g(l, m.props)), m),
                                    (n.return = k),
                                    (k = n));
                                  break h;
                                }
                                e(k, l);
                                break;
                              }
                              (c(k, l), (l = l.sibling));
                            }
                            (m.type === eg
                              ? ((n = d_(
                                  m.props.children,
                                  k.mode,
                                  n,
                                  m.key
                                )).return = k)
                              : (ax(
                                  (n = d$(
                                    m.type,
                                    m.key,
                                    m.props,
                                    null,
                                    k.mode,
                                    n
                                  )),
                                  m
                                ),
                                (n.return = k)),
                              (k = n));
                          }
                          return j(k);
                        case ef:
                          h: {
                            for (r = m.key; null !== l; ) {
                              if (l.key === r)
                                if (
                                  4 === l.tag &&
                                  l.stateNode.containerInfo ===
                                    m.containerInfo &&
                                  l.stateNode.implementation ===
                                    m.implementation
                                ) {
                                  (e(k, l.sibling),
                                    ((n = g(l, m.children || [])).return = k),
                                    (k = n));
                                  break h;
                                } else {
                                  e(k, l);
                                  break;
                                }
                              (c(k, l), (l = l.sibling));
                            }
                            (((n = d2(m, k.mode, n)).return = k), (k = n));
                          }
                          return j(k);
                        case ep:
                          return b(k, l, (m = at(m)), n);
                      }
                      if (eu(m))
                        return (function (b, d, g, h) {
                          for (
                            var j = null,
                              k = null,
                              l = d,
                              m = (d = 0),
                              n = null;
                            null !== l && m < g.length;
                            m++
                          ) {
                            l.index > m
                              ? ((n = l), (l = null))
                              : (n = l.sibling);
                            var r = p(b, l, g[m], h);
                            if (null === r) {
                              null === l && (l = n);
                              break;
                            }
                            (a && l && null === r.alternate && c(b, l),
                              (d = i(r, d, m)),
                              null === k ? (j = r) : (k.sibling = r),
                              (k = r),
                              (l = n));
                          }
                          if (m === g.length)
                            return (e(b, l), g9 && C(b, m), j);
                          if (null === l) {
                            for (; m < g.length; m++)
                              null !== (l = o(b, g[m], h)) &&
                                ((d = i(l, d, m)),
                                null === k ? (j = l) : (k.sibling = l),
                                (k = l));
                            return (g9 && C(b, m), j);
                          }
                          for (l = f(l); m < g.length; m++)
                            null !== (n = q(l, b, m, g[m], h)) &&
                              (a &&
                                null !== n.alternate &&
                                l.delete(null === n.key ? m : n.key),
                              (d = i(n, d, m)),
                              null === k ? (j = n) : (k.sibling = n),
                              (k = n));
                          return (
                            a &&
                              l.forEach(function (a) {
                                return c(b, a);
                              }),
                            g9 && C(b, m),
                            j
                          );
                        })(k, l, m, n);
                      if (h(m)) {
                        if ('function' != typeof (r = h(m)))
                          throw Error(d(150));
                        return (function (b, g, h, j) {
                          if (null == h) throw Error(d(151));
                          for (
                            var k = null,
                              l = null,
                              m = g,
                              n = (g = 0),
                              r = null,
                              s = h.next();
                            null !== m && !s.done;
                            n++, s = h.next()
                          ) {
                            m.index > n
                              ? ((r = m), (m = null))
                              : (r = m.sibling);
                            var t = p(b, m, s.value, j);
                            if (null === t) {
                              null === m && (m = r);
                              break;
                            }
                            (a && m && null === t.alternate && c(b, m),
                              (g = i(t, g, n)),
                              null === l ? (k = t) : (l.sibling = t),
                              (l = t),
                              (m = r));
                          }
                          if (s.done) return (e(b, m), g9 && C(b, n), k);
                          if (null === m) {
                            for (; !s.done; n++, s = h.next())
                              null !== (s = o(b, s.value, j)) &&
                                ((g = i(s, g, n)),
                                null === l ? (k = s) : (l.sibling = s),
                                (l = s));
                            return (g9 && C(b, n), k);
                          }
                          for (m = f(m); !s.done; n++, s = h.next())
                            null !== (s = q(m, b, n, s.value, j)) &&
                              (a &&
                                null !== s.alternate &&
                                m.delete(null === s.key ? n : s.key),
                              (g = i(s, g, n)),
                              null === l ? (k = s) : (l.sibling = s),
                              (l = s));
                          return (
                            a &&
                              m.forEach(function (a) {
                                return c(b, a);
                              }),
                            g9 && C(b, n),
                            k
                          );
                        })(k, l, (m = r.call(m)), n);
                      }
                      if ('function' == typeof m.then) return b(k, l, aw(m), n);
                      if (m.$$typeof === ek) return b(k, l, _(k, m), n);
                      ay(k, m);
                    }
                    return ('string' == typeof m && '' !== m) ||
                      'number' == typeof m ||
                      'bigint' == typeof m
                      ? ((m = '' + m),
                        null !== l && 6 === l.tag
                          ? (e(k, l.sibling), ((n = g(l, m)).return = k))
                          : (e(k, l), ((n = d0(m, k.mode, n)).return = k)),
                        j((k = n)))
                      : e(k, l);
                  })(k, l, m, n);
                  return ((hB = null), r);
                } catch (a) {
                  if (a === hw || a === hy) throw a;
                  var s = b(29, a, null, k.mode);
                  return ((s.lanes = n), (s.return = k), s);
                } finally {
                }
              };
            }
            function aA() {
              for (var a = hG, b = (hH = hG = 0); b < a; ) {
                var c = hF[b];
                hF[b++] = null;
                var d = hF[b];
                hF[b++] = null;
                var e = hF[b];
                hF[b++] = null;
                var f = hF[b];
                if (((hF[b++] = null), null !== d && null !== e)) {
                  var g = d.pending;
                  (null === g
                    ? (e.next = e)
                    : ((e.next = g.next), (g.next = e)),
                    (d.pending = e));
                }
                0 !== f && aE(c, e, f);
              }
            }
            function aB(a, b, c, d) {
              ((hF[hG++] = a),
                (hF[hG++] = b),
                (hF[hG++] = c),
                (hF[hG++] = d),
                (hH |= d),
                (a.lanes |= d),
                null !== (a = a.alternate) && (a.lanes |= d));
            }
            function aC(a, b, c, d) {
              return (aB(a, b, c, d), aF(a));
            }
            function aD(a, b) {
              return (aB(a, null, null, b), aF(a));
            }
            function aE(a, b, c) {
              a.lanes |= c;
              var d = a.alternate;
              null !== d && (d.lanes |= c);
              for (var e = !1, f = a.return; null !== f; )
                ((f.childLanes |= c),
                  null !== (d = f.alternate) && (d.childLanes |= c),
                  22 === f.tag &&
                    (null === (a = f.stateNode) ||
                      1 & a._visibility ||
                      (e = !0)),
                  (a = f),
                  (f = f.return));
              return 3 === a.tag
                ? ((f = a.stateNode),
                  e &&
                    null !== b &&
                    ((e = 31 - gy(c)),
                    null === (d = (a = f.hiddenUpdates)[e])
                      ? (a[e] = [b])
                      : d.push(b),
                    (b.lane = 0x20000000 | c)),
                  f)
                : null;
            }
            function aF(a) {
              if (50 < iU) throw ((iU = 0), (iV = null), Error(d(185)));
              for (var b = a.return; null !== b; ) b = (a = b).return;
              return 3 === a.tag ? a.stateNode : null;
            }
            function aG(a) {
              a.updateQueue = {
                baseState: a.memoizedState,
                firstBaseUpdate: null,
                lastBaseUpdate: null,
                shared: { pending: null, lanes: 0, hiddenCallbacks: null },
                callbacks: null,
              };
            }
            function aH(a, b) {
              ((a = a.updateQueue),
                b.updateQueue === a &&
                  (b.updateQueue = {
                    baseState: a.baseState,
                    firstBaseUpdate: a.firstBaseUpdate,
                    lastBaseUpdate: a.lastBaseUpdate,
                    shared: a.shared,
                    callbacks: null,
                  }));
            }
            function aI(a) {
              return {
                lane: a,
                tag: 0,
                payload: null,
                callback: null,
                next: null,
              };
            }
            function aJ(a, b, c) {
              var d = a.updateQueue;
              if (null === d) return null;
              if (((d = d.shared), (2 & ip) != 0)) {
                var e = d.pending;
                return (
                  null === e ? (b.next = b) : ((b.next = e.next), (e.next = b)),
                  (d.pending = b),
                  (b = aF(a)),
                  aE(a, null, c),
                  b
                );
              }
              return (aB(a, d, b, c), aF(a));
            }
            function aK(a, b, c) {
              if (
                null !== (b = b.updateQueue) &&
                ((b = b.shared), (4194048 & c) != 0)
              ) {
                var d = b.lanes;
                ((d &= a.pendingLanes), (c |= d), (b.lanes = c), t(a, c));
              }
            }
            function aL(a, b) {
              var c = a.updateQueue,
                d = a.alternate;
              if (null !== d && c === (d = d.updateQueue)) {
                var e = null,
                  f = null;
                if (null !== (c = c.firstBaseUpdate)) {
                  do {
                    var g = {
                      lane: c.lane,
                      tag: c.tag,
                      payload: c.payload,
                      callback: null,
                      next: null,
                    };
                    (null === f ? (e = f = g) : (f = f.next = g), (c = c.next));
                  } while (null !== c);
                  null === f ? (e = f = b) : (f = f.next = b);
                } else e = f = b;
                ((c = {
                  baseState: d.baseState,
                  firstBaseUpdate: e,
                  lastBaseUpdate: f,
                  shared: d.shared,
                  callbacks: d.callbacks,
                }),
                  (a.updateQueue = c));
                return;
              }
              (null === (a = c.lastBaseUpdate)
                ? (c.firstBaseUpdate = b)
                : (a.next = b),
                (c.lastBaseUpdate = b));
            }
            function aM() {
              if (hJ) {
                var a = ht;
                if (null !== a) throw a;
              }
            }
            function aN(a, b, c, d) {
              hJ = !1;
              var e = a.updateQueue;
              hI = !1;
              var f = e.firstBaseUpdate,
                g = e.lastBaseUpdate,
                h = e.shared.pending;
              if (null !== h) {
                e.shared.pending = null;
                var i = h,
                  j = i.next;
                ((i.next = null), null === g ? (f = j) : (g.next = j), (g = i));
                var k = a.alternate;
                null !== k &&
                  (h = (k = k.updateQueue).lastBaseUpdate) !== g &&
                  (null === h ? (k.firstBaseUpdate = j) : (h.next = j),
                  (k.lastBaseUpdate = i));
              }
              if (null !== f) {
                var l = e.baseState;
                for (g = 0, k = j = i = null, h = f; ; ) {
                  var m = -0x20000001 & h.lane,
                    n = m !== h.lane;
                  if (n ? (is & m) === m : (d & m) === m) {
                    (0 !== m && m === hs && (hJ = !0),
                      null !== k &&
                        (k = k.next =
                          {
                            lane: 0,
                            tag: h.tag,
                            payload: h.payload,
                            callback: null,
                            next: null,
                          }));
                    h: {
                      var o = a,
                        p = h;
                      switch (((m = b), p.tag)) {
                        case 1:
                          if ('function' == typeof (o = p.payload)) {
                            l = o.call(c, l, m);
                            break h;
                          }
                          l = o;
                          break h;
                        case 3:
                          o.flags = (-65537 & o.flags) | 128;
                        case 0:
                          if (
                            null ==
                            (m =
                              'function' == typeof (o = p.payload)
                                ? o.call(c, l, m)
                                : o)
                          )
                            break h;
                          l = ec({}, l, m);
                          break h;
                        case 2:
                          hI = !0;
                      }
                    }
                    null !== (m = h.callback) &&
                      ((a.flags |= 64),
                      n && (a.flags |= 8192),
                      null === (n = e.callbacks)
                        ? (e.callbacks = [m])
                        : n.push(m));
                  } else
                    ((n = {
                      lane: m,
                      tag: h.tag,
                      payload: h.payload,
                      callback: h.callback,
                      next: null,
                    }),
                      null === k ? ((j = k = n), (i = l)) : (k = k.next = n),
                      (g |= m));
                  if (null === (h = h.next)) {
                    if (null === (h = e.shared.pending)) break;
                    ((h = (n = h).next),
                      (n.next = null),
                      (e.lastBaseUpdate = n),
                      (e.shared.pending = null));
                  }
                }
                (null === k && (i = l),
                  (e.baseState = i),
                  (e.firstBaseUpdate = j),
                  (e.lastBaseUpdate = k),
                  null === f && (e.shared.lanes = 0),
                  (iA |= g),
                  (a.lanes = g),
                  (a.memoizedState = l));
              }
            }
            function aO(a, b) {
              if ('function' != typeof a) throw Error(d(191, a));
              a.call(b);
            }
            function aP(a, b) {
              var c = a.callbacks;
              if (null !== c)
                for (a.callbacks = null, a = 0; a < c.length; a++) aO(c[a], b);
            }
            function aQ(a, b) {
              (l(hL, (a = iy)), l(hK, b), (iy = a | b.baseLanes));
            }
            function aR() {
              (l(hL, iy), l(hK, hK.current));
            }
            function aS() {
              ((iy = hL.current), k(hK), k(hL));
            }
            function aT(a) {
              var b = a.alternate;
              (l(hO, 1 & hO.current),
                l(hM, a),
                null === hN &&
                  (null === b ||
                    null !== hK.current ||
                    null !== b.memoizedState) &&
                  (hN = a));
            }
            function aU(a) {
              (l(hO, hO.current), l(hM, a), null === hN && (hN = a));
            }
            function aV(a) {
              22 === a.tag
                ? (l(hO, hO.current), l(hM, a), null === hN && (hN = a))
                : aW();
            }
            function aW() {
              (l(hO, hO.current), l(hM, hM.current));
            }
            function aX(a) {
              (k(hM), hN === a && (hN = null), k(hO));
            }
            function aY(a) {
              for (var b = a; null !== b; ) {
                if (13 === b.tag) {
                  var c = b.memoizedState;
                  if (
                    null !== c &&
                    (null === (c = c.dehydrated) || fB(c) || fC(c))
                  )
                    return b;
                } else if (
                  19 === b.tag &&
                  ('forwards' === b.memoizedProps.revealOrder ||
                    'backwards' === b.memoizedProps.revealOrder ||
                    'unstable_legacy-backwards' ===
                      b.memoizedProps.revealOrder ||
                    'together' === b.memoizedProps.revealOrder)
                ) {
                  if ((128 & b.flags) != 0) return b;
                } else if (null !== b.child) {
                  ((b.child.return = b), (b = b.child));
                  continue;
                }
                if (b === a) break;
                for (; null === b.sibling; ) {
                  if (null === b.return || b.return === a) return null;
                  b = b.return;
                }
                ((b.sibling.return = b.return), (b = b.sibling));
              }
              return null;
            }
            function aZ() {
              throw Error(d(321));
            }
            function a$(a, b) {
              if (null === b) return !1;
              for (var c = 0; c < b.length && c < a.length; c++)
                if (!gR(a[c], b[c])) return !1;
              return !0;
            }
            function a_(a, b, c, d, e, f) {
              return (
                (hP = f),
                (hQ = b),
                (b.memoizedState = null),
                (b.updateQueue = null),
                (b.lanes = 0),
                (ev.H = null === a || null === a.memoizedState ? h_ : h0),
                (hV = !1),
                (f = c(d, e)),
                (hV = !1),
                hU && (f = a1(b, c, d, e)),
                a0(a),
                f
              );
            }
            function a0(a) {
              ev.H = h$;
              var b = null !== hR && null !== hR.next;
              if (
                ((hP = 0),
                (hS = hR = hQ = null),
                (hT = !1),
                (hX = 0),
                (hY = null),
                b)
              )
                throw Error(d(300));
              null === a ||
                h4 ||
                (null !== (a = a.dependencies) && Y(a) && (h4 = !0));
            }
            function a1(a, b, c, e) {
              hQ = a;
              var f = 0;
              do {
                if ((hU && (hY = null), (hX = 0), (hU = !1), 25 <= f))
                  throw Error(d(301));
                if (((f += 1), (hS = hR = null), null != a.updateQueue)) {
                  var g = a.updateQueue;
                  ((g.lastEffect = null),
                    (g.events = null),
                    (g.stores = null),
                    null != g.memoCache && (g.memoCache.index = 0));
                }
                ((ev.H = h1), (g = b(c, e)));
              } while (hU);
              return g;
            }
            function a2() {
              var a = ev.H,
                b = a.useState()[0];
              return (
                (b = 'function' == typeof b.then ? a9(b) : b),
                (a = a.useState()[0]),
                (null !== hR ? hR.memoizedState : null) !== a &&
                  (hQ.flags |= 1024),
                b
              );
            }
            function a3() {
              var a = 0 !== hW;
              return ((hW = 0), a);
            }
            function a4(a, b, c) {
              ((b.updateQueue = a.updateQueue),
                (b.flags &= -2053),
                (a.lanes &= ~c));
            }
            function a5(a) {
              if (hT) {
                for (a = a.memoizedState; null !== a; ) {
                  var b = a.queue;
                  (null !== b && (b.pending = null), (a = a.next));
                }
                hT = !1;
              }
              ((hP = 0),
                (hS = hR = hQ = null),
                (hU = !1),
                (hX = hW = 0),
                (hY = null));
            }
            function a6() {
              var a = {
                memoizedState: null,
                baseState: null,
                baseQueue: null,
                queue: null,
                next: null,
              };
              return (
                null === hS ? (hQ.memoizedState = hS = a) : (hS = hS.next = a),
                hS
              );
            }
            function a7() {
              if (null === hR) {
                var a = hQ.alternate;
                a = null !== a ? a.memoizedState : null;
              } else a = hR.next;
              var b = null === hS ? hQ.memoizedState : hS.next;
              if (null !== b) ((hS = b), (hR = a));
              else {
                if (null === a)
                  throw null === hQ.alternate ? Error(d(467)) : Error(d(310));
                ((a = {
                  memoizedState: (hR = a).memoizedState,
                  baseState: hR.baseState,
                  baseQueue: hR.baseQueue,
                  queue: hR.queue,
                  next: null,
                }),
                  null === hS
                    ? (hQ.memoizedState = hS = a)
                    : (hS = hS.next = a));
              }
              return hS;
            }
            function a8() {
              return {
                lastEffect: null,
                events: null,
                stores: null,
                memoCache: null,
              };
            }
            function a9(a) {
              var b = hX;
              return (
                (hX += 1),
                null === hY && (hY = []),
                (a = as(hY, a, b)),
                (b = hQ),
                (null === hS ? b.memoizedState : hS.next) === null &&
                  (ev.H =
                    null === (b = b.alternate) || null === b.memoizedState
                      ? h_
                      : h0),
                a
              );
            }
            function ba(a) {
              if (null !== a && 'object' == typeof a) {
                if ('function' == typeof a.then) return a9(a);
                if (a.$$typeof === ek) return $(a);
              }
              throw Error(d(438, String(a)));
            }
            function bb(a) {
              var b = null,
                c = hQ.updateQueue;
              if ((null !== c && (b = c.memoCache), null == b)) {
                var d = hQ.alternate;
                null !== d &&
                  null !== (d = d.updateQueue) &&
                  null != (d = d.memoCache) &&
                  (b = {
                    data: d.data.map(function (a) {
                      return a.slice();
                    }),
                    index: 0,
                  });
              }
              if (
                (null == b && (b = { data: [], index: 0 }),
                null === c && ((c = a8()), (hQ.updateQueue = c)),
                (c.memoCache = b),
                void 0 === (c = b.data[b.index]))
              )
                for (c = b.data[b.index] = Array(a), d = 0; d < a; d++)
                  c[d] = er;
              return (b.index++, c);
            }
            function bc(a, b) {
              return 'function' == typeof b ? b(a) : b;
            }
            function bd(a) {
              return be(a7(), hR, a);
            }
            function be(a, b, c) {
              var e = a.queue;
              if (null === e) throw Error(d(311));
              e.lastRenderedReducer = c;
              var f = a.baseQueue,
                g = e.pending;
              if (null !== g) {
                if (null !== f) {
                  var h = f.next;
                  ((f.next = g.next), (g.next = h));
                }
                ((b.baseQueue = f = g), (e.pending = null));
              }
              if (((g = a.baseState), null === f)) a.memoizedState = g;
              else {
                b = f.next;
                var i = (h = null),
                  j = null,
                  k = b,
                  l = !1;
                do {
                  var m = -0x20000001 & k.lane;
                  if (m !== k.lane ? (is & m) === m : (hP & m) === m) {
                    var n = k.revertLane;
                    if (0 === n)
                      (null !== j &&
                        (j = j.next =
                          {
                            lane: 0,
                            revertLane: 0,
                            gesture: null,
                            action: k.action,
                            hasEagerState: k.hasEagerState,
                            eagerState: k.eagerState,
                            next: null,
                          }),
                        m === hs && (l = !0));
                    else if ((hP & n) === n) {
                      ((k = k.next), n === hs && (l = !0));
                      continue;
                    } else
                      ((m = {
                        lane: 0,
                        revertLane: k.revertLane,
                        gesture: null,
                        action: k.action,
                        hasEagerState: k.hasEagerState,
                        eagerState: k.eagerState,
                        next: null,
                      }),
                        null === j ? ((i = j = m), (h = g)) : (j = j.next = m),
                        (hQ.lanes |= n),
                        (iA |= n));
                    ((m = k.action),
                      hV && c(g, m),
                      (g = k.hasEagerState ? k.eagerState : c(g, m)));
                  } else
                    ((n = {
                      lane: m,
                      revertLane: k.revertLane,
                      gesture: k.gesture,
                      action: k.action,
                      hasEagerState: k.hasEagerState,
                      eagerState: k.eagerState,
                      next: null,
                    }),
                      null === j ? ((i = j = n), (h = g)) : (j = j.next = n),
                      (hQ.lanes |= m),
                      (iA |= m));
                  k = k.next;
                } while (null !== k && k !== b);
                if (
                  (null === j ? (h = g) : (j.next = i),
                  !gR(g, a.memoizedState) &&
                    ((h4 = !0), l && null !== (c = ht)))
                )
                  throw c;
                ((a.memoizedState = g),
                  (a.baseState = h),
                  (a.baseQueue = j),
                  (e.lastRenderedState = g));
              }
              return (
                null === f && (e.lanes = 0),
                [a.memoizedState, e.dispatch]
              );
            }
            function bf(a) {
              var b = a7(),
                c = b.queue;
              if (null === c) throw Error(d(311));
              c.lastRenderedReducer = a;
              var e = c.dispatch,
                f = c.pending,
                g = b.memoizedState;
              if (null !== f) {
                c.pending = null;
                var h = (f = f.next);
                do ((g = a(g, h.action)), (h = h.next));
                while (h !== f);
                (gR(g, b.memoizedState) || (h4 = !0),
                  (b.memoizedState = g),
                  null === b.baseQueue && (b.baseState = g),
                  (c.lastRenderedState = g));
              }
              return [g, e];
            }
            function bg(a, b, c) {
              var e = hQ,
                f = a7(),
                g = g9;
              if (g) {
                if (void 0 === c) throw Error(d(407));
                c = c();
              } else c = b();
              var h = !gR((hR || f).memoizedState, c);
              if (
                (h && ((f.memoizedState = c), (h4 = !0)),
                (f = f.queue),
                bF(bj.bind(null, e, f, a), [a]),
                f.getSnapshot !== b ||
                  h ||
                  (null !== hS && 1 & hS.memoizedState.tag))
              ) {
                if (
                  ((e.flags |= 2048),
                  bA(9, { destroy: void 0 }, bi.bind(null, e, f, c, b), null),
                  null === iq)
                )
                  throw Error(d(349));
                g || (127 & hP) != 0 || bh(e, b, c);
              }
              return c;
            }
            function bh(a, b, c) {
              ((a.flags |= 16384),
                (a = { getSnapshot: b, value: c }),
                null === (b = hQ.updateQueue)
                  ? ((b = a8()), (hQ.updateQueue = b), (b.stores = [a]))
                  : null === (c = b.stores)
                    ? (b.stores = [a])
                    : c.push(a));
            }
            function bi(a, b, c, d) {
              ((b.value = c), (b.getSnapshot = d), bk(b) && bl(a));
            }
            function bj(a, b, c) {
              return c(function () {
                bk(b) && bl(a);
              });
            }
            function bk(a) {
              var b = a.getSnapshot;
              a = a.value;
              try {
                var c = b();
                return !gR(a, c);
              } catch {
                return !0;
              }
            }
            function bl(a) {
              var b = aD(a, 2);
              null !== b && dq(b, a, 2);
            }
            function bm(a) {
              var b = a6();
              if ('function' == typeof a) {
                var c = a;
                if (((a = c()), hV)) {
                  x(!0);
                  try {
                    c();
                  } finally {
                    x(!1);
                  }
                }
              }
              return (
                (b.memoizedState = b.baseState = a),
                (b.queue = {
                  pending: null,
                  lanes: 0,
                  dispatch: null,
                  lastRenderedReducer: bc,
                  lastRenderedState: a,
                }),
                b
              );
            }
            function bn(a, b, c, d) {
              return (
                (a.baseState = c),
                be(a, hR, 'function' == typeof d ? d : bc)
              );
            }
            function bo(a, b, c, e, f) {
              if (b$(a)) throw Error(d(485));
              if (null !== (a = b.action)) {
                var g = {
                  payload: f,
                  action: a,
                  next: null,
                  isTransition: !0,
                  status: 'pending',
                  value: null,
                  reason: null,
                  listeners: [],
                  then: function (a) {
                    g.listeners.push(a);
                  },
                };
                (null !== ev.T ? c(!0) : (g.isTransition = !1),
                  e(g),
                  null === (c = b.pending)
                    ? ((g.next = b.pending = g), bp(b, g))
                    : ((g.next = c.next), (b.pending = c.next = g)));
              }
            }
            function bp(a, b) {
              var c = b.action,
                d = b.payload,
                e = a.state;
              if (b.isTransition) {
                var f = ev.T,
                  g = {};
                ev.T = g;
                try {
                  var h = c(e, d),
                    i = ev.S;
                  (null !== i && i(g, h), bq(a, b, h));
                } catch (c) {
                  bs(a, b, c);
                } finally {
                  (null !== f && null !== g.types && (f.types = g.types),
                    (ev.T = f));
                }
              } else
                try {
                  ((f = c(e, d)), bq(a, b, f));
                } catch (c) {
                  bs(a, b, c);
                }
            }
            function bq(a, b, c) {
              null !== c && 'object' == typeof c && 'function' == typeof c.then
                ? c.then(
                    function (c) {
                      br(a, b, c);
                    },
                    function (c) {
                      return bs(a, b, c);
                    }
                  )
                : br(a, b, c);
            }
            function br(a, b, c) {
              ((b.status = 'fulfilled'),
                (b.value = c),
                bt(b),
                (a.state = c),
                null !== (b = a.pending) &&
                  ((c = b.next) === b
                    ? (a.pending = null)
                    : ((c = c.next), (b.next = c), bp(a, c))));
            }
            function bs(a, b, c) {
              var d = a.pending;
              if (((a.pending = null), null !== d)) {
                d = d.next;
                do
                  ((b.status = 'rejected'),
                    (b.reason = c),
                    bt(b),
                    (b = b.next));
                while (b !== d);
              }
              a.action = null;
            }
            function bt(a) {
              a = a.listeners;
              for (var b = 0; b < a.length; b++) (0, a[b])();
            }
            function bu(a, b) {
              return b;
            }
            function bv(a, b) {
              if (g9) {
                var c = iq.formState;
                if (null !== c) {
                  h: {
                    var d = hQ;
                    if (g9) {
                      if (g8) {
                        var e = fF(g8, hb);
                        if (e) {
                          ((g8 = fH(e)), (d = fG(e)));
                          break h;
                        }
                      }
                      M(d);
                    }
                    d = !1;
                  }
                  d && (b = c[0]);
                }
              }
              (((c = a6()).memoizedState = c.baseState = b),
                (d = {
                  pending: null,
                  lanes: 0,
                  dispatch: null,
                  lastRenderedReducer: bu,
                  lastRenderedState: b,
                }),
                (c.queue = d),
                (c = bX.bind(null, hQ, d)),
                (d.dispatch = c),
                (d = bm(!1)));
              var f = bZ.bind(null, hQ, !1, d.queue);
              return (
                (d = a6()),
                (e = { state: b, dispatch: null, action: a, pending: null }),
                (d.queue = e),
                (c = bo.bind(null, hQ, e, f, c)),
                (e.dispatch = c),
                (d.memoizedState = a),
                [b, c, !1]
              );
            }
            function bw(a) {
              return bx(a7(), hR, a);
            }
            function bx(a, b, c) {
              if (
                ((b = be(a, b, bu)[0]),
                (a = bd(bc)[0]),
                'object' == typeof b &&
                  null !== b &&
                  'function' == typeof b.then)
              )
                try {
                  var d = a9(b);
                } catch (a) {
                  throw a === hw ? hy : a;
                }
              else d = b;
              var e = (b = a7()).queue,
                f = e.dispatch;
              return (
                c !== b.memoizedState &&
                  ((hQ.flags |= 2048),
                  bA(9, { destroy: void 0 }, by.bind(null, e, c), null)),
                [d, f, a]
              );
            }
            function by(a, b) {
              a.action = b;
            }
            function bz(a) {
              var b = a7(),
                c = hR;
              if (null !== c) return bx(b, c, a);
              (a7(), (b = b.memoizedState));
              var d = (c = a7()).queue.dispatch;
              return ((c.memoizedState = a), [b, d, !1]);
            }
            function bA(a, b, c, d) {
              return (
                (a = { tag: a, create: c, deps: d, inst: b, next: null }),
                null === (b = hQ.updateQueue) &&
                  ((b = a8()), (hQ.updateQueue = b)),
                null === (c = b.lastEffect)
                  ? (b.lastEffect = a.next = a)
                  : ((d = c.next),
                    (c.next = a),
                    (a.next = d),
                    (b.lastEffect = a)),
                a
              );
            }
            function bB() {
              return a7().memoizedState;
            }
            function bC(a, b, c, d) {
              var e = a6();
              ((hQ.flags |= a),
                (e.memoizedState = bA(
                  1 | b,
                  { destroy: void 0 },
                  c,
                  void 0 === d ? null : d
                )));
            }
            function bD(a, b, c, d) {
              var e = a7();
              d = void 0 === d ? null : d;
              var f = e.memoizedState.inst;
              null !== hR && null !== d && a$(d, hR.memoizedState.deps)
                ? (e.memoizedState = bA(b, f, c, d))
                : ((hQ.flags |= a), (e.memoizedState = bA(1 | b, f, c, d)));
            }
            function bE(a, b) {
              bC(8390656, 8, a, b);
            }
            function bF(a, b) {
              bD(2048, 8, a, b);
            }
            function bG(a) {
              var b = a7().memoizedState;
              return (
                (function (a) {
                  hQ.flags |= 4;
                  var b = hQ.updateQueue;
                  if (null === b)
                    ((b = a8()), (hQ.updateQueue = b), (b.events = [a]));
                  else {
                    var c = b.events;
                    null === c ? (b.events = [a]) : c.push(a);
                  }
                })({ ref: b, nextImpl: a }),
                function () {
                  if ((2 & ip) != 0) throw Error(d(440));
                  return b.impl.apply(void 0, arguments);
                }
              );
            }
            function bH(a, b) {
              return bD(4, 2, a, b);
            }
            function bI(a, b) {
              return bD(4, 4, a, b);
            }
            function bJ(a, b) {
              if ('function' == typeof b) {
                var c = b((a = a()));
                return function () {
                  'function' == typeof c ? c() : b(null);
                };
              }
              if (null != b)
                return (
                  (b.current = a = a()),
                  function () {
                    b.current = null;
                  }
                );
            }
            function bK(a, b, c) {
              ((c = null != c ? c.concat([a]) : null),
                bD(4, 4, bJ.bind(null, b, a), c));
            }
            function bL() {}
            function bM(a, b) {
              var c = a7();
              b = void 0 === b ? null : b;
              var d = c.memoizedState;
              return null !== b && a$(b, d[1])
                ? d[0]
                : ((c.memoizedState = [a, b]), a);
            }
            function bN(a, b) {
              var c = a7();
              b = void 0 === b ? null : b;
              var d = c.memoizedState;
              if (null !== b && a$(b, d[1])) return d[0];
              if (((d = a()), hV)) {
                x(!0);
                try {
                  a();
                } finally {
                  x(!1);
                }
              }
              return ((c.memoizedState = [d, b]), d);
            }
            function bO(a, b, c) {
              return void 0 === c ||
                ((0x40000000 & hP) != 0 && (261930 & is) == 0)
                ? (a.memoizedState = b)
                : ((a.memoizedState = c),
                  (a = dp()),
                  (hQ.lanes |= a),
                  (iA |= a),
                  c);
            }
            function bP(a, b, c, d) {
              return gR(c, b)
                ? c
                : null !== hK.current
                  ? (gR((a = bO(a, c, d)), b) || (h4 = !0), a)
                  : (42 & hP) == 0 ||
                      ((0x40000000 & hP) != 0 && (261930 & is) == 0)
                    ? ((h4 = !0), (a.memoizedState = c))
                    : ((a = dp()), (hQ.lanes |= a), (iA |= a), b);
            }
            function bQ(a, b, c, d, e) {
              var f = eT();
              eS(0 !== f && 8 > f ? f : 8);
              var g = ev.T,
                h = {};
              ((ev.T = h), bZ(a, !1, b, c));
              try {
                var i = e(),
                  j = ev.S;
                if (
                  (null !== j && j(h, i),
                  null !== i &&
                    'object' == typeof i &&
                    'function' == typeof i.then)
                ) {
                  var k,
                    l,
                    m =
                      ((k = []),
                      (l = {
                        status: 'pending',
                        value: null,
                        reason: null,
                        then: function (a) {
                          k.push(a);
                        },
                      }),
                      i.then(
                        function () {
                          ((l.status = 'fulfilled'), (l.value = d));
                          for (var a = 0; a < k.length; a++) (0, k[a])(d);
                        },
                        function (a) {
                          for (
                            l.status = 'rejected', l.reason = a, a = 0;
                            a < k.length;
                            a++
                          )
                            (0, k[a])(void 0);
                        }
                      ),
                      l);
                  bY(a, b, m, dn(a));
                } else bY(a, b, d, dn(a));
              } catch (c) {
                bY(
                  a,
                  b,
                  { then: function () {}, status: 'rejected', reason: c },
                  dn()
                );
              } finally {
                (eS(f),
                  null !== g && null !== h.types && (g.types = h.types),
                  (ev.T = g));
              }
            }
            function bR(a) {
              var b = a.memoizedState;
              if (null !== b) return b;
              var c = {};
              return (
                ((b = {
                  memoizedState: e2,
                  baseState: e2,
                  baseQueue: null,
                  queue: {
                    pending: null,
                    lanes: 0,
                    dispatch: null,
                    lastRenderedReducer: bc,
                    lastRenderedState: e2,
                  },
                  next: null,
                }).next = {
                  memoizedState: c,
                  baseState: c,
                  baseQueue: null,
                  queue: {
                    pending: null,
                    lanes: 0,
                    dispatch: null,
                    lastRenderedReducer: bc,
                    lastRenderedState: c,
                  },
                  next: null,
                }),
                (a.memoizedState = b),
                null !== (a = a.alternate) && (a.memoizedState = b),
                b
              );
            }
            function bS() {
              return $(e3);
            }
            function bT() {
              return a7().memoizedState;
            }
            function bU() {
              return a7().memoizedState;
            }
            function bV(a) {
              for (var b = a.return; null !== b; ) {
                switch (b.tag) {
                  case 24:
                  case 3:
                    var c = dn(),
                      d = aJ(b, (a = aI(c)), c);
                    (null !== d && (dq(d, b, c), aK(d, b, c)),
                      (b = { cache: ab() }),
                      (a.payload = b));
                    return;
                }
                b = b.return;
              }
            }
            function bW(a, b, c) {
              var d = dn();
              ((c = {
                lane: d,
                revertLane: 0,
                gesture: null,
                action: c,
                hasEagerState: !1,
                eagerState: null,
                next: null,
              }),
                b$(a)
                  ? b_(b, c)
                  : null !== (c = aC(a, b, c, d)) &&
                    (dq(c, a, d), b0(c, b, d)));
            }
            function bX(a, b, c) {
              bY(a, b, c, dn());
            }
            function bY(a, b, c, d) {
              var e = {
                lane: d,
                revertLane: 0,
                gesture: null,
                action: c,
                hasEagerState: !1,
                eagerState: null,
                next: null,
              };
              if (b$(a)) b_(b, e);
              else {
                var f = a.alternate;
                if (
                  0 === a.lanes &&
                  (null === f || 0 === f.lanes) &&
                  null !== (f = b.lastRenderedReducer)
                )
                  try {
                    var g = b.lastRenderedState,
                      h = f(g, c);
                    if (((e.hasEagerState = !0), (e.eagerState = h), gR(h, g)))
                      return (aB(a, b, e, 0), null === iq && aA(), !1);
                  } catch {
                  } finally {
                  }
                if (null !== (c = aC(a, b, e, d)))
                  return (dq(c, a, d), b0(c, b, d), !0);
              }
              return !1;
            }
            function bZ(a, b, c, e) {
              if (
                ((e = {
                  lane: 2,
                  revertLane: al(),
                  gesture: null,
                  action: e,
                  hasEagerState: !1,
                  eagerState: null,
                  next: null,
                }),
                b$(a))
              ) {
                if (b) throw Error(d(479));
              } else null !== (b = aC(a, c, e, 2)) && dq(b, a, 2);
            }
            function b$(a) {
              var b = a.alternate;
              return a === hQ || (null !== b && b === hQ);
            }
            function b_(a, b) {
              hU = hT = !0;
              var c = a.pending;
              (null === c ? (b.next = b) : ((b.next = c.next), (c.next = b)),
                (a.pending = b));
            }
            function b0(a, b, c) {
              if ((4194048 & c) != 0) {
                var d = b.lanes;
                ((d &= a.pendingLanes), (b.lanes = c |= d), t(a, c));
              }
            }
            function b1(a, b, c, d) {
              ((c =
                null == (c = c(d, (b = a.memoizedState))) ? b : ec({}, b, c)),
                (a.memoizedState = c),
                0 === a.lanes && (a.updateQueue.baseState = c));
            }
            function b2(a, b, c, d, e, f, g) {
              return 'function' ==
                typeof (a = a.stateNode).shouldComponentUpdate
                ? a.shouldComponentUpdate(d, f, g)
                : !b.prototype ||
                    !b.prototype.isPureReactComponent ||
                    !aq(c, d) ||
                    !aq(e, f);
            }
            function b3(a, b, c, d) {
              ((a = b.state),
                'function' == typeof b.componentWillReceiveProps &&
                  b.componentWillReceiveProps(c, d),
                'function' == typeof b.UNSAFE_componentWillReceiveProps &&
                  b.UNSAFE_componentWillReceiveProps(c, d),
                b.state !== a && h2.enqueueReplaceState(b, b.state, null));
            }
            function b4(a, b) {
              var c = b;
              if ('ref' in b)
                for (var d in ((c = {}), b)) 'ref' !== d && (c[d] = b[d]);
              if ((a = a.defaultProps))
                for (var e in (c === b && (c = ec({}, c)), a))
                  void 0 === c[e] && (c[e] = a[e]);
              return c;
            }
            function b5(a, b) {
              try {
                (0, a.onUncaughtError)(b.value, { componentStack: b.stack });
              } catch (a) {
                setTimeout(function () {
                  throw a;
                });
              }
            }
            function b6(a, b, c) {
              try {
                (0, a.onCaughtError)(c.value, {
                  componentStack: c.stack,
                  errorBoundary: 1 === b.tag ? b.stateNode : null,
                });
              } catch (a) {
                setTimeout(function () {
                  throw a;
                });
              }
            }
            function b7(a, b, c) {
              return (
                ((c = aI(c)).tag = 3),
                (c.payload = { element: null }),
                (c.callback = function () {
                  b5(a, b);
                }),
                c
              );
            }
            function b8(a) {
              return (((a = aI(a)).tag = 3), a);
            }
            function b9(a, b, c, d) {
              var e = c.type.getDerivedStateFromError;
              if ('function' == typeof e) {
                var f = d.value;
                ((a.payload = function () {
                  return e(f);
                }),
                  (a.callback = function () {
                    b6(b, c, d);
                  }));
              }
              var g = c.stateNode;
              null !== g &&
                'function' == typeof g.componentDidCatch &&
                (a.callback = function () {
                  (b6(b, c, d),
                    'function' != typeof e &&
                      (null === iM ? (iM = new Set([this])) : iM.add(this)));
                  var a = d.stack;
                  this.componentDidCatch(d.value, {
                    componentStack: null !== a ? a : '',
                  });
                });
            }
            function ca(a, b, c, d) {
              b.child = null === a ? hE(b, null, c, d) : hD(b, a.child, c, d);
            }
            function cb(a, b, c, d, e) {
              c = c.render;
              var f = b.ref;
              if ('ref' in d) {
                var g = {};
                for (var h in d) 'ref' !== h && (g[h] = d[h]);
              } else g = d;
              return (
                Z(b),
                (d = a_(a, b, c, g, f, e)),
                (h = a3()),
                null === a || h4
                  ? (g9 && h && F(b), (b.flags |= 1), ca(a, b, d, e), b.child)
                  : (a4(a, b, e), cx(a, b, e))
              );
            }
            function cc(a, b, c, d, e) {
              if (null === a) {
                var f = c.type;
                return 'function' != typeof f ||
                  dX(f) ||
                  void 0 !== f.defaultProps ||
                  null !== c.compare
                  ? (((a = d$(c.type, null, d, b, b.mode, e)).ref = b.ref),
                    (a.return = b),
                    (b.child = a))
                  : ((b.tag = 15), (b.type = f), cd(a, b, f, d, e));
              }
              if (((f = a.child), !cy(a, e))) {
                var g = f.memoizedProps;
                if (
                  (c = null !== (c = c.compare) ? c : aq)(g, d) &&
                  a.ref === b.ref
                )
                  return cx(a, b, e);
              }
              return (
                (b.flags |= 1),
                ((a = dY(f, d)).ref = b.ref),
                (a.return = b),
                (b.child = a)
              );
            }
            function cd(a, b, c, d, e) {
              if (null !== a) {
                var f = a.memoizedProps;
                if (aq(f, d) && a.ref === b.ref)
                  if (((h4 = !1), (b.pendingProps = d = f), !cy(a, e)))
                    return ((b.lanes = a.lanes), cx(a, b, e));
                  else (131072 & a.flags) != 0 && (h4 = !0);
              }
              return ck(a, b, c, d, e);
            }
            function ce(a, b, c, d) {
              var e = d.children,
                f = null !== a ? a.memoizedState : null;
              if (
                (null === a &&
                  null === b.stateNode &&
                  (b.stateNode = {
                    _visibility: 1,
                    _pendingMarkers: null,
                    _retryCache: null,
                    _transitions: null,
                  }),
                'hidden' === d.mode)
              ) {
                if ((128 & b.flags) != 0) {
                  if (((f = null !== f ? f.baseLanes | c : c), null !== a)) {
                    for (d = b.child = a.child, e = 0; null !== d; )
                      ((e = e | d.lanes | d.childLanes), (d = d.sibling));
                    d = e & ~f;
                  } else ((d = 0), (b.child = null));
                  return cg(a, b, f, c, d);
                }
                if ((0x20000000 & c) == 0)
                  return (
                    (d = b.lanes = 0x20000000),
                    cg(a, b, null !== f ? f.baseLanes | c : c, c, d)
                  );
                ((b.memoizedState = { baseLanes: 0, cachePool: null }),
                  null !== a && ao(b, null !== f ? f.cachePool : null),
                  null !== f ? aQ(b, f) : aR(),
                  aV(b));
              } else
                null !== f
                  ? (ao(b, f.cachePool),
                    aQ(b, f),
                    aW(),
                    (b.memoizedState = null))
                  : (null !== a && ao(b, null), aR(), aW());
              return (ca(a, b, e, c), b.child);
            }
            function cf(a, b) {
              return (
                (null !== a && 22 === a.tag) ||
                  null !== b.stateNode ||
                  (b.stateNode = {
                    _visibility: 1,
                    _pendingMarkers: null,
                    _retryCache: null,
                    _transitions: null,
                  }),
                b.sibling
              );
            }
            function cg(a, b, c, d, e) {
              var f = an();
              return (
                (b.memoizedState = {
                  baseLanes: c,
                  cachePool: (f =
                    null === f
                      ? null
                      : {
                          parent: eM ? hj._currentValue : hj._currentValue2,
                          pool: f,
                        }),
                }),
                null !== a && ao(b, null),
                aR(),
                aV(b),
                null !== a && X(a, b, d, !0),
                (b.childLanes = e),
                null
              );
            }
            function ch(a, b) {
              return (
                ((b = cs({ mode: b.mode, children: b.children }, a.mode)).ref =
                  a.ref),
                (a.child = b),
                (b.return = a),
                b
              );
            }
            function ci(a, b, c) {
              return (
                hD(b, a.child, null, c),
                (a = ch(b, b.pendingProps)),
                (a.flags |= 2),
                aX(b),
                (b.memoizedState = null),
                a
              );
            }
            function cj(a, b) {
              var c = b.ref;
              if (null === c)
                null !== a && null !== a.ref && (b.flags |= 4194816);
              else {
                if ('function' != typeof c && 'object' != typeof c)
                  throw Error(d(284));
                (null === a || a.ref !== c) && (b.flags |= 4194816);
              }
            }
            function ck(a, b, c, d, e) {
              return (
                Z(b),
                (c = a_(a, b, c, d, void 0, e)),
                (d = a3()),
                null === a || h4
                  ? (g9 && d && F(b), (b.flags |= 1), ca(a, b, c, e), b.child)
                  : (a4(a, b, e), cx(a, b, e))
              );
            }
            function cl(a, b, c, d, e, f) {
              return (
                Z(b),
                (b.updateQueue = null),
                (c = a1(b, d, c, e)),
                a0(a),
                (d = a3()),
                null === a || h4
                  ? (g9 && d && F(b), (b.flags |= 1), ca(a, b, c, f), b.child)
                  : (a4(a, b, f), cx(a, b, f))
              );
            }
            function cm(a, b, c, d, e) {
              if ((Z(b), null === b.stateNode)) {
                var f = gx,
                  g = c.contextType;
                ('object' == typeof g && null !== g && (f = $(g)),
                  (b.memoizedState =
                    null !== (f = new c(d, f)).state && void 0 !== f.state
                      ? f.state
                      : null),
                  (f.updater = h2),
                  (b.stateNode = f),
                  (f._reactInternals = b),
                  ((f = b.stateNode).props = d),
                  (f.state = b.memoizedState),
                  (f.refs = {}),
                  aG(b),
                  (g = c.contextType),
                  (f.context = 'object' == typeof g && null !== g ? $(g) : gx),
                  (f.state = b.memoizedState),
                  'function' == typeof (g = c.getDerivedStateFromProps) &&
                    (b1(b, c, g, d), (f.state = b.memoizedState)),
                  'function' == typeof c.getDerivedStateFromProps ||
                    'function' == typeof f.getSnapshotBeforeUpdate ||
                    ('function' != typeof f.UNSAFE_componentWillMount &&
                      'function' != typeof f.componentWillMount) ||
                    ((g = f.state),
                    'function' == typeof f.componentWillMount &&
                      f.componentWillMount(),
                    'function' == typeof f.UNSAFE_componentWillMount &&
                      f.UNSAFE_componentWillMount(),
                    g !== f.state && h2.enqueueReplaceState(f, f.state, null),
                    aN(b, d, f, e),
                    aM(),
                    (f.state = b.memoizedState)),
                  'function' == typeof f.componentDidMount &&
                    (b.flags |= 4194308),
                  (d = !0));
              } else if (null === a) {
                f = b.stateNode;
                var h = b.memoizedProps,
                  i = b4(c, h);
                f.props = i;
                var j = f.context,
                  k = c.contextType;
                ((g = gx), 'object' == typeof k && null !== k && (g = $(k)));
                var l = c.getDerivedStateFromProps;
                ((k =
                  'function' == typeof l ||
                  'function' == typeof f.getSnapshotBeforeUpdate),
                  (h = b.pendingProps !== h),
                  k ||
                    ('function' != typeof f.UNSAFE_componentWillReceiveProps &&
                      'function' != typeof f.componentWillReceiveProps) ||
                    ((h || j !== g) && b3(b, f, d, g)),
                  (hI = !1));
                var m = b.memoizedState;
                ((f.state = m),
                  aN(b, d, f, e),
                  aM(),
                  (j = b.memoizedState),
                  h || m !== j || hI
                    ? ('function' == typeof l &&
                        (b1(b, c, l, d), (j = b.memoizedState)),
                      (i = hI || b2(b, c, i, d, m, j, g))
                        ? (k ||
                            ('function' != typeof f.UNSAFE_componentWillMount &&
                              'function' != typeof f.componentWillMount) ||
                            ('function' == typeof f.componentWillMount &&
                              f.componentWillMount(),
                            'function' == typeof f.UNSAFE_componentWillMount &&
                              f.UNSAFE_componentWillMount()),
                          'function' == typeof f.componentDidMount &&
                            (b.flags |= 4194308))
                        : ('function' == typeof f.componentDidMount &&
                            (b.flags |= 4194308),
                          (b.memoizedProps = d),
                          (b.memoizedState = j)),
                      (f.props = d),
                      (f.state = j),
                      (f.context = g),
                      (d = i))
                    : ('function' == typeof f.componentDidMount &&
                        (b.flags |= 4194308),
                      (d = !1)));
              } else {
                ((f = b.stateNode),
                  aH(a, b),
                  (k = b4(c, (g = b.memoizedProps))),
                  (f.props = k),
                  (l = b.pendingProps),
                  (m = f.context),
                  (j = c.contextType),
                  (i = gx),
                  'object' == typeof j && null !== j && (i = $(j)),
                  (j =
                    'function' == typeof (h = c.getDerivedStateFromProps) ||
                    'function' == typeof f.getSnapshotBeforeUpdate) ||
                    ('function' != typeof f.UNSAFE_componentWillReceiveProps &&
                      'function' != typeof f.componentWillReceiveProps) ||
                    ((g !== l || m !== i) && b3(b, f, d, i)),
                  (hI = !1),
                  (m = b.memoizedState),
                  (f.state = m),
                  aN(b, d, f, e),
                  aM());
                var n = b.memoizedState;
                g !== l ||
                m !== n ||
                hI ||
                (null !== a && null !== a.dependencies && Y(a.dependencies))
                  ? ('function' == typeof h &&
                      (b1(b, c, h, d), (n = b.memoizedState)),
                    (k =
                      hI ||
                      b2(b, c, k, d, m, n, i) ||
                      (null !== a &&
                        null !== a.dependencies &&
                        Y(a.dependencies)))
                      ? (j ||
                          ('function' != typeof f.UNSAFE_componentWillUpdate &&
                            'function' != typeof f.componentWillUpdate) ||
                          ('function' == typeof f.componentWillUpdate &&
                            f.componentWillUpdate(d, n, i),
                          'function' == typeof f.UNSAFE_componentWillUpdate &&
                            f.UNSAFE_componentWillUpdate(d, n, i)),
                        'function' == typeof f.componentDidUpdate &&
                          (b.flags |= 4),
                        'function' == typeof f.getSnapshotBeforeUpdate &&
                          (b.flags |= 1024))
                      : ('function' != typeof f.componentDidUpdate ||
                          (g === a.memoizedProps && m === a.memoizedState) ||
                          (b.flags |= 4),
                        'function' != typeof f.getSnapshotBeforeUpdate ||
                          (g === a.memoizedProps && m === a.memoizedState) ||
                          (b.flags |= 1024),
                        (b.memoizedProps = d),
                        (b.memoizedState = n)),
                    (f.props = d),
                    (f.state = n),
                    (f.context = i),
                    (d = k))
                  : ('function' != typeof f.componentDidUpdate ||
                      (g === a.memoizedProps && m === a.memoizedState) ||
                      (b.flags |= 4),
                    'function' != typeof f.getSnapshotBeforeUpdate ||
                      (g === a.memoizedProps && m === a.memoizedState) ||
                      (b.flags |= 1024),
                    (d = !1));
              }
              return (
                (f = d),
                cj(a, b),
                (d = (128 & b.flags) != 0),
                f || d
                  ? ((f = b.stateNode),
                    (c =
                      d && 'function' != typeof c.getDerivedStateFromError
                        ? null
                        : f.render()),
                    (b.flags |= 1),
                    null !== a && d
                      ? ((b.child = hD(b, a.child, null, e)),
                        (b.child = hD(b, null, c, e)))
                      : ca(a, b, c, e),
                    (b.memoizedState = f.state),
                    (a = b.child))
                  : (a = cx(a, b, e)),
                a
              );
            }
            function cn(a, b, c, d) {
              return (Q(), (b.flags |= 256), ca(a, b, c, d), b.child);
            }
            function co(a) {
              return { baseLanes: a, cachePool: ap() };
            }
            function cp(a, b, c) {
              return (
                (a = null !== a ? a.childLanes & ~c : 0),
                b && (a |= iD),
                a
              );
            }
            function cq(a, b, c) {
              var e,
                f = b.pendingProps,
                g = !1,
                h = (128 & b.flags) != 0;
              if (
                ((e = h) ||
                  (e =
                    (null === a || null !== a.memoizedState) &&
                    (2 & hO.current) != 0),
                e && ((g = !0), (b.flags &= -129)),
                (e = (32 & b.flags) != 0),
                (b.flags &= -33),
                null === a)
              ) {
                if (g9) {
                  if (
                    (g ? aT(b) : aW(),
                    (a = g8)
                      ? null !== (a = fR(a, hb)) &&
                        ((b.memoizedState = {
                          dehydrated: a,
                          treeContext:
                            null !== g0 ? { id: g1, overflow: g2 } : null,
                          retryLane: 0x20000000,
                          hydrationErrors: null,
                        }),
                        ((c = d1(a)).return = b),
                        (b.child = c),
                        (g7 = b),
                        (g8 = null))
                      : (a = null),
                    null === a)
                  )
                    throw M(b);
                  return (
                    fC(a) ? (b.lanes = 32) : (b.lanes = 0x20000000),
                    null
                  );
                }
                var i = f.children;
                return (
                  (f = f.fallback),
                  g
                    ? (aW(),
                      (i = cs({ mode: 'hidden', children: i }, (g = b.mode))),
                      (f = d_(f, g, c, null)),
                      (i.return = b),
                      (f.return = b),
                      (i.sibling = f),
                      (b.child = i),
                      ((f = b.child).memoizedState = co(c)),
                      (f.childLanes = cp(a, e, c)),
                      (b.memoizedState = h5),
                      cf(null, f))
                    : (aT(b), cr(b, i))
                );
              }
              var j = a.memoizedState;
              if (null !== j && null !== (i = j.dehydrated)) {
                if (h)
                  256 & b.flags
                    ? (aT(b), (b.flags &= -257), (b = ct(a, b, c)))
                    : null !== b.memoizedState
                      ? (aW(),
                        (b.child = a.child),
                        (b.flags |= 128),
                        (b = null))
                      : (aW(),
                        (i = f.fallback),
                        (g = b.mode),
                        (f = cs({ mode: 'visible', children: f.children }, g)),
                        (i = d_(i, g, c, null)),
                        (i.flags |= 2),
                        (f.return = b),
                        (i.return = b),
                        (f.sibling = i),
                        (b.child = f),
                        hD(b, a.child, null, c),
                        ((f = b.child).memoizedState = co(c)),
                        (f.childLanes = cp(a, e, c)),
                        (b.memoizedState = h5),
                        (b = cf(null, f)));
                else if ((aT(b), fC(i)))
                  ((e = fD(i).digest),
                    ((f = Error(d(419))).stack = ''),
                    (f.digest = e),
                    S({ value: f, source: null, stack: null }),
                    (b = ct(a, b, c)));
                else if (
                  (h4 || X(a, b, c, !1), (e = (c & a.childLanes) != 0), h4 || e)
                ) {
                  if (
                    null !== (e = iq) &&
                    0 !== (f = u(e, c)) &&
                    f !== j.retryLane
                  )
                    throw ((j.retryLane = f), aD(a, f), dq(e, a, f), h3);
                  (fB(i) || dB(), (b = ct(a, b, c)));
                } else
                  fB(i)
                    ? ((b.flags |= 192), (b.child = a.child), (b = null))
                    : ((a = j.treeContext),
                      eP &&
                        ((g8 = fM(i)),
                        (g7 = b),
                        (g9 = !0),
                        (ha = null),
                        (hb = !1),
                        null !== a && H(b, a)),
                      (b = cr(b, f.children)),
                      (b.flags |= 4096));
                return b;
              }
              return g
                ? (aW(),
                  (i = f.fallback),
                  (g = b.mode),
                  (h = (j = a.child).sibling),
                  ((f = dY(j, {
                    mode: 'hidden',
                    children: f.children,
                  })).subtreeFlags = 0x3e00000 & j.subtreeFlags),
                  null !== h
                    ? (i = dY(h, i))
                    : ((i = d_(i, g, c, null)), (i.flags |= 2)),
                  (i.return = b),
                  (f.return = b),
                  (f.sibling = i),
                  (b.child = f),
                  cf(null, f),
                  (f = b.child),
                  null === (i = a.child.memoizedState)
                    ? (i = co(c))
                    : (null !== (g = i.cachePool)
                        ? ((j = eM ? hj._currentValue : hj._currentValue2),
                          (g = g.parent !== j ? { parent: j, pool: j } : g))
                        : (g = ap()),
                      (i = { baseLanes: i.baseLanes | c, cachePool: g })),
                  (f.memoizedState = i),
                  (f.childLanes = cp(a, e, c)),
                  (b.memoizedState = h5),
                  cf(a.child, f))
                : (aT(b),
                  (a = (c = a.child).sibling),
                  ((c = dY(c, {
                    mode: 'visible',
                    children: f.children,
                  })).return = b),
                  (c.sibling = null),
                  null !== a &&
                    (null === (e = b.deletions)
                      ? ((b.deletions = [a]), (b.flags |= 16))
                      : e.push(a)),
                  (b.child = c),
                  (b.memoizedState = null),
                  c);
            }
            function cr(a, b) {
              return (
                ((b = cs({ mode: 'visible', children: b }, a.mode)).return = a),
                (a.child = b)
              );
            }
            function cs(a, c) {
              return (((a = b(22, a, null, c)).lanes = 0), a);
            }
            function ct(a, b, c) {
              return (
                hD(b, a.child, null, c),
                (a = cr(b, b.pendingProps.children)),
                (a.flags |= 2),
                (b.memoizedState = null),
                a
              );
            }
            function cu(a, b, c) {
              a.lanes |= b;
              var d = a.alternate;
              (null !== d && (d.lanes |= b), V(a.return, b, c));
            }
            function cv(a, b, c, d, e, f) {
              var g = a.memoizedState;
              null === g
                ? (a.memoizedState = {
                    isBackwards: b,
                    rendering: null,
                    renderingStartTime: 0,
                    last: d,
                    tail: c,
                    tailMode: e,
                    treeForkCount: f,
                  })
                : ((g.isBackwards = b),
                  (g.rendering = null),
                  (g.renderingStartTime = 0),
                  (g.last = d),
                  (g.tail = c),
                  (g.tailMode = e),
                  (g.treeForkCount = f));
            }
            function cw(a, b, c) {
              var d = b.pendingProps,
                e = d.revealOrder,
                f = d.tail;
              d = d.children;
              var g = hO.current,
                h = (2 & g) != 0;
              if (
                (h ? ((g = (1 & g) | 2), (b.flags |= 128)) : (g &= 1),
                l(hO, g),
                ca(a, b, d, c),
                (d = g9 ? gZ : 0),
                !h && null !== a && (128 & a.flags) != 0)
              )
                h: for (a = b.child; null !== a; ) {
                  if (13 === a.tag) null !== a.memoizedState && cu(a, c, b);
                  else if (19 === a.tag) cu(a, c, b);
                  else if (null !== a.child) {
                    ((a.child.return = a), (a = a.child));
                    continue;
                  }
                  if (a === b) break;
                  for (; null === a.sibling; ) {
                    if (null === a.return || a.return === b) break h;
                    a = a.return;
                  }
                  ((a.sibling.return = a.return), (a = a.sibling));
                }
              switch (e) {
                case 'forwards':
                  for (c = b.child, e = null; null !== c; )
                    (null !== (a = c.alternate) && null === aY(a) && (e = c),
                      (c = c.sibling));
                  (null === (c = e)
                    ? ((e = b.child), (b.child = null))
                    : ((e = c.sibling), (c.sibling = null)),
                    cv(b, !1, e, c, f, d));
                  break;
                case 'backwards':
                case 'unstable_legacy-backwards':
                  for (c = null, e = b.child, b.child = null; null !== e; ) {
                    if (null !== (a = e.alternate) && null === aY(a)) {
                      b.child = e;
                      break;
                    }
                    ((a = e.sibling), (e.sibling = c), (c = e), (e = a));
                  }
                  cv(b, !0, c, null, f, d);
                  break;
                case 'together':
                  cv(b, !1, null, null, void 0, d);
                  break;
                default:
                  b.memoizedState = null;
              }
              return b.child;
            }
            function cx(a, b, c) {
              if (
                (null !== a && (b.dependencies = a.dependencies),
                (iA |= b.lanes),
                (c & b.childLanes) == 0)
              ) {
                if (null === a) return null;
                else if ((X(a, b, c, !1), (c & b.childLanes) == 0)) return null;
              }
              if (null !== a && b.child !== a.child) throw Error(d(153));
              if (null !== b.child) {
                for (
                  c = dY((a = b.child), a.pendingProps),
                    b.child = c,
                    c.return = b;
                  null !== a.sibling;
                )
                  ((a = a.sibling),
                    ((c = c.sibling = dY(a, a.pendingProps)).return = b));
                c.sibling = null;
              }
              return b.child;
            }
            function cy(a, b) {
              return (
                (a.lanes & b) != 0 || !!(null !== (a = a.dependencies) && Y(a))
              );
            }
            function cz(a, b, c) {
              if (null !== a)
                if (a.memoizedProps !== b.pendingProps) h4 = !0;
                else {
                  if (!cy(a, c) && (128 & b.flags) == 0)
                    return (
                      (h4 = !1),
                      (function (a, b, c) {
                        switch (b.tag) {
                          case 3:
                            (I(b, b.stateNode.containerInfo),
                              T(b, hj, a.memoizedState.cache),
                              Q());
                            break;
                          case 27:
                          case 5:
                            K(b);
                            break;
                          case 4:
                            I(b, b.stateNode.containerInfo);
                            break;
                          case 10:
                            T(b, b.type, b.memoizedProps.value);
                            break;
                          case 31:
                            if (null !== b.memoizedState)
                              return ((b.flags |= 128), aU(b), null);
                            break;
                          case 13:
                            var d = b.memoizedState;
                            if (null !== d)
                              return null !== d.dehydrated
                                ? (aT(b), (b.flags |= 128), null)
                                : (c & b.child.childLanes) != 0
                                  ? cq(a, b, c)
                                  : (aT(b),
                                    null !== (a = cx(a, b, c))
                                      ? a.sibling
                                      : null);
                            aT(b);
                            break;
                          case 19:
                            var e = (128 & a.flags) != 0;
                            if (
                              ((d = (c & b.childLanes) != 0) ||
                                (X(a, b, c, !1), (d = (c & b.childLanes) != 0)),
                              e)
                            ) {
                              if (d) return cw(a, b, c);
                              b.flags |= 128;
                            }
                            if (
                              (null !== (e = b.memoizedState) &&
                                ((e.rendering = null),
                                (e.tail = null),
                                (e.lastEffect = null)),
                              l(hO, hO.current),
                              d)
                            )
                              break;
                            return null;
                          case 22:
                            return ((b.lanes = 0), ce(a, b, c, b.pendingProps));
                          case 24:
                            T(b, hj, a.memoizedState.cache);
                        }
                        return cx(a, b, c);
                      })(a, b, c)
                    );
                  h4 = (131072 & a.flags) != 0;
                }
              else
                ((h4 = !1),
                  g9 && (1048576 & b.flags) != 0 && E(b, gZ, b.index));
              switch (((b.lanes = 0), b.tag)) {
                case 16:
                  h: {
                    var e = b.pendingProps;
                    if (
                      ((a = at(b.elementType)),
                      (b.type = a),
                      'function' == typeof a)
                    )
                      dX(a)
                        ? ((e = b4(a, e)),
                          (b.tag = 1),
                          (b = cm(null, b, a, e, c)))
                        : ((b.tag = 0), (b = ck(null, b, a, e, c)));
                    else {
                      if (null != a) {
                        var f = a.$$typeof;
                        if (f === el) {
                          ((b.tag = 11), (b = cb(null, b, a, e, c)));
                          break h;
                        }
                        if (f === eo) {
                          ((b.tag = 14), (b = cc(null, b, a, e, c)));
                          break h;
                        }
                      }
                      throw Error(d(306, (b = i(a) || a), ''));
                    }
                  }
                  return b;
                case 0:
                  return ck(a, b, b.type, b.pendingProps, c);
                case 1:
                  return (
                    (f = b4((e = b.type), b.pendingProps)),
                    cm(a, b, e, f, c)
                  );
                case 3:
                  h: {
                    if ((I(b, b.stateNode.containerInfo), null === a))
                      throw Error(d(387));
                    var g = b.pendingProps;
                    ((e = (f = b.memoizedState).element),
                      aH(a, b),
                      aN(b, g, null, c));
                    var h = b.memoizedState;
                    if (
                      (T(b, hj, (g = h.cache)),
                      g !== f.cache && W(b, [hj], c, !0),
                      aM(),
                      (g = h.element),
                      eP && f.isDehydrated)
                    )
                      if (
                        ((f = { element: g, isDehydrated: !1, cache: h.cache }),
                        (b.updateQueue.baseState = f),
                        (b.memoizedState = f),
                        256 & b.flags)
                      ) {
                        b = cn(a, b, g, c);
                        break h;
                      } else if (g !== e) {
                        (S((e = B(Error(d(424)), b))), (b = cn(a, b, g, c)));
                        break h;
                      } else
                        for (
                          eP &&
                            ((g8 = fK(b.stateNode.containerInfo)),
                            (g7 = b),
                            (g9 = !0),
                            (ha = null),
                            (hb = !0)),
                            c = hE(b, null, g, c),
                            b.child = c;
                          c;
                        )
                          ((c.flags = (-3 & c.flags) | 4096), (c = c.sibling));
                    else {
                      if ((Q(), g === e)) {
                        b = cx(a, b, c);
                        break h;
                      }
                      ca(a, b, g, c);
                    }
                    b = b.child;
                  }
                  return b;
                case 26:
                  if (gb)
                    return (
                      cj(a, b),
                      null === a
                        ? (c = ge(b.type, null, b.pendingProps, null))
                          ? (b.memoizedState = c)
                          : g9 ||
                            (b.stateNode = gk(
                              b.type,
                              b.pendingProps,
                              g5.current,
                              b
                            ))
                        : (b.memoizedState = ge(
                            b.type,
                            a.memoizedProps,
                            b.pendingProps,
                            a.memoizedState
                          )),
                      null
                    );
                case 27:
                  if (gp)
                    return (
                      K(b),
                      null === a &&
                        gp &&
                        g9 &&
                        ((e = b.stateNode =
                          gq(
                            b.type,
                            b.pendingProps,
                            g5.current,
                            g3.current,
                            !1
                          )),
                        (g7 = b),
                        (hb = !0),
                        (g8 = fN(b.type, e, g8))),
                      ca(a, b, b.pendingProps.children, c),
                      cj(a, b),
                      null === a && (b.flags |= 4194304),
                      b.child
                    );
                case 5:
                  return (
                    null === a &&
                      g9 &&
                      (f9(b.type, b.pendingProps, g3.current),
                      (f = e = g8) &&
                        (null !== (e = fO(e, b.type, b.pendingProps, hb))
                          ? ((b.stateNode = e),
                            (g7 = b),
                            (g8 = fJ(e)),
                            (hb = !1),
                            (f = !0))
                          : (f = !1)),
                      f || M(b)),
                    K(b),
                    (f = b.type),
                    (g = b.pendingProps),
                    (h = null !== a ? a.memoizedProps : null),
                    (e = g.children),
                    eH(f, g)
                      ? (e = null)
                      : null !== h && eH(f, h) && (b.flags |= 32),
                    null !== b.memoizedState &&
                      ((f = a_(a, b, a2, null, null, c)),
                      eM ? (e3._currentValue = f) : (e3._currentValue2 = f)),
                    cj(a, b),
                    ca(a, b, e, c),
                    b.child
                  );
                case 6:
                  return (
                    null === a &&
                      g9 &&
                      (ga(b.pendingProps, g3.current),
                      (a = c = g8) &&
                        (null !== (c = fP(c, b.pendingProps, hb))
                          ? ((b.stateNode = c), (g7 = b), (g8 = null), (a = !0))
                          : (a = !1)),
                      a || M(b)),
                    null
                  );
                case 13:
                  return cq(a, b, c);
                case 4:
                  return (
                    I(b, b.stateNode.containerInfo),
                    (e = b.pendingProps),
                    null === a ? (b.child = hD(b, null, e, c)) : ca(a, b, e, c),
                    b.child
                  );
                case 11:
                  return cb(a, b, b.type, b.pendingProps, c);
                case 7:
                  return (ca(a, b, b.pendingProps, c), b.child);
                case 8:
                case 12:
                  return (ca(a, b, b.pendingProps.children, c), b.child);
                case 10:
                  return (
                    (e = b.pendingProps),
                    T(b, b.type, e.value),
                    ca(a, b, e.children, c),
                    b.child
                  );
                case 9:
                  return (
                    (f = b.type._context),
                    (e = b.pendingProps.children),
                    Z(b),
                    (e = e((f = $(f)))),
                    (b.flags |= 1),
                    ca(a, b, e, c),
                    b.child
                  );
                case 14:
                  return cc(a, b, b.type, b.pendingProps, c);
                case 15:
                  return cd(a, b, b.type, b.pendingProps, c);
                case 19:
                  return cw(a, b, c);
                case 31:
                  var j = a,
                    k = b,
                    m = c,
                    n = k.pendingProps,
                    o = (128 & k.flags) != 0;
                  if (((k.flags &= -129), null === j)) {
                    if (g9) {
                      if ('hidden' === n.mode)
                        return (
                          (j = ch(k, n)),
                          (k.lanes = 0x20000000),
                          cf(null, j)
                        );
                      if (
                        (aU(k),
                        (j = g8)
                          ? null !== (j = fQ(j, hb)) &&
                            ((k.memoizedState = {
                              dehydrated: j,
                              treeContext:
                                null !== g0 ? { id: g1, overflow: g2 } : null,
                              retryLane: 0x20000000,
                              hydrationErrors: null,
                            }),
                            ((m = d1(j)).return = k),
                            (k.child = m),
                            (g7 = k),
                            (g8 = null))
                          : (j = null),
                        null === j)
                      )
                        throw M(k);
                      return ((k.lanes = 0x20000000), null);
                    }
                    return ch(k, n);
                  }
                  var p = j.memoizedState;
                  if (null !== p) {
                    var q = p.dehydrated;
                    if ((aU(k), o))
                      if (256 & k.flags) ((k.flags &= -257), (k = ci(j, k, m)));
                      else if (null !== k.memoizedState)
                        ((k.child = j.child), (k.flags |= 128), (k = null));
                      else throw Error(d(558));
                    else if (
                      (h4 || X(j, k, m, !1),
                      (o = (m & j.childLanes) != 0),
                      h4 || o)
                    ) {
                      if (
                        null !== (n = iq) &&
                        0 !== (q = u(n, m)) &&
                        q !== p.retryLane
                      )
                        throw ((p.retryLane = q), aD(j, q), dq(n, j, q), h3);
                      (dB(), (k = ci(j, k, m)));
                    } else
                      ((j = p.treeContext),
                        eP &&
                          ((g8 = fL(q)),
                          (g7 = k),
                          (g9 = !0),
                          (ha = null),
                          (hb = !1),
                          null !== j && H(k, j)),
                        (k = ch(k, n)),
                        (k.flags |= 4096));
                    return k;
                  }
                  return (
                    ((j = dY(j.child, {
                      mode: n.mode,
                      children: n.children,
                    })).ref = k.ref),
                    (k.child = j),
                    (j.return = k),
                    j
                  );
                case 22:
                  return ce(a, b, c, b.pendingProps);
                case 24:
                  return (
                    Z(b),
                    (e = $(hj)),
                    null === a
                      ? (null === (f = an()) &&
                          ((f = iq),
                          (g = ab()),
                          (f.pooledCache = g),
                          g.refCount++,
                          null !== g && (f.pooledCacheLanes |= c),
                          (f = g)),
                        (b.memoizedState = { parent: e, cache: f }),
                        aG(b),
                        T(b, hj, f))
                      : ((a.lanes & c) != 0 &&
                          (aH(a, b), aN(b, null, null, c), aM()),
                        (f = a.memoizedState),
                        (g = b.memoizedState),
                        f.parent !== e
                          ? ((f = { parent: e, cache: e }),
                            (b.memoizedState = f),
                            0 === b.lanes &&
                              (b.memoizedState = b.updateQueue.baseState = f),
                            T(b, hj, e))
                          : (T(b, hj, (e = g.cache)),
                            e !== f.cache && W(b, [hj], c, !0))),
                    ca(a, b, b.pendingProps.children, c),
                    b.child
                  );
                case 29:
                  throw b.pendingProps;
              }
              throw Error(d(156, b.tag));
            }
            function cA(a) {
              a.flags |= 4;
            }
            function cB(a) {
              eO && (a.flags |= 8);
            }
            function cC(a, b) {
              if (null !== a && a.child === b.child) return !1;
              if ((16 & b.flags) != 0) return !0;
              for (a = b.child; null !== a; ) {
                if ((8218 & a.flags) != 0 || (8218 & a.subtreeFlags) != 0)
                  return !0;
                a = a.sibling;
              }
              return !1;
            }
            function cD(a, b, c, d) {
              if (eN)
                for (c = b.child; null !== c; ) {
                  if (5 === c.tag || 6 === c.tag) eF(a, c.stateNode);
                  else if (
                    !(4 === c.tag || (gp && 27 === c.tag)) &&
                    null !== c.child
                  ) {
                    ((c.child.return = c), (c = c.child));
                    continue;
                  }
                  if (c === b) break;
                  for (; null === c.sibling; ) {
                    if (null === c.return || c.return === b) return;
                    c = c.return;
                  }
                  ((c.sibling.return = c.return), (c = c.sibling));
                }
              else if (eO)
                for (var e = b.child; null !== e; ) {
                  if (5 === e.tag) {
                    var f = e.stateNode;
                    (c && d && (f = fz(f, e.type, e.memoizedProps)), eF(a, f));
                  } else if (6 === e.tag)
                    ((f = e.stateNode),
                      c && d && (f = fA(f, e.memoizedProps)),
                      eF(a, f));
                  else if (4 !== e.tag) {
                    if (22 === e.tag && null !== e.memoizedState)
                      (null !== (f = e.child) && (f.return = e),
                        cD(a, e, !0, !0));
                    else if (null !== e.child) {
                      ((e.child.return = e), (e = e.child));
                      continue;
                    }
                  }
                  if (e === b) break;
                  for (; null === e.sibling; ) {
                    if (null === e.return || e.return === b) return;
                    e = e.return;
                  }
                  ((e.sibling.return = e.return), (e = e.sibling));
                }
            }
            function cE(a, b) {
              if (eO && cC(a, b)) {
                var c = (a = b.stateNode).containerInfo,
                  d = fv();
                ((function a(b, c, d, e) {
                  var f = !1;
                  if (eO)
                    for (var g = c.child; null !== g; ) {
                      if (5 === g.tag) {
                        var h = g.stateNode;
                        (d && e && (h = fz(h, g.type, g.memoizedProps)),
                          fw(b, h));
                      } else if (6 === g.tag)
                        ((h = g.stateNode),
                          d && e && (h = fA(h, g.memoizedProps)),
                          fw(b, h));
                      else if (4 !== g.tag) {
                        if (22 === g.tag && null !== g.memoizedState)
                          (null !== (f = g.child) && (f.return = g),
                            a(b, g, !0, !0),
                            (f = !0));
                        else if (null !== g.child) {
                          ((g.child.return = g), (g = g.child));
                          continue;
                        }
                      }
                      if (g === c) break;
                      for (; null === g.sibling; ) {
                        if (null === g.return || g.return === c) return f;
                        g = g.return;
                      }
                      ((g.sibling.return = g.return), (g = g.sibling));
                    }
                  return f;
                })(d, b, !1, !1),
                  (a.pendingChildren = d),
                  cA(b),
                  fx(c, d));
              }
            }
            function cF(a, b, c, d) {
              if (eN) a.memoizedProps !== d && cA(b);
              else if (eO) {
                var e = a.stateNode,
                  f = a.memoizedProps;
                if ((a = cC(a, b)) || f !== d) {
                  var g = g3.current;
                  (f = fu(e, c, f, d, !a, null)) === e
                    ? (b.stateNode = e)
                    : (cB(b),
                      eG(f, c, d, g) && cA(b),
                      (b.stateNode = f),
                      a && cD(f, b, !1, !1));
                } else b.stateNode = e;
              }
            }
            function cG(a, b, c, d, e) {
              if ((32 & a.mode) != 0 && (null === c ? eX(b, d) : eY(b, c, d))) {
                if (
                  ((a.flags |= 0x1000000), (0x13ffff40 & e) === e || eZ(b, d))
                )
                  if (e$(a.stateNode, b, d)) a.flags |= 8192;
                  else if (dy()) a.flags |= 8192;
                  else throw ((hA = hz), hx);
              } else a.flags &= -0x1000001;
            }
            function cH(a, b) {
              if (gm(b)) {
                if (((a.flags |= 0x1000000), !gn(b)))
                  if (dy()) a.flags |= 8192;
                  else throw ((hA = hz), hx);
              } else a.flags &= -0x1000001;
            }
            function cI(a, b) {
              (null !== b && (a.flags |= 4),
                16384 & a.flags &&
                  ((b = 22 !== a.tag ? p() : 0x20000000),
                  (a.lanes |= b),
                  (iE |= b)));
            }
            function cJ(a, b) {
              if (!g9)
                switch (a.tailMode) {
                  case 'hidden':
                    b = a.tail;
                    for (var c = null; null !== b; )
                      (null !== b.alternate && (c = b), (b = b.sibling));
                    null === c ? (a.tail = null) : (c.sibling = null);
                    break;
                  case 'collapsed':
                    c = a.tail;
                    for (var d = null; null !== c; )
                      (null !== c.alternate && (d = c), (c = c.sibling));
                    null === d
                      ? b || null === a.tail
                        ? (a.tail = null)
                        : (a.tail.sibling = null)
                      : (d.sibling = null);
                }
            }
            function cK(a) {
              var b = null !== a.alternate && a.alternate.child === a.child,
                c = 0,
                d = 0;
              if (b)
                for (var e = a.child; null !== e; )
                  ((c |= e.lanes | e.childLanes),
                    (d |= 0x3e00000 & e.subtreeFlags),
                    (d |= 0x3e00000 & e.flags),
                    (e.return = a),
                    (e = e.sibling));
              else
                for (e = a.child; null !== e; )
                  ((c |= e.lanes | e.childLanes),
                    (d |= e.subtreeFlags),
                    (d |= e.flags),
                    (e.return = a),
                    (e = e.sibling));
              return ((a.subtreeFlags |= d), (a.childLanes = c), b);
            }
            function cL(a, b) {
              switch ((G(b), b.tag)) {
                case 3:
                  (U(hj), J());
                  break;
                case 26:
                case 27:
                case 5:
                  L(b);
                  break;
                case 4:
                  J();
                  break;
                case 31:
                  null !== b.memoizedState && aX(b);
                  break;
                case 13:
                  aX(b);
                  break;
                case 19:
                  k(hO);
                  break;
                case 10:
                  U(b.type);
                  break;
                case 22:
                case 23:
                  (aX(b), aS(), null !== a && k(hv));
                  break;
                case 24:
                  U(hj);
              }
            }
            function cM(a, b) {
              try {
                var c = b.updateQueue,
                  d = null !== c ? c.lastEffect : null;
                if (null !== d) {
                  var e = d.next;
                  c = e;
                  do {
                    if ((c.tag & a) === a) {
                      d = void 0;
                      var f = c.create;
                      c.inst.destroy = d = f();
                    }
                    c = c.next;
                  } while (c !== e);
                }
              } catch (a) {
                dQ(b, b.return, a);
              }
            }
            function cN(a, b, c) {
              try {
                var d = b.updateQueue,
                  e = null !== d ? d.lastEffect : null;
                if (null !== e) {
                  var f = e.next;
                  d = f;
                  do {
                    if ((d.tag & a) === a) {
                      var g = d.inst,
                        h = g.destroy;
                      if (void 0 !== h) {
                        ((g.destroy = void 0), (e = b));
                        try {
                          h();
                        } catch (a) {
                          dQ(e, c, a);
                        }
                      }
                    }
                    d = d.next;
                  } while (d !== f);
                }
              } catch (a) {
                dQ(b, b.return, a);
              }
            }
            function cO(a) {
              var b = a.updateQueue;
              if (null !== b) {
                var c = a.stateNode;
                try {
                  aP(b, c);
                } catch (b) {
                  dQ(a, a.return, b);
                }
              }
            }
            function cP(a, b, c) {
              ((c.props = b4(a.type, a.memoizedProps)),
                (c.state = a.memoizedState));
              try {
                c.componentWillUnmount();
              } catch (c) {
                dQ(a, b, c);
              }
            }
            function cQ(a, b) {
              try {
                var c = a.ref;
                if (null !== c) {
                  switch (a.tag) {
                    case 26:
                    case 27:
                    case 5:
                      var d = ez(a.stateNode);
                      break;
                    default:
                      d = a.stateNode;
                  }
                  'function' == typeof c
                    ? (a.refCleanup = c(d))
                    : (c.current = d);
                }
              } catch (c) {
                dQ(a, b, c);
              }
            }
            function cR(a, b) {
              var c = a.ref,
                d = a.refCleanup;
              if (null !== c)
                if ('function' == typeof d)
                  try {
                    d();
                  } catch (c) {
                    dQ(a, b, c);
                  } finally {
                    ((a.refCleanup = null),
                      null != (a = a.alternate) && (a.refCleanup = null));
                  }
                else if ('function' == typeof c)
                  try {
                    c(null);
                  } catch (c) {
                    dQ(a, b, c);
                  }
                else c.current = null;
            }
            function cS(a) {
              var b = a.type,
                c = a.memoizedProps,
                d = a.stateNode;
              try {
                fi(d, b, c, a);
              } catch (b) {
                dQ(a, a.return, b);
              }
            }
            function cT(a, b, c) {
              try {
                fj(a.stateNode, a.type, c, b, a);
              } catch (b) {
                dQ(a, a.return, b);
              }
            }
            function cU(a) {
              return (
                5 === a.tag ||
                3 === a.tag ||
                (!!gb && 26 === a.tag) ||
                (!!gp && 27 === a.tag && gu(a.type)) ||
                4 === a.tag
              );
            }
            function cV(a) {
              h: for (;;) {
                for (; null === a.sibling; ) {
                  if (null === a.return || cU(a.return)) return null;
                  a = a.return;
                }
                for (
                  a.sibling.return = a.return, a = a.sibling;
                  5 !== a.tag && 6 !== a.tag && 18 !== a.tag;
                ) {
                  if (
                    (gp && 27 === a.tag && gu(a.type)) ||
                    2 & a.flags ||
                    null === a.child ||
                    4 === a.tag
                  )
                    continue h;
                  ((a.child.return = a), (a = a.child));
                }
                if (!(2 & a.flags)) return a.stateNode;
              }
            }
            function cW(a, b, c) {
              var d = a.tag;
              if (5 === d || 6 === d)
                ((a = a.stateNode), b ? fk(c, a, b) : ff(c, a));
              else if (
                4 !== d &&
                (gp && 27 === d && gu(a.type) && (c = a.stateNode),
                null !== (a = a.child))
              )
                for (cW(a, b, c), a = a.sibling; null !== a; )
                  (cW(a, b, c), (a = a.sibling));
            }
            function cX(a, b, c) {
              a = a.containerInfo;
              try {
                fy(a, c);
              } catch (a) {
                dQ(b, b.return, a);
              }
            }
            function cY(a) {
              var b = a.stateNode,
                c = a.memoizedProps;
              try {
                gr(a.type, c, b, a);
              } catch (b) {
                dQ(a, a.return, b);
              }
            }
            function cZ(a, b, c) {
              var d = c.flags;
              switch (c.tag) {
                case 0:
                case 11:
                case 15:
                  (c6(a, c), 4 & d && cM(5, c));
                  break;
                case 1:
                  if ((c6(a, c), 4 & d))
                    if (((a = c.stateNode), null === b))
                      try {
                        a.componentDidMount();
                      } catch (a) {
                        dQ(c, c.return, a);
                      }
                    else {
                      var e = b4(c.type, b.memoizedProps);
                      b = b.memoizedState;
                      try {
                        a.componentDidUpdate(
                          e,
                          b,
                          a.__reactInternalSnapshotBeforeUpdate
                        );
                      } catch (a) {
                        dQ(c, c.return, a);
                      }
                    }
                  (64 & d && cO(c), 512 & d && cQ(c, c.return));
                  break;
                case 3:
                  if ((c6(a, c), 64 & d && null !== (d = c.updateQueue))) {
                    if (((a = null), null !== c.child))
                      switch (c.child.tag) {
                        case 27:
                        case 5:
                          a = ez(c.child.stateNode);
                          break;
                        case 1:
                          a = c.child.stateNode;
                      }
                    try {
                      aP(d, a);
                    } catch (a) {
                      dQ(c, c.return, a);
                    }
                  }
                  break;
                case 27:
                  gp && null === b && 4 & d && cY(c);
                case 26:
                case 5:
                  if ((c6(a, c), null === b)) {
                    if (4 & d) cS(c);
                    else if (64 & d) {
                      ((a = c.type), (b = c.memoizedProps), (e = c.stateNode));
                      try {
                        fY(e, a, b, c);
                      } catch (a) {
                        dQ(c, c.return, a);
                      }
                    }
                  }
                  512 & d && cQ(c, c.return);
                  break;
                case 12:
                default:
                  c6(a, c);
                  break;
                case 31:
                  (c6(a, c), 4 & d && c0(a, c));
                  break;
                case 13:
                  (c6(a, c),
                    4 & d && c1(a, c),
                    64 & d &&
                      null !== (d = c.memoizedState) &&
                      null !== (d = d.dehydrated) &&
                      fE(d, (c = dU.bind(null, c))));
                  break;
                case 22:
                  if (!(d = null !== c.memoizedState || h6)) {
                    ((b = (null !== b && null !== b.memoizedState) || h7),
                      (e = h6));
                    var f = h7;
                    ((h6 = d),
                      (h7 = b) && !f
                        ? (function a(b, c, d) {
                            for (
                              d = d && (8772 & c.subtreeFlags) != 0,
                                c = c.child;
                              null !== c;
                            ) {
                              var e = c.alternate,
                                f = b,
                                g = c,
                                h = g.flags;
                              switch (g.tag) {
                                case 0:
                                case 11:
                                case 15:
                                  (a(f, g, d), cM(4, g));
                                  break;
                                case 1:
                                  if (
                                    (a(f, g, d),
                                    'function' ==
                                      typeof (f = (e = g).stateNode)
                                        .componentDidMount)
                                  )
                                    try {
                                      f.componentDidMount();
                                    } catch (a) {
                                      dQ(e, e.return, a);
                                    }
                                  if (null !== (f = (e = g).updateQueue)) {
                                    var i = e.stateNode;
                                    try {
                                      var j = f.shared.hiddenCallbacks;
                                      if (null !== j)
                                        for (
                                          f.shared.hiddenCallbacks = null,
                                            f = 0;
                                          f < j.length;
                                          f++
                                        )
                                          aO(j[f], i);
                                    } catch (a) {
                                      dQ(e, e.return, a);
                                    }
                                  }
                                  (d && 64 & h && cO(g), cQ(g, g.return));
                                  break;
                                case 27:
                                  gp && cY(g);
                                case 26:
                                case 5:
                                  (a(f, g, d),
                                    d && null === e && 4 & h && cS(g),
                                    cQ(g, g.return));
                                  break;
                                case 12:
                                default:
                                  a(f, g, d);
                                  break;
                                case 31:
                                  (a(f, g, d), d && 4 & h && c0(f, g));
                                  break;
                                case 13:
                                  (a(f, g, d), d && 4 & h && c1(f, g));
                                  break;
                                case 22:
                                  (null === g.memoizedState && a(f, g, d),
                                    cQ(g, g.return));
                                case 30:
                              }
                              c = c.sibling;
                            }
                          })(a, c, (8772 & c.subtreeFlags) != 0)
                        : c6(a, c),
                      (h6 = e),
                      (h7 = f));
                  }
                case 30:
              }
            }
            function c$(a, b, c) {
              for (c = c.child; null !== c; ) (c_(a, b, c), (c = c.sibling));
            }
            function c_(a, b, c) {
              if (gQ && 'function' == typeof gQ.onCommitFiberUnmount)
                try {
                  gQ.onCommitFiberUnmount(gP, c);
                } catch {}
              switch (c.tag) {
                case 26:
                  if (gb) {
                    (h7 || cR(c, b),
                      c$(a, b, c),
                      c.memoizedState
                        ? gg(c.memoizedState)
                        : c.stateNode && gj(c.stateNode));
                    break;
                  }
                case 27:
                  if (gp) {
                    h7 || cR(c, b);
                    var d = ib,
                      e = ic;
                    (gu(c.type) && ((ib = c.stateNode), (ic = !1)),
                      c$(a, b, c),
                      gs(c.stateNode),
                      (ib = d),
                      (ic = e));
                    break;
                  }
                case 5:
                  h7 || cR(c, b);
                case 6:
                  if (eN) {
                    if (
                      ((d = ib),
                      (e = ic),
                      (ib = null),
                      c$(a, b, c),
                      (ib = d),
                      (ic = e),
                      null !== ib)
                    )
                      if (ic)
                        try {
                          fn(ib, c.stateNode);
                        } catch (a) {
                          dQ(c, b, a);
                        }
                      else
                        try {
                          fm(ib, c.stateNode);
                        } catch (a) {
                          dQ(c, b, a);
                        }
                  } else c$(a, b, c);
                  break;
                case 18:
                  eN &&
                    null !== ib &&
                    (ic ? f3(ib, c.stateNode) : f2(ib, c.stateNode));
                  break;
                case 4:
                  eN
                    ? ((d = ib),
                      (e = ic),
                      (ib = c.stateNode.containerInfo),
                      (ic = !0),
                      c$(a, b, c),
                      (ib = d),
                      (ic = e))
                    : (eO && cX(c.stateNode, c, fv()), c$(a, b, c));
                  break;
                case 0:
                case 11:
                case 14:
                case 15:
                  (cN(2, c, b), h7 || cN(4, c, b), c$(a, b, c));
                  break;
                case 1:
                  (h7 ||
                    (cR(c, b),
                    'function' ==
                      typeof (d = c.stateNode).componentWillUnmount &&
                      cP(c, b, d)),
                    c$(a, b, c));
                  break;
                case 21:
                default:
                  c$(a, b, c);
                  break;
                case 22:
                  ((h7 = (d = h7) || null !== c.memoizedState),
                    c$(a, b, c),
                    (h7 = d));
              }
            }
            function c0(a, b) {
              if (
                eP &&
                null === b.memoizedState &&
                null !== (a = b.alternate) &&
                null !== (a = a.memoizedState)
              ) {
                a = a.dehydrated;
                try {
                  f$(a);
                } catch (a) {
                  dQ(b, b.return, a);
                }
              }
            }
            function c1(a, b) {
              if (
                eP &&
                null === b.memoizedState &&
                null !== (a = b.alternate) &&
                null !== (a = a.memoizedState) &&
                null !== (a = a.dehydrated)
              )
                try {
                  f_(a);
                } catch (a) {
                  dQ(b, b.return, a);
                }
            }
            function c2(a, b) {
              var c = (function (a) {
                switch (a.tag) {
                  case 31:
                  case 13:
                  case 19:
                    var b = a.stateNode;
                    return (null === b && (b = a.stateNode = new h9()), b);
                  case 22:
                    return (
                      null === (b = (a = a.stateNode)._retryCache) &&
                        (b = a._retryCache = new h9()),
                      b
                    );
                  default:
                    throw Error(d(435, a.tag));
                }
              })(a);
              b.forEach(function (b) {
                if (!c.has(b)) {
                  c.add(b);
                  var d = dV.bind(null, a, b);
                  b.then(d, d);
                }
              });
            }
            function c3(a, b) {
              var c = b.deletions;
              if (null !== c)
                for (var e = 0; e < c.length; e++) {
                  var f = c[e],
                    g = a,
                    h = b;
                  if (eN) {
                    var i = h;
                    h: for (; null !== i; ) {
                      switch (i.tag) {
                        case 27:
                          if (gp) {
                            if (gu(i.type)) {
                              ((ib = i.stateNode), (ic = !1));
                              break h;
                            }
                            break;
                          }
                        case 5:
                          ((ib = i.stateNode), (ic = !1));
                          break h;
                        case 3:
                        case 4:
                          ((ib = i.stateNode.containerInfo), (ic = !0));
                          break h;
                      }
                      i = i.return;
                    }
                    if (null === ib) throw Error(d(160));
                    (c_(g, h, f), (ib = null), (ic = !1));
                  } else c_(g, h, f);
                  (null !== (g = f.alternate) && (g.return = null),
                    (f.return = null));
                }
              if (13886 & b.subtreeFlags)
                for (b = b.child; null !== b; ) (c4(b, a), (b = b.sibling));
            }
            function c4(a, b) {
              var c = a.alternate,
                e = a.flags;
              switch (a.tag) {
                case 0:
                case 11:
                case 14:
                case 15:
                  (c3(b, a),
                    c5(a),
                    4 & e &&
                      (cN(3, a, a.return), cM(3, a), cN(5, a, a.return)));
                  break;
                case 1:
                  (c3(b, a),
                    c5(a),
                    512 & e && (h7 || null === c || cR(c, c.return)),
                    64 & e &&
                      h6 &&
                      null !== (a = a.updateQueue) &&
                      null !== (e = a.callbacks) &&
                      ((c = a.shared.hiddenCallbacks),
                      (a.shared.hiddenCallbacks =
                        null === c ? e : c.concat(e))));
                  break;
                case 26:
                  if (gb) {
                    var f = id;
                    if (
                      (c3(b, a),
                      c5(a),
                      512 & e && (h7 || null === c || cR(c, c.return)),
                      4 & e)
                    ) {
                      e = null !== c ? c.memoizedState : null;
                      var g = a.memoizedState;
                      null === c
                        ? null === g
                          ? null === a.stateNode
                            ? (a.stateNode = gh(f, a.type, a.memoizedProps, a))
                            : gi(f, a.type, a.stateNode)
                          : (a.stateNode = gf(f, g, a.memoizedProps))
                        : e !== g
                          ? (null === e
                              ? null !== c.stateNode && gj(c.stateNode)
                              : gg(e),
                            null === g
                              ? gi(f, a.type, a.stateNode)
                              : gf(f, g, a.memoizedProps))
                          : null === g &&
                            null !== a.stateNode &&
                            cT(a, a.memoizedProps, c.memoizedProps);
                    }
                    break;
                  }
                case 27:
                  if (gp) {
                    (c3(b, a),
                      c5(a),
                      512 & e && (h7 || null === c || cR(c, c.return)),
                      null !== c &&
                        4 & e &&
                        cT(a, a.memoizedProps, c.memoizedProps));
                    break;
                  }
                case 5:
                  if (
                    (c3(b, a),
                    c5(a),
                    512 & e && (h7 || null === c || cR(c, c.return)),
                    eN)
                  ) {
                    if (32 & a.flags) {
                      f = a.stateNode;
                      try {
                        fo(f);
                      } catch (b) {
                        dQ(a, a.return, b);
                      }
                    }
                    (4 & e &&
                      null != a.stateNode &&
                      ((f = a.memoizedProps),
                      cT(a, f, null !== c ? c.memoizedProps : f)),
                      1024 & e && (h8 = !0));
                  } else
                    eO &&
                      null !== a.alternate &&
                      (a.alternate.stateNode = a.stateNode);
                  break;
                case 6:
                  if ((c3(b, a), c5(a), 4 & e && eN)) {
                    if (null === a.stateNode) throw Error(d(162));
                    ((e = a.memoizedProps),
                      (c = null !== c ? c.memoizedProps : e),
                      (f = a.stateNode));
                    try {
                      fh(f, c, e);
                    } catch (b) {
                      dQ(a, a.return, b);
                    }
                  }
                  break;
                case 3:
                  if (
                    (gb
                      ? (gl(),
                        (f = id),
                        (id = gd(b.containerInfo)),
                        c3(b, a),
                        (id = f))
                      : c3(b, a),
                    c5(a),
                    4 & e)
                  ) {
                    if (eN && eP && null !== c && c.memoizedState.isDehydrated)
                      try {
                        fZ(b.containerInfo);
                      } catch (b) {
                        dQ(a, a.return, b);
                      }
                    if (eO) {
                      ((e = b.containerInfo), (c = b.pendingChildren));
                      try {
                        fy(e, c);
                      } catch (b) {
                        dQ(a, a.return, b);
                      }
                    }
                  }
                  h8 &&
                    ((h8 = !1),
                    (function a(b) {
                      if (1024 & b.subtreeFlags)
                        for (b = b.child; null !== b; ) {
                          var c = b;
                          (a(c),
                            5 === c.tag && 1024 & c.flags && e4(c.stateNode),
                            (b = b.sibling));
                        }
                    })(a));
                  break;
                case 4:
                  (gb
                    ? ((c = id),
                      (id = gd(a.stateNode.containerInfo)),
                      c3(b, a),
                      c5(a),
                      (id = c))
                    : (c3(b, a), c5(a)),
                    4 & e &&
                      eO &&
                      cX(a.stateNode, a, a.stateNode.pendingChildren));
                  break;
                case 12:
                default:
                  (c3(b, a), c5(a));
                  break;
                case 31:
                case 19:
                  (c3(b, a),
                    c5(a),
                    4 & e &&
                      null !== (e = a.updateQueue) &&
                      ((a.updateQueue = null), c2(a, e)));
                  break;
                case 13:
                  (c3(b, a),
                    c5(a),
                    8192 & a.child.flags &&
                      (null !== a.memoizedState) !=
                        (null !== c && null !== c.memoizedState) &&
                      (iI = gI()),
                    4 & e &&
                      null !== (e = a.updateQueue) &&
                      ((a.updateQueue = null), c2(a, e)));
                  break;
                case 22:
                  f = null !== a.memoizedState;
                  var h = null !== c && null !== c.memoizedState,
                    i = h6,
                    j = h7;
                  if (
                    ((h6 = i || f),
                    (h7 = j || h),
                    c3(b, a),
                    (h7 = j),
                    (h6 = i),
                    c5(a),
                    8192 & e &&
                      (((b = a.stateNode)._visibility = f
                        ? -2 & b._visibility
                        : 1 | b._visibility),
                      f &&
                        (null === c ||
                          h ||
                          h6 ||
                          h7 ||
                          (function a(b) {
                            for (b = b.child; null !== b; ) {
                              var c = b;
                              switch (c.tag) {
                                case 0:
                                case 11:
                                case 14:
                                case 15:
                                  (cN(4, c, c.return), a(c));
                                  break;
                                case 1:
                                  cR(c, c.return);
                                  var d = c.stateNode;
                                  ('function' ==
                                    typeof d.componentWillUnmount &&
                                    cP(c, c.return, d),
                                    a(c));
                                  break;
                                case 27:
                                  gp && gs(c.stateNode);
                                case 26:
                                case 5:
                                  (cR(c, c.return), a(c));
                                  break;
                                case 22:
                                  null === c.memoizedState && a(c);
                                  break;
                                default:
                                  a(c);
                              }
                              b = b.sibling;
                            }
                          })(a)),
                      eN))
                  ) {
                    h: if (((c = null), eN))
                      for (b = a; ; ) {
                        if (5 === b.tag || (gb && 26 === b.tag)) {
                          if (null === c) {
                            h = c = b;
                            try {
                              ((g = h.stateNode),
                                f ? fp(g) : fr(h.stateNode, h.memoizedProps));
                            } catch (a) {
                              dQ(h, h.return, a);
                            }
                          }
                        } else if (6 === b.tag) {
                          if (null === c) {
                            h = b;
                            try {
                              var k = h.stateNode;
                              f ? fq(k) : fs(k, h.memoizedProps);
                            } catch (a) {
                              dQ(h, h.return, a);
                            }
                          }
                        } else if (18 === b.tag) {
                          if (null === c) {
                            h = b;
                            try {
                              var l = h.stateNode;
                              f ? f4(l) : f5(h.stateNode);
                            } catch (a) {
                              dQ(h, h.return, a);
                            }
                          }
                        } else if (
                          ((22 !== b.tag && 23 !== b.tag) ||
                            null === b.memoizedState ||
                            b === a) &&
                          null !== b.child
                        ) {
                          ((b.child.return = b), (b = b.child));
                          continue;
                        }
                        if (b === a) break h;
                        for (; null === b.sibling; ) {
                          if (null === b.return || b.return === a) break h;
                          (c === b && (c = null), (b = b.return));
                        }
                        (c === b && (c = null),
                          (b.sibling.return = b.return),
                          (b = b.sibling));
                      }
                  }
                  4 & e &&
                    null !== (e = a.updateQueue) &&
                    null !== (c = e.retryQueue) &&
                    ((e.retryQueue = null), c2(a, c));
                case 30:
                case 21:
              }
            }
            function c5(a) {
              var b = a.flags;
              if (2 & b) {
                try {
                  for (var c, e = a.return; null !== e; ) {
                    if (cU(e)) {
                      c = e;
                      break;
                    }
                    e = e.return;
                  }
                  if (eN) {
                    if (null == c) throw Error(d(160));
                    switch (c.tag) {
                      case 27:
                        if (gp) {
                          var f = c.stateNode,
                            g = cV(a);
                          cW(a, g, f);
                          break;
                        }
                      case 5:
                        var h = c.stateNode;
                        32 & c.flags && (fo(h), (c.flags &= -33));
                        var i = cV(a);
                        cW(a, i, h);
                        break;
                      case 3:
                      case 4:
                        var j = c.stateNode.containerInfo,
                          k = cV(a);
                        !(function a(b, c, d) {
                          var e = b.tag;
                          if (5 === e || 6 === e)
                            ((b = b.stateNode), c ? fl(d, b, c) : fg(d, b));
                          else if (
                            4 !== e &&
                            (gp &&
                              27 === e &&
                              gu(b.type) &&
                              ((d = b.stateNode), (c = null)),
                            null !== (b = b.child))
                          )
                            for (a(b, c, d), b = b.sibling; null !== b; )
                              (a(b, c, d), (b = b.sibling));
                        })(a, k, j);
                        break;
                      default:
                        throw Error(d(161));
                    }
                  }
                } catch (b) {
                  dQ(a, a.return, b);
                }
                a.flags &= -3;
              }
              4096 & b && (a.flags &= -4097);
            }
            function c6(a, b) {
              if (8772 & b.subtreeFlags)
                for (b = b.child; null !== b; )
                  (cZ(a, b.alternate, b), (b = b.sibling));
            }
            function c7(a, b) {
              var c = null;
              (null !== a &&
                null !== a.memoizedState &&
                null !== a.memoizedState.cachePool &&
                (c = a.memoizedState.cachePool.pool),
                (a = null),
                null !== b.memoizedState &&
                  null !== b.memoizedState.cachePool &&
                  (a = b.memoizedState.cachePool.pool),
                a !== c && (null != a && a.refCount++, null != c && ac(c)));
            }
            function c8(a, b) {
              ((a = null),
                null !== b.alternate && (a = b.alternate.memoizedState.cache),
                (b = b.memoizedState.cache) !== a &&
                  (b.refCount++, null != a && ac(a)));
            }
            function c9(a, b, c, d) {
              if (10256 & b.subtreeFlags)
                for (b = b.child; null !== b; )
                  (da(a, b, c, d), (b = b.sibling));
            }
            function da(a, b, c, d) {
              var e = b.flags;
              switch (b.tag) {
                case 0:
                case 11:
                case 15:
                  (c9(a, b, c, d), 2048 & e && cM(9, b));
                  break;
                case 1:
                case 31:
                case 13:
                default:
                  c9(a, b, c, d);
                  break;
                case 3:
                  (c9(a, b, c, d),
                    2048 & e &&
                      ((a = null),
                      null !== b.alternate &&
                        (a = b.alternate.memoizedState.cache),
                      (b = b.memoizedState.cache) !== a &&
                        (b.refCount++, null != a && ac(a))));
                  break;
                case 12:
                  if (2048 & e) {
                    (c9(a, b, c, d), (a = b.stateNode));
                    try {
                      var f = b.memoizedProps,
                        g = f.id,
                        h = f.onPostCommit;
                      'function' == typeof h &&
                        h(
                          g,
                          null === b.alternate ? 'mount' : 'update',
                          a.passiveEffectDuration,
                          -0
                        );
                    } catch (a) {
                      dQ(b, b.return, a);
                    }
                  } else c9(a, b, c, d);
                  break;
                case 23:
                  break;
                case 22:
                  ((f = b.stateNode),
                    (g = b.alternate),
                    null !== b.memoizedState
                      ? 2 & f._visibility
                        ? c9(a, b, c, d)
                        : db(a, b)
                      : 2 & f._visibility
                        ? c9(a, b, c, d)
                        : ((f._visibility |= 2),
                          (function a(b, c, d, e, f) {
                            for (
                              f = f && (10256 & c.subtreeFlags) != 0,
                                c = c.child;
                              null !== c;
                            ) {
                              var g = c,
                                h = g.flags;
                              switch (g.tag) {
                                case 0:
                                case 11:
                                case 15:
                                  (a(b, g, d, e, f), cM(8, g));
                                  break;
                                case 23:
                                  break;
                                case 22:
                                  var i = g.stateNode;
                                  (null !== g.memoizedState
                                    ? 2 & i._visibility
                                      ? a(b, g, d, e, f)
                                      : db(b, g)
                                    : ((i._visibility |= 2), a(b, g, d, e, f)),
                                    f && 2048 & h && c7(g.alternate, g));
                                  break;
                                case 24:
                                  (a(b, g, d, e, f),
                                    f && 2048 & h && c8(g.alternate, g));
                                  break;
                                default:
                                  a(b, g, d, e, f);
                              }
                              c = c.sibling;
                            }
                          })(a, b, c, d, (10256 & b.subtreeFlags) != 0)),
                    2048 & e && c7(g, b));
                  break;
                case 24:
                  (c9(a, b, c, d), 2048 & e && c8(b.alternate, b));
              }
            }
            function db(a, b) {
              if (10256 & b.subtreeFlags)
                for (b = b.child; null !== b; ) {
                  var c = b,
                    d = c.flags;
                  switch (c.tag) {
                    case 22:
                      (db(a, c), 2048 & d && c7(c.alternate, c));
                      break;
                    case 24:
                      (db(a, c), 2048 & d && c8(c.alternate, c));
                      break;
                    default:
                      db(a, c);
                  }
                  b = b.sibling;
                }
            }
            function dc(a, b, c) {
              if (a.subtreeFlags & ie)
                for (a = a.child; null !== a; ) (dd(a, b, c), (a = a.sibling));
            }
            function dd(a, b, c) {
              switch (a.tag) {
                case 26:
                  if ((dc(a, b, c), a.flags & ie))
                    if (null !== a.memoizedState)
                      go(c, id, a.memoizedState, a.memoizedProps);
                    else {
                      var d = a.stateNode,
                        e = a.type;
                      ((a = a.memoizedProps),
                        ((0x13ffff40 & b) === b || eZ(e, a)) && e0(c, d, e, a));
                    }
                  break;
                case 5:
                  (dc(a, b, c),
                    a.flags & ie &&
                      ((d = a.stateNode),
                      (e = a.type),
                      (a = a.memoizedProps),
                      ((0x13ffff40 & b) === b || eZ(e, a)) && e0(c, d, e, a)));
                  break;
                case 3:
                case 4:
                  gb
                    ? ((d = id),
                      (id = gd(a.stateNode.containerInfo)),
                      dc(a, b, c),
                      (id = d))
                    : dc(a, b, c);
                  break;
                case 22:
                  null === a.memoizedState &&
                    (null !== (d = a.alternate) && null !== d.memoizedState
                      ? ((d = ie), (ie = 0x1000000), dc(a, b, c), (ie = d))
                      : dc(a, b, c));
                  break;
                default:
                  dc(a, b, c);
              }
            }
            function de(a) {
              var b = a.alternate;
              if (null !== b && null !== (a = b.child)) {
                b.child = null;
                do ((b = a.sibling), (a.sibling = null), (a = b));
                while (null !== a);
              }
            }
            function df(a) {
              var b = a.deletions;
              if ((16 & a.flags) != 0) {
                if (null !== b)
                  for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    ((ia = d), dh(d, a));
                  }
                de(a);
              }
              if (10256 & a.subtreeFlags)
                for (a = a.child; null !== a; ) (dg(a), (a = a.sibling));
            }
            function dg(a) {
              switch (a.tag) {
                case 0:
                case 11:
                case 15:
                  (df(a), 2048 & a.flags && cN(9, a, a.return));
                  break;
                case 3:
                case 12:
                default:
                  df(a);
                  break;
                case 22:
                  var b = a.stateNode;
                  null !== a.memoizedState &&
                  2 & b._visibility &&
                  (null === a.return || 13 !== a.return.tag)
                    ? ((b._visibility &= -3),
                      (function a(b) {
                        var c = b.deletions;
                        if ((16 & b.flags) != 0) {
                          if (null !== c)
                            for (var d = 0; d < c.length; d++) {
                              var e = c[d];
                              ((ia = e), dh(e, b));
                            }
                          de(b);
                        }
                        for (b = b.child; null !== b; ) {
                          switch ((c = b).tag) {
                            case 0:
                            case 11:
                            case 15:
                              (cN(8, c, c.return), a(c));
                              break;
                            case 22:
                              2 & (d = c.stateNode)._visibility &&
                                ((d._visibility &= -3), a(c));
                              break;
                            default:
                              a(c);
                          }
                          b = b.sibling;
                        }
                      })(a))
                    : df(a);
              }
            }
            function dh(a, b) {
              for (; null !== ia; ) {
                var c = ia;
                switch (c.tag) {
                  case 0:
                  case 11:
                  case 15:
                    cN(8, c, b);
                    break;
                  case 23:
                  case 22:
                    if (
                      null !== c.memoizedState &&
                      null !== c.memoizedState.cachePool
                    ) {
                      var d = c.memoizedState.cachePool.pool;
                      null != d && d.refCount++;
                    }
                    break;
                  case 24:
                    ac(c.memoizedState.cache);
                }
                if (null !== (d = c.child)) ((d.return = c), (ia = d));
                else
                  for (c = a; null !== ia; ) {
                    var e = (d = ia).sibling,
                      f = d.return;
                    if (
                      ((function a(b) {
                        var c = b.alternate;
                        (null !== c && ((b.alternate = null), a(c)),
                          (b.child = null),
                          (b.deletions = null),
                          (b.sibling = null),
                          5 === b.tag && null !== (c = b.stateNode) && eW(c),
                          (b.stateNode = null),
                          (b.return = null),
                          (b.dependencies = null),
                          (b.memoizedProps = null),
                          (b.memoizedState = null),
                          (b.pendingProps = null),
                          (b.stateNode = null),
                          (b.updateQueue = null));
                      })(d),
                      d === c)
                    ) {
                      ia = null;
                      break;
                    }
                    if (null !== e) {
                      ((e.return = f), (ia = e));
                      break;
                    }
                    ia = f;
                  }
              }
            }
            function di(a) {
              var b = eQ(a);
              if (null != b) {
                if ('string' != typeof b.memoizedProps['data-testname'])
                  throw Error(d(364));
                return b;
              }
              if (null === (a = e8(a))) throw Error(d(362));
              return a.stateNode.current;
            }
            function dj(a, b) {
              var c = a.tag;
              switch (b.$$typeof) {
                case ih:
                  if (a.type === b.value) return !0;
                  break;
                case ii:
                  h: {
                    for (b = b.value, a = [a, 0], c = 0; c < a.length; ) {
                      var e = a[c++],
                        f = e.tag,
                        g = a[c++],
                        h = b[g];
                      if ((5 !== f && 26 !== f && 27 !== f) || !fb(e)) {
                        for (; null != h && dj(e, h); ) h = b[++g];
                        if (g === b.length) {
                          b = !0;
                          break h;
                        }
                        for (e = e.child; null !== e; )
                          (a.push(e, g), (e = e.sibling));
                      }
                    }
                    b = !1;
                  }
                  return b;
                case ij:
                  if (
                    (5 === c || 26 === c || 27 === c) &&
                    fc(a.stateNode, b.value)
                  )
                    return !0;
                  break;
                case il:
                  if (
                    (5 === c || 6 === c || 26 === c || 27 === c) &&
                    null !== (a = fa(a)) &&
                    0 <= a.indexOf(b.value)
                  )
                    return !0;
                  break;
                case ik:
                  if (
                    (5 === c || 26 === c || 27 === c) &&
                    'string' == typeof (a = a.memoizedProps['data-testname']) &&
                    a.toLowerCase() === b.value.toLowerCase()
                  )
                    return !0;
                  break;
                default:
                  throw Error(d(365));
              }
              return !1;
            }
            function dk(a) {
              switch (a.$$typeof) {
                case ih:
                  return '<' + (i(a.value) || 'Unknown') + '>';
                case ii:
                  return ':has(' + (dk(a) || '') + ')';
                case ij:
                  return '[role="' + a.value + '"]';
                case il:
                  return '"' + a.value + '"';
                case ik:
                  return '[data-testname="' + a.value + '"]';
                default:
                  throw Error(d(365));
              }
            }
            function dl(a, b) {
              var c = [];
              a = [a, 0];
              for (var d = 0; d < a.length; ) {
                var e = a[d++],
                  f = e.tag,
                  g = a[d++],
                  h = b[g];
                if ((5 !== f && 26 !== f && 27 !== f) || !fb(e)) {
                  for (; null != h && dj(e, h); ) h = b[++g];
                  if (g === b.length) c.push(e);
                  else
                    for (e = e.child; null !== e; )
                      (a.push(e, g), (e = e.sibling));
                }
              }
              return c;
            }
            function dm(a, b) {
              if (!e7) throw Error(d(363));
              ((a = dl((a = di(a)), b)), (b = []), (a = Array.from(a)));
              for (var c = 0; c < a.length; ) {
                var e = a[c++],
                  f = e.tag;
                if (5 === f || 26 === f || 27 === f)
                  fb(e) || b.push(e.stateNode);
                else
                  for (e = e.child; null !== e; ) (a.push(e), (e = e.sibling));
              }
              return b;
            }
            function dn() {
              return (2 & ip) != 0 && 0 !== is
                ? is & -is
                : null !== ev.T
                  ? al()
                  : eU();
            }
            function dp() {
              if (0 === iD)
                if ((0x20000000 & is) == 0 || g9) {
                  var a = gC;
                  ((3932160 & (gC <<= 1)) == 0 && (gC = 262144), (iD = a));
                } else iD = 0x20000000;
              return (null !== (a = hM.current) && (a.flags |= 32), iD);
            }
            function dq(a, b, c) {
              (((a === iq && (2 === it || 9 === it)) ||
                null !== a.cancelPendingCommit) &&
                (dw(a, 0), dt(a, is, iD, !1)),
                r(a, c),
                ((2 & ip) == 0 || a !== iq) &&
                  (a === iq &&
                    ((2 & ip) == 0 && (iB |= c), 4 === iz && dt(a, is, iD, !1)),
                  ae(a)));
            }
            function dr(a, b, c) {
              if ((6 & ip) != 0) throw Error(d(327));
              for (
                var e =
                    (!c && (127 & b) == 0 && (b & a.expiredLanes) == 0) ||
                    o(a, b),
                  f = e
                    ? (function (a, b) {
                        var c = ip;
                        ip |= 2;
                        var e = dz(),
                          f = dA();
                        iq !== a || is !== b
                          ? ((iL = null), (iK = gI() + 500), dw(a, b))
                          : (iw = o(a, b));
                        h: for (;;)
                          try {
                            if (0 !== it && null !== ir) {
                              b = ir;
                              var g = iu;
                              i: switch (it) {
                                case 1:
                                  ((it = 0), (iu = null), dF(a, b, g, 1));
                                  break;
                                case 2:
                                case 9:
                                  if (ar(g)) {
                                    ((it = 0), (iu = null), dE(b));
                                    break;
                                  }
                                  ((b = function () {
                                    ((2 !== it && 9 !== it) ||
                                      iq !== a ||
                                      (it = 7),
                                      ae(a));
                                  }),
                                    g.then(b, b));
                                  break h;
                                case 3:
                                  it = 7;
                                  break h;
                                case 4:
                                  it = 5;
                                  break h;
                                case 7:
                                  ar(g)
                                    ? ((it = 0), (iu = null), dE(b))
                                    : ((it = 0), (iu = null), dF(a, b, g, 7));
                                  break;
                                case 5:
                                  var h = null;
                                  switch (ir.tag) {
                                    case 26:
                                      h = ir.memoizedState;
                                    case 5:
                                    case 27:
                                      var i = ir,
                                        j = i.type,
                                        k = i.pendingProps;
                                      if (h ? gn(h) : e$(i.stateNode, j, k)) {
                                        ((it = 0), (iu = null));
                                        var l = i.sibling;
                                        if (null !== l) ir = l;
                                        else {
                                          var m = i.return;
                                          null !== m
                                            ? ((ir = m), dG(m))
                                            : (ir = null);
                                        }
                                        break i;
                                      }
                                  }
                                  ((it = 0), (iu = null), dF(a, b, g, 5));
                                  break;
                                case 6:
                                  ((it = 0), (iu = null), dF(a, b, g, 6));
                                  break;
                                case 8:
                                  (dv(), (iz = 6));
                                  break h;
                                default:
                                  throw Error(d(462));
                              }
                            }
                            for (; null !== ir && !gG(); ) dD(ir);
                            break;
                          } catch (b) {
                            dx(a, b);
                          }
                        return (
                          (hf = he = null),
                          (ev.H = e),
                          (ev.A = f),
                          (ip = c),
                          null !== ir ? 0 : ((iq = null), (is = 0), aA(), iz)
                        );
                      })(a, b)
                    : dC(a, b, !0),
                  g = e;
                ;
              ) {
                if (0 === f) iw && !e && dt(a, b, 0, !1);
                else {
                  if (
                    ((c = a.current.alternate),
                    g &&
                      !(function (a) {
                        for (var b = a; ; ) {
                          var c = b.tag;
                          if (
                            (0 === c || 11 === c || 15 === c) &&
                            16384 & b.flags &&
                            null !== (c = b.updateQueue) &&
                            null !== (c = c.stores)
                          )
                            for (var d = 0; d < c.length; d++) {
                              var e = c[d],
                                f = e.getSnapshot;
                              e = e.value;
                              try {
                                if (!gR(f(), e)) return !1;
                              } catch {
                                return !1;
                              }
                            }
                          if (
                            ((c = b.child),
                            16384 & b.subtreeFlags && null !== c)
                          )
                            ((c.return = b), (b = c));
                          else {
                            if (b === a) break;
                            for (; null === b.sibling; ) {
                              if (null === b.return || b.return === a)
                                return !0;
                              b = b.return;
                            }
                            ((b.sibling.return = b.return), (b = b.sibling));
                          }
                        }
                        return !0;
                      })(c))
                  ) {
                    ((f = dC(a, b, !1)), (g = !1));
                    continue;
                  }
                  if (2 === f) {
                    if (((g = b), a.errorRecoveryDisabledLanes & g)) var h = 0;
                    else
                      h =
                        0 != (h = -0x20000001 & a.pendingLanes)
                          ? h
                          : 0x20000000 & h
                            ? 0x20000000
                            : 0;
                    if (0 !== h) {
                      b = h;
                      h: {
                        f = iF;
                        var i = eP && a.current.memoizedState.isDehydrated;
                        if (
                          (i && (dw(a, h).flags |= 256),
                          2 !== (h = dC(a, h, !1)))
                        ) {
                          if (ix && !i) {
                            ((a.errorRecoveryDisabledLanes |= g),
                              (iB |= g),
                              (f = 4));
                            break h;
                          }
                          ((g = iG),
                            (iG = f),
                            null !== g &&
                              (null === iG ? (iG = g) : iG.push.apply(iG, g)));
                        }
                        f = h;
                      }
                      if (((g = !1), 2 !== f)) continue;
                    }
                  }
                  if (1 === f) {
                    (dw(a, 0), dt(a, b, 0, !0));
                    break;
                  }
                  h: {
                    switch (((e = a), (g = f))) {
                      case 0:
                      case 1:
                        throw Error(d(345));
                      case 4:
                        if ((4194048 & b) !== b) break;
                      case 6:
                        dt(e, b, iD, !iv);
                        break h;
                      case 2:
                        iG = null;
                        break;
                      case 3:
                      case 5:
                        break;
                      default:
                        throw Error(d(329));
                    }
                    if ((0x3c00000 & b) === b && 10 < (f = iI + 300 - gI())) {
                      if ((dt(e, b, iD, !iv), 0 !== n(e, 0, !0))) break h;
                      ((iQ = b),
                        (e.timeoutHandle = eJ(
                          ds.bind(
                            null,
                            e,
                            c,
                            iG,
                            iL,
                            iH,
                            b,
                            iD,
                            iB,
                            iE,
                            iv,
                            g,
                            'Throttled',
                            -0,
                            0
                          ),
                          f
                        )));
                      break h;
                    }
                    ds(e, c, iG, iL, iH, b, iD, iB, iE, iv, g, null, -0, 0);
                  }
                }
                break;
              }
              ae(a);
            }
            function ds(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
              if (
                ((a.timeoutHandle = eL),
                8192 & (l = b.subtreeFlags) || (0x1002000 & l) == 0x1002000)
              ) {
                dd(b, f, (l = e_()));
                var o =
                  (0x3c00000 & f) === f
                    ? iI - gI()
                    : (4194048 & f) === f
                      ? iJ - gI()
                      : 0;
                if (null !== (o = e1(l, o))) {
                  ((iQ = f),
                    (a.cancelPendingCommit = o(
                      dI.bind(null, a, b, f, c, d, e, g, h, i, k, l, null, m, n)
                    )),
                    dt(a, f, g, !j));
                  return;
                }
              }
              dI(a, b, f, c, d, e, g, h, i);
            }
            function dt(a, b, c, d) {
              ((b &= ~iC),
                (b &= ~iB),
                (a.suspendedLanes |= b),
                (a.pingedLanes &= ~b),
                d && (a.warmLanes |= b),
                (d = a.expirationTimes));
              for (var e = b; 0 < e; ) {
                var f = 31 - gy(e),
                  g = 1 << f;
                ((d[f] = -1), (e &= ~g));
              }
              0 !== c && s(a, c, b);
            }
            function du() {
              return (6 & ip) != 0 || (af(0, !1), !1);
            }
            function dv() {
              if (null !== ir) {
                if (0 === it) var a = ir.return;
                else
                  ((a = ir),
                    (hf = he = null),
                    a5(a),
                    (hB = null),
                    (hC = 0),
                    (a = ir));
                for (; null !== a; ) (cL(a.alternate, a), (a = a.return));
                ir = null;
              }
            }
            function dw(a, b) {
              var c = a.timeoutHandle;
              (c !== eL && ((a.timeoutHandle = eL), eK(c)),
                null !== (c = a.cancelPendingCommit) &&
                  ((a.cancelPendingCommit = null), c()),
                (iQ = 0),
                dv(),
                (iq = a),
                (ir = c = dY(a.current, null)),
                (is = b),
                (it = 0),
                (iu = null),
                (iv = !1),
                (iw = o(a, b)),
                (ix = !1),
                (iE = iD = iC = iB = iA = iz = 0),
                (iG = iF = null),
                (iH = !1),
                (8 & b) != 0 && (b |= 32 & b));
              var d = a.entangledLanes;
              if (0 !== d)
                for (a = a.entanglements, d &= b; 0 < d; ) {
                  var e = 31 - gy(d),
                    f = 1 << e;
                  ((b |= a[e]), (d &= ~f));
                }
              return ((iy = b), aA(), c);
            }
            function dx(a, b) {
              ((hQ = null),
                (ev.H = h$),
                b === hw || b === hy
                  ? ((b = au()), (it = 3))
                  : b === hx
                    ? ((b = au()), (it = 4))
                    : (it =
                        b === h3
                          ? 8
                          : null !== b &&
                              'object' == typeof b &&
                              'function' == typeof b.then
                            ? 6
                            : 1),
                (iu = b),
                null === ir && ((iz = 1), b5(a, B(b, a.current))));
            }
            function dy() {
              var a = hM.current;
              return (
                null === a ||
                ((4194048 & is) === is
                  ? null === hN
                  : ((0x3c00000 & is) === is || (0x20000000 & is) != 0) &&
                    a === hN)
              );
            }
            function dz() {
              var a = ev.H;
              return ((ev.H = h$), null === a ? h$ : a);
            }
            function dA() {
              var a = ev.A;
              return ((ev.A = ig), a);
            }
            function dB() {
              ((iz = 4),
                iv ||
                  ((4194048 & is) !== is && null !== hM.current) ||
                  (iw = !0),
                ((0x7ffffff & iA) == 0 && (0x7ffffff & iB) == 0) ||
                  null === iq ||
                  dt(iq, is, iD, !1));
            }
            function dC(a, b, c) {
              var d = ip;
              ip |= 2;
              var e = dz(),
                f = dA();
              ((iq !== a || is !== b) && ((iL = null), dw(a, b)), (b = !1));
              var g = iz;
              h: for (;;)
                try {
                  if (0 !== it && null !== ir) {
                    var h = ir,
                      i = iu;
                    switch (it) {
                      case 8:
                        (dv(), (g = 6));
                        break h;
                      case 3:
                      case 2:
                      case 9:
                      case 6:
                        null === hM.current && (b = !0);
                        var j = it;
                        if (((it = 0), (iu = null), dF(a, h, i, j), c && iw)) {
                          g = 0;
                          break h;
                        }
                        break;
                      default:
                        ((j = it), (it = 0), (iu = null), dF(a, h, i, j));
                    }
                  }
                  ((function () {
                    for (; null !== ir; ) dD(ir);
                  })(),
                    (g = iz));
                  break;
                } catch (b) {
                  dx(a, b);
                }
              return (
                b && a.shellSuspendCounter++,
                (hf = he = null),
                (ip = d),
                (ev.H = e),
                (ev.A = f),
                null === ir && ((iq = null), (is = 0), aA()),
                g
              );
            }
            function dD(a) {
              var b = cz(a.alternate, a, iy);
              ((a.memoizedProps = a.pendingProps),
                null === b ? dG(a) : (ir = b));
            }
            function dE(a) {
              var b = a,
                c = b.alternate;
              switch (b.tag) {
                case 15:
                case 0:
                  b = cl(c, b, b.pendingProps, b.type, void 0, is);
                  break;
                case 11:
                  b = cl(c, b, b.pendingProps, b.type.render, b.ref, is);
                  break;
                case 5:
                  a5(b);
                default:
                  (cL(c, b), (b = cz(c, (b = ir = dZ(b, iy)), iy)));
              }
              ((a.memoizedProps = a.pendingProps),
                null === b ? dG(a) : (ir = b));
            }
            function dF(a, b, c, e) {
              ((hf = he = null), a5(b), (hB = null), (hC = 0));
              var f = b.return;
              try {
                if (
                  (function (a, b, c, e, f) {
                    if (
                      ((c.flags |= 32768),
                      null !== e &&
                        'object' == typeof e &&
                        'function' == typeof e.then)
                    ) {
                      if (
                        (null !== (b = c.alternate) && X(b, c, f, !0),
                        null !== (c = hM.current))
                      ) {
                        switch (c.tag) {
                          case 31:
                          case 13:
                            return (
                              null === hN
                                ? dB()
                                : null === c.alternate && 0 === iz && (iz = 3),
                              (c.flags &= -257),
                              (c.flags |= 65536),
                              (c.lanes = f),
                              e === hz
                                ? (c.flags |= 16384)
                                : (null === (b = c.updateQueue)
                                    ? (c.updateQueue = new Set([e]))
                                    : b.add(e),
                                  dR(a, e, f)),
                              !1
                            );
                          case 22:
                            return (
                              (c.flags |= 65536),
                              e === hz
                                ? (c.flags |= 16384)
                                : (null === (b = c.updateQueue)
                                    ? ((b = {
                                        transitions: null,
                                        markerInstances: null,
                                        retryQueue: new Set([e]),
                                      }),
                                      (c.updateQueue = b))
                                    : null === (c = b.retryQueue)
                                      ? (b.retryQueue = new Set([e]))
                                      : c.add(e),
                                  dR(a, e, f)),
                              !1
                            );
                        }
                        throw Error(d(435, c.tag));
                      }
                      return (dR(a, e, f), dB(), !1);
                    }
                    if (g9)
                      return (
                        null !== (b = hM.current)
                          ? ((65536 & b.flags) == 0 && (b.flags |= 256),
                            (b.flags |= 65536),
                            (b.lanes = f),
                            e !== hc &&
                              S(B((a = Error(d(422), { cause: e })), c)))
                          : (e !== hc &&
                              S(B((b = Error(d(423), { cause: e })), c)),
                            (a = a.current.alternate),
                            (a.flags |= 65536),
                            (f &= -f),
                            (a.lanes |= f),
                            (e = B(e, c)),
                            (f = b7(a.stateNode, e, f)),
                            aL(a, f),
                            4 !== iz && (iz = 2)),
                        !1
                      );
                    var g = Error(d(520), { cause: e });
                    if (
                      ((g = B(g, c)),
                      null === iF ? (iF = [g]) : iF.push(g),
                      4 !== iz && (iz = 2),
                      null === b)
                    )
                      return !0;
                    ((e = B(e, c)), (c = b));
                    do {
                      switch (c.tag) {
                        case 3:
                          return (
                            (c.flags |= 65536),
                            (a = f & -f),
                            (c.lanes |= a),
                            (a = b7(c.stateNode, e, a)),
                            aL(c, a),
                            !1
                          );
                        case 1:
                          if (
                            ((b = c.type),
                            (g = c.stateNode),
                            (128 & c.flags) == 0 &&
                              ('function' ==
                                typeof b.getDerivedStateFromError ||
                                (null !== g &&
                                  'function' == typeof g.componentDidCatch &&
                                  (null === iM || !iM.has(g)))))
                          )
                            return (
                              (c.flags |= 65536),
                              (f &= -f),
                              (c.lanes |= f),
                              b9((f = b8(f)), a, c, e),
                              aL(c, f),
                              !1
                            );
                      }
                      c = c.return;
                    } while (null !== c);
                    return !1;
                  })(a, f, b, c, is)
                ) {
                  ((iz = 1), b5(a, B(c, a.current)), (ir = null));
                  return;
                }
              } catch (b) {
                if (null !== f) throw ((ir = f), b);
                ((iz = 1), b5(a, B(c, a.current)), (ir = null));
                return;
              }
              32768 & b.flags
                ? (g9 || 1 === e
                    ? (a = !0)
                    : iw || (0x20000000 & is) != 0
                      ? (a = !1)
                      : ((iv = a = !0),
                        (2 === e || 9 === e || 3 === e || 6 === e) &&
                          null !== (e = hM.current) &&
                          13 === e.tag &&
                          (e.flags |= 16384)),
                  dH(b, a))
                : dG(b);
            }
            function dG(a) {
              var b = a;
              do {
                if ((32768 & b.flags) != 0) return void dH(b, iv);
                a = b.return;
                var c = (function (a, b, c) {
                  var e = b.pendingProps;
                  switch ((G(b), b.tag)) {
                    case 16:
                    case 15:
                    case 0:
                    case 11:
                    case 7:
                    case 8:
                    case 12:
                    case 9:
                    case 14:
                    case 1:
                      return (cK(b), null);
                    case 3:
                      return (
                        (c = b.stateNode),
                        (e = null),
                        null !== a && (e = a.memoizedState.cache),
                        b.memoizedState.cache !== e && (b.flags |= 2048),
                        U(hj),
                        J(),
                        c.pendingContext &&
                          ((c.context = c.pendingContext),
                          (c.pendingContext = null)),
                        (null === a || null === a.child) &&
                          (P(b)
                            ? cA(b)
                            : null === a ||
                              (a.memoizedState.isDehydrated &&
                                (256 & b.flags) == 0) ||
                              ((b.flags |= 1024), R())),
                        cE(a, b),
                        cK(b),
                        null
                      );
                    case 26:
                      if (gb) {
                        var f = b.type,
                          g = b.memoizedState;
                        return (
                          null === a
                            ? (cA(b),
                              null !== g
                                ? (cK(b), cH(b, g))
                                : (cK(b), cG(b, f, null, e, c)))
                            : g
                              ? g !== a.memoizedState
                                ? (cA(b), cK(b), cH(b, g))
                                : (cK(b), (b.flags &= -0x1000001))
                              : ((g = a.memoizedProps),
                                eN ? g !== e && cA(b) : cF(a, b, f, e),
                                cK(b),
                                cG(b, f, g, e, c)),
                          null
                        );
                      }
                    case 27:
                      if (gp) {
                        if (
                          (L(b),
                          (c = g5.current),
                          (f = b.type),
                          null !== a && null != b.stateNode)
                        )
                          eN ? a.memoizedProps !== e && cA(b) : cF(a, b, f, e);
                        else {
                          if (!e) {
                            if (null === b.stateNode) throw Error(d(166));
                            return (cK(b), null);
                          }
                          ((a = g3.current),
                            P(b)
                              ? N(b, a)
                              : ((b.stateNode = a = gq(f, e, c, a, !0)),
                                cA(b)));
                        }
                        return (cK(b), null);
                      }
                    case 5:
                      if (
                        (L(b), (f = b.type), null !== a && null != b.stateNode)
                      )
                        cF(a, b, f, e);
                      else {
                        if (!e) {
                          if (null === b.stateNode) throw Error(d(166));
                          return (cK(b), null);
                        }
                        if (((g = g3.current), P(b)))
                          (N(b, g),
                            f0(b.stateNode, f, e, g) && (b.flags |= 64));
                        else {
                          var h = eE(f, e, g5.current, g, b);
                          (cB(b),
                            cD(h, b, !1, !1),
                            (b.stateNode = h),
                            eG(h, f, e, g) && cA(b));
                        }
                      }
                      return (
                        cK(b),
                        cG(
                          b,
                          b.type,
                          null === a ? null : a.memoizedProps,
                          b.pendingProps,
                          c
                        ),
                        null
                      );
                    case 6:
                      if (a && null != b.stateNode)
                        ((c = a.memoizedProps),
                          eN
                            ? c !== e && cA(b)
                            : eO &&
                              (c !== e
                                ? ((a = g5.current),
                                  (c = g3.current),
                                  cB(b),
                                  (b.stateNode = eI(e, a, c, b)))
                                : (b.stateNode = a.stateNode)));
                      else {
                        if ('string' != typeof e && null === b.stateNode)
                          throw Error(d(166));
                        if (((a = g5.current), (c = g3.current), P(b))) {
                          if (!eP) throw Error(d(176));
                          if (
                            ((a = b.stateNode),
                            (c = b.memoizedProps),
                            (e = null),
                            null !== (f = g7))
                          )
                            switch (f.tag) {
                              case 27:
                              case 5:
                                e = f.memoizedProps;
                            }
                          fT(a, c, b, e) || M(b, !0);
                        } else (cB(b), (b.stateNode = eI(e, a, c, b)));
                      }
                      return (cK(b), null);
                    case 31:
                      if (
                        ((c = b.memoizedState),
                        null === a || null !== a.memoizedState)
                      ) {
                        if (((e = P(b)), null !== c)) {
                          if (null === a) {
                            if (!e) throw Error(d(318));
                            if (!eP) throw Error(d(556));
                            if (
                              !(a =
                                null !== (a = b.memoizedState)
                                  ? a.dehydrated
                                  : null)
                            )
                              throw Error(d(557));
                            fU(a, b);
                          } else
                            (Q(),
                              (128 & b.flags) == 0 && (b.memoizedState = null),
                              (b.flags |= 4));
                          (cK(b), (a = !1));
                        } else
                          ((c = R()),
                            null !== a &&
                              null !== a.memoizedState &&
                              (a.memoizedState.hydrationErrors = c),
                            (a = !0));
                        if (!a)
                          return 256 & b.flags ? (aX(b), b) : (aX(b), null);
                        if ((128 & b.flags) != 0) throw Error(d(558));
                      }
                      return (cK(b), null);
                    case 13:
                      if (
                        ((e = b.memoizedState),
                        null === a ||
                          (null !== a.memoizedState &&
                            null !== a.memoizedState.dehydrated))
                      ) {
                        if (((f = P(b)), null !== e && null !== e.dehydrated)) {
                          if (null === a) {
                            if (!f) throw Error(d(318));
                            if (!eP) throw Error(d(344));
                            if (
                              !(f =
                                null !== (f = b.memoizedState)
                                  ? f.dehydrated
                                  : null)
                            )
                              throw Error(d(317));
                            fV(f, b);
                          } else
                            (Q(),
                              (128 & b.flags) == 0 && (b.memoizedState = null),
                              (b.flags |= 4));
                          (cK(b), (f = !1));
                        } else
                          ((f = R()),
                            null !== a &&
                              null !== a.memoizedState &&
                              (a.memoizedState.hydrationErrors = f),
                            (f = !0));
                        if (!f)
                          return 256 & b.flags ? (aX(b), b) : (aX(b), null);
                      }
                      return (
                        aX(b),
                        (128 & b.flags) != 0
                          ? ((b.lanes = c), b)
                          : ((c = null !== e),
                            (a = null !== a && null !== a.memoizedState),
                            c &&
                              ((e = b.child),
                              (f = null),
                              null !== e.alternate &&
                                null !== e.alternate.memoizedState &&
                                null !== e.alternate.memoizedState.cachePool &&
                                (f = e.alternate.memoizedState.cachePool.pool),
                              (g = null),
                              null !== e.memoizedState &&
                                null !== e.memoizedState.cachePool &&
                                (g = e.memoizedState.cachePool.pool),
                              g !== f && (e.flags |= 2048)),
                            c !== a && c && (b.child.flags |= 8192),
                            cI(b, b.updateQueue),
                            cK(b),
                            null)
                      );
                    case 4:
                      return (
                        J(),
                        cE(a, b),
                        null === a && eR(b.stateNode.containerInfo),
                        cK(b),
                        null
                      );
                    case 10:
                      return (U(b.type), cK(b), null);
                    case 19:
                      if ((k(hO), null === (e = b.memoizedState)))
                        return (cK(b), null);
                      if (
                        ((f = (128 & b.flags) != 0), null === (g = e.rendering))
                      )
                        if (f) cJ(e, !1);
                        else {
                          if (0 !== iz || (null !== a && (128 & a.flags) != 0))
                            for (a = b.child; null !== a; ) {
                              if (null !== (g = aY(a))) {
                                for (
                                  b.flags |= 128,
                                    cJ(e, !1),
                                    b.updateQueue = a = g.updateQueue,
                                    cI(b, a),
                                    b.subtreeFlags = 0,
                                    a = c,
                                    c = b.child;
                                  null !== c;
                                )
                                  (dZ(c, a), (c = c.sibling));
                                return (
                                  l(hO, (1 & hO.current) | 2),
                                  g9 && C(b, e.treeForkCount),
                                  b.child
                                );
                              }
                              a = a.sibling;
                            }
                          null !== e.tail &&
                            gI() > iK &&
                            ((b.flags |= 128),
                            (f = !0),
                            cJ(e, !1),
                            (b.lanes = 4194304));
                        }
                      else {
                        if (!f)
                          if (null !== (a = aY(g))) {
                            if (
                              ((b.flags |= 128),
                              (f = !0),
                              (b.updateQueue = a = a.updateQueue),
                              cI(b, a),
                              cJ(e, !0),
                              null === e.tail &&
                                'hidden' === e.tailMode &&
                                !g.alternate &&
                                !g9)
                            )
                              return (cK(b), null);
                          } else
                            2 * gI() - e.renderingStartTime > iK &&
                              0x20000000 !== c &&
                              ((b.flags |= 128),
                              (f = !0),
                              cJ(e, !1),
                              (b.lanes = 4194304));
                        e.isBackwards
                          ? ((g.sibling = b.child), (b.child = g))
                          : (null !== (a = e.last)
                              ? (a.sibling = g)
                              : (b.child = g),
                            (e.last = g));
                      }
                      return null !== e.tail
                        ? ((a = e.tail),
                          (e.rendering = a),
                          (e.tail = a.sibling),
                          (e.renderingStartTime = gI()),
                          (a.sibling = null),
                          (c = hO.current),
                          l(hO, f ? (1 & c) | 2 : 1 & c),
                          g9 && C(b, e.treeForkCount),
                          a)
                        : (cK(b), null);
                    case 22:
                    case 23:
                      return (
                        aX(b),
                        aS(),
                        (e = null !== b.memoizedState),
                        null !== a
                          ? (null !== a.memoizedState) !== e &&
                            (b.flags |= 8192)
                          : e && (b.flags |= 8192),
                        e
                          ? (0x20000000 & c) != 0 &&
                            (128 & b.flags) == 0 &&
                            (cK(b), 6 & b.subtreeFlags && (b.flags |= 8192))
                          : cK(b),
                        null !== (c = b.updateQueue) && cI(b, c.retryQueue),
                        (c = null),
                        null !== a &&
                          null !== a.memoizedState &&
                          null !== a.memoizedState.cachePool &&
                          (c = a.memoizedState.cachePool.pool),
                        (e = null),
                        null !== b.memoizedState &&
                          null !== b.memoizedState.cachePool &&
                          (e = b.memoizedState.cachePool.pool),
                        e !== c && (b.flags |= 2048),
                        null !== a && k(hv),
                        null
                      );
                    case 24:
                      return (
                        (c = null),
                        null !== a && (c = a.memoizedState.cache),
                        b.memoizedState.cache !== c && (b.flags |= 2048),
                        U(hj),
                        cK(b),
                        null
                      );
                    case 25:
                    case 30:
                      return null;
                  }
                  throw Error(d(156, b.tag));
                })(b.alternate, b, iy);
                if (null !== c) {
                  ir = c;
                  return;
                }
                if (null !== (b = b.sibling)) {
                  ir = b;
                  return;
                }
                ir = b = a;
              } while (null !== b);
              0 === iz && (iz = 5);
            }
            function dH(a, b) {
              do {
                var c = (function (a, b) {
                  switch ((G(b), b.tag)) {
                    case 1:
                      return 65536 & (a = b.flags)
                        ? ((b.flags = (-65537 & a) | 128), b)
                        : null;
                    case 3:
                      return (
                        U(hj),
                        J(),
                        (65536 & (a = b.flags)) != 0 && (128 & a) == 0
                          ? ((b.flags = (-65537 & a) | 128), b)
                          : null
                      );
                    case 26:
                    case 27:
                    case 5:
                      return (L(b), null);
                    case 31:
                      if (null !== b.memoizedState) {
                        if ((aX(b), null === b.alternate)) throw Error(d(340));
                        Q();
                      }
                      return 65536 & (a = b.flags)
                        ? ((b.flags = (-65537 & a) | 128), b)
                        : null;
                    case 13:
                      if (
                        (aX(b),
                        null !== (a = b.memoizedState) && null !== a.dehydrated)
                      ) {
                        if (null === b.alternate) throw Error(d(340));
                        Q();
                      }
                      return 65536 & (a = b.flags)
                        ? ((b.flags = (-65537 & a) | 128), b)
                        : null;
                    case 19:
                      return (k(hO), null);
                    case 4:
                      return (J(), null);
                    case 10:
                      return (U(b.type), null);
                    case 22:
                    case 23:
                      return (
                        aX(b),
                        aS(),
                        null !== a && k(hv),
                        65536 & (a = b.flags)
                          ? ((b.flags = (-65537 & a) | 128), b)
                          : null
                      );
                    case 24:
                      return (U(hj), null);
                    default:
                      return null;
                  }
                })(a.alternate, a);
                if (null !== c) {
                  ((c.flags &= 32767), (ir = c));
                  return;
                }
                if (
                  (null !== (c = a.return) &&
                    ((c.flags |= 32768),
                    (c.subtreeFlags = 0),
                    (c.deletions = null)),
                  !b && null !== (a = a.sibling))
                ) {
                  ir = a;
                  return;
                }
                ir = a = c;
              } while (null !== a);
              ((iz = 6), (ir = null));
            }
            function dI(a, b, c, e, f, g, h, i, j) {
              a.cancelPendingCommit = null;
              do dN();
              while (0 !== iN);
              if ((6 & ip) != 0) throw Error(d(327));
              if (null !== b) {
                if (b === a.current) throw Error(d(177));
                if (
                  ((function (a, b, c, d, e, f) {
                    var g = a.pendingLanes;
                    ((a.pendingLanes = c),
                      (a.suspendedLanes = 0),
                      (a.pingedLanes = 0),
                      (a.warmLanes = 0),
                      (a.expiredLanes &= c),
                      (a.entangledLanes &= c),
                      (a.errorRecoveryDisabledLanes &= c),
                      (a.shellSuspendCounter = 0));
                    var h = a.entanglements,
                      i = a.expirationTimes,
                      j = a.hiddenUpdates;
                    for (c = g & ~c; 0 < c; ) {
                      var k = 31 - gy(c),
                        l = 1 << k;
                      ((h[k] = 0), (i[k] = -1));
                      var m = j[k];
                      if (null !== m)
                        for (j[k] = null, k = 0; k < m.length; k++) {
                          var n = m[k];
                          null !== n && (n.lane &= -0x20000001);
                        }
                      c &= ~l;
                    }
                    (0 !== d && s(a, d, 0),
                      0 !== f &&
                        0 === e &&
                        0 !== a.tag &&
                        (a.suspendedLanes |= f & ~(g & ~b)));
                  })(a, c, (g = b.lanes | b.childLanes | hH), h, i, j),
                  a === iq && ((ir = iq = null), (is = 0)),
                  (iP = b),
                  (iO = a),
                  (iQ = c),
                  (iR = g),
                  (iS = f),
                  (iT = e),
                  (10256 & b.subtreeFlags) != 0 || (10256 & b.flags) != 0
                    ? ((a.callbackNode = null),
                      (a.callbackPriority = 0),
                      gE(gL, function () {
                        return (dO(), null);
                      }))
                    : ((a.callbackNode = null), (a.callbackPriority = 0)),
                  (e = (13878 & b.flags) != 0),
                  (13878 & b.subtreeFlags) != 0 || e)
                ) {
                  ((e = ev.T),
                    (ev.T = null),
                    (f = eT()),
                    eS(2),
                    (h = ip),
                    (ip |= 4));
                  try {
                    !(function (a, b) {
                      for (eC(a.containerInfo), ia = b; null !== ia; )
                        if (
                          ((b = (a = ia).child),
                          (1028 & a.subtreeFlags) != 0 && null !== b)
                        )
                          ((b.return = a), (ia = b));
                        else
                          for (; null !== ia; ) {
                            var c = (a = ia).alternate;
                            switch (((b = a.flags), a.tag)) {
                              case 0:
                                if (
                                  (4 & b) != 0 &&
                                  null !==
                                    (b =
                                      null !== (b = a.updateQueue)
                                        ? b.events
                                        : null)
                                )
                                  for (var e = 0; e < b.length; e++) {
                                    var f = b[e];
                                    f.ref.impl = f.nextImpl;
                                  }
                                break;
                              case 11:
                              case 15:
                              case 5:
                              case 26:
                              case 27:
                              case 6:
                              case 4:
                              case 17:
                                break;
                              case 1:
                                if ((1024 & b) != 0 && null !== c) {
                                  ((b = void 0),
                                    (e = a),
                                    (f = c.memoizedProps),
                                    (c = c.memoizedState));
                                  var g = e.stateNode;
                                  try {
                                    var h = b4(e.type, f);
                                    ((b = g.getSnapshotBeforeUpdate(h, c)),
                                      (g.__reactInternalSnapshotBeforeUpdate =
                                        b));
                                  } catch (a) {
                                    dQ(e, e.return, a);
                                  }
                                }
                                break;
                              case 3:
                                (1024 & b) != 0 &&
                                  eN &&
                                  ft(a.stateNode.containerInfo);
                                break;
                              default:
                                if ((1024 & b) != 0) throw Error(d(163));
                            }
                            if (null !== (b = a.sibling)) {
                              ((b.return = a.return), (ia = b));
                              break;
                            }
                            ia = a.return;
                          }
                    })(a, b, c);
                  } finally {
                    ((ip = h), eS(f), (ev.T = e));
                  }
                }
                ((iN = 1), dJ(), dK(), dL());
              }
            }
            function dJ() {
              if (1 === iN) {
                iN = 0;
                var a = iO,
                  b = iP,
                  c = (13878 & b.flags) != 0;
                if ((13878 & b.subtreeFlags) != 0 || c) {
                  ((c = ev.T), (ev.T = null));
                  var d = eT();
                  eS(2);
                  var e = ip;
                  ip |= 4;
                  try {
                    (c4(b, a), eD(a.containerInfo));
                  } finally {
                    ((ip = e), eS(d), (ev.T = c));
                  }
                }
                ((a.current = b), (iN = 2));
              }
            }
            function dK() {
              if (2 === iN) {
                iN = 0;
                var a = iO,
                  b = iP,
                  c = (8772 & b.flags) != 0;
                if ((8772 & b.subtreeFlags) != 0 || c) {
                  ((c = ev.T), (ev.T = null));
                  var d = eT();
                  eS(2);
                  var e = ip;
                  ip |= 4;
                  try {
                    cZ(a, b.alternate, b);
                  } finally {
                    ((ip = e), eS(d), (ev.T = c));
                  }
                }
                iN = 3;
              }
            }
            function dL() {
              if (4 === iN || 3 === iN) {
                ((iN = 0), gH());
                var a = iO,
                  b = iP,
                  c = iQ,
                  d = iT;
                (10256 & b.subtreeFlags) != 0 || (10256 & b.flags) != 0
                  ? (iN = 5)
                  : ((iN = 0), (iP = iO = null), dM(a, a.pendingLanes));
                var e = a.pendingLanes;
                if (
                  (0 === e && (iM = null),
                  w(c),
                  (b = b.stateNode),
                  gQ && 'function' == typeof gQ.onCommitFiberRoot)
                )
                  try {
                    gQ.onCommitFiberRoot(
                      gP,
                      b,
                      void 0,
                      (128 & b.current.flags) == 128
                    );
                  } catch {}
                if (null !== d) {
                  ((b = ev.T), (e = eT()), eS(2), (ev.T = null));
                  try {
                    for (
                      var f = a.onRecoverableError, g = 0;
                      g < d.length;
                      g++
                    ) {
                      var h = d[g];
                      f(h.value, { componentStack: h.stack });
                    }
                  } finally {
                    ((ev.T = b), eS(e));
                  }
                }
                ((3 & iQ) != 0 && dN(),
                  ae(a),
                  (e = a.pendingLanes),
                  (261930 & c) != 0 && (42 & e) != 0
                    ? a === iV
                      ? iU++
                      : ((iU = 0), (iV = a))
                    : (iU = 0),
                  eP && f1(),
                  af(0, !1));
              }
            }
            function dM(a, b) {
              0 == (a.pooledCacheLanes &= b) &&
                null != (b = a.pooledCache) &&
                ((a.pooledCache = null), ac(b));
            }
            function dN() {
              return (dJ(), dK(), dL(), dO());
            }
            function dO() {
              if (5 !== iN) return !1;
              var a = iO,
                b = iR;
              iR = 0;
              var c = w(iQ),
                e = 32 > c ? 32 : c;
              c = ev.T;
              var f = eT();
              try {
                (eS(e), (ev.T = null), (e = iS), (iS = null));
                var g = iO,
                  h = iQ;
                if (((iN = 0), (iP = iO = null), (iQ = 0), (6 & ip) != 0))
                  throw Error(d(331));
                var i = ip;
                if (
                  ((ip |= 4),
                  dg(g.current),
                  da(g, g.current, h, e),
                  (ip = i),
                  af(0, !1),
                  gQ && 'function' == typeof gQ.onPostCommitFiberRoot)
                )
                  try {
                    gQ.onPostCommitFiberRoot(gP, g);
                  } catch {}
                return !0;
              } finally {
                (eS(f), (ev.T = c), dM(a, b));
              }
            }
            function dP(a, b, c) {
              ((b = B(c, b)),
                (b = b7(a.stateNode, b, 2)),
                null !== (a = aJ(a, b, 2)) && (r(a, 2), ae(a)));
            }
            function dQ(a, b, c) {
              if (3 === a.tag) dP(a, a, c);
              else
                for (; null !== b; ) {
                  if (3 === b.tag) {
                    dP(b, a, c);
                    break;
                  }
                  if (1 === b.tag) {
                    var d = b.stateNode;
                    if (
                      'function' == typeof b.type.getDerivedStateFromError ||
                      ('function' == typeof d.componentDidCatch &&
                        (null === iM || !iM.has(d)))
                    ) {
                      ((a = B(c, a)),
                        null !== (d = aJ(b, (c = b8(2)), 2)) &&
                          (b9(c, d, b, a), r(d, 2), ae(d)));
                      break;
                    }
                  }
                  b = b.return;
                }
            }
            function dR(a, b, c) {
              var d = a.pingCache;
              if (null === d) {
                d = a.pingCache = new io();
                var e = new Set();
                d.set(b, e);
              } else
                void 0 === (e = d.get(b)) && ((e = new Set()), d.set(b, e));
              e.has(c) ||
                ((ix = !0),
                e.add(c),
                (a = dS.bind(null, a, b, c)),
                b.then(a, a));
            }
            function dS(a, b, c) {
              var d = a.pingCache;
              (null !== d && d.delete(b),
                (a.pingedLanes |= a.suspendedLanes & c),
                (a.warmLanes &= ~c),
                iq === a &&
                  (is & c) === c &&
                  (4 === iz ||
                  (3 === iz && (0x3c00000 & is) === is && 300 > gI() - iI)
                    ? (2 & ip) == 0 && dw(a, 0)
                    : (iC |= c),
                  iE === is && (iE = 0)),
                ae(a));
            }
            function dT(a, b) {
              (0 === b && (b = p()),
                null !== (a = aD(a, b)) && (r(a, b), ae(a)));
            }
            function dU(a) {
              var b = a.memoizedState,
                c = 0;
              (null !== b && (c = b.retryLane), dT(a, c));
            }
            function dV(a, b) {
              var c = 0;
              switch (a.tag) {
                case 31:
                case 13:
                  var e = a.stateNode,
                    f = a.memoizedState;
                  null !== f && (c = f.retryLane);
                  break;
                case 19:
                  e = a.stateNode;
                  break;
                case 22:
                  e = a.stateNode._retryCache;
                  break;
                default:
                  throw Error(d(314));
              }
              (null !== e && e.delete(b), dT(a, c));
            }
            function dW(a, b, c, d) {
              ((this.tag = a),
                (this.key = c),
                (this.sibling =
                  this.child =
                  this.return =
                  this.stateNode =
                  this.type =
                  this.elementType =
                    null),
                (this.index = 0),
                (this.refCleanup = this.ref = null),
                (this.pendingProps = b),
                (this.dependencies =
                  this.memoizedState =
                  this.updateQueue =
                  this.memoizedProps =
                    null),
                (this.mode = d),
                (this.subtreeFlags = this.flags = 0),
                (this.deletions = null),
                (this.childLanes = this.lanes = 0),
                (this.alternate = null));
            }
            function dX(a) {
              return !(!(a = a.prototype) || !a.isReactComponent);
            }
            function dY(a, c) {
              var d = a.alternate;
              return (
                null === d
                  ? (((d = b(a.tag, c, a.key, a.mode)).elementType =
                      a.elementType),
                    (d.type = a.type),
                    (d.stateNode = a.stateNode),
                    (d.alternate = a),
                    (a.alternate = d))
                  : ((d.pendingProps = c),
                    (d.type = a.type),
                    (d.flags = 0),
                    (d.subtreeFlags = 0),
                    (d.deletions = null)),
                (d.flags = 0x3e00000 & a.flags),
                (d.childLanes = a.childLanes),
                (d.lanes = a.lanes),
                (d.child = a.child),
                (d.memoizedProps = a.memoizedProps),
                (d.memoizedState = a.memoizedState),
                (d.updateQueue = a.updateQueue),
                (c = a.dependencies),
                (d.dependencies =
                  null === c
                    ? null
                    : { lanes: c.lanes, firstContext: c.firstContext }),
                (d.sibling = a.sibling),
                (d.index = a.index),
                (d.ref = a.ref),
                (d.refCleanup = a.refCleanup),
                d
              );
            }
            function dZ(a, b) {
              a.flags &= 0x3e00002;
              var c = a.alternate;
              return (
                null === c
                  ? ((a.childLanes = 0),
                    (a.lanes = b),
                    (a.child = null),
                    (a.subtreeFlags = 0),
                    (a.memoizedProps = null),
                    (a.memoizedState = null),
                    (a.updateQueue = null),
                    (a.dependencies = null),
                    (a.stateNode = null))
                  : ((a.childLanes = c.childLanes),
                    (a.lanes = c.lanes),
                    (a.child = c.child),
                    (a.subtreeFlags = 0),
                    (a.deletions = null),
                    (a.memoizedProps = c.memoizedProps),
                    (a.memoizedState = c.memoizedState),
                    (a.updateQueue = c.updateQueue),
                    (a.type = c.type),
                    (a.dependencies =
                      null === (b = c.dependencies)
                        ? null
                        : { lanes: b.lanes, firstContext: b.firstContext })),
                a
              );
            }
            function d$(a, c, e, f, g, h) {
              var i = 0;
              if (((f = a), 'function' == typeof a)) dX(a) && (i = 1);
              else if ('string' == typeof a)
                i =
                  gb && gp
                    ? gc(a, e, g3.current)
                      ? 26
                      : gt(a)
                        ? 27
                        : 5
                    : gb
                      ? gc(a, e, g3.current)
                        ? 26
                        : 5
                      : gp && gt(a)
                        ? 27
                        : 5;
              else
                h: switch (a) {
                  case eq:
                    return (
                      ((a = b(31, e, c, g)).elementType = eq),
                      (a.lanes = h),
                      a
                    );
                  case eg:
                    return d_(e.children, g, h, c);
                  case eh:
                    ((i = 8), (g |= 24));
                    break;
                  case ei:
                    return (
                      ((a = b(12, e, c, 2 | g)).elementType = ei),
                      (a.lanes = h),
                      a
                    );
                  case em:
                    return (
                      ((a = b(13, e, c, g)).elementType = em),
                      (a.lanes = h),
                      a
                    );
                  case en:
                    return (
                      ((a = b(19, e, c, g)).elementType = en),
                      (a.lanes = h),
                      a
                    );
                  default:
                    if ('object' == typeof a && null !== a)
                      switch (a.$$typeof) {
                        case ek:
                          i = 10;
                          break h;
                        case ej:
                          i = 9;
                          break h;
                        case el:
                          i = 11;
                          break h;
                        case eo:
                          i = 14;
                          break h;
                        case ep:
                          ((i = 16), (f = null));
                          break h;
                      }
                    ((i = 29),
                      (e = Error(d(130, null === a ? 'null' : typeof a, ''))),
                      (f = null));
                }
              return (
                ((c = b(i, e, c, g)).elementType = a),
                (c.type = f),
                (c.lanes = h),
                c
              );
            }
            function d_(a, c, d, e) {
              return (((a = b(7, a, e, c)).lanes = d), a);
            }
            function d0(a, c, d) {
              return (((a = b(6, a, null, c)).lanes = d), a);
            }
            function d1(a) {
              var c = b(18, null, null, 0);
              return ((c.stateNode = a), c);
            }
            function d2(a, c, d) {
              return (
                ((c = b(
                  4,
                  null !== a.children ? a.children : [],
                  a.key,
                  c
                )).lanes = d),
                (c.stateNode = {
                  containerInfo: a.containerInfo,
                  pendingChildren: null,
                  implementation: a.implementation,
                }),
                c
              );
            }
            function d3(a, b, c, d, e, f, g, h, i) {
              ((this.tag = 1),
                (this.containerInfo = a),
                (this.pingCache = this.current = this.pendingChildren = null),
                (this.timeoutHandle = eL),
                (this.callbackNode =
                  this.next =
                  this.pendingContext =
                  this.context =
                  this.cancelPendingCommit =
                    null),
                (this.callbackPriority = 0),
                (this.expirationTimes = q(-1)),
                (this.entangledLanes =
                  this.shellSuspendCounter =
                  this.errorRecoveryDisabledLanes =
                  this.expiredLanes =
                  this.warmLanes =
                  this.pingedLanes =
                  this.suspendedLanes =
                  this.pendingLanes =
                    0),
                (this.entanglements = q(0)),
                (this.hiddenUpdates = q(null)),
                (this.identifierPrefix = d),
                (this.onUncaughtError = e),
                (this.onCaughtError = f),
                (this.onRecoverableError = g),
                (this.pooledCache = null),
                (this.pooledCacheLanes = 0),
                (this.formState = i),
                (this.incompleteTransitions = new Map()));
            }
            function d4(a, c, d, e, f, g, h, i, j, k, l, m) {
              return (
                (a = new d3(a, c, d, h, j, k, l, m, i)),
                (c = 1),
                !0 === g && (c |= 24),
                (g = b(3, null, null, c)),
                (a.current = g),
                (g.stateNode = a),
                (c = ab()),
                c.refCount++,
                (a.pooledCache = c),
                c.refCount++,
                (g.memoizedState = { element: e, isDehydrated: d, cache: c }),
                aG(g),
                a
              );
            }
            function d5(a) {
              var b = a._reactInternals;
              if (void 0 === b)
                throw 'function' == typeof a.render
                  ? Error(d(188))
                  : Error(d(268, (a = Object.keys(a).join(','))));
              return null ===
                (a =
                  null !== (a = g(b))
                    ? (function a(b) {
                        var c = b.tag;
                        if (5 === c || 26 === c || 27 === c || 6 === c)
                          return b;
                        for (b = b.child; null !== b; ) {
                          if (null !== (c = a(b))) return c;
                          b = b.sibling;
                        }
                        return null;
                      })(a)
                    : null)
                ? null
                : ez(a.stateNode);
            }
            function d6(a, b, c, d, e, f) {
              ((e = gx),
                null === d.context ? (d.context = e) : (d.pendingContext = e),
                ((d = aI(b)).payload = { element: c }),
                null !== (f = void 0 === f ? null : f) && (d.callback = f),
                null !== (c = aJ(a, d, b)) && (dq(c, a, b), aK(c, a, b)));
            }
            function d7(a, b) {
              if (null !== (a = a.memoizedState) && null !== a.dehydrated) {
                var c = a.retryLane;
                a.retryLane = 0 !== c && c < b ? c : b;
              }
            }
            function d8(a, b) {
              (d7(a, b), (a = a.alternate) && d7(a, b));
            }
            var d9 = {},
              ea = D.default,
              eb = kJ.default,
              ec = Object.assign,
              ed = Symbol.for('react.element'),
              ee = Symbol.for('react.transitional.element'),
              ef = Symbol.for('react.portal'),
              eg = Symbol.for('react.fragment'),
              eh = Symbol.for('react.strict_mode'),
              ei = Symbol.for('react.profiler'),
              ej = Symbol.for('react.consumer'),
              ek = Symbol.for('react.context'),
              el = Symbol.for('react.forward_ref'),
              em = Symbol.for('react.suspense'),
              en = Symbol.for('react.suspense_list'),
              eo = Symbol.for('react.memo'),
              ep = Symbol.for('react.lazy'),
              eq = Symbol.for('react.activity'),
              er = Symbol.for('react.memo_cache_sentinel'),
              es = Symbol.iterator,
              et = Symbol.for('react.client.reference'),
              eu = Array.isArray,
              ev =
                ea.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,
              ew = a.rendererVersion,
              ex = a.rendererPackageName,
              ey = a.extraDevToolsConfig,
              ez = a.getPublicInstance,
              eA = a.getRootHostContext,
              eB = a.getChildHostContext,
              eC = a.prepareForCommit,
              eD = a.resetAfterCommit,
              eE = a.createInstance;
            a.cloneMutableInstance;
            var eF = a.appendInitialChild,
              eG = a.finalizeInitialChildren,
              eH = a.shouldSetTextContent,
              eI = a.createTextInstance;
            a.cloneMutableTextInstance;
            var eJ = a.scheduleTimeout,
              eK = a.cancelTimeout,
              eL = a.noTimeout,
              eM = a.isPrimaryRenderer;
            a.warnsIfNotActing;
            var eN = a.supportsMutation,
              eO = a.supportsPersistence,
              eP = a.supportsHydration,
              eQ = a.getInstanceFromNode;
            a.beforeActiveInstanceBlur;
            var eR = a.preparePortalMount;
            (a.prepareScopeUpdate, a.getInstanceFromScope);
            var eS = a.setCurrentUpdatePriority,
              eT = a.getCurrentUpdatePriority,
              eU = a.resolveUpdatePriority;
            (a.trackSchedulerEvent,
              a.resolveEventType,
              a.resolveEventTimeStamp);
            var eV = a.shouldAttemptEagerTransition,
              eW = a.detachDeletedInstance;
            a.requestPostPaintCallback;
            var eX = a.maySuspendCommit,
              eY = a.maySuspendCommitOnUpdate,
              eZ = a.maySuspendCommitInSyncRender,
              e$ = a.preloadInstance,
              e_ = a.startSuspendingCommit,
              e0 = a.suspendInstance;
            a.suspendOnActiveViewTransition;
            var e1 = a.waitForCommitToBeReady;
            a.getSuspendedCommitReason;
            var e2 = a.NotPendingTransition,
              e3 = a.HostTransitionContext,
              e4 = a.resetFormInstance;
            a.bindToConsole;
            var e5 = a.supportsMicrotasks,
              e6 = a.scheduleMicrotask,
              e7 = a.supportsTestSelectors,
              e8 = a.findFiberRoot,
              e9 = a.getBoundingRect,
              fa = a.getTextContent,
              fb = a.isHiddenSubtree,
              fc = a.matchAccessibilityRole,
              fd = a.setFocusIfFocusable,
              fe = a.setupIntersectionObserver,
              ff = a.appendChild,
              fg = a.appendChildToContainer,
              fh = a.commitTextUpdate,
              fi = a.commitMount,
              fj = a.commitUpdate,
              fk = a.insertBefore,
              fl = a.insertInContainerBefore,
              fm = a.removeChild,
              fn = a.removeChildFromContainer,
              fo = a.resetTextContent,
              fp = a.hideInstance,
              fq = a.hideTextInstance,
              fr = a.unhideInstance,
              fs = a.unhideTextInstance;
            (a.cancelViewTransitionName,
              a.cancelRootViewTransitionName,
              a.restoreRootViewTransitionName,
              a.cloneRootViewTransitionContainer,
              a.removeRootViewTransitionClone,
              a.measureClonedInstance,
              a.hasInstanceChanged,
              a.hasInstanceAffectedParent,
              a.startViewTransition,
              a.startGestureTransition,
              a.stopViewTransition,
              a.getCurrentGestureOffset,
              a.createViewTransitionInstance);
            var ft = a.clearContainer;
            (a.createFragmentInstance,
              a.updateFragmentInstanceFiber,
              a.commitNewChildToFragmentInstance,
              a.deleteChildFromFragmentInstance);
            var fu = a.cloneInstance,
              fv = a.createContainerChildSet,
              fw = a.appendChildToContainerChildSet,
              fx = a.finalizeContainerChildren,
              fy = a.replaceContainerChildren,
              fz = a.cloneHiddenInstance,
              fA = a.cloneHiddenTextInstance,
              fB = a.isSuspenseInstancePending,
              fC = a.isSuspenseInstanceFallback,
              fD = a.getSuspenseInstanceFallbackErrorDetails,
              fE = a.registerSuspenseInstanceRetry,
              fF = a.canHydrateFormStateMarker,
              fG = a.isFormStateMarkerMatching,
              fH = a.getNextHydratableSibling,
              fI = a.getNextHydratableSiblingAfterSingleton,
              fJ = a.getFirstHydratableChild,
              fK = a.getFirstHydratableChildWithinContainer,
              fL = a.getFirstHydratableChildWithinActivityInstance,
              fM = a.getFirstHydratableChildWithinSuspenseInstance,
              fN = a.getFirstHydratableChildWithinSingleton,
              fO = a.canHydrateInstance,
              fP = a.canHydrateTextInstance,
              fQ = a.canHydrateActivityInstance,
              fR = a.canHydrateSuspenseInstance,
              fS = a.hydrateInstance,
              fT = a.hydrateTextInstance,
              fU = a.hydrateActivityInstance,
              fV = a.hydrateSuspenseInstance,
              fW = a.getNextHydratableInstanceAfterActivityInstance,
              fX = a.getNextHydratableInstanceAfterSuspenseInstance,
              fY = a.commitHydratedInstance,
              fZ = a.commitHydratedContainer,
              f$ = a.commitHydratedActivityInstance,
              f_ = a.commitHydratedSuspenseInstance,
              f0 = a.finalizeHydratedChildren,
              f1 = a.flushHydrationEvents;
            a.clearActivityBoundary;
            var f2 = a.clearSuspenseBoundary;
            a.clearActivityBoundaryFromContainer;
            var f3 = a.clearSuspenseBoundaryFromContainer,
              f4 = a.hideDehydratedBoundary,
              f5 = a.unhideDehydratedBoundary,
              f6 = a.shouldDeleteUnhydratedTailInstances;
            (a.diffHydratedPropsForDevWarnings,
              a.diffHydratedTextForDevWarnings,
              a.describeHydratableInstanceForDevWarnings);
            var f7,
              f8,
              f9 = a.validateHydratableInstance,
              ga = a.validateHydratableTextInstance,
              gb = a.supportsResources,
              gc = a.isHostHoistableType,
              gd = a.getHoistableRoot,
              ge = a.getResource,
              gf = a.acquireResource,
              gg = a.releaseResource,
              gh = a.hydrateHoistable,
              gi = a.mountHoistable,
              gj = a.unmountHoistable,
              gk = a.createHoistableInstance,
              gl = a.prepareToCommitHoistables,
              gm = a.mayResourceSuspendCommit,
              gn = a.preloadResource,
              go = a.suspendResource,
              gp = a.supportsSingletons,
              gq = a.resolveSingletonInstance,
              gr = a.acquireSingletonInstance,
              gs = a.releaseSingletonInstance,
              gt = a.isHostSingletonType,
              gu = a.isSingletonScope,
              gv = [],
              gw = -1,
              gx = {},
              gy = Math.clz32
                ? Math.clz32
                : function (a) {
                    return 0 == (a >>>= 0) ? 32 : (31 - ((gz(a) / gA) | 0)) | 0;
                  },
              gz = Math.log,
              gA = Math.LN2,
              gB = 256,
              gC = 262144,
              gD = 4194304,
              gE = eb.unstable_scheduleCallback,
              gF = eb.unstable_cancelCallback,
              gG = eb.unstable_shouldYield,
              gH = eb.unstable_requestPaint,
              gI = eb.unstable_now,
              gJ = eb.unstable_ImmediatePriority,
              gK = eb.unstable_UserBlockingPriority,
              gL = eb.unstable_NormalPriority,
              gM = eb.unstable_IdlePriority,
              gN = eb.log,
              gO = eb.unstable_setDisableYieldValue,
              gP = null,
              gQ = null,
              gR =
                'function' == typeof Object.is
                  ? Object.is
                  : function (a, b) {
                      return (
                        (a === b && (0 !== a || 1 / a == 1 / b)) ||
                        (a != a && b != b)
                      );
                    },
              gS =
                'function' == typeof reportError
                  ? reportError
                  : function (a) {
                      'object' == typeof process &&
                      'function' == typeof process.emit
                        ? process.emit('uncaughtException', a)
                        : console.error(a);
                    },
              gT = Object.prototype.hasOwnProperty,
              gU = !1,
              gV = new WeakMap(),
              gW = [],
              gX = 0,
              gY = null,
              gZ = 0,
              g$ = [],
              g_ = 0,
              g0 = null,
              g1 = 1,
              g2 = '',
              g3 = j(null),
              g4 = j(null),
              g5 = j(null),
              g6 = j(null),
              g7 = null,
              g8 = null,
              g9 = !1,
              ha = null,
              hb = !1,
              hc = Error(d(519)),
              hd = j(null),
              he = null,
              hf = null,
              hg =
                'u' > typeof AbortController
                  ? AbortController
                  : function () {
                      var a = [],
                        b = (this.signal = {
                          aborted: !1,
                          addEventListener: function (b, c) {
                            a.push(c);
                          },
                        });
                      this.abort = function () {
                        ((b.aborted = !0),
                          a.forEach(function (a) {
                            return a();
                          }));
                      };
                    },
              hh = eb.unstable_scheduleCallback,
              hi = eb.unstable_NormalPriority,
              hj = {
                $$typeof: ek,
                Consumer: null,
                Provider: null,
                _currentValue: null,
                _currentValue2: null,
                _threadCount: 0,
              },
              hk = null,
              hl = null,
              hm = !1,
              hn = !1,
              ho = !1,
              hp = 0,
              hq = null,
              hr = 0,
              hs = 0,
              ht = null,
              hu = ev.S;
            ev.S = function (a, b) {
              ((iJ = gI()),
                'object' == typeof b &&
                  null !== b &&
                  'function' == typeof b.then &&
                  (function (a, b) {
                    if (null === hq) {
                      var c = (hq = []);
                      ((hr = 0),
                        (hs = al()),
                        (ht = {
                          status: 'pending',
                          value: void 0,
                          then: function (a) {
                            c.push(a);
                          },
                        }));
                    }
                    (hr++, b.then(am, am));
                  })(0, b),
                null !== hu && hu(a, b));
            };
            var hv = j(null),
              hw = Error(d(460)),
              hx = Error(d(474)),
              hy = Error(d(542)),
              hz = { then: function () {} },
              hA = null,
              hB = null,
              hC = 0,
              hD = az(!0),
              hE = az(!1),
              hF = [],
              hG = 0,
              hH = 0,
              hI = !1,
              hJ = !1,
              hK = j(null),
              hL = j(0),
              hM = j(null),
              hN = null,
              hO = j(0),
              hP = 0,
              hQ = null,
              hR = null,
              hS = null,
              hT = !1,
              hU = !1,
              hV = !1,
              hW = 0,
              hX = 0,
              hY = null,
              hZ = 0,
              h$ = {
                readContext: $,
                use: ba,
                useCallback: aZ,
                useContext: aZ,
                useEffect: aZ,
                useImperativeHandle: aZ,
                useLayoutEffect: aZ,
                useInsertionEffect: aZ,
                useMemo: aZ,
                useReducer: aZ,
                useRef: aZ,
                useState: aZ,
                useDebugValue: aZ,
                useDeferredValue: aZ,
                useTransition: aZ,
                useSyncExternalStore: aZ,
                useId: aZ,
                useHostTransitionStatus: aZ,
                useFormState: aZ,
                useActionState: aZ,
                useOptimistic: aZ,
                useMemoCache: aZ,
                useCacheRefresh: aZ,
              };
            h$.useEffectEvent = aZ;
            var h_ = {
                readContext: $,
                use: ba,
                useCallback: function (a, b) {
                  return (
                    (a6().memoizedState = [a, void 0 === b ? null : b]),
                    a
                  );
                },
                useContext: $,
                useEffect: bE,
                useImperativeHandle: function (a, b, c) {
                  ((c = null != c ? c.concat([a]) : null),
                    bC(4194308, 4, bJ.bind(null, b, a), c));
                },
                useLayoutEffect: function (a, b) {
                  return bC(4194308, 4, a, b);
                },
                useInsertionEffect: function (a, b) {
                  bC(4, 2, a, b);
                },
                useMemo: function (a, b) {
                  var c = a6();
                  b = void 0 === b ? null : b;
                  var d = a();
                  return ((c.memoizedState = [d, b]), d);
                },
                useReducer: function (a, b, c) {
                  var d = a6();
                  if (void 0 !== c) var e = c(b);
                  else e = b;
                  return (
                    (d.memoizedState = d.baseState = e),
                    (d.queue = a =
                      {
                        pending: null,
                        lanes: 0,
                        dispatch: null,
                        lastRenderedReducer: a,
                        lastRenderedState: e,
                      }),
                    (a = a.dispatch = bW.bind(null, hQ, a)),
                    [d.memoizedState, a]
                  );
                },
                useRef: function (a) {
                  return (a6().memoizedState = { current: a });
                },
                useState: function (a) {
                  var b = (a = bm(a)).queue,
                    c = bX.bind(null, hQ, b);
                  return ((b.dispatch = c), [a.memoizedState, c]);
                },
                useDebugValue: bL,
                useDeferredValue: function (a, b) {
                  return bO(a6(), a, b);
                },
                useTransition: function () {
                  var a = bm(!1);
                  return (
                    (a = bQ.bind(null, hQ, a.queue, !0, !1)),
                    (a6().memoizedState = a),
                    [!1, a]
                  );
                },
                useSyncExternalStore: function (a, b, c) {
                  var e = hQ,
                    f = a6();
                  if (g9) {
                    if (void 0 === c) throw Error(d(407));
                    c = c();
                  } else {
                    if (((c = b()), null === iq)) throw Error(d(349));
                    (127 & is) != 0 || bh(e, b, c);
                  }
                  f.memoizedState = c;
                  var g = { value: c, getSnapshot: b };
                  return (
                    (f.queue = g),
                    bE(bj.bind(null, e, g, a), [a]),
                    (e.flags |= 2048),
                    bA(9, { destroy: void 0 }, bi.bind(null, e, g, c, b), null),
                    c
                  );
                },
                useId: function () {
                  var a = a6(),
                    b = iq.identifierPrefix;
                  if (g9) {
                    var c = g2,
                      d = g1;
                    ((b =
                      '_' +
                      b +
                      'R_' +
                      (c = (d & ~(1 << (32 - gy(d) - 1))).toString(32) + c)),
                      0 < (c = hW++) && (b += 'H' + c.toString(32)),
                      (b += '_'));
                  } else b = '_' + b + 'r_' + (c = hZ++).toString(32) + '_';
                  return (a.memoizedState = b);
                },
                useHostTransitionStatus: bS,
                useFormState: bv,
                useActionState: bv,
                useOptimistic: function (a) {
                  var b = a6();
                  b.memoizedState = b.baseState = a;
                  var c = {
                    pending: null,
                    lanes: 0,
                    dispatch: null,
                    lastRenderedReducer: null,
                    lastRenderedState: null,
                  };
                  return (
                    (b.queue = c),
                    (b = bZ.bind(null, hQ, !0, c)),
                    (c.dispatch = b),
                    [a, b]
                  );
                },
                useMemoCache: bb,
                useCacheRefresh: function () {
                  return (a6().memoizedState = bV.bind(null, hQ));
                },
                useEffectEvent: function (a) {
                  var b = a6(),
                    c = { impl: a };
                  return (
                    (b.memoizedState = c),
                    function () {
                      if ((2 & ip) != 0) throw Error(d(440));
                      return c.impl.apply(void 0, arguments);
                    }
                  );
                },
              },
              h0 = {
                readContext: $,
                use: ba,
                useCallback: bM,
                useContext: $,
                useEffect: bF,
                useImperativeHandle: bK,
                useInsertionEffect: bH,
                useLayoutEffect: bI,
                useMemo: bN,
                useReducer: bd,
                useRef: bB,
                useState: function () {
                  return bd(bc);
                },
                useDebugValue: bL,
                useDeferredValue: function (a, b) {
                  return bP(a7(), hR.memoizedState, a, b);
                },
                useTransition: function () {
                  var a = bd(bc)[0],
                    b = a7().memoizedState;
                  return ['boolean' == typeof a ? a : a9(a), b];
                },
                useSyncExternalStore: bg,
                useId: bT,
                useHostTransitionStatus: bS,
                useFormState: bw,
                useActionState: bw,
                useOptimistic: function (a, b) {
                  return bn(a7(), hR, a, b);
                },
                useMemoCache: bb,
                useCacheRefresh: bU,
              };
            h0.useEffectEvent = bG;
            var h1 = {
              readContext: $,
              use: ba,
              useCallback: bM,
              useContext: $,
              useEffect: bF,
              useImperativeHandle: bK,
              useInsertionEffect: bH,
              useLayoutEffect: bI,
              useMemo: bN,
              useReducer: bf,
              useRef: bB,
              useState: function () {
                return bf(bc);
              },
              useDebugValue: bL,
              useDeferredValue: function (a, b) {
                var c = a7();
                return null === hR
                  ? bO(c, a, b)
                  : bP(c, hR.memoizedState, a, b);
              },
              useTransition: function () {
                var a = bf(bc)[0],
                  b = a7().memoizedState;
                return ['boolean' == typeof a ? a : a9(a), b];
              },
              useSyncExternalStore: bg,
              useId: bT,
              useHostTransitionStatus: bS,
              useFormState: bz,
              useActionState: bz,
              useOptimistic: function (a, b) {
                var c = a7();
                return null !== hR
                  ? bn(c, hR, a, b)
                  : ((c.baseState = a), [a, c.queue.dispatch]);
              },
              useMemoCache: bb,
              useCacheRefresh: bU,
            };
            h1.useEffectEvent = bG;
            var h2 = {
                enqueueSetState: function (a, b, c) {
                  a = a._reactInternals;
                  var d = dn(),
                    e = aI(d);
                  ((e.payload = b),
                    null != c && (e.callback = c),
                    null !== (b = aJ(a, e, d)) && (dq(b, a, d), aK(b, a, d)));
                },
                enqueueReplaceState: function (a, b, c) {
                  a = a._reactInternals;
                  var d = dn(),
                    e = aI(d);
                  ((e.tag = 1),
                    (e.payload = b),
                    null != c && (e.callback = c),
                    null !== (b = aJ(a, e, d)) && (dq(b, a, d), aK(b, a, d)));
                },
                enqueueForceUpdate: function (a, b) {
                  a = a._reactInternals;
                  var c = dn(),
                    d = aI(c);
                  ((d.tag = 2),
                    null != b && (d.callback = b),
                    null !== (b = aJ(a, d, c)) && (dq(b, a, c), aK(b, a, c)));
                },
              },
              h3 = Error(d(461)),
              h4 = !1,
              h5 = {
                dehydrated: null,
                treeContext: null,
                retryLane: 0,
                hydrationErrors: null,
              },
              h6 = !1,
              h7 = !1,
              h8 = !1,
              h9 = 'function' == typeof WeakSet ? WeakSet : Set,
              ia = null,
              ib = null,
              ic = !1,
              id = null,
              ie = 8192,
              ig = {
                getCacheForType: function (a) {
                  var b = $(hj),
                    c = b.data.get(a);
                  return (void 0 === c && ((c = a()), b.data.set(a, c)), c);
                },
                cacheSignal: function () {
                  return $(hj).controller.signal;
                },
              },
              ih = 0,
              ii = 1,
              ij = 2,
              ik = 3,
              il = 4;
            if ('function' == typeof Symbol && Symbol.for) {
              var im = Symbol.for;
              ((ih = im('selector.component')),
                (ii = im('selector.has_pseudo_class')),
                (ij = im('selector.role')),
                (ik = im('selector.test_id')),
                (il = im('selector.text')));
            }
            var io = 'function' == typeof WeakMap ? WeakMap : Map,
              ip = 0,
              iq = null,
              ir = null,
              is = 0,
              it = 0,
              iu = null,
              iv = !1,
              iw = !1,
              ix = !1,
              iy = 0,
              iz = 0,
              iA = 0,
              iB = 0,
              iC = 0,
              iD = 0,
              iE = 0,
              iF = null,
              iG = null,
              iH = !1,
              iI = 0,
              iJ = 0,
              iK = 1 / 0,
              iL = null,
              iM = null,
              iN = 0,
              iO = null,
              iP = null,
              iQ = 0,
              iR = 0,
              iS = null,
              iT = null,
              iU = 0,
              iV = null;
            return (
              (d9.attemptContinuousHydration = function (a) {
                if (13 === a.tag || 31 === a.tag) {
                  var b = aD(a, 0x4000000);
                  (null !== b && dq(b, a, 0x4000000), d8(a, 0x4000000));
                }
              }),
              (d9.attemptHydrationAtCurrentPriority = function (a) {
                if (13 === a.tag || 31 === a.tag) {
                  var b = dn(),
                    c = aD(a, (b = v(b)));
                  (null !== c && dq(c, a, b), d8(a, b));
                }
              }),
              (d9.attemptSynchronousHydration = function (a) {
                switch (a.tag) {
                  case 3:
                    if ((a = a.stateNode).current.memoizedState.isDehydrated) {
                      var b = m(a.pendingLanes);
                      if (0 !== b) {
                        for (a.pendingLanes |= 2, a.entangledLanes |= 2; b; ) {
                          var c = 1 << (31 - gy(b));
                          ((a.entanglements[1] |= c), (b &= ~c));
                        }
                        (ae(a),
                          (6 & ip) == 0 && ((iK = gI() + 500), af(0, !1)));
                      }
                    }
                    break;
                  case 31:
                  case 13:
                    (null !== (b = aD(a, 2)) && dq(b, a, 2), du(), d8(a, 2));
                }
              }),
              (d9.batchedUpdates = function (a, b) {
                return a(b);
              }),
              (d9.createComponentSelector = function (a) {
                return { $$typeof: ih, value: a };
              }),
              (d9.createContainer = function (a, b, c, d, e, f, g, h, i, j) {
                return d4(a, b, !1, null, c, d, f, null, g, h, i, j);
              }),
              (d9.createHasPseudoClassSelector = function (a) {
                return { $$typeof: ii, value: a };
              }),
              (d9.createHydrationContainer = function (
                a,
                b,
                c,
                d,
                e,
                f,
                g,
                h,
                i,
                j,
                k,
                l,
                m,
                n
              ) {
                var o;
                return (
                  ((a = d4(c, d, !0, a, e, f, h, n, i, j, k, l)).context = gx),
                  (c = a.current),
                  ((e = aI((d = v((d = dn()))))).callback =
                    null != (o = b) ? o : null),
                  aJ(c, e, d),
                  (b = d),
                  (a.current.lanes = b),
                  r(a, b),
                  ae(a),
                  a
                );
              }),
              (d9.createPortal = function (a, b, c) {
                var d =
                  3 < arguments.length && void 0 !== arguments[3]
                    ? arguments[3]
                    : null;
                return {
                  $$typeof: ef,
                  key: null == d ? null : '' + d,
                  children: a,
                  containerInfo: b,
                  implementation: c,
                };
              }),
              (d9.createRoleSelector = function (a) {
                return { $$typeof: ij, value: a };
              }),
              (d9.createTestNameSelector = function (a) {
                return { $$typeof: ik, value: a };
              }),
              (d9.createTextSelector = function (a) {
                return { $$typeof: il, value: a };
              }),
              (d9.defaultOnCaughtError = function (a) {
                console.error(a);
              }),
              (d9.defaultOnRecoverableError = function (a) {
                gS(a);
              }),
              (d9.defaultOnUncaughtError = function (a) {
                gS(a);
              }),
              (d9.deferredUpdates = function (a) {
                var b = ev.T,
                  c = eT();
                try {
                  return (eS(32), (ev.T = null), a());
                } finally {
                  (eS(c), (ev.T = b));
                }
              }),
              (d9.discreteUpdates = function (a, b, c, d, e) {
                var f = ev.T,
                  g = eT();
                try {
                  return (eS(2), (ev.T = null), a(b, c, d, e));
                } finally {
                  (eS(g), (ev.T = f), 0 === ip && (iK = gI() + 500));
                }
              }),
              (d9.findAllNodes = dm),
              (d9.findBoundingRects = function (a, b) {
                if (!e7) throw Error(d(363));
                ((b = dm(a, b)), (a = []));
                for (var c = 0; c < b.length; c++) a.push(e9(b[c]));
                for (b = a.length - 1; 0 < b; b--) {
                  c = a[b];
                  for (
                    var e = c.x,
                      f = e + c.width,
                      g = c.y,
                      h = g + c.height,
                      i = b - 1;
                    0 <= i;
                    i--
                  )
                    if (b !== i) {
                      var j = a[i],
                        k = j.x,
                        l = k + j.width,
                        m = j.y,
                        n = m + j.height;
                      if (e >= k && g >= m && f <= l && h <= n) {
                        a.splice(b, 1);
                        break;
                      }
                      if (e !== k || c.width !== j.width || n < g || m > h) {
                        if (
                          !(g !== m || c.height !== j.height || l < e || k > f)
                        ) {
                          (k > e && ((j.width += k - e), (j.x = e)),
                            l < f && (j.width = f - k),
                            a.splice(b, 1));
                          break;
                        }
                      } else {
                        (m > g && ((j.height += m - g), (j.y = g)),
                          n < h && (j.height = h - m),
                          a.splice(b, 1));
                        break;
                      }
                    }
                }
                return a;
              }),
              (d9.findHostInstance = d5),
              (d9.findHostInstanceWithNoPortals = function (a) {
                return null ===
                  (a =
                    null !== (a = g(a))
                      ? (function a(b) {
                          var c = b.tag;
                          if (5 === c || 26 === c || 27 === c || 6 === c)
                            return b;
                          for (b = b.child; null !== b; ) {
                            if (4 !== b.tag && null !== (c = a(b))) return c;
                            b = b.sibling;
                          }
                          return null;
                        })(a)
                      : null)
                  ? null
                  : ez(a.stateNode);
              }),
              (d9.findHostInstanceWithWarning = function (a) {
                return d5(a);
              }),
              (d9.flushPassiveEffects = dN),
              (d9.flushSyncFromReconciler = function (a) {
                var b = ip;
                ip |= 1;
                var c = ev.T,
                  d = eT();
                try {
                  if ((eS(2), (ev.T = null), a)) return a();
                } finally {
                  (eS(d), (ev.T = c), (6 & (ip = b)) == 0 && af(0, !1));
                }
              }),
              (d9.flushSyncWork = du),
              (d9.focusWithin = function (a, b) {
                if (!e7) throw Error(d(363));
                for (
                  b = Array.from((b = dl((a = di(a)), b))), a = 0;
                  a < b.length;
                ) {
                  var c = b[a++],
                    e = c.tag;
                  if (!fb(c)) {
                    if ((5 === e || 26 === e || 27 === e) && fd(c.stateNode))
                      return !0;
                    for (c = c.child; null !== c; )
                      (b.push(c), (c = c.sibling));
                  }
                }
                return !1;
              }),
              (d9.getFindAllNodesFailureDescription = function (a, b) {
                if (!e7) throw Error(d(363));
                var c = 0,
                  e = [];
                a = [di(a), 0];
                for (var f = 0; f < a.length; ) {
                  var g = a[f++],
                    h = g.tag,
                    i = a[f++],
                    j = b[i];
                  if (
                    ((5 !== h && 26 !== h && 27 !== h) || !fb(g)) &&
                    (dj(g, j) && (e.push(dk(j)), ++i > c && (c = i)),
                    i < b.length)
                  )
                    for (g = g.child; null !== g; )
                      (a.push(g, i), (g = g.sibling));
                }
                if (c < b.length) {
                  for (a = []; c < b.length; c++) a.push(dk(b[c]));
                  return (
                    `findAllNodes was able to match part of the selector:
  ` +
                    e.join(' > ') +
                    `

No matching component was found for:
  ` +
                    a.join(' > ')
                  );
                }
                return null;
              }),
              (d9.getPublicRootInstance = function (a) {
                if (!(a = a.current).child) return null;
                switch (a.child.tag) {
                  case 27:
                  case 5:
                    return ez(a.child.stateNode);
                  default:
                    return a.child.stateNode;
                }
              }),
              (d9.injectIntoDevTools = function () {
                var a = {
                  bundleType: 0,
                  version: ew,
                  rendererPackageName: ex,
                  currentDispatcherRef: ev,
                  reconcilerVersion: '19.2.0',
                };
                if (
                  (null !== ey && (a.rendererConfig = ey),
                  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > 'u')
                )
                  a = !1;
                else {
                  var b = __REACT_DEVTOOLS_GLOBAL_HOOK__;
                  if (b.isDisabled || !b.supportsFiber) a = !0;
                  else {
                    try {
                      ((gP = b.inject(a)), (gQ = b));
                    } catch {}
                    a = !!b.checkDCE;
                  }
                }
                return a;
              }),
              (d9.isAlreadyRendering = function () {
                return (6 & ip) != 0;
              }),
              (d9.observeVisibleRects = function (a, b, c, e) {
                if (!e7) throw Error(d(363));
                var f = fe((a = dm(a, b)), c, e).disconnect;
                return {
                  disconnect: function () {
                    f();
                  },
                };
              }),
              (d9.shouldError = function () {
                return null;
              }),
              (d9.shouldSuspend = function () {
                return !1;
              }),
              (d9.startHostTransition = function (a, b, e, f) {
                if (5 !== a.tag) throw Error(d(476));
                var g = bR(a).queue;
                bQ(
                  a,
                  g,
                  b,
                  e2,
                  null === e
                    ? c
                    : function () {
                        var b = bR(a);
                        return (
                          null === b.next && (b = a.alternate.memoizedState),
                          bY(a, b.next.queue, {}, dn()),
                          e(f)
                        );
                      }
                );
              }),
              (d9.updateContainer = function (a, b, c, d) {
                var e = b.current,
                  f = dn();
                return (d6(e, f, a, b, c, d), f);
              }),
              (d9.updateContainerSync = function (a, b, c, d) {
                return (d6(b.current, 2, a, b, c, d), 2);
              }),
              d9
            );
          }),
          (lo.exports.default = lo.exports),
          Object.defineProperty(lo.exports, '__esModule', { value: !0 })),
        (ln.exports = lo.exports)),
      (t = ln.exports) &&
        t.__esModule &&
        Object.prototype.hasOwnProperty.call(t, 'default'))
        ? t.default
        : t,
      lq = {},
      lr = /^three(?=[A-Z])/,
      ls = (a) => `${a[0].toUpperCase()}${a.slice(1)}`,
      lt = 0;
    function lu(a) {
      if ('function' == typeof a) {
        let b = `${lt++}`;
        return ((lq[b] = a), b);
      }
      Object.assign(lq, a);
    }
    function lv(a, b) {
      let c = ls(a),
        d = lq[c];
      if ('primitive' !== a && !d)
        throw Error(
          `R3F: ${c} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`
        );
      if ('primitive' === a && !b.object)
        throw Error("R3F: Primitives without 'object' are invalid!");
      if (void 0 !== b.args && !Array.isArray(b.args))
        throw Error('R3F: The args prop must be an array!');
    }
    function lw(a) {
      if (a.isHidden) {
        var b;
        (a.props.attach && null != (b = a.parent) && b.object
          ? k3(a.parent, a)
          : lc(a.object) && !1 !== a.props.visible && (a.object.visible = !0),
          (a.isHidden = !1),
          la(a));
      }
    }
    function lx(a, b, c) {
      let d = b.root.getState();
      if (a.parent || a.object === d.scene) {
        if (!b.object) {
          var e, f;
          let a = lq[ls(b.type)];
          ((b.object =
            null != (e = b.props.object)
              ? e
              : new a(...(null != (f = b.props.args) ? f : []))),
            (b.object.__r3f = b));
        }
        if ((k9(b.object, b.props), b.props.attach)) k3(a, b);
        else if (lc(b.object) && lc(a.object)) {
          let d = a.object.children.indexOf(null == c ? void 0 : c.object);
          if (c && -1 !== d) {
            let c = a.object.children.indexOf(b.object);
            -1 !== c
              ? (a.object.children.splice(c, 1),
                a.object.children.splice(c < d ? d - 1 : d, 0, b.object))
              : ((b.object.parent = a.object),
                a.object.children.splice(d, 0, b.object),
                b.object.dispatchEvent({ type: 'added' }),
                a.object.dispatchEvent({
                  type: 'childadded',
                  child: b.object,
                }));
          } else a.object.add(b.object);
        }
        for (let a of b.children) lx(b, a);
        la(b);
      }
    }
    function ly(a, b) {
      b && ((b.parent = a), a.children.push(b), lx(a, b));
    }
    function lz(a, b, c) {
      if (!b || !c) return;
      b.parent = a;
      let d = a.children.indexOf(c);
      (-1 !== d ? a.children.splice(d, 0, b) : a.children.push(b), lx(a, b, c));
    }
    function lA(a) {
      if ('function' == typeof a.dispose) {
        let b = () => {
          try {
            a.dispose();
          } catch {}
        };
        'u' > typeof IS_REACT_ACT_ENVIRONMENT
          ? b()
          : (0, kJ.unstable_scheduleCallback)(kJ.unstable_IdlePriority, b);
      }
    }
    function lB(a, b, c) {
      if (!b) return;
      b.parent = null;
      let d = a.children.indexOf(b);
      (-1 !== d && a.children.splice(d, 1),
        b.props.attach
          ? k4(a, b)
          : lc(b.object) &&
            lc(a.object) &&
            (a.object.remove(b.object),
            (function (a, b) {
              let { internal: c } = a.getState();
              ((c.interaction = c.interaction.filter((a) => a !== b)),
                (c.initialHits = c.initialHits.filter((a) => a !== b)),
                c.hovered.forEach((a, d) => {
                  (a.eventObject === b || a.object === b) &&
                    c.hovered.delete(d);
                }),
                c.capturedMap.forEach((a, d) => {
                  le(c.capturedMap, b, a, d);
                }));
            })(kS(b), b.object)));
      let e = null !== b.props.dispose && !1 !== c;
      for (let a = b.children.length - 1; a >= 0; a--) {
        let c = b.children[a];
        lB(b, c, e);
      }
      ((b.children.length = 0),
        delete b.object.__r3f,
        e &&
          'primitive' !== b.type &&
          'Scene' !== b.object.type &&
          lA(b.object),
        void 0 === c && la(b));
    }
    let lC = [],
      lD = () => {},
      lE = {},
      lF = 0,
      lG =
        ((u = {
          isPrimaryRenderer: !1,
          warnsIfNotActing: !1,
          supportsMutation: !0,
          supportsPersistence: !1,
          supportsHydration: !1,
          createInstance: function (a, b, c) {
            var d;
            return (
              lv((a = ls(a) in lq ? a : a.replace(lr, '')), b),
              'primitive' === a &&
                null != (d = b.object) &&
                d.__r3f &&
                delete b.object.__r3f,
              k0(b.object, c, a, b)
            );
          },
          removeChild: lB,
          appendChild: ly,
          appendInitialChild: ly,
          insertBefore: lz,
          appendChildToContainer(a, b) {
            let c = a.getState().scene.__r3f;
            b && c && ly(c, b);
          },
          removeChildFromContainer(a, b) {
            let c = a.getState().scene.__r3f;
            b && c && lB(c, b);
          },
          insertInContainerBefore(a, b, c) {
            let d = a.getState().scene.__r3f;
            b && c && d && lz(d, b, c);
          },
          getRootHostContext: () => lE,
          getChildHostContext: () => lE,
          commitUpdate(a, b, c, d, e) {
            var f, g, h;
            lv(b, d);
            let i = !1;
            if (
              (('primitive' === a.type && c.object !== d.object) ||
              (null == (f = d.args) ? void 0 : f.length) !==
                (null == (g = c.args) ? void 0 : g.length)
                ? (i = !0)
                : null != (h = d.args) &&
                  h.some((a, b) => {
                    var d;
                    return a !== (null == (d = c.args) ? void 0 : d[b]);
                  }) &&
                  (i = !0),
              i)
            )
              lC.push([a, { ...d }, e]);
            else {
              let b = (function (a, b) {
                let c = {};
                for (let d in b)
                  if (!k5.includes(d) && !k$.equ(b[d], a.props[d]))
                    for (let a in ((c[d] = b[d]), b))
                      a.startsWith(`${d}-`) && (c[a] = b[a]);
                for (let d in a.props) {
                  if (k5.includes(d) || b.hasOwnProperty(d)) continue;
                  let { root: e, key: f } = k1(a.object, d);
                  if (e.constructor && 0 === e.constructor.length) {
                    let a = (function (a) {
                      let b = k6.get(a.constructor);
                      try {
                        b ||
                          ((b = new a.constructor()), k6.set(a.constructor, b));
                      } catch (a) {}
                      return b;
                    })(e);
                    k$.und(a) || (c[f] = a[f]);
                  } else c[f] = 0;
                }
                return c;
              })(a, d);
              Object.keys(b).length &&
                (Object.assign(a.props, b), k9(a.object, b));
            }
            (null === e.sibling || (4 & e.flags) == 0) &&
              (function () {
                for (let [a] of lC) {
                  let b = a.parent;
                  if (b)
                    for (let c of (a.props.attach
                      ? k4(b, a)
                      : lc(a.object) &&
                        lc(b.object) &&
                        b.object.remove(a.object),
                    a.children))
                      c.props.attach
                        ? k4(a, c)
                        : lc(c.object) &&
                          lc(a.object) &&
                          a.object.remove(c.object);
                  (a.isHidden && lw(a),
                    a.object.__r3f && delete a.object.__r3f,
                    'primitive' !== a.type && lA(a.object));
                }
                for (let [d, e, f] of lC) {
                  d.props = e;
                  let g = d.parent;
                  if (g) {
                    let e = lq[ls(d.type)];
                    ((d.object =
                      null != (a = d.props.object)
                        ? a
                        : new e(...(null != (b = d.props.args) ? b : []))),
                      (d.object.__r3f = d));
                    var a,
                      b,
                      c = d.object;
                    for (let a of [f, f.alternate])
                      if (null !== a)
                        if ('function' == typeof a.ref) {
                          null == a.refCleanup || a.refCleanup();
                          let b = a.ref(c);
                          'function' == typeof b && (a.refCleanup = b);
                        } else a.ref && (a.ref.current = c);
                    for (let a of (k9(d.object, d.props),
                    d.props.attach
                      ? k3(g, d)
                      : lc(d.object) && lc(g.object) && g.object.add(d.object),
                    d.children))
                      a.props.attach
                        ? k3(d, a)
                        : lc(a.object) &&
                          lc(d.object) &&
                          d.object.add(a.object);
                    la(d);
                  }
                }
                lC.length = 0;
              })();
          },
          finalizeInitialChildren: () => !1,
          commitMount() {},
          getPublicInstance: (a) => (null == a ? void 0 : a.object),
          prepareForCommit: () => null,
          preparePortalMount: (a) => k0(a.getState().scene, a, '', {}),
          resetAfterCommit: () => {},
          shouldSetTextContent: () => !1,
          clearContainer: () => !1,
          hideInstance: function (a) {
            if (!a.isHidden) {
              var b;
              (a.props.attach && null != (b = a.parent) && b.object
                ? k4(a.parent, a)
                : lc(a.object) && (a.object.visible = !1),
                (a.isHidden = !0),
                la(a));
            }
          },
          unhideInstance: lw,
          createTextInstance: lD,
          hideTextInstance: lD,
          unhideTextInstance: lD,
          scheduleTimeout:
            'function' == typeof setTimeout ? setTimeout : void 0,
          cancelTimeout:
            'function' == typeof clearTimeout ? clearTimeout : void 0,
          noTimeout: -1,
          getInstanceFromNode: () => null,
          beforeActiveInstanceBlur() {},
          afterActiveInstanceBlur() {},
          detachDeletedInstance() {},
          prepareScopeUpdate() {},
          getInstanceFromScope: () => null,
          shouldAttemptEagerTransition: () => !1,
          trackSchedulerEvent: () => {},
          resolveEventType: () => null,
          resolveEventTimeStamp: () => -1.1,
          requestPostPaintCallback() {},
          maySuspendCommit: () => !1,
          preloadInstance: () => !0,
          suspendInstance() {},
          waitForCommitToBeReady: () => null,
          NotPendingTransition: null,
          HostTransitionContext: D.createContext(null),
          setCurrentUpdatePriority(a) {
            lF = a;
          },
          getCurrentUpdatePriority: () => lF,
          resolveUpdatePriority: () => (0 !== lF ? lF : 32),
          resetFormInstance() {},
          rendererPackageName: '@react-three/fiber',
          rendererVersion: '9.5.0',
          applyViewTransitionName(a, b, c) {},
          restoreViewTransitionName(a, b) {},
          cancelViewTransitionName(a, b, c) {},
          cancelRootViewTransitionName(a) {},
          restoreRootViewTransitionName(a) {},
          InstanceMeasurement: null,
          measureInstance: (a) => null,
          wasInstanceInViewport: (a) => !0,
          hasInstanceChanged: (a, b) => !1,
          hasInstanceAffectedParent: (a, b) => !1,
          suspendOnActiveViewTransition(a, b) {},
          startGestureTransition: () => null,
          startViewTransition: () => null,
          stopViewTransition(a) {},
          createViewTransitionInstance: (a) => null,
          getCurrentGestureOffset(a) {
            throw Error(
              'startGestureTransition is not yet supported in react-three-fiber.'
            );
          },
          cloneMutableInstance: (a, b) => a,
          cloneMutableTextInstance: (a) => a,
          cloneRootViewTransitionContainer(a) {
            throw Error('Not implemented.');
          },
          removeRootViewTransitionClone(a, b) {
            throw Error('Not implemented.');
          },
          createFragmentInstance: (a) => null,
          updateFragmentInstanceFiber(a, b) {},
          commitNewChildToFragmentInstance(a, b) {},
          deleteChildFromFragmentInstance(a, b) {},
          measureClonedInstance: (a) => null,
          maySuspendCommitOnUpdate: (a, b, c) => !1,
          maySuspendCommitInSyncRender: (a, b) => !1,
          startSuspendingCommit: () => null,
          getSuspendedCommitReason: (a, b) => null,
        }),
        (s = lp(u)).injectIntoDevTools(),
        s),
      lH = new Map(),
      lI = { objects: 'shallow', strict: !1 };
    function lJ({ store: a, children: b, onCreated: c, rootElement: d }) {
      return (
        kU(() => {
          let b = a.getState();
          (b.set((a) => ({ internal: { ...a.internal, active: !0 } })),
            c && c(b),
            a.getState().events.connected ||
              null == b.events.connect ||
              b.events.connect(d));
        }, []),
        (0, y.jsx)(lg.Provider, { value: a, children: b })
      );
    }
    function lK(a, b) {
      let c = lH.get(a),
        d = null == c ? void 0 : c.fiber;
      if (d) {
        let e = null == c ? void 0 : c.store.getState();
        (e && (e.internal.active = !1),
          lG.updateContainer(null, d, null, () => {
            e &&
              setTimeout(() => {
                try {
                  (null == e.events.disconnect || e.events.disconnect(),
                    null == (c = e.gl) ||
                      null == (d = c.renderLists) ||
                      null == d.dispose ||
                      d.dispose(),
                    null == (f = e.gl) ||
                      null == f.forceContextLoss ||
                      f.forceContextLoss(),
                    null != (g = e.gl) && g.xr && e.xr.disconnect());
                  var c,
                    d,
                    f,
                    g,
                    h = e.scene;
                  for (let a in ('Scene' !== h.type &&
                    (null == h.dispose || h.dispose()),
                  h)) {
                    let b = h[a];
                    (null == b ? void 0 : b.type) !== 'Scene' &&
                      (null == b || null == b.dispose || b.dispose());
                  }
                  (lH.delete(a), b && b(a));
                } catch (a) {}
              }, 500);
          }));
      }
    }
    function lL({ state: a = {}, children: b, container: c }) {
      let { events: d, size: e, ...f } = a,
        g = lh(),
        [h] = D.useState(() => new ho()),
        [i] = D.useState(() => new ao()),
        j = kV((a, b) => {
          let f;
          if (b.camera && e) {
            let c = b.camera;
            ((f = a.viewport.getCurrentViewport(c, new aq(), e)),
              c !== a.camera && lb(c, e));
          }
          return {
            ...a,
            ...b,
            scene: c,
            raycaster: h,
            pointer: i,
            mouse: i,
            previousRoot: g,
            events: { ...a.events, ...b.events, ...d },
            size: { ...a.size, ...e },
            viewport: { ...a.viewport, ...f },
            setEvents: (a) =>
              b.set((b) => ({ ...b, events: { ...b.events, ...a } })),
          };
        }),
        k = D.useMemo(() => {
          let a = kF((a, b) => ({ ...f, set: a, get: b })),
            b = (b) => a.setState((a) => j.current(b, a));
          return (b(g.getState()), g.subscribe(b), a);
        }, [g, c]);
      return (0, y.jsx)(y.Fragment, {
        children: lG.createPortal(
          (0, y.jsx)(lg.Provider, { value: k, children: b }),
          k,
          null
        ),
      });
    }
    let lM = new Set(),
      lN = new Set(),
      lO = new Set();
    function lP(a, b) {
      if (a.size) for (let { callback: c } of a.values()) c(b);
    }
    function lQ(a, b) {
      switch (a) {
        case 'before':
          return lP(lM, b);
        case 'after':
          return lP(lN, b);
        case 'tail':
          return lP(lO, b);
      }
    }
    function lR(a, b, c) {
      let d = b.clock.getDelta();
      ('never' === b.frameloop &&
        'number' == typeof a &&
        ((d = a - b.clock.elapsedTime),
        (b.clock.oldTime = b.clock.elapsedTime),
        (b.clock.elapsedTime = a)),
        (g = b.internal.subscribers));
      for (let a = 0; a < g.length; a++)
        (h = g[a]).ref.current(h.store.getState(), d, c);
      return (
        !b.internal.priority && b.gl.render && b.gl.render(b.scene, b.camera),
        (b.internal.frames = Math.max(0, b.internal.frames - 1)),
        'always' === b.frameloop ? 1 : b.internal.frames
      );
    }
    let lS = !1,
      lT = !1;
    function lU(a) {
      for (let c of ((j = requestAnimationFrame(lU)),
      (lS = !0),
      (i = 0),
      lQ('before', a),
      (lT = !0),
      lH.values())) {
        var b;
        (k = c.store.getState()).internal.active &&
          ('always' === k.frameloop || k.internal.frames > 0) &&
          !(null != (b = k.gl.xr) && b.isPresenting) &&
          (i += lR(a, k));
      }
      if (((lT = !1), lQ('after', a), 0 === i))
        return (lQ('tail', a), (lS = !1), cancelAnimationFrame(j));
    }
    function lV(a, b = 1) {
      var c;
      if (!a) return lH.forEach((a) => lV(a.store.getState(), b));
      (null == (c = a.gl.xr) || !c.isPresenting) &&
        a.internal.active &&
        'never' !== a.frameloop &&
        (b > 1
          ? (a.internal.frames = Math.min(60, a.internal.frames + b))
          : lT
            ? (a.internal.frames = 2)
            : (a.internal.frames = 1),
        lS || ((lS = !0), requestAnimationFrame(lU)));
    }
    function lW(a, b = !0, c, d) {
      if ((b && lQ('before', a), c)) lR(a, c, d);
      else for (let b of lH.values()) lR(a, b.store.getState());
      b && lQ('after', a);
    }
    let lX = {
      onClick: ['click', !1],
      onContextMenu: ['contextmenu', !1],
      onDoubleClick: ['dblclick', !1],
      onWheel: ['wheel', !0],
      onPointerDown: ['pointerdown', !0],
      onPointerUp: ['pointerup', !0],
      onPointerLeave: ['pointerleave', !0],
      onPointerMove: ['pointermove', !0],
      onPointerCancel: ['pointercancel', !0],
      onLostPointerCapture: ['lostpointercapture', !0],
    };
    function lY(a) {
      let { handlePointer: b } = (function (a) {
        function b(a) {
          return a.filter((a) =>
            ['Move', 'Over', 'Enter', 'Out', 'Leave'].some((b) => {
              var c;
              return null == (c = a.__r3f)
                ? void 0
                : c.handlers['onPointer' + b];
            })
          );
        }
        function c(b) {
          let { internal: c } = a.getState();
          for (let a of c.hovered.values())
            if (
              !b.length ||
              !b.find(
                (b) =>
                  b.object === a.object &&
                  b.index === a.index &&
                  b.instanceId === a.instanceId
              )
            ) {
              let d = a.eventObject.__r3f;
              if ((c.hovered.delete(ld(a)), null != d && d.eventCount)) {
                let c = d.handlers,
                  e = { ...a, intersections: b };
                (null == c.onPointerOut || c.onPointerOut(e),
                  null == c.onPointerLeave || c.onPointerLeave(e));
              }
            }
        }
        function d(a, b) {
          for (let c = 0; c < b.length; c++) {
            let d = b[c].__r3f;
            null == d ||
              null == d.handlers.onPointerMissed ||
              d.handlers.onPointerMissed(a);
          }
        }
        return {
          handlePointer: function (e) {
            switch (e) {
              case 'onPointerLeave':
              case 'onPointerCancel':
                return () => c([]);
              case 'onLostPointerCapture':
                return (b) => {
                  let { internal: d } = a.getState();
                  'pointerId' in b &&
                    d.capturedMap.has(b.pointerId) &&
                    requestAnimationFrame(() => {
                      d.capturedMap.has(b.pointerId) &&
                        (d.capturedMap.delete(b.pointerId), c([]));
                    });
                };
            }
            return function (f) {
              let { onPointerMissed: g, internal: h } = a.getState();
              h.lastEvent.current = f;
              let i = 'onPointerMove' === e,
                j =
                  'onClick' === e ||
                  'onContextMenu' === e ||
                  'onDoubleClick' === e,
                k = (function (b, c) {
                  let d = a.getState(),
                    e = new Set(),
                    f = [],
                    g = c ? c(d.internal.interaction) : d.internal.interaction;
                  for (let a = 0; a < g.length; a++) {
                    let b = kZ(g[a]);
                    b && (b.raycaster.camera = void 0);
                  }
                  d.previousRoot ||
                    null == d.events.compute ||
                    d.events.compute(b, d);
                  let h = g
                    .flatMap(function (a) {
                      let c = kZ(a);
                      if (
                        !c ||
                        !c.events.enabled ||
                        null === c.raycaster.camera
                      )
                        return [];
                      if (void 0 === c.raycaster.camera) {
                        var d;
                        (null == c.events.compute ||
                          c.events.compute(
                            b,
                            c,
                            null == (d = c.previousRoot) ? void 0 : d.getState()
                          ),
                          void 0 === c.raycaster.camera &&
                            (c.raycaster.camera = null));
                      }
                      return c.raycaster.camera
                        ? c.raycaster.intersectObject(a, !0)
                        : [];
                    })
                    .sort((a, b) => {
                      let c = kZ(a.object),
                        d = kZ(b.object);
                      return (
                        (c && d && d.events.priority - c.events.priority) ||
                        a.distance - b.distance
                      );
                    })
                    .filter((a) => {
                      let b = ld(a);
                      return !e.has(b) && (e.add(b), !0);
                    });
                  for (let a of (d.events.filter && (h = d.events.filter(h, d)),
                  h)) {
                    let b = a.object;
                    for (; b; ) {
                      var i;
                      (null != (i = b.__r3f) &&
                        i.eventCount &&
                        f.push({ ...a, eventObject: b }),
                        (b = b.parent));
                    }
                  }
                  if (
                    'pointerId' in b &&
                    d.internal.capturedMap.has(b.pointerId)
                  )
                    for (let a of d.internal.capturedMap
                      .get(b.pointerId)
                      .values())
                      e.has(ld(a.intersection)) || f.push(a.intersection);
                  return f;
                })(f, i ? b : void 0),
                l = j
                  ? (function (b) {
                      let { internal: c } = a.getState(),
                        d = b.offsetX - c.initialClick[0],
                        e = b.offsetY - c.initialClick[1];
                      return Math.round(Math.sqrt(d * d + e * e));
                    })(f)
                  : 0;
              ('onPointerDown' === e &&
                ((h.initialClick = [f.offsetX, f.offsetY]),
                (h.initialHits = k.map((a) => a.eventObject))),
                j && !k.length && l <= 2 && (d(f, h.interaction), g && g(f)),
                i && c(k),
                !(function (a, b, d, e) {
                  if (a.length) {
                    let f = { stopped: !1 };
                    for (let g of a) {
                      let h = kZ(g.object);
                      if (
                        (h ||
                          g.object.traverseAncestors((a) => {
                            let b = kZ(a);
                            if (b) return ((h = b), !1);
                          }),
                        h)
                      ) {
                        let {
                            raycaster: i,
                            pointer: j,
                            camera: k,
                            internal: l,
                          } = h,
                          m = new aq(j.x, j.y, 0).unproject(k),
                          n = (a) => {
                            var b, c;
                            return (
                              null !=
                                (b =
                                  null == (c = l.capturedMap.get(a))
                                    ? void 0
                                    : c.has(g.eventObject)) && b
                            );
                          },
                          o = (a) => {
                            let c = { intersection: g, target: b.target };
                            (l.capturedMap.has(a)
                              ? l.capturedMap.get(a).set(g.eventObject, c)
                              : l.capturedMap.set(
                                  a,
                                  new Map([[g.eventObject, c]])
                                ),
                              b.target.setPointerCapture(a));
                          },
                          p = (a) => {
                            let b = l.capturedMap.get(a);
                            b && le(l.capturedMap, g.eventObject, b, a);
                          },
                          q = {};
                        for (let a in b) {
                          let c = b[a];
                          'function' != typeof c && (q[a] = c);
                        }
                        let r = {
                          ...g,
                          ...q,
                          pointer: j,
                          intersections: a,
                          stopped: f.stopped,
                          delta: d,
                          unprojectedPoint: m,
                          ray: i.ray,
                          camera: k,
                          stopPropagation() {
                            let d =
                              'pointerId' in b &&
                              l.capturedMap.get(b.pointerId);
                            (!d || d.has(g.eventObject)) &&
                              ((r.stopped = f.stopped = !0),
                              l.hovered.size &&
                                Array.from(l.hovered.values()).find(
                                  (a) => a.eventObject === g.eventObject
                                ) &&
                                c([...a.slice(0, a.indexOf(g)), g]));
                          },
                          target: {
                            hasPointerCapture: n,
                            setPointerCapture: o,
                            releasePointerCapture: p,
                          },
                          currentTarget: {
                            hasPointerCapture: n,
                            setPointerCapture: o,
                            releasePointerCapture: p,
                          },
                          nativeEvent: b,
                        };
                        if ((e(r), !0 === f.stopped)) break;
                      }
                    }
                  }
                })(k, f, l, function (a) {
                  let b = a.eventObject,
                    c = b.__r3f;
                  if (!(null != c && c.eventCount)) return;
                  let g = c.handlers;
                  if (i) {
                    if (
                      g.onPointerOver ||
                      g.onPointerEnter ||
                      g.onPointerOut ||
                      g.onPointerLeave
                    ) {
                      let b = ld(a),
                        c = h.hovered.get(b);
                      c
                        ? c.stopped && a.stopPropagation()
                        : (h.hovered.set(b, a),
                          null == g.onPointerOver || g.onPointerOver(a),
                          null == g.onPointerEnter || g.onPointerEnter(a));
                    }
                    null == g.onPointerMove || g.onPointerMove(a);
                  } else {
                    let c = g[e];
                    c
                      ? (!j || h.initialHits.includes(b)) &&
                        (d(
                          f,
                          h.interaction.filter(
                            (a) => !h.initialHits.includes(a)
                          )
                        ),
                        c(a))
                      : j &&
                        h.initialHits.includes(b) &&
                        d(
                          f,
                          h.interaction.filter(
                            (a) => !h.initialHits.includes(a)
                          )
                        );
                  }
                }));
            };
          },
        };
      })(a);
      return {
        priority: 1,
        enabled: !0,
        compute(a, b, c) {
          (b.pointer.set(
            (a.offsetX / b.size.width) * 2 - 1,
            -(2 * (a.offsetY / b.size.height)) + 1
          ),
            b.raycaster.setFromCamera(b.pointer, b.camera));
        },
        connected: void 0,
        handlers: Object.keys(lX).reduce((a, c) => ({ ...a, [c]: b(c) }), {}),
        update: () => {
          var b;
          let { events: c, internal: d } = a.getState();
          null != (b = d.lastEvent) &&
            b.current &&
            c.handlers &&
            c.handlers.onPointerMove(d.lastEvent.current);
        },
        connect: (b) => {
          let { set: c, events: d } = a.getState();
          if (
            (null == d.disconnect || d.disconnect(),
            c((a) => ({ events: { ...a.events, connected: b } })),
            d.handlers)
          )
            for (let a in d.handlers) {
              let c = d.handlers[a],
                [e, f] = lX[a];
              b.addEventListener(e, c, { passive: f });
            }
        },
        disconnect: () => {
          let { set: b, events: c } = a.getState();
          if (c.connected) {
            if (c.handlers)
              for (let a in c.handlers) {
                let b = c.handlers[a],
                  [d] = lX[a];
                c.connected.removeEventListener(d, b);
              }
            b((a) => ({ events: { ...a.events, connected: void 0 } }));
          }
        },
      };
    }
    (a.i(60614),
      a.s(
        [
          'ACESFilmicToneMapping',
          () => 4,
          'AddEquation',
          () => 100,
          'AddOperation',
          () => 2,
          'AdditiveAnimationBlendMode',
          () => 2501,
          'AdditiveBlending',
          () => 2,
          'AgXToneMapping',
          () => 6,
          'AlphaFormat',
          () => 1021,
          'AlwaysCompare',
          () => 519,
          'AlwaysDepth',
          () => 1,
          'AlwaysStencilFunc',
          () => 519,
          'AmbientLight',
          () => gy,
          'AnimationAction',
          () => he,
          'AnimationClip',
          () => f6,
          'AnimationLoader',
          () => ge,
          'AnimationMixer',
          () => hg,
          'AnimationObjectGroup',
          () => hd,
          'AnimationUtils',
          () => fV,
          'ArcCurve',
          () => eM,
          'ArrayCamera',
          () => gS,
          'ArrowHelper',
          () => h4,
          'AttachedBindMode',
          () => G,
          'Audio',
          () => g$,
          'AudioAnalyser',
          () => g4,
          'AudioContext',
          () => gM,
          'AudioListener',
          () => gZ,
          'AudioLoader',
          () => gN,
          'AxesHelper',
          () => h5,
          'BackSide',
          () => 1,
          'BasicDepthPacking',
          () => 3200,
          'BasicShadowMap',
          () => 0,
          'BatchedMesh',
          () => d3,
          'Bone',
          () => dq,
          'BooleanKeyframeTrack',
          () => f_,
          'Box2',
          () => hx,
          'Box3',
          () => aO,
          'Box3Helper',
          () => h1,
          'BoxGeometry',
          () => cC,
          'BoxHelper',
          () => h0,
          'BufferAttribute',
          () => b7,
          'BufferGeometry',
          () => co,
          'BufferGeometryLoader',
          () => gF,
          'ByteType',
          () => 1010,
          'Cache',
          () => f7,
          'Camera',
          () => cI,
          'CameraHelper',
          () => hZ,
          'CanvasTexture',
          () => ev,
          'CapsuleGeometry',
          () => ez,
          'CatmullRomCurve3',
          () => eS,
          'CineonToneMapping',
          () => 3,
          'CircleGeometry',
          () => eA,
          'ClampToEdgeWrapping',
          () => 1001,
          'Clock',
          () => gT,
          'Color',
          () => bX,
          'ColorKeyframeTrack',
          () => f0,
          'ColorManagement',
          () => ax,
          'CompressedArrayTexture',
          () => et,
          'CompressedCubeTexture',
          () => eu,
          'CompressedTexture',
          () => es,
          'CompressedTextureLoader',
          () => gf,
          'ConeGeometry',
          () => eC,
          'ConstantAlphaFactor',
          () => 213,
          'ConstantColorFactor',
          () => 211,
          'Controls',
          () => h7,
          'CubeCamera',
          () => cN,
          'CubeDepthTexture',
          () => ex,
          'CubeReflectionMapping',
          () => 301,
          'CubeRefractionMapping',
          () => 302,
          'CubeTexture',
          () => cO,
          'CubeTextureLoader',
          () => gi,
          'CubeUVReflectionMapping',
          () => 306,
          'CubicBezierCurve',
          () => eW,
          'CubicBezierCurve3',
          () => eX,
          'CubicInterpolant',
          () => fX,
          'CullFaceBack',
          () => 1,
          'CullFaceFront',
          () => 2,
          'CullFaceFrontBack',
          () => 3,
          'CullFaceNone',
          () => 0,
          'Curve',
          () => eK,
          'CurvePath',
          () => e2,
          'CustomBlending',
          () => 5,
          'CustomToneMapping',
          () => 5,
          'CylinderGeometry',
          () => eB,
          'Cylindrical',
          () => hu,
          'Data3DTexture',
          () => aM,
          'DataArrayTexture',
          () => aK,
          'DataTexture',
          () => dr,
          'DataTextureLoader',
          () => gj,
          'DataUtils',
          () => b3,
          'DecrementStencilOp',
          () => 7683,
          'DecrementWrapStencilOp',
          () => 34056,
          'DefaultLoadingManager',
          () => f9,
          'DepthFormat',
          () => 1026,
          'DepthStencilFormat',
          () => 1027,
          'DepthTexture',
          () => ew,
          'DetachedBindMode',
          () => H,
          'DirectionalLight',
          () => gx,
          'DirectionalLightHelper',
          () => hW,
          'DiscreteInterpolant',
          () => fZ,
          'DodecahedronGeometry',
          () => eE,
          'DoubleSide',
          () => 2,
          'DstAlphaFactor',
          () => 206,
          'DstColorFactor',
          () => 208,
          'DynamicCopyUsage',
          () => 35050,
          'DynamicDrawUsage',
          () => 35048,
          'DynamicReadUsage',
          () => 35049,
          'EdgesGeometry',
          () => eJ,
          'EllipseCurve',
          () => eL,
          'EqualCompare',
          () => 514,
          'EqualDepth',
          () => 4,
          'EqualStencilFunc',
          () => 514,
          'EquirectangularReflectionMapping',
          () => 303,
          'EquirectangularRefractionMapping',
          () => 304,
          'Euler',
          () => bn,
          'EventDispatcher',
          () => ac,
          'ExternalTexture',
          () => ey,
          'ExtrudeGeometry',
          () => fp,
          'FileLoader',
          () => gd,
          'Float16BufferAttribute',
          () => cf,
          'Float32BufferAttribute',
          () => cg,
          'FloatType',
          () => 1015,
          'Fog',
          () => cU,
          'FogExp2',
          () => cT,
          'FramebufferTexture',
          () => er,
          'FrontSide',
          () => 0,
          'Frustum',
          () => dL,
          'FrustumArray',
          () => dO,
          'GLBufferAttribute',
          () => hm,
          'GLSL1',
          () => '100',
          'GLSL3',
          () => M,
          'GreaterCompare',
          () => 516,
          'GreaterDepth',
          () => 6,
          'GreaterEqualCompare',
          () => 518,
          'GreaterEqualDepth',
          () => 5,
          'GreaterEqualStencilFunc',
          () => 518,
          'GreaterStencilFunc',
          () => 516,
          'GridHelper',
          () => hR,
          'Group',
          () => cQ,
          'HalfFloatType',
          () => 1016,
          'HemisphereLight',
          () => gm,
          'HemisphereLightHelper',
          () => hQ,
          'IcosahedronGeometry',
          () => fr,
          'ImageBitmapLoader',
          () => gL,
          'ImageLoader',
          () => gh,
          'ImageUtils',
          () => aA,
          'IncrementStencilOp',
          () => 7682,
          'IncrementWrapStencilOp',
          () => 34055,
          'InstancedBufferAttribute',
          () => dv,
          'InstancedBufferGeometry',
          () => gE,
          'InstancedInterleavedBuffer',
          () => hl,
          'InstancedMesh',
          () => dD,
          'Int16BufferAttribute',
          () => cb,
          'Int32BufferAttribute',
          () => cd,
          'Int8BufferAttribute',
          () => b8,
          'IntType',
          () => 1013,
          'InterleavedBuffer',
          () => cW,
          'InterleavedBufferAttribute',
          () => cY,
          'Interpolant',
          () => fW,
          'InterpolateDiscrete',
          () => 2300,
          'InterpolateLinear',
          () => 2301,
          'InterpolateSmooth',
          () => 2302,
          'InterpolationSamplingMode',
          () => P,
          'InterpolationSamplingType',
          () => O,
          'InvertStencilOp',
          () => 5386,
          'KeepStencilOp',
          () => 7680,
          'KeyframeTrack',
          () => f$,
          'LOD',
          () => de,
          'LatheGeometry',
          () => fs,
          'Layers',
          () => bo,
          'LessCompare',
          () => 513,
          'LessDepth',
          () => 2,
          'LessEqualCompare',
          () => 515,
          'LessEqualDepth',
          () => 3,
          'LessEqualStencilFunc',
          () => 515,
          'LessStencilFunc',
          () => 513,
          'Light',
          () => gl,
          'LightProbe',
          () => gB,
          'Line',
          () => ec,
          'Line3',
          () => hF,
          'LineBasicMaterial',
          () => d4,
          'LineCurve',
          () => eY,
          'LineCurve3',
          () => eZ,
          'LineDashedMaterial',
          () => fQ,
          'LineLoop',
          () => eh,
          'LineSegments',
          () => eg,
          'LinearFilter',
          () => 1006,
          'LinearInterpolant',
          () => fY,
          'LinearMipMapLinearFilter',
          () => 1008,
          'LinearMipMapNearestFilter',
          () => 1007,
          'LinearMipmapLinearFilter',
          () => 1008,
          'LinearMipmapNearestFilter',
          () => 1007,
          'LinearSRGBColorSpace',
          () => J,
          'LinearToneMapping',
          () => 1,
          'LinearTransfer',
          () => K,
          'Loader',
          () => ga,
          'LoaderUtils',
          () => gD,
          'LoadingManager',
          () => f8,
          'LoopOnce',
          () => 2200,
          'LoopPingPong',
          () => 2202,
          'LoopRepeat',
          () => 2201,
          'MOUSE',
          () => E,
          'Material',
          () => b$,
          'MaterialLoader',
          () => gC,
          'MathUtils',
          () => an,
          'Matrix2',
          () => hv,
          'Matrix3',
          () => at,
          'Matrix4',
          () => bd,
          'MaxEquation',
          () => 104,
          'Mesh',
          () => cA,
          'MeshBasicMaterial',
          () => b_,
          'MeshDepthMaterial',
          () => fN,
          'MeshDistanceMaterial',
          () => fO,
          'MeshLambertMaterial',
          () => fM,
          'MeshMatcapMaterial',
          () => fP,
          'MeshNormalMaterial',
          () => fL,
          'MeshPhongMaterial',
          () => fJ,
          'MeshPhysicalMaterial',
          () => fI,
          'MeshStandardMaterial',
          () => fH,
          'MeshToonMaterial',
          () => fK,
          'MinEquation',
          () => 103,
          'MirroredRepeatWrapping',
          () => 1002,
          'MixOperation',
          () => 1,
          'MultiplyBlending',
          () => 4,
          'MultiplyOperation',
          () => 0,
          'NearestFilter',
          () => 1003,
          'NearestMipMapLinearFilter',
          () => 1005,
          'NearestMipMapNearestFilter',
          () => 1004,
          'NearestMipmapLinearFilter',
          () => 1005,
          'NearestMipmapNearestFilter',
          () => 1004,
          'NeutralToneMapping',
          () => 7,
          'NeverCompare',
          () => 512,
          'NeverDepth',
          () => 0,
          'NeverStencilFunc',
          () => 512,
          'NoBlending',
          () => 0,
          'NoColorSpace',
          () => '',
          'NoNormalPacking',
          () => '',
          'NoToneMapping',
          () => 0,
          'NormalAnimationBlendMode',
          () => 2500,
          'NormalBlending',
          () => 1,
          'NormalGAPacking',
          () => 'ga',
          'NormalRGPacking',
          () => 'rg',
          'NotEqualCompare',
          () => 517,
          'NotEqualDepth',
          () => 7,
          'NotEqualStencilFunc',
          () => 517,
          'NumberKeyframeTrack',
          () => f1,
          'Object3D',
          () => bE,
          'ObjectLoader',
          () => gG,
          'ObjectSpaceNormalMap',
          () => 1,
          'OctahedronGeometry',
          () => ft,
          'OneFactor',
          () => 201,
          'OneMinusConstantAlphaFactor',
          () => 214,
          'OneMinusConstantColorFactor',
          () => 212,
          'OneMinusDstAlphaFactor',
          () => 207,
          'OneMinusDstColorFactor',
          () => 209,
          'OneMinusSrcAlphaFactor',
          () => 205,
          'OneMinusSrcColorFactor',
          () => 203,
          'OrthographicCamera',
          () => gv,
          'PCFShadowMap',
          () => 1,
          'PCFSoftShadowMap',
          () => 2,
          'PMREMGenerator',
          () => iy,
          'Path',
          () => e3,
          'PerspectiveCamera',
          () => cM,
          'Plane',
          () => dH,
          'PlaneGeometry',
          () => fu,
          'PlaneHelper',
          () => h2,
          'PointLight',
          () => gu,
          'PointLightHelper',
          () => hM,
          'Points',
          () => en,
          'PointsMaterial',
          () => ei,
          'PolarGridHelper',
          () => hS,
          'PolyhedronGeometry',
          () => eD,
          'PositionalAudio',
          () => g3,
          'PropertyBinding',
          () => hc,
          'PropertyMixer',
          () => g5,
          'QuadraticBezierCurve',
          () => e$,
          'QuadraticBezierCurve3',
          () => e_,
          'Quaternion',
          () => ap,
          'QuaternionKeyframeTrack',
          () => f3,
          'QuaternionLinearInterpolant',
          () => f2,
          'R11_EAC_Format',
          () => 37488,
          'RED_GREEN_RGTC2_Format',
          () => 36285,
          'RED_RGTC1_Format',
          () => 36283,
          'REVISION',
          () => '182',
          'RG11_EAC_Format',
          () => 37490,
          'RGBADepthPacking',
          () => 3201,
          'RGBAFormat',
          () => 1023,
          'RGBAIntegerFormat',
          () => 1033,
          'RGBA_ASTC_10x10_Format',
          () => 37819,
          'RGBA_ASTC_10x5_Format',
          () => 37816,
          'RGBA_ASTC_10x6_Format',
          () => 37817,
          'RGBA_ASTC_10x8_Format',
          () => 37818,
          'RGBA_ASTC_12x10_Format',
          () => 37820,
          'RGBA_ASTC_12x12_Format',
          () => 37821,
          'RGBA_ASTC_4x4_Format',
          () => 37808,
          'RGBA_ASTC_5x4_Format',
          () => 37809,
          'RGBA_ASTC_5x5_Format',
          () => 37810,
          'RGBA_ASTC_6x5_Format',
          () => 37811,
          'RGBA_ASTC_6x6_Format',
          () => 37812,
          'RGBA_ASTC_8x5_Format',
          () => 37813,
          'RGBA_ASTC_8x6_Format',
          () => 37814,
          'RGBA_ASTC_8x8_Format',
          () => 37815,
          'RGBA_BPTC_Format',
          () => 36492,
          'RGBA_ETC2_EAC_Format',
          () => 37496,
          'RGBA_PVRTC_2BPPV1_Format',
          () => 35843,
          'RGBA_PVRTC_4BPPV1_Format',
          () => 35842,
          'RGBA_S3TC_DXT1_Format',
          () => 33777,
          'RGBA_S3TC_DXT3_Format',
          () => 33778,
          'RGBA_S3TC_DXT5_Format',
          () => 33779,
          'RGBDepthPacking',
          () => 3202,
          'RGBFormat',
          () => 1022,
          'RGBIntegerFormat',
          () => 1032,
          'RGB_BPTC_SIGNED_Format',
          () => 36494,
          'RGB_BPTC_UNSIGNED_Format',
          () => 36495,
          'RGB_ETC1_Format',
          () => 36196,
          'RGB_ETC2_Format',
          () => 37492,
          'RGB_PVRTC_2BPPV1_Format',
          () => 35841,
          'RGB_PVRTC_4BPPV1_Format',
          () => 35840,
          'RGB_S3TC_DXT1_Format',
          () => 33776,
          'RGDepthPacking',
          () => 3203,
          'RGFormat',
          () => 1030,
          'RGIntegerFormat',
          () => 1031,
          'RawShaderMaterial',
          () => fG,
          'Ray',
          () => bc,
          'Raycaster',
          () => ho,
          'RectAreaLight',
          () => gz,
          'RedFormat',
          () => 1028,
          'RedIntegerFormat',
          () => 1029,
          'ReinhardToneMapping',
          () => 2,
          'RenderTarget',
          () => aI,
          'RenderTarget3D',
          () => hh,
          'RepeatWrapping',
          () => 1e3,
          'ReplaceStencilOp',
          () => 7681,
          'ReverseSubtractEquation',
          () => 102,
          'RingGeometry',
          () => fv,
          'SIGNED_R11_EAC_Format',
          () => 37489,
          'SIGNED_RED_GREEN_RGTC2_Format',
          () => 36286,
          'SIGNED_RED_RGTC1_Format',
          () => 36284,
          'SIGNED_RG11_EAC_Format',
          () => 37491,
          'SRGBColorSpace',
          () => I,
          'SRGBTransfer',
          () => L,
          'Scene',
          () => cV,
          'ShaderChunk',
          () => ic,
          'ShaderLib',
          () => ie,
          'ShaderMaterial',
          () => cH,
          'ShadowMaterial',
          () => fF,
          'Shape',
          () => e4,
          'ShapeGeometry',
          () => fw,
          'ShapePath',
          () => h6,
          'ShapeUtils',
          () => fm,
          'ShortType',
          () => 1011,
          'Skeleton',
          () => du,
          'SkeletonHelper',
          () => hL,
          'SkinnedMesh',
          () => dp,
          'Source',
          () => aC,
          'Sphere',
          () => a4,
          'SphereGeometry',
          () => fx,
          'Spherical',
          () => ht,
          'SphericalHarmonics3',
          () => gA,
          'SplineCurve',
          () => e0,
          'SpotLight',
          () => gs,
          'SpotLightHelper',
          () => hH,
          'Sprite',
          () => da,
          'SpriteMaterial',
          () => cZ,
          'SrcAlphaFactor',
          () => 204,
          'SrcAlphaSaturateFactor',
          () => 210,
          'SrcColorFactor',
          () => 202,
          'StaticCopyUsage',
          () => 35046,
          'StaticDrawUsage',
          () => 35044,
          'StaticReadUsage',
          () => 35045,
          'StereoCamera',
          () => gR,
          'StreamCopyUsage',
          () => 35042,
          'StreamDrawUsage',
          () => 35040,
          'StreamReadUsage',
          () => 35041,
          'StringKeyframeTrack',
          () => f4,
          'SubtractEquation',
          () => 101,
          'SubtractiveBlending',
          () => 3,
          'TOUCH',
          () => F,
          'TangentSpaceNormalMap',
          () => 0,
          'TetrahedronGeometry',
          () => fy,
          'Texture',
          () => aG,
          'TextureLoader',
          () => gk,
          'TextureUtils',
          () => h9,
          'Timer',
          () => hr,
          'TimestampQuery',
          () => N,
          'TorusGeometry',
          () => fz,
          'TorusKnotGeometry',
          () => fA,
          'Triangle',
          () => bS,
          'TriangleFanDrawMode',
          () => 2,
          'TriangleStripDrawMode',
          () => 1,
          'TrianglesDrawMode',
          () => 0,
          'TubeGeometry',
          () => fB,
          'UVMapping',
          () => 300,
          'Uint16BufferAttribute',
          () => cc,
          'Uint32BufferAttribute',
          () => ce,
          'Uint8BufferAttribute',
          () => b9,
          'Uint8ClampedBufferAttribute',
          () => ca,
          'Uniform',
          () => hi,
          'UniformsGroup',
          () => hk,
          'UniformsLib',
          () => id,
          'UniformsUtils',
          () => cG,
          'UnsignedByteType',
          () => 1009,
          'UnsignedInt101111Type',
          () => 35899,
          'UnsignedInt248Type',
          () => 1020,
          'UnsignedInt5999Type',
          () => 35902,
          'UnsignedIntType',
          () => 1014,
          'UnsignedShort4444Type',
          () => 1017,
          'UnsignedShort5551Type',
          () => 1018,
          'UnsignedShortType',
          () => 1012,
          'VSMShadowMap',
          () => 3,
          'Vector2',
          () => ao,
          'Vector3',
          () => aq,
          'Vector4',
          () => aH,
          'VectorKeyframeTrack',
          () => f5,
          'VideoFrameTexture',
          () => eq,
          'VideoTexture',
          () => ep,
          'WebGL3DRenderTarget',
          () => aN,
          'WebGLArrayRenderTarget',
          () => aL,
          'WebGLCoordinateSystem',
          () => 2e3,
          'WebGLCubeRenderTarget',
          () => cP,
          'WebGLRenderTarget',
          () => aJ,
          'WebGLRenderer',
          () => kA,
          'WebGLUtils',
          () => kp,
          'WebGPUCoordinateSystem',
          () => 2001,
          'WebXRController',
          () => cS,
          'WireframeGeometry',
          () => fC,
          'WrapAroundEnding',
          () => 2402,
          'ZeroCurvatureEnding',
          () => 2400,
          'ZeroFactor',
          () => 200,
          'ZeroSlopeEnding',
          () => 2401,
          'ZeroStencilOp',
          () => 0,
          'createCanvasElement',
          () => V,
          'error',
          () => aa,
          'getConsoleFunction',
          () => Z,
          'log',
          () => $,
          'setConsoleFunction',
          () => Y,
          'warn',
          () => _,
          'warnOnce',
          () => ab,
        ],
        27383
      ));
    var lZ = a.i(27383);
    function l$(a, b) {
      let c;
      return (...d) => {
        (window.clearTimeout(c), (c = window.setTimeout(() => a(...d), b)));
      };
    }
    let l_ = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];
    function l0({
      ref: a,
      children: b,
      fallback: c,
      resize: d,
      style: e,
      gl: f,
      events: g = lY,
      eventSource: h,
      eventPrefix: i,
      shadows: j,
      linear: k,
      flat: l,
      legacy: m,
      orthographic: n,
      frameloop: o,
      dpr: p,
      performance: q,
      raycaster: r,
      camera: s,
      scene: t,
      onPointerMissed: u,
      onCreated: v,
      ...w
    }) {
      let x, A, B;
      z.useMemo(() => lu(lZ), []);
      let C =
          ((x = kP()),
          (A = (function () {
            let a = kP(),
              [b] = kK.useState(() => new Map());
            b.clear();
            let c = a;
            for (; c; ) {
              let a = c.type;
              (kR(a) && a !== kN && !b.has(a) && b.set(a, kK.use(kM(a))),
                (c = c.return));
            }
            return b;
          })()),
          (B = kK.useMemo(
            () =>
              Array.from(A.keys()).reduce(
                (a, b) => (c) =>
                  kK.createElement(
                    a,
                    null,
                    kK.createElement(b.Provider, { ...c, value: A.get(b) })
                  ),
                (a) => kK.createElement(kO, { ...a })
              ),
            [A]
          )),
          D.useMemo(
            () =>
              ({ children: a }) => {
                let b = kL(x, !0, (a) => a.type === D.StrictMode)
                  ? D.StrictMode
                  : D.Fragment;
                return (0, y.jsx)(b, {
                  children: (0, y.jsx)(B, { children: a }),
                });
              },
            [x, B]
          )),
        [E, F] = (function (
          { debounce: a, scroll: b, polyfill: c, offsetSize: d } = {
            debounce: 0,
            scroll: !1,
            offsetSize: !1,
          }
        ) {
          var e, f, g;
          let h = c || class {};
          if (!h)
            throw Error(
              'This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills'
            );
          let [i, j] = (0, z.useState)({
              left: 0,
              top: 0,
              width: 0,
              height: 0,
              bottom: 0,
              right: 0,
              x: 0,
              y: 0,
            }),
            k = (0, z.useRef)({
              element: null,
              scrollContainers: null,
              resizeObserver: null,
              lastBounds: i,
              orientationHandler: null,
            }),
            l = a ? ('number' == typeof a ? a : a.scroll) : null,
            m = a ? ('number' == typeof a ? a : a.resize) : null,
            n = (0, z.useRef)(!1);
          (0, z.useEffect)(
            () => ((n.current = !0), () => void (n.current = !1))
          );
          let [o, p, q] = (0, z.useMemo)(() => {
            let a = () => {
              let a, b;
              if (!k.current.element) return;
              let {
                  left: c,
                  top: e,
                  width: f,
                  height: g,
                  bottom: h,
                  right: i,
                  x: l,
                  y: m,
                } = k.current.element.getBoundingClientRect(),
                o = {
                  left: c,
                  top: e,
                  width: f,
                  height: g,
                  bottom: h,
                  right: i,
                  x: l,
                  y: m,
                };
              (k.current.element instanceof HTMLElement &&
                d &&
                ((o.height = k.current.element.offsetHeight),
                (o.width = k.current.element.offsetWidth)),
                Object.freeze(o),
                n.current &&
                  ((a = k.current.lastBounds),
                  (b = o),
                  !l_.every((c) => a[c] === b[c])) &&
                  j((k.current.lastBounds = o)));
            };
            return [a, m ? l$(a, m) : a, l ? l$(a, l) : a];
          }, [j, d, l, m]);
          function r() {
            (k.current.scrollContainers &&
              (k.current.scrollContainers.forEach((a) =>
                a.removeEventListener('scroll', q, !0)
              ),
              (k.current.scrollContainers = null)),
              k.current.resizeObserver &&
                (k.current.resizeObserver.disconnect(),
                (k.current.resizeObserver = null)),
              k.current.orientationHandler &&
                ('orientation' in screen &&
                'removeEventListener' in screen.orientation
                  ? screen.orientation.removeEventListener(
                      'change',
                      k.current.orientationHandler
                    )
                  : 'onorientationchange' in window &&
                    window.removeEventListener(
                      'orientationchange',
                      k.current.orientationHandler
                    )));
          }
          function s() {
            k.current.element &&
              ((k.current.resizeObserver = new h(q)),
              k.current.resizeObserver.observe(k.current.element),
              b &&
                k.current.scrollContainers &&
                k.current.scrollContainers.forEach((a) =>
                  a.addEventListener('scroll', q, { capture: !0, passive: !0 })
                ),
              (k.current.orientationHandler = () => {
                q();
              }),
              'orientation' in screen &&
              'addEventListener' in screen.orientation
                ? screen.orientation.addEventListener(
                    'change',
                    k.current.orientationHandler
                  )
                : 'onorientationchange' in window &&
                  window.addEventListener(
                    'orientationchange',
                    k.current.orientationHandler
                  ));
          }
          return (
            (e = q),
            (f = !!b),
            (0, z.useEffect)(() => {
              if (f)
                return (
                  window.addEventListener('scroll', e, {
                    capture: !0,
                    passive: !0,
                  }),
                  () => void window.removeEventListener('scroll', e, !0)
                );
            }, [e, f]),
            (g = p),
            (0, z.useEffect)(
              () => (
                window.addEventListener('resize', g),
                () => void window.removeEventListener('resize', g)
              ),
              [g]
            ),
            (0, z.useEffect)(() => {
              (r(), s());
            }, [b, q, p]),
            (0, z.useEffect)(() => r, []),
            [
              (a) => {
                a &&
                  a !== k.current.element &&
                  (r(),
                  (k.current.element = a),
                  (k.current.scrollContainers = (function a(b) {
                    let c = [];
                    if (!b || b === document.body) return c;
                    let {
                      overflow: d,
                      overflowX: e,
                      overflowY: f,
                    } = window.getComputedStyle(b);
                    return (
                      [d, e, f].some((a) => 'auto' === a || 'scroll' === a) &&
                        c.push(b),
                      [...c, ...a(b.parentElement)]
                    );
                  })(a)),
                  s());
              },
              i,
              o,
            ]
          );
        })({ scroll: !0, debounce: { scroll: 50, resize: 0 }, ...d }),
        G = z.useRef(null),
        H = z.useRef(null);
      z.useImperativeHandle(a, () => G.current);
      let K = kV(u),
        [L, M] = z.useState(!1),
        [N, O] = z.useState(!1);
      if (L) throw L;
      if (N) throw N;
      let P = z.useRef(null);
      (kU(() => {
        let a = G.current;
        if (F.width > 0 && F.height > 0 && a) {
          let c, d, e, u, w, x, A, B, E, G, L, N, Q, R, S;
          (P.current ||
            ((u = null == (e = lH.get(a)) ? void 0 : e.fiber),
            (w = null == e ? void 0 : e.store),
            e && console.warn('R3F.createRoot should only be called once!'),
            (x =
              'function' == typeof reportError ? reportError : console.error),
            (N =
              w ||
              ((E = (B = (A = kF((a, b) => {
                let c,
                  d = new aq(),
                  e = new aq(),
                  f = new aq();
                function g(a = b().camera, c = e, h = b().size) {
                  let { width: i, height: j, top: k, left: l } = h,
                    m = i / j;
                  c.isVector3 ? f.copy(c) : f.set(...c);
                  let n = a.getWorldPosition(d).distanceTo(f);
                  if (a && a.isOrthographicCamera)
                    return {
                      width: i / a.zoom,
                      height: j / a.zoom,
                      top: k,
                      left: l,
                      factor: 1,
                      distance: n,
                      aspect: m,
                    };
                  {
                    let b = 2 * Math.tan((a.fov * Math.PI) / 180 / 2) * n,
                      c = (i / j) * b;
                    return {
                      width: c,
                      height: b,
                      top: k,
                      left: l,
                      factor: i / c,
                      distance: n,
                      aspect: m,
                    };
                  }
                }
                let h = (b) =>
                    a((a) => ({
                      performance: { ...a.performance, current: b },
                    })),
                  i = new ao();
                return {
                  set: a,
                  get: b,
                  gl: null,
                  camera: null,
                  raycaster: null,
                  events: { priority: 1, enabled: !0, connected: !1 },
                  scene: null,
                  xr: null,
                  invalidate: (a = 1) => lV(b(), a),
                  advance: (a, c) => lW(a, c, b()),
                  legacy: !1,
                  linear: !1,
                  flat: !1,
                  controls: null,
                  clock: new gT(),
                  pointer: i,
                  mouse: i,
                  frameloop: 'always',
                  onPointerMissed: void 0,
                  performance: {
                    current: 1,
                    min: 0.5,
                    max: 1,
                    debounce: 200,
                    regress: () => {
                      let a = b();
                      (c && clearTimeout(c),
                        a.performance.current !== a.performance.min &&
                          h(a.performance.min),
                        (c = setTimeout(
                          () => h(b().performance.max),
                          a.performance.debounce
                        )));
                    },
                  },
                  size: { width: 0, height: 0, top: 0, left: 0 },
                  viewport: {
                    initialDpr: 0,
                    dpr: 0,
                    width: 0,
                    height: 0,
                    top: 0,
                    left: 0,
                    aspect: 0,
                    distance: 0,
                    factor: 0,
                    getCurrentViewport: g,
                  },
                  setEvents: (b) =>
                    a((a) => ({ ...a, events: { ...a.events, ...b } })),
                  setSize: (c, d, f = 0, h = 0) => {
                    let i = b().camera,
                      j = { width: c, height: d, top: f, left: h };
                    a((a) => ({
                      size: j,
                      viewport: { ...a.viewport, ...g(i, e, j) },
                    }));
                  },
                  setDpr: (b) =>
                    a((a) => {
                      let c = kY(b);
                      return {
                        viewport: {
                          ...a.viewport,
                          dpr: c,
                          initialDpr: a.viewport.initialDpr || c,
                        },
                      };
                    }),
                  setFrameloop: (c = 'always') => {
                    let d = b().clock;
                    (d.stop(),
                      (d.elapsedTime = 0),
                      'never' !== c && (d.start(), (d.elapsedTime = 0)),
                      a(() => ({ frameloop: c })));
                  },
                  previousRoot: void 0,
                  internal: {
                    interaction: [],
                    hovered: new Map(),
                    subscribers: [],
                    initialClick: [0, 0],
                    initialHits: [],
                    capturedMap: new Map(),
                    lastEvent: D.createRef(),
                    active: !1,
                    frames: 0,
                    priority: 0,
                    subscribe: (a, c, d) => {
                      let e = b().internal;
                      return (
                        (e.priority = e.priority + +(c > 0)),
                        e.subscribers.push({ ref: a, priority: c, store: d }),
                        (e.subscribers = e.subscribers.sort(
                          (a, b) => a.priority - b.priority
                        )),
                        () => {
                          let d = b().internal;
                          null != d &&
                            d.subscribers &&
                            ((d.priority = d.priority - (c > 0)),
                            (d.subscribers = d.subscribers.filter(
                              (b) => b.ref !== a
                            )));
                        }
                      );
                    },
                  },
                };
              })).getState()).size),
              (G = B.viewport.dpr),
              (L = B.camera),
              A.subscribe(() => {
                let {
                  camera: a,
                  size: b,
                  viewport: c,
                  gl: d,
                  set: e,
                } = A.getState();
                if (
                  b.width !== E.width ||
                  b.height !== E.height ||
                  c.dpr !== G
                ) {
                  ((E = b),
                    (G = c.dpr),
                    lb(a, b),
                    c.dpr > 0 && d.setPixelRatio(c.dpr));
                  let e =
                    'u' > typeof HTMLCanvasElement &&
                    d.domElement instanceof HTMLCanvasElement;
                  d.setSize(b.width, b.height, e);
                }
                a !== L &&
                  ((L = a),
                  e((b) => ({
                    viewport: {
                      ...b.viewport,
                      ...b.viewport.getCurrentViewport(a),
                    },
                  })));
              }),
              A.subscribe((a) => lV(a)),
              A)),
            (Q =
              u || lG.createContainer(N, 1, null, !1, null, '', x, x, x, null)),
            e || lH.set(a, { fiber: Q, store: N }),
            (R = !1),
            (S = null),
            (P.current = {
              async configure(b = {}) {
                var e, f;
                let g;
                S = new Promise((a) => (g = a));
                let {
                    gl: h,
                    size: i,
                    scene: j,
                    events: k,
                    onCreated: l,
                    shadows: m = !1,
                    linear: n = !1,
                    flat: o = !1,
                    legacy: p = !1,
                    orthographic: q = !1,
                    frameloop: r = 'always',
                    dpr: s = [1, 2],
                    performance: t,
                    raycaster: u,
                    camera: v,
                    onPointerMissed: w,
                  } = b,
                  x = N.getState(),
                  y = x.gl;
                if (!x.gl) {
                  let b = {
                      canvas: a,
                      powerPreference: 'high-performance',
                      antialias: !0,
                      alpha: !0,
                    },
                    c = 'function' == typeof h ? await h(b) : h;
                  ((y = lf(c) ? c : new kA({ ...b, ...h })), x.set({ gl: y }));
                }
                let z = x.raycaster;
                z || x.set({ raycaster: (z = new ho()) });
                let { params: A, ...B } = u || {};
                if (
                  (k$.equ(B, z, lI) || k9(z, { ...B }),
                  k$.equ(A, z.params, lI) ||
                    k9(z, { params: { ...z.params, ...A } }),
                  !x.camera || (x.camera === d && !k$.equ(d, v, lI)))
                ) {
                  d = v;
                  let a = null == v ? void 0 : v.isCamera,
                    b = a
                      ? v
                      : q
                        ? new gv(0, 0, 0, 0, 0.1, 1e3)
                        : new cM(75, 0, 0.1, 1e3);
                  (!a &&
                    ((b.position.z = 5),
                    v &&
                      (k9(b, v),
                      !b.manual &&
                        ('aspect' in v ||
                          'left' in v ||
                          'right' in v ||
                          'bottom' in v ||
                          'top' in v) &&
                        ((b.manual = !0), b.updateProjectionMatrix())),
                    x.camera || (null != v && v.rotation) || b.lookAt(0, 0, 0)),
                    x.set({ camera: b }),
                    (z.camera = b));
                }
                if (!x.scene) {
                  let a;
                  (null != j && j.isScene
                    ? k0((a = j), N, '', {})
                    : (k0((a = new cV()), N, '', {}), j && k9(a, j)),
                    x.set({ scene: a }));
                }
                k && !x.events.handlers && x.set({ events: k(N) });
                let C = (function (a, b) {
                  if (
                    !b &&
                    'u' > typeof HTMLCanvasElement &&
                    a instanceof HTMLCanvasElement &&
                    a.parentElement
                  ) {
                    let {
                      width: b,
                      height: c,
                      top: d,
                      left: e,
                    } = a.parentElement.getBoundingClientRect();
                    return { width: b, height: c, top: d, left: e };
                  }
                  return !b &&
                    'u' > typeof OffscreenCanvas &&
                    a instanceof OffscreenCanvas
                    ? { width: a.width, height: a.height, top: 0, left: 0 }
                    : { width: 0, height: 0, top: 0, left: 0, ...b };
                })(a, i);
                if (
                  (k$.equ(C, x.size, lI) ||
                    x.setSize(C.width, C.height, C.top, C.left),
                  s && x.viewport.dpr !== kY(s) && x.setDpr(s),
                  x.frameloop !== r && x.setFrameloop(r),
                  x.onPointerMissed || x.set({ onPointerMissed: w }),
                  t &&
                    !k$.equ(t, x.performance, lI) &&
                    x.set((a) => ({ performance: { ...a.performance, ...t } })),
                  !x.xr)
                ) {
                  let a = (a, b) => {
                      let c = N.getState();
                      'never' !== c.frameloop && lW(a, !0, c, b);
                    },
                    b = () => {
                      let b = N.getState();
                      ((b.gl.xr.enabled = b.gl.xr.isPresenting),
                        b.gl.xr.setAnimationLoop(
                          b.gl.xr.isPresenting ? a : null
                        ),
                        b.gl.xr.isPresenting || lV(b));
                    },
                    c = {
                      connect() {
                        let a = N.getState().gl;
                        (a.xr.addEventListener('sessionstart', b),
                          a.xr.addEventListener('sessionend', b));
                      },
                      disconnect() {
                        let a = N.getState().gl;
                        (a.xr.removeEventListener('sessionstart', b),
                          a.xr.removeEventListener('sessionend', b));
                      },
                    };
                  ('function' ==
                    typeof (null == (e = y.xr) ? void 0 : e.addEventListener) &&
                    c.connect(),
                    x.set({ xr: c }));
                }
                if (y.shadowMap) {
                  let a = y.shadowMap.enabled,
                    b = y.shadowMap.type;
                  ((y.shadowMap.enabled = !!m),
                    k$.boo(m)
                      ? (y.shadowMap.type = 2)
                      : k$.str(m)
                        ? (y.shadowMap.type =
                            null !=
                            (f = {
                              basic: 0,
                              percentage: 1,
                              soft: 2,
                              variance: 3,
                            }[m])
                              ? f
                              : 2)
                        : k$.obj(m) && Object.assign(y.shadowMap, m),
                    (a !== y.shadowMap.enabled || b !== y.shadowMap.type) &&
                      (y.shadowMap.needsUpdate = !0));
                }
                return (
                  (ax.enabled = !p),
                  R ||
                    ((y.outputColorSpace = n ? J : I),
                    (y.toneMapping = 4 * !o)),
                  x.legacy !== p && x.set(() => ({ legacy: p })),
                  x.linear !== n && x.set(() => ({ linear: n })),
                  x.flat !== o && x.set(() => ({ flat: o })),
                  !h || k$.fun(h) || lf(h) || k$.equ(h, y, lI) || k9(y, h),
                  (c = l),
                  (R = !0),
                  g(),
                  this
                );
              },
              render(b) {
                return (
                  R || S || this.configure(),
                  S.then(() => {
                    lG.updateContainer(
                      (0, y.jsx)(lJ, {
                        store: N,
                        children: b,
                        onCreated: c,
                        rootElement: a,
                      }),
                      Q,
                      null,
                      () => void 0
                    );
                  }),
                  N
                );
              },
              unmount() {
                lK(a);
              },
            })),
            (async function () {
              (await P.current.configure({
                gl: f,
                scene: t,
                events: g,
                shadows: j,
                linear: k,
                flat: l,
                legacy: m,
                orthographic: n,
                frameloop: o,
                dpr: p,
                performance: q,
                raycaster: r,
                camera: s,
                size: F,
                onPointerMissed: (...a) =>
                  null == K.current ? void 0 : K.current(...a),
                onCreated: (a) => {
                  (null == a.events.connect ||
                    a.events.connect(
                      h
                        ? h && h.hasOwnProperty('current')
                          ? h.current
                          : h
                        : H.current
                    ),
                    i &&
                      a.setEvents({
                        compute: (a, b) => {
                          let c = a[i + 'X'],
                            d = a[i + 'Y'];
                          (b.pointer.set(
                            (c / b.size.width) * 2 - 1,
                            -(2 * (d / b.size.height)) + 1
                          ),
                            b.raycaster.setFromCamera(b.pointer, b.camera));
                        },
                      }),
                    null == v || v(a));
                },
              }),
                P.current.render(
                  (0, y.jsx)(C, {
                    children: (0, y.jsx)(kX, {
                      set: O,
                      children: (0, y.jsx)(z.Suspense, {
                        fallback: (0, y.jsx)(kW, { set: M }),
                        children: null != b ? b : null,
                      }),
                    }),
                  })
                ));
            })());
        }
      }),
        z.useEffect(() => {
          let a = G.current;
          if (a) return () => lK(a);
        }, []));
      let Q = h ? 'none' : 'auto';
      return (0, y.jsx)('div', {
        ref: H,
        style: {
          position: 'relative',
          width: '100%',
          height: '100%',
          overflow: 'hidden',
          pointerEvents: Q,
          ...e,
        },
        ...w,
        children: (0, y.jsx)('div', {
          ref: E,
          style: { width: '100%', height: '100%' },
          children: (0, y.jsx)('canvas', {
            ref: G,
            style: { display: 'block' },
            children: c,
          }),
        }),
      });
    }
    function l1(a) {
      return (0, y.jsx)(kO, { children: (0, y.jsx)(l0, { ...a }) });
    }
    function l2() {
      return (l2 = Object.assign.bind()).apply(null, arguments);
    }
    let l3 = parseInt('182'.replace(/\D+/g, ''));
    class l4 extends cA {
      constructor(a, b) {
        var c, d;
        const e = ((a) => a && a.isCubeTexture)(a),
          f = Math.floor(
            Math.log2(
              (null !=
              (d = e
                ? null == (c = a.image[0])
                  ? void 0
                  : c.width
                : a.image.width)
                ? d
                : 1024) / 4
            )
          ),
          g = Math.pow(2, f),
          h = 3 * Math.max(g, 112),
          i = `
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,
          j =
            [
              e ? '#define ENVMAP_TYPE_CUBE' : '',
              `#define CUBEUV_TEXEL_WIDTH ${1 / h}`,
              `#define CUBEUV_TEXEL_HEIGHT ${1 / (4 * g)}`,
              `#define CUBEUV_MAX_MIP ${f}.0`,
            ].join('\n') +
            `
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${l3 >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>
        }
        `,
          k = {
            map: { value: a },
            height: { value: (null == b ? void 0 : b.height) || 15 },
            radius: { value: (null == b ? void 0 : b.radius) || 100 },
          };
        super(
          new fr(1, 16),
          new cH({ uniforms: k, fragmentShader: j, vertexShader: i, side: 2 })
        );
      }
      set radius(a) {
        this.material.uniforms.radius.value = a;
      }
      get radius() {
        return this.material.uniforms.radius.value;
      }
      set height(a) {
        this.material.uniforms.height.value = a;
      }
      get height() {
        return this.material.uniforms.height.value;
      }
    }
    class l5 extends gj {
      constructor(a) {
        (super(a), (this.type = 1016));
      }
      parse(a) {
        let b,
          c,
          d,
          e = function (a, b) {
            switch (a) {
              case 1:
                throw Error('THREE.RGBELoader: Read Error: ' + (b || ''));
              case 2:
                throw Error('THREE.RGBELoader: Write Error: ' + (b || ''));
              case 3:
                throw Error('THREE.RGBELoader: Bad File Format: ' + (b || ''));
              default:
                throw Error('THREE.RGBELoader: Memory Error: ' + (b || ''));
            }
          },
          f = function (a, b, c) {
            b = b || 1024;
            let d = a.pos,
              e = -1,
              f = 0,
              g = '',
              h = String.fromCharCode.apply(
                null,
                new Uint16Array(a.subarray(d, d + 128))
              );
            for (; 0 > (e = h.indexOf('\n')) && f < b && d < a.byteLength; )
              ((g += h),
                (f += h.length),
                (d += 128),
                (h += String.fromCharCode.apply(
                  null,
                  new Uint16Array(a.subarray(d, d + 128))
                )));
            return (
              -1 < e && (!1 !== c && (a.pos += f + e + 1), g + h.slice(0, e))
            );
          },
          g = new Uint8Array(a);
        g.pos = 0;
        let h = (function (a) {
            let b,
              c,
              d = /^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,
              g = /^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,
              h = /^\s*FORMAT=(\S+)\s*$/,
              i = /^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,
              j = {
                valid: 0,
                string: '',
                comments: '',
                programtype: 'RGBE',
                format: '',
                gamma: 1,
                exposure: 1,
                width: 0,
                height: 0,
              };
            for (
              (!(a.pos >= a.byteLength) && (b = f(a))) ||
                e(1, 'no header found'),
                (c = b.match(/^#\?(\S+)/)) || e(3, 'bad initial token'),
                j.valid |= 1,
                j.programtype = c[1],
                j.string += b + '\n';
              !1 !== (b = f(a));
            ) {
              if (((j.string += b + '\n'), '#' === b.charAt(0))) {
                j.comments += b + '\n';
                continue;
              }
              if (
                ((c = b.match(d)) && (j.gamma = parseFloat(c[1])),
                (c = b.match(g)) && (j.exposure = parseFloat(c[1])),
                (c = b.match(h)) && ((j.valid |= 2), (j.format = c[1])),
                (c = b.match(i)) &&
                  ((j.valid |= 4),
                  (j.height = parseInt(c[1], 10)),
                  (j.width = parseInt(c[2], 10))),
                2 & j.valid && 4 & j.valid)
              )
                break;
            }
            return (
              2 & j.valid || e(3, 'missing format specifier'),
              4 & j.valid || e(3, 'missing image size specifier'),
              j
            );
          })(g),
          i = h.width,
          j = h.height,
          k = (function (a, b, c) {
            if (b < 8 || b > 32767 || 2 !== a[0] || 2 !== a[1] || 128 & a[2])
              return new Uint8Array(a);
            b !== ((a[2] << 8) | a[3]) && e(3, 'wrong scanline width');
            let d = new Uint8Array(4 * b * c);
            d.length || e(4, 'unable to allocate buffer space');
            let f = 0,
              g = 0,
              h = 4 * b,
              i = new Uint8Array(4),
              j = new Uint8Array(h),
              k = c;
            for (; k > 0 && g < a.byteLength; ) {
              (g + 4 > a.byteLength && e(1),
                (i[0] = a[g++]),
                (i[1] = a[g++]),
                (i[2] = a[g++]),
                (i[3] = a[g++]),
                (2 != i[0] || 2 != i[1] || ((i[2] << 8) | i[3]) != b) &&
                  e(3, 'bad rgbe scanline format'));
              let c = 0,
                l;
              for (; c < h && g < a.byteLength; ) {
                let b = (l = a[g++]) > 128;
                if (
                  (b && (l -= 128),
                  (0 === l || c + l > h) && e(3, 'bad scanline data'),
                  b)
                ) {
                  let b = a[g++];
                  for (let a = 0; a < l; a++) j[c++] = b;
                } else (j.set(a.subarray(g, g + l), c), (c += l), (g += l));
              }
              for (let a = 0; a < b; a++) {
                let c = 0;
                ((d[f] = j[a + c]),
                  (c += b),
                  (d[f + 1] = j[a + c]),
                  (c += b),
                  (d[f + 2] = j[a + c]),
                  (c += b),
                  (d[f + 3] = j[a + c]),
                  (f += 4));
              }
              k--;
            }
            return d;
          })(g.subarray(g.pos), i, j);
        switch (this.type) {
          case 1015:
            let l = new Float32Array(4 * (d = k.length / 4));
            for (let a = 0; a < d; a++)
              !(function (a, b, c, d) {
                let e = Math.pow(2, a[b + 3] - 128) / 255;
                ((c[d + 0] = a[b + 0] * e),
                  (c[d + 1] = a[b + 1] * e),
                  (c[d + 2] = a[b + 2] * e),
                  (c[d + 3] = 1));
              })(k, 4 * a, l, 4 * a);
            ((b = l), (c = 1015));
            break;
          case 1016:
            let m = new Uint16Array(4 * (d = k.length / 4));
            for (let a = 0; a < d; a++)
              !(function (a, b, c, d) {
                let e = Math.pow(2, a[b + 3] - 128) / 255;
                ((c[d + 0] = b3.toHalfFloat(Math.min(a[b + 0] * e, 65504))),
                  (c[d + 1] = b3.toHalfFloat(Math.min(a[b + 1] * e, 65504))),
                  (c[d + 2] = b3.toHalfFloat(Math.min(a[b + 2] * e, 65504))),
                  (c[d + 3] = b3.toHalfFloat(1)));
              })(k, 4 * a, m, 4 * a);
            ((b = m), (c = 1016));
            break;
          default:
            throw Error('THREE.RGBELoader: Unsupported type: ' + this.type);
        }
        return {
          width: i,
          height: j,
          data: b,
          header: h.string,
          gamma: h.gamma,
          exposure: h.exposure,
          type: c,
        };
      }
      setDataType(a) {
        return ((this.type = a), this);
      }
      load(a, b, c, d) {
        return super.load(
          a,
          function (a, c) {
            switch (a.type) {
              case 1015:
              case 1016:
                ('colorSpace' in a
                  ? (a.colorSpace = 'srgb-linear')
                  : (a.encoding = 3e3),
                  (a.minFilter = 1006),
                  (a.magFilter = 1006),
                  (a.generateMipmaps = !1),
                  (a.flipY = !0));
            }
            b && b(a, c);
          },
          c,
          d
        );
      }
    }
    var l6 = (0, a.i(62562).createRequire)('/');
    try {
      x = l6('worker_threads').Worker;
    } catch (a) {}
    var l7 = x
        ? function (a, b, c, d, e) {
            var f = !1,
              g = new x(
                a +
                  ";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global",
                { eval: !0 }
              )
                .on('error', function (a) {
                  return e(a, null);
                })
                .on('message', function (a) {
                  return e(null, a);
                })
                .on('exit', function (a) {
                  a && !f && e(Error('exited with code ' + a), null);
                });
            return (
              g.postMessage(c, d),
              (g.terminate = function () {
                return ((f = !0), x.prototype.terminate.call(g));
              }),
              g
            );
          }
        : function (a, b, c, d, e) {
            setImmediate(function () {
              return e(
                Error(
                  'async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)'
                ),
                null
              );
            });
            var f = function () {};
            return { terminate: f, postMessage: f };
          },
      l8 = Uint8Array,
      l9 = Uint16Array,
      ma = Uint32Array,
      mb = new l8([
        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4,
        5, 5, 5, 5, 0, 0, 0, 0,
      ]),
      mc = new l8([
        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10,
        10, 11, 11, 12, 12, 13, 13, 0, 0,
      ]),
      md = new l8([
        16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
      ]),
      me = function (a, b) {
        for (var c = new l9(31), d = 0; d < 31; ++d) c[d] = b += 1 << a[d - 1];
        for (var e = new ma(c[30]), d = 1; d < 30; ++d)
          for (var f = c[d]; f < c[d + 1]; ++f) e[f] = ((f - c[d]) << 5) | d;
        return [c, e];
      },
      mf = me(mb, 2),
      mg = mf[0],
      mh = mf[1];
    ((mg[28] = 258), (mh[258] = 28));
    for (
      var mi = me(mc, 0), mj = mi[0], mk = mi[1], ml = new l9(32768), mm = 0;
      mm < 32768;
      ++mm
    ) {
      var mn = ((43690 & mm) >>> 1) | ((21845 & mm) << 1);
      ((mn =
        ((61680 & (mn = ((52428 & mn) >>> 2) | ((13107 & mn) << 2))) >>> 4) |
        ((3855 & mn) << 4)),
        (ml[mm] = (((65280 & mn) >>> 8) | ((255 & mn) << 8)) >>> 1));
    }
    for (
      var mo = function (a, b, c) {
          for (var d, e = a.length, f = 0, g = new l9(b); f < e; ++f)
            ++g[a[f] - 1];
          var h = new l9(b);
          for (f = 0; f < b; ++f) h[f] = (h[f - 1] + g[f - 1]) << 1;
          if (c) {
            d = new l9(1 << b);
            var i = 15 - b;
            for (f = 0; f < e; ++f)
              if (a[f])
                for (
                  var j = (f << 4) | a[f],
                    k = b - a[f],
                    l = h[a[f] - 1]++ << k,
                    m = l | ((1 << k) - 1);
                  l <= m;
                  ++l
                )
                  d[ml[l] >>> i] = j;
          } else
            for (f = 0, d = new l9(e); f < e; ++f)
              a[f] && (d[f] = ml[h[a[f] - 1]++] >>> (15 - a[f]));
          return d;
        },
        mp = new l8(288),
        mm = 0;
      mm < 144;
      ++mm
    )
      mp[mm] = 8;
    for (var mm = 144; mm < 256; ++mm) mp[mm] = 9;
    for (var mm = 256; mm < 280; ++mm) mp[mm] = 7;
    for (var mm = 280; mm < 288; ++mm) mp[mm] = 8;
    for (var mq = new l8(32), mm = 0; mm < 32; ++mm) mq[mm] = 5;
    var mr = mo(mp, 9, 0),
      ms = mo(mp, 9, 1),
      mt = mo(mq, 5, 0),
      mu = mo(mq, 5, 1),
      mv = function (a) {
        for (var b = a[0], c = 1; c < a.length; ++c) a[c] > b && (b = a[c]);
        return b;
      },
      mw = function (a, b, c) {
        var d = (b / 8) | 0;
        return ((a[d] | (a[d + 1] << 8)) >> (7 & b)) & c;
      },
      mx = function (a, b) {
        var c = (b / 8) | 0;
        return (a[c] | (a[c + 1] << 8) | (a[c + 2] << 16)) >> (7 & b);
      },
      my = function (a) {
        return ((a / 8) | 0) + (7 & a && 1);
      },
      mz = function (a, b, c) {
        ((null == b || b < 0) && (b = 0),
          (null == c || c > a.length) && (c = a.length));
        var d = new (a instanceof l9 ? l9 : a instanceof ma ? ma : l8)(c - b);
        return (d.set(a.subarray(b, c)), d);
      },
      mA = function (a, b, c) {
        var d = a.length;
        if (!d || (c && !c.l && d < 5)) return b || new l8(0);
        var e = !b || c,
          f = !c || c.i;
        (c || (c = {}), b || (b = new l8(3 * d)));
        var g = function (a) {
            var c = b.length;
            if (a > c) {
              var d = new l8(Math.max(2 * c, a));
              (d.set(b), (b = d));
            }
          },
          h = c.f || 0,
          i = c.p || 0,
          j = c.b || 0,
          k = c.l,
          l = c.d,
          m = c.m,
          n = c.n,
          o = 8 * d;
        do {
          if (!k) {
            c.f = h = mw(a, i, 1);
            var p = mw(a, i + 1, 3);
            if (((i += 3), p))
              if (1 == p) ((k = ms), (l = mu), (m = 9), (n = 5));
              else if (2 == p) {
                var q = mw(a, i, 31) + 257,
                  r = mw(a, i + 10, 15) + 4,
                  s = q + mw(a, i + 5, 31) + 1;
                i += 14;
                for (var t = new l8(s), u = new l8(19), v = 0; v < r; ++v)
                  u[md[v]] = mw(a, i + 3 * v, 7);
                i += 3 * r;
                for (
                  var w = mv(u), x = (1 << w) - 1, y = mo(u, w, 1), v = 0;
                  v < s;
                ) {
                  var z = y[mw(a, i, x)];
                  i += 15 & z;
                  var A = z >>> 4;
                  if (A < 16) t[v++] = A;
                  else {
                    var B = 0,
                      C = 0;
                    for (
                      16 == A
                        ? ((C = 3 + mw(a, i, 3)), (i += 2), (B = t[v - 1]))
                        : 17 == A
                          ? ((C = 3 + mw(a, i, 7)), (i += 3))
                          : 18 == A && ((C = 11 + mw(a, i, 127)), (i += 7));
                      C--;
                    )
                      t[v++] = B;
                  }
                }
                var D = t.subarray(0, q),
                  E = t.subarray(q);
                ((m = mv(D)),
                  (n = mv(E)),
                  (k = mo(D, m, 1)),
                  (l = mo(E, n, 1)));
              } else throw 'invalid block type';
            else {
              var A = my(i) + 4,
                F = a[A - 4] | (a[A - 3] << 8),
                G = A + F;
              if (G > d) {
                if (f) throw 'unexpected EOF';
                break;
              }
              (e && g(j + F),
                b.set(a.subarray(A, G), j),
                (c.b = j += F),
                (c.p = i = 8 * G));
              continue;
            }
            if (i > o) {
              if (f) throw 'unexpected EOF';
              break;
            }
          }
          e && g(j + 131072);
          for (var H = (1 << m) - 1, I = (1 << n) - 1, J = i; ; J = i) {
            var B = k[mx(a, i) & H],
              K = B >>> 4;
            if ((i += 15 & B) > o) {
              if (f) throw 'unexpected EOF';
              break;
            }
            if (!B) throw 'invalid length/literal';
            if (K < 256) b[j++] = K;
            else if (256 == K) {
              ((J = i), (k = null));
              break;
            } else {
              var L = K - 254;
              if (K > 264) {
                var v = K - 257,
                  M = mb[v];
                ((L = mw(a, i, (1 << M) - 1) + mg[v]), (i += M));
              }
              var N = l[mx(a, i) & I],
                O = N >>> 4;
              if (!N) throw 'invalid distance';
              i += 15 & N;
              var E = mj[O];
              if (O > 3) {
                var M = mc[O];
                ((E += mx(a, i) & ((1 << M) - 1)), (i += M));
              }
              if (i > o) {
                if (f) throw 'unexpected EOF';
                break;
              }
              e && g(j + 131072);
              for (var P = j + L; j < P; j += 4)
                ((b[j] = b[j - E]),
                  (b[j + 1] = b[j + 1 - E]),
                  (b[j + 2] = b[j + 2 - E]),
                  (b[j + 3] = b[j + 3 - E]));
              j = P;
            }
          }
          ((c.l = k),
            (c.p = J),
            (c.b = j),
            k && ((h = 1), (c.m = m), (c.d = l), (c.n = n)));
        } while (!h);
        return j == b.length ? b : mz(b, 0, j);
      },
      mB = function (a, b, c) {
        c <<= 7 & b;
        var d = (b / 8) | 0;
        ((a[d] |= c), (a[d + 1] |= c >>> 8));
      },
      mC = function (a, b, c) {
        c <<= 7 & b;
        var d = (b / 8) | 0;
        ((a[d] |= c), (a[d + 1] |= c >>> 8), (a[d + 2] |= c >>> 16));
      },
      mD = function (a, b) {
        for (var c = [], d = 0; d < a.length; ++d)
          a[d] && c.push({ s: d, f: a[d] });
        var e = c.length,
          f = c.slice();
        if (!e) return [mK, 0];
        if (1 == e) {
          var g = new l8(c[0].s + 1);
          return ((g[c[0].s] = 1), [g, 1]);
        }
        (c.sort(function (a, b) {
          return a.f - b.f;
        }),
          c.push({ s: -1, f: 25001 }));
        var h = c[0],
          i = c[1],
          j = 0,
          k = 1,
          l = 2;
        for (c[0] = { s: -1, f: h.f + i.f, l: h, r: i }; k != e - 1; )
          ((h = c[c[j].f < c[l].f ? j++ : l++]),
            (i = c[j != k && c[j].f < c[l].f ? j++ : l++]),
            (c[k++] = { s: -1, f: h.f + i.f, l: h, r: i }));
        for (var m = f[0].s, d = 1; d < e; ++d) f[d].s > m && (m = f[d].s);
        var n = new l9(m + 1),
          o = mE(c[k - 1], n, 0);
        if (o > b) {
          var d = 0,
            p = 0,
            q = o - b,
            r = 1 << q;
          for (
            f.sort(function (a, b) {
              return n[b.s] - n[a.s] || a.f - b.f;
            });
            d < e;
            ++d
          ) {
            var s = f[d].s;
            if (n[s] > b) ((p += r - (1 << (o - n[s]))), (n[s] = b));
            else break;
          }
          for (p >>>= q; p > 0; ) {
            var t = f[d].s;
            n[t] < b ? (p -= 1 << (b - n[t]++ - 1)) : ++d;
          }
          for (; d >= 0 && p; --d) {
            var u = f[d].s;
            n[u] == b && (--n[u], ++p);
          }
          o = b;
        }
        return [new l8(n), o];
      },
      mE = function (a, b, c) {
        return -1 == a.s
          ? Math.max(mE(a.l, b, c + 1), mE(a.r, b, c + 1))
          : (b[a.s] = c);
      },
      mF = function (a) {
        for (var b = a.length; b && !a[--b]; );
        for (
          var c = new l9(++b),
            d = 0,
            e = a[0],
            f = 1,
            g = function (a) {
              c[d++] = a;
            },
            h = 1;
          h <= b;
          ++h
        )
          if (a[h] == e && h != b) ++f;
          else {
            if (!e && f > 2) {
              for (; f > 138; f -= 138) g(32754);
              f > 2 &&
                (g(f > 10 ? ((f - 11) << 5) | 28690 : ((f - 3) << 5) | 12305),
                (f = 0));
            } else if (f > 3) {
              for (g(e), --f; f > 6; f -= 6) g(8304);
              f > 2 && (g(((f - 3) << 5) | 8208), (f = 0));
            }
            for (; f--; ) g(e);
            ((f = 1), (e = a[h]));
          }
        return [c.subarray(0, d), b];
      },
      mG = function (a, b) {
        for (var c = 0, d = 0; d < b.length; ++d) c += a[d] * b[d];
        return c;
      },
      mH = function (a, b, c) {
        var d = c.length,
          e = my(b + 2);
        ((a[e] = 255 & d),
          (a[e + 1] = d >>> 8),
          (a[e + 2] = 255 ^ a[e]),
          (a[e + 3] = 255 ^ a[e + 1]));
        for (var f = 0; f < d; ++f) a[e + f + 4] = c[f];
        return (e + 4 + d) * 8;
      },
      mI = function (a, b, c, d, e, f, g, h, i, j, k) {
        (mB(b, k++, c), ++e[256]);
        for (
          var l,
            m,
            n,
            o,
            p = mD(e, 15),
            q = p[0],
            r = p[1],
            s = mD(f, 15),
            t = s[0],
            u = s[1],
            v = mF(q),
            w = v[0],
            x = v[1],
            y = mF(t),
            z = y[0],
            A = y[1],
            B = new l9(19),
            C = 0;
          C < w.length;
          ++C
        )
          B[31 & w[C]]++;
        for (var C = 0; C < z.length; ++C) B[31 & z[C]]++;
        for (
          var D = mD(B, 7), E = D[0], F = D[1], G = 19;
          G > 4 && !E[md[G - 1]];
          --G
        );
        var H = (j + 5) << 3,
          I = mG(e, mp) + mG(f, mq) + g,
          J =
            mG(e, q) +
            mG(f, t) +
            g +
            14 +
            3 * G +
            mG(B, E) +
            (2 * B[16] + 3 * B[17] + 7 * B[18]);
        if (H <= I && H <= J) return mH(b, k, a.subarray(i, i + j));
        if ((mB(b, k, 1 + (J < I)), (k += 2), J < I)) {
          ((l = mo(q, r, 0)), (m = q), (n = mo(t, u, 0)), (o = t));
          var K = mo(E, F, 0);
          (mB(b, k, x - 257),
            mB(b, k + 5, A - 1),
            mB(b, k + 10, G - 4),
            (k += 14));
          for (var C = 0; C < G; ++C) mB(b, k + 3 * C, E[md[C]]);
          k += 3 * G;
          for (var L = [w, z], M = 0; M < 2; ++M)
            for (var N = L[M], C = 0; C < N.length; ++C) {
              var O = 31 & N[C];
              (mB(b, k, K[O]),
                (k += E[O]),
                O > 15 && (mB(b, k, (N[C] >>> 5) & 127), (k += N[C] >>> 12)));
            }
        } else ((l = mr), (m = mp), (n = mt), (o = mq));
        for (var C = 0; C < h; ++C)
          if (d[C] > 255) {
            var O = (d[C] >>> 18) & 31;
            (mC(b, k, l[O + 257]),
              (k += m[O + 257]),
              O > 7 && (mB(b, k, (d[C] >>> 23) & 31), (k += mb[O])));
            var P = 31 & d[C];
            (mC(b, k, n[P]),
              (k += o[P]),
              P > 3 && (mC(b, k, (d[C] >>> 5) & 8191), (k += mc[P])));
          } else (mC(b, k, l[d[C]]), (k += m[d[C]]));
        return (mC(b, k, l[256]), k + m[256]);
      },
      mJ = new ma([
        65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560,
        2117632,
      ]),
      mK = new l8(0),
      mL = function (a, b, c, d, e, f) {
        var g = a.length,
          h = new l8(d + g + 5 * (1 + Math.ceil(g / 7e3)) + e),
          i = h.subarray(d, h.length - e),
          j = 0;
        if (!b || g < 8)
          for (var k = 0; k <= g; k += 65535) {
            var l = k + 65535;
            l < g
              ? (j = mH(i, j, a.subarray(k, l)))
              : ((i[k] = f), (j = mH(i, j, a.subarray(k, g))));
          }
        else {
          for (
            var m = mJ[b - 1],
              n = m >>> 13,
              o = 8191 & m,
              p = (1 << c) - 1,
              q = new l9(32768),
              r = new l9(p + 1),
              s = Math.ceil(c / 3),
              t = 2 * s,
              u = function (b) {
                return (a[b] ^ (a[b + 1] << s) ^ (a[b + 2] << t)) & p;
              },
              v = new ma(25e3),
              w = new l9(288),
              x = new l9(32),
              y = 0,
              z = 0,
              k = 0,
              A = 0,
              B = 0,
              C = 0;
            k < g;
            ++k
          ) {
            var D = u(k),
              E = 32767 & k,
              F = r[D];
            if (((q[E] = F), (r[D] = E), B <= k)) {
              var G = g - k;
              if ((y > 7e3 || A > 24576) && G > 423) {
                ((j = mI(a, i, 0, v, w, x, z, A, C, k - C, j)),
                  (A = y = z = 0),
                  (C = k));
                for (var H = 0; H < 286; ++H) w[H] = 0;
                for (var H = 0; H < 30; ++H) x[H] = 0;
              }
              var I = 2,
                J = 0,
                K = o,
                L = (E - F) & 32767;
              if (G > 2 && D == u(k - L))
                for (
                  var M = Math.min(n, G) - 1,
                    N = Math.min(32767, k),
                    O = Math.min(258, G);
                  L <= N && --K && E != F;
                ) {
                  if (a[k + I] == a[k + I - L]) {
                    for (var P = 0; P < O && a[k + P] == a[k + P - L]; ++P);
                    if (P > I) {
                      if (((I = P), (J = L), P > M)) break;
                      for (
                        var Q = Math.min(L, P - 2), R = 0, H = 0;
                        H < Q;
                        ++H
                      ) {
                        var S = (k - L + H + 32768) & 32767,
                          T = q[S],
                          U = (S - T + 32768) & 32767;
                        U > R && ((R = U), (F = S));
                      }
                    }
                  }
                  ((F = q[(E = F)]), (L += (E - F + 32768) & 32767));
                }
              if (J) {
                v[A++] = 0x10000000 | (mh[I] << 18) | mk[J];
                var V = 31 & mh[I],
                  W = 31 & mk[J];
                ((z += mb[V] + mc[W]), ++w[257 + V], ++x[W], (B = k + I), ++y);
              } else ((v[A++] = a[k]), ++w[a[k]]);
            }
          }
          ((j = mI(a, i, f, v, w, x, z, A, C, k - C, j)),
            !f && 7 & j && (j = mH(i, j + 1, mK)));
        }
        return mz(h, 0, d + my(j) + e);
      },
      mM = (function () {
        for (var a = new Int32Array(256), b = 0; b < 256; ++b) {
          for (var c = b, d = 9; --d; ) c = (1 & c && -0x12477ce0) ^ (c >>> 1);
          a[b] = c;
        }
        return a;
      })(),
      mN = function () {
        var a = -1;
        return {
          p: function (b) {
            for (var c = a, d = 0; d < b.length; ++d)
              c = mM[(255 & c) ^ b[d]] ^ (c >>> 8);
            a = c;
          },
          d: function () {
            return ~a;
          },
        };
      },
      mO = function () {
        var a = 1,
          b = 0;
        return {
          p: function (c) {
            for (var d = a, e = b, f = c.length, g = 0; g != f; ) {
              for (var h = Math.min(g + 2655, f); g < h; ++g) e += d += c[g];
              ((d = (65535 & d) + 15 * (d >> 16)),
                (e = (65535 & e) + 15 * (e >> 16)));
            }
            ((a = d), (b = e));
          },
          d: function () {
            return (
              (a %= 65521),
              (b %= 65521),
              ((255 & a) << 24) |
                ((a >>> 8) << 16) |
                ((255 & b) << 8) |
                (b >>> 8)
            );
          },
        };
      },
      mP = function (a, b, c, d, e) {
        return mL(
          a,
          null == b.level ? 6 : b.level,
          null == b.mem
            ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(a.length))))
            : 12 + b.mem,
          c,
          d,
          !e
        );
      },
      mQ = function (a, b) {
        var c = {};
        for (var d in a) c[d] = a[d];
        for (var d in b) c[d] = b[d];
        return c;
      },
      mR = function (a, b, c) {
        for (
          var d = a(),
            e = a.toString(),
            f = e
              .slice(e.indexOf('[') + 1, e.lastIndexOf(']'))
              .replace(/ /g, '')
              .split(','),
            g = 0;
          g < d.length;
          ++g
        ) {
          var h = d[g],
            i = f[g];
          if ('function' == typeof h) {
            b += ';' + i + '=';
            var j = h.toString();
            if (h.prototype)
              if (-1 != j.indexOf('[native code]')) {
                var k = j.indexOf(' ', 8) + 1;
                b += j.slice(k, j.indexOf('(', k));
              } else
                for (var l in ((b += j), h.prototype))
                  b +=
                    ';' +
                    i +
                    '.prototype.' +
                    l +
                    '=' +
                    h.prototype[l].toString();
            else b += j;
          } else c[i] = h;
        }
        return [b, c];
      },
      mS = [],
      mT = function (a) {
        var b = [];
        for (var c in a)
          (a[c] instanceof l8 || a[c] instanceof l9 || a[c] instanceof ma) &&
            b.push((a[c] = new a[c].constructor(a[c])).buffer);
        return b;
      },
      mU = function (a, b, c, d) {
        if (!mS[c]) {
          for (var e, f = '', g = {}, h = a.length - 1, i = 0; i < h; ++i)
            ((f = (e = mR(a[i], f, g))[0]), (g = e[1]));
          mS[c] = mR(a[h], f, g);
        }
        var j = mQ({}, mS[c][1]);
        return l7(
          mS[c][0] +
            ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' +
            b.toString() +
            '}',
          c,
          j,
          mT(j),
          d
        );
      },
      mV = function () {
        return [
          l8,
          l9,
          ma,
          mb,
          mc,
          md,
          mg,
          mj,
          ms,
          mu,
          ml,
          mo,
          mv,
          mw,
          mx,
          my,
          mz,
          mA,
          nh,
          mZ,
          m$,
        ];
      },
      mW = function () {
        return [
          l8,
          l9,
          ma,
          mb,
          mc,
          md,
          mh,
          mk,
          mr,
          mp,
          mt,
          mq,
          ml,
          mJ,
          mK,
          mo,
          mB,
          mC,
          mD,
          mE,
          mF,
          mG,
          mH,
          mI,
          my,
          mz,
          mL,
          mP,
          ne,
          mZ,
        ];
      },
      mX = function () {
        return [m6, m7];
      },
      mY = function () {
        return [na];
      },
      mZ = function (a) {
        return postMessage(a, [a.buffer]);
      },
      m$ = function (a) {
        return a && a.size && new l8(a.size);
      },
      m_ = function (a) {
        return (
          (a.ondata = function (a, b) {
            return postMessage([a, b], [a.buffer]);
          }),
          function (b) {
            return a.push(b.data[0], b.data[1]);
          }
        );
      },
      m0 = function (a, b, c, d, e) {
        var f,
          g = mU(a, d, e, function (a, c) {
            a
              ? (g.terminate(), b.ondata.call(b, a))
              : (c[1] && g.terminate(), b.ondata.call(b, a, c[0], c[1]));
          });
        (g.postMessage(c),
          (b.push = function (a, c) {
            if (f) throw 'stream finished';
            if (!b.ondata) throw 'no stream handler';
            g.postMessage([a, (f = c)], [a.buffer]);
          }),
          (b.terminate = function () {
            g.terminate();
          }));
      },
      m1 = function (a, b) {
        return a[b] | (a[b + 1] << 8);
      },
      m2 = function (a, b) {
        return (
          (a[b] | (a[b + 1] << 8) | (a[b + 2] << 16) | (a[b + 3] << 24)) >>> 0
        );
      },
      m3 = function (a, b) {
        return m2(a, b) + 0x100000000 * m2(a, b + 4);
      },
      m4 = function (a, b, c) {
        for (; c; ++b) ((a[b] = c), (c >>>= 8));
      },
      m5 = function (a, b) {
        var c = b.filename;
        if (
          ((a[0] = 31),
          (a[1] = 139),
          (a[2] = 8),
          (a[8] = b.level < 2 ? 4 : 2 * (9 == b.level)),
          (a[9] = 3),
          0 != b.mtime &&
            m4(a, 4, Math.floor(new Date(b.mtime || Date.now()) / 1e3)),
          c)
        ) {
          a[3] = 8;
          for (var d = 0; d <= c.length; ++d) a[d + 10] = c.charCodeAt(d);
        }
      },
      m6 = function (a) {
        if (31 != a[0] || 139 != a[1] || 8 != a[2]) throw 'invalid gzip data';
        var b = a[3],
          c = 10;
        4 & b && (c += a[10] | ((a[11] << 8) + 2));
        for (var d = ((b >> 3) & 1) + ((b >> 4) & 1); d > 0; d -= !a[c++]);
        return c + (2 & b);
      },
      m7 = function (a) {
        var b = a.length;
        return (
          (a[b - 4] | (a[b - 3] << 8) | (a[b - 2] << 16) | (a[b - 1] << 24)) >>>
          0
        );
      },
      m8 = function (a) {
        return 10 + ((a.filename && a.filename.length + 1) || 0);
      },
      m9 = function (a, b) {
        var c = b.level,
          d = 0 == c ? 0 : c < 6 ? 1 : 9 == c ? 3 : 2;
        ((a[0] = 120), (a[1] = (d << 6) | (d ? 32 - 2 * d : 1)));
      },
      na = function (a) {
        if ((15 & a[0]) != 8 || a[0] >>> 4 > 7 || ((a[0] << 8) | a[1]) % 31)
          throw 'invalid zlib data';
        if (32 & a[1])
          throw 'invalid zlib data: preset dictionaries not supported';
      };
    function nb(a, b) {
      return (
        b || 'function' != typeof a || ((b = a), (a = {})),
        (this.ondata = b),
        a
      );
    }
    var nc = (function () {
        function a(a, b) {
          (b || 'function' != typeof a || ((b = a), (a = {})),
            (this.ondata = b),
            (this.o = a || {}));
        }
        return (
          (a.prototype.p = function (a, b) {
            this.ondata(mP(a, this.o, 0, 0, !b), b);
          }),
          (a.prototype.push = function (a, b) {
            if (this.d) throw 'stream finished';
            if (!this.ondata) throw 'no stream handler';
            ((this.d = b), this.p(a, b || !1));
          }),
          a
        );
      })(),
      nd = function (a, b) {
        m0(
          [
            mW,
            function () {
              return [m_, nc];
            },
          ],
          this,
          nb.call(this, a, b),
          function (a) {
            onmessage = m_(new nc(a.data));
          },
          6
        );
      };
    function ne(a, b) {
      return mP(a, b || {}, 0, 0);
    }
    var nf = (function () {
        function a(a) {
          ((this.s = {}), (this.p = new l8(0)), (this.ondata = a));
        }
        return (
          (a.prototype.e = function (a) {
            if (this.d) throw 'stream finished';
            if (!this.ondata) throw 'no stream handler';
            var b = this.p.length,
              c = new l8(b + a.length);
            (c.set(this.p), c.set(a, b), (this.p = c));
          }),
          (a.prototype.c = function (a) {
            this.d = this.s.i = a || !1;
            var b = this.s.b,
              c = mA(this.p, this.o, this.s);
            (this.ondata(mz(c, b, this.s.b), this.d),
              (this.o = mz(c, this.s.b - 32768)),
              (this.s.b = this.o.length),
              (this.p = mz(this.p, (this.s.p / 8) | 0)),
              (this.s.p &= 7));
          }),
          (a.prototype.push = function (a, b) {
            (this.e(a), this.c(b));
          }),
          a
        );
      })(),
      ng = function (a) {
        ((this.ondata = a),
          m0(
            [
              mV,
              function () {
                return [m_, nf];
              },
            ],
            this,
            0,
            function () {
              onmessage = m_(new nf());
            },
            7
          ));
      };
    function nh(a, b) {
      return mA(a, b);
    }
    (function () {
      function a(a, b) {
        ((this.c = mN()), (this.l = 0), (this.v = 1), nc.call(this, a, b));
      }
      ((a.prototype.push = function (a, b) {
        nc.prototype.push.call(this, a, b);
      }),
        (a.prototype.p = function (a, b) {
          (this.c.p(a), (this.l += a.length));
          var c = mP(a, this.o, this.v && m8(this.o), b && 8, !b);
          (this.v && (m5(c, this.o), (this.v = 0)),
            b && (m4(c, c.length - 8, this.c.d()), m4(c, c.length - 4, this.l)),
            this.ondata(c, b));
        }));
    })();
    var ni = (function () {
        function a(a) {
          ((this.v = 1), nf.call(this, a));
        }
        return (
          (a.prototype.push = function (a, b) {
            if ((nf.prototype.e.call(this, a), this.v)) {
              var c = this.p.length > 3 ? m6(this.p) : 4;
              if (c >= this.p.length && !b) return;
              ((this.p = this.p.subarray(c)), (this.v = 0));
            }
            if (b) {
              if (this.p.length < 8) throw 'invalid gzip stream';
              this.p = this.p.subarray(0, -8);
            }
            nf.prototype.c.call(this, b);
          }),
          a
        );
      })(),
      nj = function (a) {
        ((this.ondata = a),
          m0(
            [
              mV,
              mX,
              function () {
                return [m_, nf, ni];
              },
            ],
            this,
            0,
            function () {
              onmessage = m_(new ni());
            },
            9
          ));
      },
      nk =
        ((function () {
          function a(a, b) {
            ((this.c = mO()), (this.v = 1), nc.call(this, a, b));
          }
          ((a.prototype.push = function (a, b) {
            nc.prototype.push.call(this, a, b);
          }),
            (a.prototype.p = function (a, b) {
              this.c.p(a);
              var c = mP(a, this.o, this.v && 2, b && 4, !b);
              (this.v && (m9(c, this.o), (this.v = 0)),
                b && m4(c, c.length - 4, this.c.d()),
                this.ondata(c, b));
            }));
        })(),
        (function () {
          function a(a) {
            ((this.v = 1), nf.call(this, a));
          }
          return (
            (a.prototype.push = function (a, b) {
              if ((nf.prototype.e.call(this, a), this.v)) {
                if (this.p.length < 2 && !b) return;
                ((this.p = this.p.subarray(2)), (this.v = 0));
              }
              if (b) {
                if (this.p.length < 4) throw 'invalid zlib stream';
                this.p = this.p.subarray(0, -4);
              }
              nf.prototype.c.call(this, b);
            }),
            a
          );
        })()),
      nl = function (a) {
        ((this.ondata = a),
          m0(
            [
              mV,
              mY,
              function () {
                return [m_, nf, nk];
              },
            ],
            this,
            0,
            function () {
              onmessage = m_(new nk());
            },
            11
          ));
      };
    function nm(a, b) {
      return mA((na(a), a.subarray(2, -4)), b);
    }
    var nn = (function () {
      function a(a) {
        ((this.G = ni), (this.I = nf), (this.Z = nk), (this.ondata = a));
      }
      return (
        (a.prototype.push = function (a, b) {
          if (!this.ondata) throw 'no stream handler';
          if (this.s) this.s.push(a, b);
          else {
            if (this.p && this.p.length) {
              var c = new l8(this.p.length + a.length);
              (c.set(this.p), c.set(a, this.p.length));
            } else this.p = a;
            if (this.p.length > 2) {
              var d = this,
                e = function () {
                  d.ondata.apply(d, arguments);
                };
              ((this.s =
                31 == this.p[0] && 139 == this.p[1] && 8 == this.p[2]
                  ? new this.G(e)
                  : (15 & this.p[0]) != 8 ||
                      this.p[0] >> 4 > 7 ||
                      ((this.p[0] << 8) | this.p[1]) % 31
                    ? new this.I(e)
                    : new this.Z(e)),
                this.s.push(this.p, b),
                (this.p = null));
            }
          }
        }),
        a
      );
    })();
    (function (a) {
      ((this.G = nj), (this.I = ng), (this.Z = nl), (this.ondata = a));
    }).prototype.push = function (a, b) {
      nn.prototype.push.call(this, a, b);
    };
    var no = 'u' > typeof TextEncoder && new TextEncoder(),
      np = 'u' > typeof TextDecoder && new TextDecoder(),
      nq = 0;
    try {
      (np.decode(mK, { stream: !0 }), (nq = 1));
    } catch (a) {}
    var nr = function (a) {
      for (var b = '', c = 0; ; ) {
        var d = a[c++],
          e = (d > 127) + (d > 223) + (d > 239);
        if (c + e > a.length) return [b, mz(a, c - 1)];
        e
          ? 3 == e
            ? (b += String.fromCharCode(
                55296 |
                  ((d =
                    (((15 & d) << 18) |
                      ((63 & a[c++]) << 12) |
                      ((63 & a[c++]) << 6) |
                      (63 & a[c++])) -
                    65536) >>
                    10),
                56320 | (1023 & d)
              ))
            : 1 & e
              ? (b += String.fromCharCode(((31 & d) << 6) | (63 & a[c++])))
              : (b += String.fromCharCode(
                  ((15 & d) << 12) | ((63 & a[c++]) << 6) | (63 & a[c++])
                ))
          : (b += String.fromCharCode(d));
      }
    };
    function ns(a, b) {
      if (b) {
        for (var c = new l8(a.length), d = 0; d < a.length; ++d)
          c[d] = a.charCodeAt(d);
        return c;
      }
      if (no) return no.encode(a);
      for (
        var e = a.length,
          f = new l8(a.length + (a.length >> 1)),
          g = 0,
          h = function (a) {
            f[g++] = a;
          },
          d = 0;
        d < e;
        ++d
      ) {
        if (g + 5 > f.length) {
          var i = new l8(g + 8 + ((e - d) << 1));
          (i.set(f), (f = i));
        }
        var j = a.charCodeAt(d);
        j < 128 || b
          ? h(j)
          : (j < 2048
              ? h(192 | (j >> 6))
              : (j > 55295 && j < 57344
                  ? (h(
                      240 |
                        ((j =
                          (65536 + (1047552 & j)) |
                          (1023 & a.charCodeAt(++d))) >>
                          18)
                    ),
                    h(128 | ((j >> 12) & 63)))
                  : h(224 | (j >> 12)),
                h(128 | ((j >> 6) & 63))),
            h(128 | (63 & j)));
      }
      return mz(f, 0, g);
    }
    (((function (a) {
      ((this.ondata = a), nq ? (this.t = new TextDecoder()) : (this.p = mK));
    }).prototype.push = function (a, b) {
      if (!this.ondata) throw 'no callback';
      if (((b = !!b), this.t)) {
        if ((this.ondata(this.t.decode(a, { stream: !0 }), b), b)) {
          if (this.t.decode().length) throw 'invalid utf-8 data';
          this.t = null;
        }
        return;
      }
      if (!this.p) throw 'stream finished';
      var c = new l8(this.p.length + a.length);
      (c.set(this.p), c.set(a, this.p.length));
      var d = nr(c),
        e = d[0],
        f = d[1];
      if (b) {
        if (f.length) throw 'invalid utf-8 data';
        this.p = null;
      } else this.p = f;
      this.ondata(e, b);
    }),
      (function (a) {
        this.ondata = a;
      }.prototype.push = function (a, b) {
        if (!this.ondata) throw 'no callback';
        if (this.d) throw 'stream finished';
        this.ondata(ns(a), (this.d = b || !1));
      }));
    var nt = function (a) {
        return 1 == a ? 3 : a < 6 ? 2 : +(9 == a);
      },
      nu = function (a, b) {
        for (; 1 != m1(a, b); b += 4 + m1(a, b + 2));
        return [m3(a, b + 12), m3(a, b + 4), m3(a, b + 20)];
      },
      nv = function (a) {
        var b = 0;
        if (a)
          for (var c in a) {
            var d = a[c].length;
            if (d > 65535) throw 'extra field too long';
            b += d + 4;
          }
        return b;
      },
      nw = function (a, b, c, d, e, f, g, h) {
        var i = d.length,
          j = c.extra,
          k = h && h.length,
          l = nv(j);
        (m4(a, b, null != g ? 0x2014b50 : 0x4034b50),
          (b += 4),
          null != g && ((a[b++] = 20), (a[b++] = c.os)),
          (a[b] = 20),
          (b += 2),
          (a[b++] = (c.flag << 1) | (null == f && 8)),
          (a[b++] = e && 8),
          (a[b++] = 255 & c.compression),
          (a[b++] = c.compression >> 8));
        var m = new Date(null == c.mtime ? Date.now() : c.mtime),
          n = m.getFullYear() - 1980;
        if (n < 0 || n > 119) throw 'date not in range 1980-2099';
        if (
          (m4(
            a,
            b,
            (n << 25) |
              ((m.getMonth() + 1) << 21) |
              (m.getDate() << 16) |
              (m.getHours() << 11) |
              (m.getMinutes() << 5) |
              (m.getSeconds() >>> 1)
          ),
          (b += 4),
          null != f && (m4(a, b, c.crc), m4(a, b + 4, f), m4(a, b + 8, c.size)),
          m4(a, b + 12, i),
          m4(a, b + 14, l),
          (b += 16),
          null != g &&
            (m4(a, b, k), m4(a, b + 6, c.attrs), m4(a, b + 10, g), (b += 14)),
          a.set(d, b),
          (b += i),
          l)
        )
          for (var o in j) {
            var p = j[o],
              q = p.length;
            (m4(a, b, +o), m4(a, b + 2, q), a.set(p, b + 4), (b += 4 + q));
          }
        return (k && (a.set(h, b), (b += k)), b);
      },
      nx = function (a, b, c, d, e) {
        (m4(a, b, 0x6054b50),
          m4(a, b + 8, c),
          m4(a, b + 10, c),
          m4(a, b + 12, d),
          m4(a, b + 16, e));
      },
      ny = (function () {
        function a(a) {
          ((this.filename = a),
            (this.c = mN()),
            (this.size = 0),
            (this.compression = 0));
        }
        return (
          (a.prototype.process = function (a, b) {
            this.ondata(null, a, b);
          }),
          (a.prototype.push = function (a, b) {
            if (!this.ondata)
              throw 'no callback - add to ZIP archive before pushing';
            (this.c.p(a),
              (this.size += a.length),
              b && (this.crc = this.c.d()),
              this.process(a, b || !1));
          }),
          a
        );
      })();
    function nz(a, b) {
      var c = this;
      (b || (b = {}),
        ny.call(this, a),
        (this.d = new nc(b, function (a, b) {
          c.ondata(null, a, b);
        })),
        (this.compression = 8),
        (this.flag = nt(b.level)));
    }
    function nA(a, b) {
      var c = this;
      (b || (b = {}),
        ny.call(this, a),
        (this.d = new nd(b, function (a, b, d) {
          c.ondata(a, b, d);
        })),
        (this.compression = 8),
        (this.flag = nt(b.level)),
        (this.terminate = this.d.terminate));
    }
    function nB(a) {
      ((this.ondata = a), (this.u = []), (this.d = 1));
    }
    ((nz.prototype.process = function (a, b) {
      try {
        this.d.push(a, b);
      } catch (a) {
        this.ondata(a, null, b);
      }
    }),
      (nz.prototype.push = function (a, b) {
        ny.prototype.push.call(this, a, b);
      }),
      (nA.prototype.process = function (a, b) {
        this.d.push(a, b);
      }),
      (nA.prototype.push = function (a, b) {
        ny.prototype.push.call(this, a, b);
      }),
      (nB.prototype.add = function (a) {
        var b = this;
        if (2 & this.d) throw 'stream finished';
        var c = ns(a.filename),
          d = c.length,
          e = a.comment,
          f = e && ns(e),
          g = d != a.filename.length || (f && e.length != f.length),
          h = d + nv(a.extra) + 30;
        if (d > 65535) throw 'filename too long';
        var i = new l8(h);
        nw(i, 0, a, c, g);
        var j = [i],
          k = function () {
            for (var a = 0, c = j; a < c.length; a++) {
              var d = c[a];
              b.ondata(null, d, !1);
            }
            j = [];
          },
          l = this.d;
        this.d = 0;
        var m = this.u.length,
          n = mQ(a, {
            f: c,
            u: g,
            o: f,
            t: function () {
              a.terminate && a.terminate();
            },
            r: function () {
              if ((k(), l)) {
                var a = b.u[m + 1];
                a ? a.r() : (b.d = 1);
              }
              l = 1;
            },
          }),
          o = 0;
        ((a.ondata = function (c, d, e) {
          if (c) (b.ondata(c, d, e), b.terminate());
          else if (((o += d.length), j.push(d), e)) {
            var f = new l8(16);
            (m4(f, 0, 0x8074b50),
              m4(f, 4, a.crc),
              m4(f, 8, o),
              m4(f, 12, a.size),
              j.push(f),
              (n.c = o),
              (n.b = h + o + 16),
              (n.crc = a.crc),
              (n.size = a.size),
              l && n.r(),
              (l = 1));
          } else l && k();
        }),
          this.u.push(n));
      }),
      (nB.prototype.end = function () {
        var a = this;
        if (2 & this.d) {
          if (1 & this.d) throw 'stream finishing';
          throw 'stream finished';
        }
        (this.d
          ? this.e()
          : this.u.push({
              r: function () {
                1 & a.d && (a.u.splice(-1, 1), a.e());
              },
              t: function () {},
            }),
          (this.d = 3));
      }),
      (nB.prototype.e = function () {
        for (var a = 0, b = 0, c = 0, d = 0, e = this.u; d < e.length; d++) {
          var f = e[d];
          c += 46 + f.f.length + nv(f.extra) + (f.o ? f.o.length : 0);
        }
        for (var g = new l8(c + 22), h = 0, i = this.u; h < i.length; h++) {
          var f = i[h];
          (nw(g, a, f, f.f, f.u, f.c, b, f.o),
            (a += 46 + f.f.length + nv(f.extra) + (f.o ? f.o.length : 0)),
            (b += f.b));
        }
        (nx(g, a, this.u.length, c, b), this.ondata(null, g, !0), (this.d = 2));
      }),
      (nB.prototype.terminate = function () {
        for (var a = 0, b = this.u; a < b.length; a++) b[a].t();
        this.d = 2;
      }));
    var nC = (function () {
      function a() {}
      return (
        (a.prototype.push = function (a, b) {
          this.ondata(null, a, b);
        }),
        (a.compression = 0),
        a
      );
    })();
    function nD() {
      var a = this;
      this.i = new nf(function (b, c) {
        a.ondata(null, b, c);
      });
    }
    function nE(a, b) {
      var c = this;
      b < 32e4
        ? (this.i = new nf(function (a, b) {
            c.ondata(null, a, b);
          }))
        : ((this.i = new ng(function (a, b, d) {
            c.ondata(a, b, d);
          })),
          (this.terminate = this.i.terminate));
    }
    function nF(a) {
      ((this.onfile = a), (this.k = []), (this.o = { 0: nC }), (this.p = mK));
    }
    ((nD.prototype.push = function (a, b) {
      try {
        this.i.push(a, b);
      } catch (c) {
        this.ondata(c, a, b);
      }
    }),
      (nD.compression = 8),
      (nE.prototype.push = function (a, b) {
        (this.i.terminate && (a = mz(a, 0)), this.i.push(a, b));
      }),
      (nE.compression = 8),
      (nF.prototype.push = function (a, b) {
        var c = this;
        if (!this.onfile) throw 'no callback';
        if (!this.p) throw 'stream finished';
        if (this.c > 0) {
          var d = Math.min(this.c, a.length),
            e = a.subarray(0, d);
          if (
            ((this.c -= d),
            this.d ? this.d.push(e, !this.c) : this.k[0].push(e),
            (a = a.subarray(d)).length)
          )
            return this.push(a, b);
        } else {
          var f = 0,
            g = 0,
            h = void 0,
            i = void 0;
          this.p.length
            ? a.length
              ? ((i = new l8(this.p.length + a.length)).set(this.p),
                i.set(a, this.p.length))
              : (i = this.p)
            : (i = a);
          for (
            var j = i.length, k = this.c, l = k && this.d, m = this;
            g < j - 4 &&
            'break' !==
              (function () {
                var a = m2(i, g);
                if (0x4034b50 == a) {
                  ((f = 1), (h = g), (m.d = null), (m.c = 0));
                  var b = m1(i, g + 6),
                    d = m1(i, g + 8),
                    e = 8 & b,
                    l = m1(i, g + 26),
                    n = m1(i, g + 28);
                  if (j > g + 30 + l + n) {
                    var o,
                      p,
                      q = [];
                    (m.k.unshift(q), (f = 2));
                    var r = m2(i, g + 18),
                      s = m2(i, g + 22),
                      t = (function (a, b) {
                        if (b) {
                          for (var c = '', d = 0; d < a.length; d += 16384)
                            c += String.fromCharCode.apply(
                              null,
                              a.subarray(d, d + 16384)
                            );
                          return c;
                        }
                        if (np) return np.decode(a);
                        var e = nr(a),
                          f = e[0];
                        if (e[1].length) throw 'invalid utf-8 data';
                        return f;
                      })(i.subarray(g + 30, (g += 30 + l)), !(2048 & b));
                    (0xffffffff == r
                      ? ((r = (o = e ? [-2] : nu(i, g))[0]), (s = o[1]))
                      : e && (r = -1),
                      (g += n),
                      (m.c = r));
                    var u = {
                      name: t,
                      compression: d,
                      start: function () {
                        if (!u.ondata) throw 'no callback';
                        if (r) {
                          var a = c.o[d];
                          if (!a) throw 'unknown compression type ' + d;
                          (p = r < 0 ? new a(t) : new a(t, r, s)).ondata =
                            function (a, b, c) {
                              u.ondata(a, b, c);
                            };
                          for (var b = 0; b < q.length; b++) {
                            var e = q[b];
                            p.push(e, !1);
                          }
                          c.k[0] == q && c.c ? (c.d = p) : p.push(mK, !0);
                        } else u.ondata(null, mK, !0);
                      },
                      terminate: function () {
                        p && p.terminate && p.terminate();
                      },
                    };
                    (r >= 0 && ((u.size = r), (u.originalSize = s)),
                      m.onfile(u));
                  }
                  return 'break';
                }
                if (k) {
                  if (0x8074b50 == a)
                    return (
                      (h = g += 12 + (-2 == k && 8)),
                      (f = 3),
                      (m.c = 0),
                      'break'
                    );
                  else if (0x2014b50 == a)
                    return ((h = g -= 4), (f = 3), (m.c = 0), 'break');
                }
              })();
            ++g
          );
          if (((this.p = mK), k < 0)) {
            var n = f
              ? i.subarray(
                  0,
                  h - 12 - (-2 == k && 8) - (0x8074b50 == m2(i, h - 16) && 4)
                )
              : i.subarray(0, g);
            l ? l.push(n, !!f) : this.k[+(2 == f)].push(n);
          }
          if (2 & f) return this.push(i.subarray(g), b);
          this.p = i.subarray(g);
        }
        if (b) {
          if (this.c) throw 'invalid zip file';
          this.p = null;
        }
      }),
      (nF.prototype.register = function (a) {
        this.o[a.compression] = a;
      }));
    let nG = l3 >= 152;
    class nH extends gj {
      constructor(a) {
        (super(a), (this.type = 1016));
      }
      parse(a) {
        let b = { l: 0, c: 0, lc: 0 };
        function c(a, c, d, e, f) {
          for (; d < a; ) ((c = (c << 8) | z(e, f)), (d += 8));
          ((b.l = (c >> (d -= a)) & ((1 << a) - 1)), (b.c = c), (b.lc = d));
        }
        let d = Array(59),
          e = { c: 0, lc: 0 };
        function f(a, b, c, d) {
          ((a = (a << 8) | z(c, d)), (b += 8), (e.c = a), (e.lc = b));
        }
        let g = { c: 0, lc: 0 };
        function h(a, b, c, d, h, i, j, k, l, m) {
          if (a == b) {
            d < 8 && (f(c, d, h, j), (c = e.c), (d = e.lc));
            var n = c >> (d -= 8),
              n = new Uint8Array([n])[0];
            if (l.value + n > m) return !1;
            for (var o = k[l.value - 1]; n-- > 0; ) k[l.value++] = o;
          } else {
            if (!(l.value < m)) return !1;
            k[l.value++] = a;
          }
          ((g.c = c), (g.lc = d));
        }
        function i(a) {
          var b = 65535 & a;
          return b > 32767 ? b - 65536 : b;
        }
        let j = { a: 0, b: 0 };
        function k(a, b) {
          var c = i(a),
            d = i(b),
            e = c + (1 & d) + (d >> 1),
            f = e - d;
          ((j.a = e), (j.b = f));
        }
        function l(a, b) {
          var c = 65535 & b,
            d = ((65535 & a) - (c >> 1)) & 65535;
          ((j.a = (c + d - 32768) & 65535), (j.b = d));
        }
        function m(a, i, j, k, l, m) {
          var n = j.value,
            o = y(i, j),
            p = y(i, j);
          j.value += 4;
          var q = y(i, j);
          if (((j.value += 4), o < 0 || o >= 65537 || p < 0 || p >= 65537))
            throw 'Something wrong with HUF_ENCSIZE';
          for (var r = Array(65537), s = Array(16384), t = 0; t < 16384; t++)
            ((s[t] = {}), (s[t].len = 0), (s[t].lit = 0), (s[t].p = null));
          var u = k - (j.value - n);
          if (
            (!(function (a, e, f, g, h, i, j) {
              for (var k = 0, l = 0; h <= i; h++) {
                if (f.value - f.value > g) return !1;
                c(6, k, l, a, f);
                var m = b.l;
                if (((k = b.c), (l = b.lc), (j[h] = m), 63 == m)) {
                  if (f.value - f.value > g)
                    throw 'Something wrong with hufUnpackEncTable';
                  c(8, k, l, a, f);
                  var n = b.l + 6;
                  if (((k = b.c), (l = b.lc), h + n > i + 1))
                    throw 'Something wrong with hufUnpackEncTable';
                  for (; n--; ) j[h++] = 0;
                  h--;
                } else if (m >= 59) {
                  var n = m - 59 + 2;
                  if (h + n > i + 1)
                    throw 'Something wrong with hufUnpackEncTable';
                  for (; n--; ) j[h++] = 0;
                  h--;
                }
              }
              !(function (a) {
                for (var b = 0; b <= 58; ++b) d[b] = 0;
                for (var b = 0; b < 65537; ++b) d[a[b]] += 1;
                for (var c = 0, b = 58; b > 0; --b) {
                  var e = (c + d[b]) >> 1;
                  ((d[b] = c), (c = e));
                }
                for (var b = 0; b < 65537; ++b) {
                  var f = a[b];
                  f > 0 && (a[b] = f | (d[f]++ << 6));
                }
              })(j);
            })(a, 0, j, u, o, p, r),
            q > 8 * (k - (j.value - n)))
          )
            throw 'Something wrong with hufUncompress';
          (!(function (a, b, c, d) {
            for (; b <= c; b++) {
              var e = a[b] >> 6,
                f = 63 & a[b];
              if (e >> f) throw 'Invalid table entry';
              if (f > 14) {
                var g = d[e >> (f - 14)];
                if (g.len) throw 'Invalid table entry';
                if ((g.lit++, g.p)) {
                  var h = g.p;
                  g.p = Array(g.lit);
                  for (var i = 0; i < g.lit - 1; ++i) g.p[i] = h[i];
                } else g.p = [,];
                g.p[g.lit - 1] = b;
              } else if (f)
                for (var j = 0, i = 1 << (14 - f); i > 0; i--) {
                  var g = d[(e << (14 - f)) + j];
                  if (g.len || g.p) throw 'Invalid table entry';
                  ((g.len = f), (g.lit = b), j++);
                }
            }
          })(r, o, p, s),
            (function (a, b, c, d, i, j, k, l, m, n) {
              for (
                var o = 0, p = 0, q = Math.trunc(i.value + (j + 7) / 8);
                i.value < q;
              )
                for (f(o, p, c, i), o = e.c, p = e.lc; p >= 14; ) {
                  var r = b[(o >> (p - 14)) & 16383];
                  if (r.len)
                    ((p -= r.len),
                      h(r.lit, k, o, p, c, d, i, m, n, l),
                      (o = g.c),
                      (p = g.lc));
                  else {
                    if (!r.p) throw 'hufDecode issues';
                    for (s = 0; s < r.lit; s++) {
                      for (var s, t = 63 & a[r.p[s]]; p < t && i.value < q; )
                        (f(o, p, c, i), (o = e.c), (p = e.lc));
                      if (
                        p >= t &&
                        a[r.p[s]] >> 6 == ((o >> (p - t)) & ((1 << t) - 1))
                      ) {
                        ((p -= t),
                          h(r.p[s], k, o, p, c, d, i, m, n, l),
                          (o = g.c),
                          (p = g.lc));
                        break;
                      }
                    }
                    if (s == r.lit) throw 'hufDecode issues';
                  }
                }
              var u = (8 - j) & 7;
              for (o >>= u, p -= u; p > 0; ) {
                var r = b[(o << (14 - p)) & 16383];
                if (r.len)
                  ((p -= r.len),
                    h(r.lit, k, o, p, c, d, i, m, n, l),
                    (o = g.c),
                    (p = g.lc));
                else throw 'hufDecode issues';
              }
            })(r, s, a, i, j, q, p, m, l, { value: 0 }));
        }
        function n(a) {
          for (var b = 1; b < a.length; b++) {
            var c = a[b - 1] + a[b] - 128;
            a[b] = c;
          }
        }
        function o(a, b) {
          for (
            var c = 0,
              d = Math.floor((a.length + 1) / 2),
              e = 0,
              f = a.length - 1;
            !(e > f) && ((b[e++] = a[c++]), !(e > f));
          ) {
            b[e++] = a[d++];
          }
        }
        function p(a) {
          for (
            var b = a.byteLength, c = [], d = 0, e = new DataView(a);
            b > 0;
          ) {
            var f = e.getInt8(d++);
            if (f < 0) {
              var g = -f;
              b -= g + 1;
              for (var h = 0; h < g; h++) c.push(e.getUint8(d++));
            } else {
              var g = f;
              b -= 2;
              for (var i = e.getUint8(d++), h = 0; h < g + 1; h++) c.push(i);
            }
          }
          return c;
        }
        function q(a) {
          return new DataView(a.array.buffer, a.offset.value, a.size);
        }
        function r(a) {
          var b = new Uint8Array(
              p(a.viewer.buffer.slice(a.offset.value, a.offset.value + a.size))
            ),
            c = new Uint8Array(b.length);
          return (n(b), o(b, c), new DataView(c.buffer));
        }
        function s(a) {
          var b = nm(a.array.slice(a.offset.value, a.offset.value + a.size)),
            c = new Uint8Array(b.length);
          return (n(b), o(b, c), new DataView(c.buffer));
        }
        function t(a) {
          for (
            var b = a.viewer,
              c = { value: a.offset.value },
              d = new Uint16Array(
                a.width * a.scanlineBlockSize * (a.channels * a.type)
              ),
              e = new Uint8Array(8192),
              f = 0,
              g = Array(a.channels),
              h = 0;
            h < a.channels;
            h++
          )
            ((g[h] = {}),
              (g[h].start = f),
              (g[h].end = g[h].start),
              (g[h].nx = a.width),
              (g[h].ny = a.lines),
              (g[h].size = a.type),
              (f += g[h].nx * g[h].ny * g[h].size));
          var i = F(b, c),
            n = F(b, c);
          if (n >= 8192)
            throw 'Something is wrong with PIZ_COMPRESSION BITMAP_SIZE';
          if (i <= n) for (var h = 0; h < n - i + 1; h++) e[h + i] = A(b, c);
          var o = new Uint16Array(65536),
            p = (function (a, b) {
              for (var c = 0, d = 0; d < 65536; ++d)
                (0 == d || a[d >> 3] & (1 << (7 & d))) && (b[c++] = d);
              for (var e = c - 1; c < 65536; ) b[c++] = 0;
              return e;
            })(e, o),
            q = y(b, c);
          m(a.array, b, c, q, d, f);
          for (var h = 0; h < a.channels; ++h)
            for (var r = g[h], s = 0; s < g[h].size; ++s)
              !(function (a, b, c, d, e, f, g) {
                for (var h = g < 16384, i = c > e ? e : c, m = 1; m <= i; )
                  m <<= 1;
                for (m >>= 1, n = m, m >>= 1; m >= 1; ) {
                  for (
                    var n,
                      o,
                      p,
                      q,
                      r,
                      s = 0,
                      t = 0 + f * (e - n),
                      u = f * m,
                      v = f * n,
                      w = d * m,
                      x = d * n;
                    s <= t;
                    s += v
                  ) {
                    for (var y = s, z = s + d * (c - n); y <= z; y += x) {
                      var A = y + w,
                        B = y + u,
                        C = B + w;
                      (h
                        ? (k(a[y + b], a[B + b]),
                          (o = j.a),
                          (q = j.b),
                          k(a[A + b], a[C + b]),
                          (p = j.a),
                          (r = j.b),
                          k(o, p),
                          (a[y + b] = j.a),
                          (a[A + b] = j.b),
                          k(q, r))
                        : (l(a[y + b], a[B + b]),
                          (o = j.a),
                          (q = j.b),
                          l(a[A + b], a[C + b]),
                          (p = j.a),
                          (r = j.b),
                          l(o, p),
                          (a[y + b] = j.a),
                          (a[A + b] = j.b),
                          l(q, r)),
                        (a[B + b] = j.a),
                        (a[C + b] = j.b));
                    }
                    if (c & m) {
                      var B = y + u;
                      (h ? k(a[y + b], a[B + b]) : l(a[y + b], a[B + b]),
                        (o = j.a),
                        (a[B + b] = j.b),
                        (a[y + b] = o));
                    }
                  }
                  if (e & m)
                    for (var y = s, z = s + d * (c - n); y <= z; y += x) {
                      var A = y + w;
                      (h ? k(a[y + b], a[A + b]) : l(a[y + b], a[A + b]),
                        (o = j.a),
                        (a[A + b] = j.b),
                        (a[y + b] = o));
                    }
                  ((n = m), (m >>= 1));
                }
              })(d, r.start + s, r.nx, r.size, r.ny, r.nx * r.size, p);
          for (var t = f, u = 0; u < t; ++u) d[u] = o[d[u]];
          for (
            var v = 0, w = new Uint8Array(d.buffer.byteLength), x = 0;
            x < a.lines;
            x++
          )
            for (var z = 0; z < a.channels; z++) {
              var r = g[z],
                B = r.nx * r.size,
                C = new Uint8Array(d.buffer, 2 * r.end, 2 * B);
              (w.set(C, v), (v += 2 * B), (r.end += B));
            }
          return new DataView(w.buffer);
        }
        function u(a) {
          var b = nm(a.array.slice(a.offset.value, a.offset.value + a.size));
          let c = a.lines * a.channels * a.width,
            d = 1 == a.type ? new Uint16Array(c) : new Uint32Array(c),
            e = 0,
            f = 0,
            g = [, , , ,];
          for (let c = 0; c < a.lines; c++)
            for (let c = 0; c < a.channels; c++) {
              let c = 0;
              switch (a.type) {
                case 1:
                  ((g[0] = e), (g[1] = g[0] + a.width), (e = g[1] + a.width));
                  for (let e = 0; e < a.width; ++e)
                    ((c += (b[g[0]++] << 8) | b[g[1]++]), (d[f] = c), f++);
                  break;
                case 2:
                  ((g[0] = e),
                    (g[1] = g[0] + a.width),
                    (g[2] = g[1] + a.width),
                    (e = g[2] + a.width));
                  for (let e = 0; e < a.width; ++e)
                    ((c +=
                      (b[g[0]++] << 24) | (b[g[1]++] << 16) | (b[g[2]++] << 8)),
                      (d[f] = c),
                      f++);
              }
            }
          return new DataView(d.buffer);
        }
        function v(a) {
          var b = a.viewer,
            c = { value: a.offset.value },
            d = new Uint8Array(a.width * a.lines * (a.channels * a.type * 2)),
            e = {
              version: B(b, c),
              unknownUncompressedSize: B(b, c),
              unknownCompressedSize: B(b, c),
              acCompressedSize: B(b, c),
              dcCompressedSize: B(b, c),
              rleCompressedSize: B(b, c),
              rleUncompressedSize: B(b, c),
              rleRawSize: B(b, c),
              totalAcUncompressedCount: B(b, c),
              totalDcUncompressedCount: B(b, c),
              acCompression: B(b, c),
            };
          if (e.version < 2)
            throw (
              'EXRLoader.parse: ' +
              K.compression +
              ' version ' +
              e.version +
              ' is unsupported'
            );
          for (var f = [], g = F(b, c) - 2; g > 0; ) {
            var h = w(b.buffer, c),
              i = A(b, c),
              j = (i >> 2) & 3,
              k = new Int8Array([(i >> 4) - 1])[0],
              l = A(b, c);
            (f.push({ name: h, index: k, type: l, compression: j }),
              (g -= h.length + 3));
          }
          for (
            var n = K.channels, o = Array(a.channels), q = 0;
            q < a.channels;
            ++q
          ) {
            var r = (o[q] = {}),
              t = n[q];
            ((r.name = t.name),
              (r.compression = 0),
              (r.decoded = !1),
              (r.type = t.pixelType),
              (r.pLinear = t.pLinear),
              (r.width = a.width),
              (r.height = a.lines));
          }
          for (var u = { idx: [, , ,] }, v = 0; v < a.channels; ++v)
            for (var r = o[v], q = 0; q < f.length; ++q) {
              var x = f[q];
              r.name == x.name &&
                ((r.compression = x.compression),
                x.index >= 0 && (u.idx[x.index] = v),
                (r.offset = v));
            }
          if (e.acCompressedSize > 0)
            switch (e.acCompression) {
              case 0:
                var y = new Uint16Array(e.totalAcUncompressedCount);
                m(
                  a.array,
                  b,
                  c,
                  e.acCompressedSize,
                  y,
                  e.totalAcUncompressedCount
                );
                break;
              case 1:
                var z = a.array.slice(
                    c.value,
                    c.value + e.totalAcUncompressedCount
                  ),
                  C = nm(z),
                  y = new Uint16Array(C.buffer);
                c.value += e.totalAcUncompressedCount;
            }
          if (e.dcCompressedSize > 0) {
            var D = new Uint16Array(
              s({ array: a.array, offset: c, size: e.dcCompressedSize }).buffer
            );
            c.value += e.dcCompressedSize;
          }
          if (e.rleRawSize > 0) {
            var z = a.array.slice(c.value, c.value + e.rleCompressedSize),
              C = nm(z),
              G = p(C.buffer);
            c.value += e.rleCompressedSize;
          }
          for (var H = 0, I = Array(o.length), q = 0; q < I.length; ++q)
            I[q] = [];
          for (var J = 0; J < a.lines; ++J)
            for (var L = 0; L < o.length; ++L)
              (I[L].push(H), (H += o[L].width * a.type * 2));
          !(function (a, b, c, d, e, f) {
            var g = new DataView(f.buffer),
              h = c[a.idx[0]].width,
              i = c[a.idx[0]].height,
              j = Math.floor(h / 8),
              k = Math.ceil(h / 8),
              l = Math.ceil(i / 8),
              m = h - (k - 1) * 8,
              n = i - (l - 1) * 8,
              o = { value: 0 },
              p = [, , ,],
              q = [, , ,],
              r = [, , ,],
              s = [, , ,],
              t = [, , ,];
            for (let c = 0; c < 3; ++c)
              ((t[c] = b[a.idx[c]]),
                (p[c] = c < 1 ? 0 : p[c - 1] + k * l),
                (q[c] = new Float32Array(64)),
                (r[c] = new Uint16Array(64)),
                (s[c] = new Uint16Array(64 * k)));
            for (let b = 0; b < l; ++b) {
              var u,
                v,
                w = 8;
              b == l - 1 && (w = n);
              var x = 8;
              for (let a = 0; a < k; ++a) {
                a == k - 1 && (x = m);
                for (let a = 0; a < 3; ++a) {
                  (r[a].fill(0),
                    (r[a][0] = e[p[a]++]),
                    (function (a, b, c) {
                      for (var d, e = 1; e < 64; )
                        (65280 == (d = b[a.value])
                          ? (e = 64)
                          : d >> 8 == 255
                            ? (e += 255 & d)
                            : ((c[e] = d), e++),
                          a.value++);
                    })(o, d, r[a]),
                    (u = r[a]),
                    ((v = q[a])[0] = E(u[0])),
                    (v[1] = E(u[1])),
                    (v[2] = E(u[5])),
                    (v[3] = E(u[6])),
                    (v[4] = E(u[14])),
                    (v[5] = E(u[15])),
                    (v[6] = E(u[27])),
                    (v[7] = E(u[28])),
                    (v[8] = E(u[2])),
                    (v[9] = E(u[4])),
                    (v[10] = E(u[7])),
                    (v[11] = E(u[13])),
                    (v[12] = E(u[16])),
                    (v[13] = E(u[26])),
                    (v[14] = E(u[29])),
                    (v[15] = E(u[42])),
                    (v[16] = E(u[3])),
                    (v[17] = E(u[8])),
                    (v[18] = E(u[12])),
                    (v[19] = E(u[17])),
                    (v[20] = E(u[25])),
                    (v[21] = E(u[30])),
                    (v[22] = E(u[41])),
                    (v[23] = E(u[43])),
                    (v[24] = E(u[9])),
                    (v[25] = E(u[11])),
                    (v[26] = E(u[18])),
                    (v[27] = E(u[24])),
                    (v[28] = E(u[31])),
                    (v[29] = E(u[40])),
                    (v[30] = E(u[44])),
                    (v[31] = E(u[53])),
                    (v[32] = E(u[10])),
                    (v[33] = E(u[19])),
                    (v[34] = E(u[23])),
                    (v[35] = E(u[32])),
                    (v[36] = E(u[39])),
                    (v[37] = E(u[45])),
                    (v[38] = E(u[52])),
                    (v[39] = E(u[54])),
                    (v[40] = E(u[20])),
                    (v[41] = E(u[22])),
                    (v[42] = E(u[33])),
                    (v[43] = E(u[38])),
                    (v[44] = E(u[46])),
                    (v[45] = E(u[51])),
                    (v[46] = E(u[55])),
                    (v[47] = E(u[60])),
                    (v[48] = E(u[21])),
                    (v[49] = E(u[34])),
                    (v[50] = E(u[37])),
                    (v[51] = E(u[47])),
                    (v[52] = E(u[50])),
                    (v[53] = E(u[56])),
                    (v[54] = E(u[59])),
                    (v[55] = E(u[61])),
                    (v[56] = E(u[35])),
                    (v[57] = E(u[36])),
                    (v[58] = E(u[48])),
                    (v[59] = E(u[49])),
                    (v[60] = E(u[57])),
                    (v[61] = E(u[58])),
                    (v[62] = E(u[62])),
                    (v[63] = E(u[63])),
                    (function (a) {
                      let b = 0.5 * Math.cos(3.14159 / 16),
                        c = 0.5 * Math.cos(3.14159 / 8),
                        d = 0.5 * Math.cos((3 * 3.14159) / 16),
                        e = 0.5 * Math.cos((3 * 3.14159) / 8);
                      for (
                        var f = [, , , ,],
                          g = [, , , ,],
                          h = [, , , ,],
                          i = [, , , ,],
                          j = 0;
                        j < 8;
                        ++j
                      ) {
                        var k = 8 * j;
                        ((f[0] = c * a[k + 2]),
                          (f[1] = e * a[k + 2]),
                          (f[2] = c * a[k + 6]),
                          (f[3] = e * a[k + 6]),
                          (g[0] =
                            b * a[k + 1] +
                            d * a[k + 3] +
                            0.2777854612564676 * a[k + 5] +
                            0.09754573032714427 * a[k + 7]),
                          (g[1] =
                            d * a[k + 1] -
                            0.09754573032714427 * a[k + 3] -
                            b * a[k + 5] -
                            0.2777854612564676 * a[k + 7]),
                          (g[2] =
                            0.2777854612564676 * a[k + 1] -
                            b * a[k + 3] +
                            0.09754573032714427 * a[k + 5] +
                            d * a[k + 7]),
                          (g[3] =
                            0.09754573032714427 * a[k + 1] -
                            0.2777854612564676 * a[k + 3] +
                            d * a[k + 5] -
                            b * a[k + 7]),
                          (h[0] = 0.35355362513961314 * (a[k + 0] + a[k + 4])),
                          (h[3] = 0.35355362513961314 * (a[k + 0] - a[k + 4])),
                          (h[1] = f[0] + f[3]),
                          (h[2] = f[1] - f[2]),
                          (i[0] = h[0] + h[1]),
                          (i[1] = h[3] + h[2]),
                          (i[2] = h[3] - h[2]),
                          (i[3] = h[0] - h[1]),
                          (a[k + 0] = i[0] + g[0]),
                          (a[k + 1] = i[1] + g[1]),
                          (a[k + 2] = i[2] + g[2]),
                          (a[k + 3] = i[3] + g[3]),
                          (a[k + 4] = i[3] - g[3]),
                          (a[k + 5] = i[2] - g[2]),
                          (a[k + 6] = i[1] - g[1]),
                          (a[k + 7] = i[0] - g[0]));
                      }
                      for (var l = 0; l < 8; ++l)
                        ((f[0] = c * a[16 + l]),
                          (f[1] = e * a[16 + l]),
                          (f[2] = c * a[48 + l]),
                          (f[3] = e * a[48 + l]),
                          (g[0] =
                            b * a[8 + l] +
                            d * a[24 + l] +
                            0.2777854612564676 * a[40 + l] +
                            0.09754573032714427 * a[56 + l]),
                          (g[1] =
                            d * a[8 + l] -
                            0.09754573032714427 * a[24 + l] -
                            b * a[40 + l] -
                            0.2777854612564676 * a[56 + l]),
                          (g[2] =
                            0.2777854612564676 * a[8 + l] -
                            b * a[24 + l] +
                            0.09754573032714427 * a[40 + l] +
                            d * a[56 + l]),
                          (g[3] =
                            0.09754573032714427 * a[8 + l] -
                            0.2777854612564676 * a[24 + l] +
                            d * a[40 + l] -
                            b * a[56 + l]),
                          (h[0] = 0.35355362513961314 * (a[l] + a[32 + l])),
                          (h[3] = 0.35355362513961314 * (a[l] - a[32 + l])),
                          (h[1] = f[0] + f[3]),
                          (h[2] = f[1] - f[2]),
                          (i[0] = h[0] + h[1]),
                          (i[1] = h[3] + h[2]),
                          (i[2] = h[3] - h[2]),
                          (i[3] = h[0] - h[1]),
                          (a[0 + l] = i[0] + g[0]),
                          (a[8 + l] = i[1] + g[1]),
                          (a[16 + l] = i[2] + g[2]),
                          (a[24 + l] = i[3] + g[3]),
                          (a[32 + l] = i[3] - g[3]),
                          (a[40 + l] = i[2] - g[2]),
                          (a[48 + l] = i[1] - g[1]),
                          (a[56 + l] = i[0] - g[0]));
                    })(q[a]));
                }
                for (var y = q, z = 0; z < 64; ++z) {
                  var A = y[0][z],
                    B = y[1][z],
                    C = y[2][z];
                  ((y[0][z] = A + 1.5747 * C),
                    (y[1][z] = A - 0.1873 * B - 0.4682 * C),
                    (y[2][z] = A + 1.8556 * B));
                }
                for (let b = 0; b < 3; ++b)
                  !(function (a, b, c) {
                    for (var d, e = 0; e < 64; ++e) {
                      b[c + e] = b3.toHalfFloat(
                        (d = a[e]) <= 1
                          ? Math.sign(d) * Math.pow(Math.abs(d), 2.2)
                          : Math.sign(d) *
                              Math.pow(9.025013291561939, Math.abs(d) - 1)
                      );
                    }
                  })(q[b], s[b], 64 * a);
              }
              let f = 0;
              for (let d = 0; d < 3; ++d) {
                let e = c[a.idx[d]].type;
                for (let a = 8 * b; a < 8 * b + w; ++a) {
                  f = t[d][a];
                  for (let b = 0; b < j; ++b) {
                    let c = 64 * b + (7 & a) * 8;
                    (g.setUint16(f + 0 * e, s[d][c + 0], !0),
                      g.setUint16(f + 2 * e, s[d][c + 1], !0),
                      g.setUint16(f + 4 * e, s[d][c + 2], !0),
                      g.setUint16(f + 6 * e, s[d][c + 3], !0),
                      g.setUint16(f + 8 * e, s[d][c + 4], !0),
                      g.setUint16(f + 10 * e, s[d][c + 5], !0),
                      g.setUint16(f + 12 * e, s[d][c + 6], !0),
                      g.setUint16(f + 14 * e, s[d][c + 7], !0),
                      (f += 16 * e));
                  }
                }
                if (j != k)
                  for (let a = 8 * b; a < 8 * b + w; ++a) {
                    let b = t[d][a] + 8 * j * 2 * e,
                      c = 64 * j + (7 & a) * 8;
                    for (let a = 0; a < x; ++a)
                      g.setUint16(b + 2 * a * e, s[d][c + a], !0);
                  }
              }
            }
            for (
              var D = new Uint16Array(h), g = new DataView(f.buffer), F = 0;
              F < 3;
              ++F
            ) {
              c[a.idx[F]].decoded = !0;
              var G = c[a.idx[F]].type;
              if (2 == c[F].type)
                for (var H = 0; H < i; ++H) {
                  let a = t[F][H];
                  for (var I = 0; I < h; ++I)
                    D[I] = g.getUint16(a + 2 * I * G, !0);
                  for (var I = 0; I < h; ++I)
                    g.setFloat32(a + 2 * I * G, E(D[I]), !0);
                }
            }
          })(u, I, o, y, D, d);
          for (var q = 0; q < o.length; ++q) {
            var r = o[q];
            if (!r.decoded)
              if (2 === r.compression)
                for (var M = 0, N = 0, J = 0; J < a.lines; ++J) {
                  for (var O = I[q][M], P = 0; P < r.width; ++P) {
                    for (var Q = 0; Q < 2 * r.type; ++Q)
                      d[O++] = G[N + Q * r.width * r.height];
                    N++;
                  }
                  M++;
                }
              else throw 'EXRLoader.parse: unsupported channel compression';
          }
          return new DataView(d.buffer);
        }
        function w(a, b) {
          for (var c = new Uint8Array(a), d = 0; 0 != c[b.value + d]; ) d += 1;
          var e = new TextDecoder().decode(c.slice(b.value, b.value + d));
          return ((b.value = b.value + d + 1), e);
        }
        function x(a, b) {
          var c = a.getInt32(b.value, !0);
          return ((b.value = b.value + 4), c);
        }
        function y(a, b) {
          var c = a.getUint32(b.value, !0);
          return ((b.value = b.value + 4), c);
        }
        function z(a, b) {
          var c = a[b.value];
          return ((b.value = b.value + 1), c);
        }
        function A(a, b) {
          var c = a.getUint8(b.value);
          return ((b.value = b.value + 1), c);
        }
        let B = function (a, b) {
          let c;
          return (
            (c =
              'getBigInt64' in DataView.prototype
                ? Number(a.getBigInt64(b.value, !0))
                : a.getUint32(b.value + 4, !0) +
                  Number(a.getUint32(b.value, !0) << 32)),
            (b.value += 8),
            c
          );
        };
        function C(a, b) {
          var c = a.getFloat32(b.value, !0);
          return ((b.value += 4), c);
        }
        function D(a, b) {
          return b3.toHalfFloat(C(a, b));
        }
        function E(a) {
          var b = (31744 & a) >> 10,
            c = 1023 & a;
          return (
            (a >> 15 ? -1 : 1) *
            (b
              ? 31 === b
                ? c
                  ? NaN
                  : 1 / 0
                : Math.pow(2, b - 15) * (1 + c / 1024)
              : (c / 1024) * 6103515625e-14)
          );
        }
        function F(a, b) {
          var c = a.getUint16(b.value, !0);
          return ((b.value += 2), c);
        }
        function G(a, b) {
          return E(F(a, b));
        }
        let H = new DataView(a),
          I = new Uint8Array(a),
          J = { value: 0 },
          K = (function (a, b, c) {
            let d = {};
            if (0x1312f76 != a.getUint32(0, !0))
              throw "THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";
            d.version = a.getUint8(4);
            let e = a.getUint8(5);
            ((d.spec = {
              singleTile: !!(2 & e),
              longName: !!(4 & e),
              deepFormat: !!(8 & e),
              multiPart: !!(16 & e),
            }),
              (c.value = 8));
            for (var f = !0; f; ) {
              var g = w(b, c);
              if (0 == g) f = !1;
              else {
                var h = w(b, c),
                  i = y(a, c),
                  j = (function (a, b, c, d, e) {
                    var f, g, h, i, j, k, l;
                    if (
                      'string' === d ||
                      'stringvector' === d ||
                      'iccProfile' === d
                    )
                      return (
                        (f = new TextDecoder().decode(
                          new Uint8Array(b).slice(c.value, c.value + e)
                        )),
                        (c.value = c.value + e),
                        f
                      );
                    if ('chlist' === d)
                      return (function (a, b, c, d) {
                        for (var e = c.value, f = []; c.value < e + d - 1; ) {
                          var g = w(b, c),
                            h = x(a, c),
                            i = A(a, c);
                          c.value += 3;
                          var j = x(a, c),
                            k = x(a, c);
                          f.push({
                            name: g,
                            pixelType: h,
                            pLinear: i,
                            xSampling: j,
                            ySampling: k,
                          });
                        }
                        return ((c.value += 1), f);
                      })(a, b, c, e);
                    if ('chromaticities' === d)
                      return (
                        (g = C(a, c)),
                        (h = C(a, c)),
                        (i = C(a, c)),
                        (j = C(a, c)),
                        (k = C(a, c)),
                        {
                          redX: g,
                          redY: h,
                          greenX: i,
                          greenY: j,
                          blueX: k,
                          blueY: C(a, c),
                          whiteX: C(a, c),
                          whiteY: C(a, c),
                        }
                      );
                    if ('compression' === d)
                      return [
                        'NO_COMPRESSION',
                        'RLE_COMPRESSION',
                        'ZIPS_COMPRESSION',
                        'ZIP_COMPRESSION',
                        'PIZ_COMPRESSION',
                        'PXR24_COMPRESSION',
                        'B44_COMPRESSION',
                        'B44A_COMPRESSION',
                        'DWAA_COMPRESSION',
                        'DWAB_COMPRESSION',
                      ][A(a, c)];
                    if ('box2i' === d)
                      return (
                        (l = y(a, c)),
                        { xMin: l, yMin: y(a, c), xMax: y(a, c), yMax: y(a, c) }
                      );
                    else if ('lineOrder' === d)
                      return ['INCREASING_Y'][A(a, c)];
                    else if ('float' === d) return C(a, c);
                    else if ('v2f' === d) return [C(a, c), C(a, c)];
                    else if ('v3f' === d) return [C(a, c), C(a, c), C(a, c)];
                    else if ('int' === d) return x(a, c);
                    else if ('rational' === d) return [x(a, c), y(a, c)];
                    else if ('timecode' === d) return [y(a, c), y(a, c)];
                    else
                      return 'preview' === d
                        ? ((c.value += e), 'skipped')
                        : ((c.value += e), void 0);
                  })(a, b, c, h, i);
                void 0 === j
                  ? console.warn(
                      `EXRLoader.parse: skipped unknown header attribute type '${h}'.`
                    )
                  : (d[g] = j);
              }
            }
            if ((-5 & e) != 0)
              throw (
                console.error('EXRHeader:', d),
                'THREE.EXRLoader: provided file is currently unsupported.'
              );
            return d;
          })(H, a, J),
          L = (function (a, b, c, d, e) {
            let f = {
              size: 0,
              viewer: b,
              array: c,
              offset: d,
              width: a.dataWindow.xMax - a.dataWindow.xMin + 1,
              height: a.dataWindow.yMax - a.dataWindow.yMin + 1,
              channels: a.channels.length,
              bytesPerLine: null,
              lines: null,
              inputSize: null,
              type: a.channels[0].pixelType,
              uncompress: null,
              getter: null,
              format: null,
              [nG ? 'colorSpace' : 'encoding']: null,
            };
            switch (a.compression) {
              case 'NO_COMPRESSION':
                ((f.lines = 1), (f.uncompress = q));
                break;
              case 'RLE_COMPRESSION':
                ((f.lines = 1), (f.uncompress = r));
                break;
              case 'ZIPS_COMPRESSION':
                ((f.lines = 1), (f.uncompress = s));
                break;
              case 'ZIP_COMPRESSION':
                ((f.lines = 16), (f.uncompress = s));
                break;
              case 'PIZ_COMPRESSION':
                ((f.lines = 32), (f.uncompress = t));
                break;
              case 'PXR24_COMPRESSION':
                ((f.lines = 16), (f.uncompress = u));
                break;
              case 'DWAA_COMPRESSION':
                ((f.lines = 32), (f.uncompress = v));
                break;
              case 'DWAB_COMPRESSION':
                ((f.lines = 256), (f.uncompress = v));
                break;
              default:
                throw 'EXRLoader.parse: ' + a.compression + ' is unsupported';
            }
            if (((f.scanlineBlockSize = f.lines), 1 == f.type))
              switch (e) {
                case 1015:
                  ((f.getter = G), (f.inputSize = 2));
                  break;
                case 1016:
                  ((f.getter = F), (f.inputSize = 2));
              }
            else if (2 == f.type)
              switch (e) {
                case 1015:
                  ((f.getter = C), (f.inputSize = 4));
                  break;
                case 1016:
                  ((f.getter = D), (f.inputSize = 4));
              }
            else
              throw (
                'EXRLoader.parse: unsupported pixelType ' +
                f.type +
                ' for ' +
                a.compression +
                '.'
              );
            f.blockCount = (a.dataWindow.yMax + 1) / f.scanlineBlockSize;
            for (var g = 0; g < f.blockCount; g++) B(b, d);
            f.outputChannels = 3 == f.channels ? 4 : f.channels;
            let h = f.width * f.height * f.outputChannels;
            switch (e) {
              case 1015:
                ((f.byteArray = new Float32Array(h)),
                  f.channels < f.outputChannels && f.byteArray.fill(1, 0, h));
                break;
              case 1016:
                ((f.byteArray = new Uint16Array(h)),
                  f.channels < f.outputChannels &&
                    f.byteArray.fill(15360, 0, h));
                break;
              default:
                console.error('THREE.EXRLoader: unsupported type: ', e);
            }
            return (
              (f.bytesPerLine = f.width * f.inputSize * f.channels),
              4 == f.outputChannels ? (f.format = 1023) : (f.format = 1028),
              nG ? (f.colorSpace = 'srgb-linear') : (f.encoding = 3e3),
              f
            );
          })(K, H, I, J, this.type),
          M = { value: 0 },
          N = { R: 0, G: 1, B: 2, A: 3, Y: 0 };
        for (let a = 0; a < L.height / L.scanlineBlockSize; a++) {
          let b = y(H, J);
          ((L.size = y(H, J)),
            (L.lines =
              b + L.scanlineBlockSize > L.height
                ? L.height - b
                : L.scanlineBlockSize));
          let c = L.size < L.lines * L.bytesPerLine ? L.uncompress(L) : q(L);
          J.value += L.size;
          for (let b = 0; b < L.scanlineBlockSize; b++) {
            let d = b + a * L.scanlineBlockSize;
            if (d >= L.height) break;
            for (let a = 0; a < L.channels; a++) {
              let e = N[K.channels[a].name];
              for (let f = 0; f < L.width; f++) {
                M.value =
                  (b * (L.channels * L.width) + a * L.width + f) * L.inputSize;
                let g =
                  (L.height - 1 - d) * (L.width * L.outputChannels) +
                  f * L.outputChannels +
                  e;
                L.byteArray[g] = L.getter(c, M);
              }
            }
          }
        }
        return {
          header: K,
          width: L.width,
          height: L.height,
          data: L.byteArray,
          format: L.format,
          [nG ? 'colorSpace' : 'encoding']: L[nG ? 'colorSpace' : 'encoding'],
          type: this.type,
        };
      }
      setDataType(a) {
        return ((this.type = a), this);
      }
      load(a, b, c, d) {
        return super.load(
          a,
          function (a, c) {
            (nG ? (a.colorSpace = c.colorSpace) : (a.encoding = c.encoding),
              (a.minFilter = 1006),
              (a.magFilter = 1006),
              (a.generateMipmaps = !1),
              (a.flipY = !1),
              b && b(a, c));
          },
          c,
          d
        );
      }
    }
    let nI = (a, b, c) => {
      let d;
      switch (a) {
        case 1009:
          d = new Uint8ClampedArray(b * c * 4);
          break;
        case 1016:
          d = new Uint16Array(b * c * 4);
          break;
        case 1014:
          d = new Uint32Array(b * c * 4);
          break;
        case 1010:
          d = new Int8Array(b * c * 4);
          break;
        case 1011:
          d = new Int16Array(b * c * 4);
          break;
        case 1013:
          d = new Int32Array(b * c * 4);
          break;
        case 1015:
          d = new Float32Array(b * c * 4);
          break;
        default:
          throw Error('Unsupported data type');
      }
      return d;
    };
    class nJ {
      _renderer;
      _rendererIsDisposable = !1;
      _material;
      _scene;
      _camera;
      _quad;
      _renderTarget;
      _width;
      _height;
      _type;
      _colorSpace;
      _supportsReadPixels = !0;
      constructor(a) {
        ((this._width = a.width),
          (this._height = a.height),
          (this._type = a.type),
          (this._colorSpace = a.colorSpace));
        const b = {
          format: 1023,
          depthBuffer: !1,
          stencilBuffer: !1,
          type: this._type,
          colorSpace: this._colorSpace,
          anisotropy:
            a.renderTargetOptions?.anisotropy !== void 0
              ? a.renderTargetOptions?.anisotropy
              : 1,
          generateMipmaps:
            a.renderTargetOptions?.generateMipmaps !== void 0 &&
            a.renderTargetOptions?.generateMipmaps,
          magFilter:
            a.renderTargetOptions?.magFilter !== void 0
              ? a.renderTargetOptions?.magFilter
              : 1006,
          minFilter:
            a.renderTargetOptions?.minFilter !== void 0
              ? a.renderTargetOptions?.minFilter
              : 1006,
          samples:
            a.renderTargetOptions?.samples !== void 0
              ? a.renderTargetOptions?.samples
              : void 0,
          wrapS:
            a.renderTargetOptions?.wrapS !== void 0
              ? a.renderTargetOptions?.wrapS
              : 1001,
          wrapT:
            a.renderTargetOptions?.wrapT !== void 0
              ? a.renderTargetOptions?.wrapT
              : 1001,
        };
        if (
          ((this._material = a.material),
          a.renderer
            ? (this._renderer = a.renderer)
            : ((this._renderer = nJ.instantiateRenderer()),
              (this._rendererIsDisposable = !0)),
          (this._scene = new cV()),
          (this._camera = new gv()),
          this._camera.position.set(0, 0, 10),
          (this._camera.left = -0.5),
          (this._camera.right = 0.5),
          (this._camera.top = 0.5),
          (this._camera.bottom = -0.5),
          this._camera.updateProjectionMatrix(),
          !((a, b, c, d) => {
            if (void 0 !== l) return l;
            let e = new aJ(1, 1, d);
            b.setRenderTarget(e);
            let f = new cA(new fu(), new b_({ color: 0xffffff }));
            (b.render(f, c), b.setRenderTarget(null));
            let g = nI(a, e.width, e.height);
            return (
              b.readRenderTargetPixels(e, 0, 0, e.width, e.height, g),
              e.dispose(),
              f.geometry.dispose(),
              f.material.dispose(),
              (l = 0 !== g[0])
            );
          })(this._type, this._renderer, this._camera, b))
        ) {
          let a;
          (1016 === this._type &&
            (a = this._renderer.extensions.has('EXT_color_buffer_float')
              ? 1015
              : void 0),
            void 0 !== a
              ? (console.warn(
                  `This browser does not support reading pixels from ${this._type} RenderTargets, switching to 1015`
                ),
                (this._type = a))
              : ((this._supportsReadPixels = !1),
                console.warn(
                  'This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown'
                )));
        }
        ((this._quad = new cA(new fu(), this._material)),
          this._quad.geometry.computeBoundingBox(),
          this._scene.add(this._quad),
          (this._renderTarget = new aJ(this.width, this.height, b)),
          (this._renderTarget.texture.mapping =
            a.renderTargetOptions?.mapping !== void 0
              ? a.renderTargetOptions?.mapping
              : 300));
      }
      static instantiateRenderer() {
        let a = new kA();
        return (a.setSize(128, 128), a);
      }
      render = () => {
        this._renderer.setRenderTarget(this._renderTarget);
        try {
          this._renderer.render(this._scene, this._camera);
        } catch (a) {
          throw (this._renderer.setRenderTarget(null), a);
        }
        this._renderer.setRenderTarget(null);
      };
      toArray() {
        if (!this._supportsReadPixels)
          throw Error("Can't read pixels in this browser");
        let a = nI(this._type, this._width, this._height);
        return (
          this._renderer.readRenderTargetPixels(
            this._renderTarget,
            0,
            0,
            this._width,
            this._height,
            a
          ),
          a
        );
      }
      toDataTexture(a) {
        let b = new dr(
          this.toArray(),
          this.width,
          this.height,
          1023,
          this._type,
          a?.mapping || 300,
          a?.wrapS || 1001,
          a?.wrapT || 1001,
          a?.magFilter || 1006,
          a?.minFilter || 1006,
          a?.anisotropy || 1,
          J
        );
        return (
          (b.generateMipmaps =
            a?.generateMipmaps !== void 0 && a?.generateMipmaps),
          b
        );
      }
      disposeOnDemandRenderer() {
        (this._renderer.setRenderTarget(null),
          this._rendererIsDisposable &&
            (this._renderer.dispose(), this._renderer.forceContextLoss()));
      }
      dispose(a) {
        (this.disposeOnDemandRenderer(),
          a && this.renderTarget.dispose(),
          this.material instanceof cH &&
            Object.values(this.material.uniforms).forEach((a) => {
              a.value instanceof aG && a.value.dispose();
            }),
          Object.values(this.material).forEach((a) => {
            a instanceof aG && a.dispose();
          }),
          this.material.dispose(),
          this._quad.geometry.dispose());
      }
      get width() {
        return this._width;
      }
      set width(a) {
        ((this._width = a),
          this._renderTarget.setSize(this._width, this._height));
      }
      get height() {
        return this._height;
      }
      set height(a) {
        ((this._height = a),
          this._renderTarget.setSize(this._width, this._height));
      }
      get renderer() {
        return this._renderer;
      }
      get renderTarget() {
        return this._renderTarget;
      }
      set renderTarget(a) {
        ((this._renderTarget = a),
          (this._width = a.width),
          (this._height = a.height));
      }
      get material() {
        return this._material;
      }
      get type() {
        return this._type;
      }
      get colorSpace() {
        return this._colorSpace;
      }
    }
    class nK extends Error {}
    class nL extends Error {}
    let nM = (a, b, c) => {
      let d = RegExp(`${b}="([^"]*)"`, 'i').exec(a);
      if (d) return d[1];
      let e = RegExp(`<${b}[^>]*>([\\s\\S]*?)</${b}>`, 'i').exec(a);
      if (e) {
        let a = e[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);
        return a && 3 === a.length
          ? a.map((a) => a.replace(/<\/?rdf:li>/g, ''))
          : e[1].trim();
      }
      if (void 0 !== c) return c;
      throw Error(`Can't find ${b} in gainmap metadata`);
    };
    class nN {
      options;
      constructor(a) {
        this.options = {
          debug: !!a && void 0 !== a.debug && a.debug,
          extractFII: !a || void 0 === a.extractFII || a.extractFII,
          extractNonFII: !a || void 0 === a.extractNonFII || a.extractNonFII,
        };
      }
      extract(a) {
        return new Promise((b, c) => {
          let d,
            e = this.options.debug,
            f = new DataView(a.buffer);
          if (65496 !== f.getUint16(0))
            return void c(Error('Not a valid jpeg'));
          let g = f.byteLength,
            h = 2,
            i = 0;
          for (; h < g; ) {
            if (++i > 250)
              return void c(Error(`Found no marker after ${i} loops 😵`));
            if (255 !== f.getUint8(h))
              return void c(
                Error(
                  `Not a valid marker at offset 0x${h.toString(16)}, found: 0x${f.getUint8(h).toString(16)}`
                )
              );
            if (
              ((d = f.getUint8(h + 1)),
              e && console.log(`Marker: ${d.toString(16)}`),
              226 === d)
            ) {
              e && console.log('Found APP2 marker (0xffe2)');
              let a = h + 4;
              if (0x4d504600 === f.getUint32(a)) {
                let d,
                  e = a + 4;
                if (18761 === f.getUint16(e)) d = !1;
                else {
                  if (19789 !== f.getUint16(e))
                    return void c(
                      Error('No valid endianness marker found in TIFF header')
                    );
                  d = !0;
                }
                if (42 !== f.getUint16(e + 2, !d))
                  return void c(
                    Error('Not valid TIFF data! (no 0x002A marker)')
                  );
                let g = f.getUint32(e + 4, !d);
                if (g < 8)
                  return void c(
                    Error('Not valid TIFF data! (First offset less than 8)')
                  );
                let h = e + g,
                  i = f.getUint16(h, !d),
                  j = h + 2,
                  k = 0;
                for (let a = j; a < j + 12 * i; a += 12)
                  45057 === f.getUint16(a, !d) && (k = f.getUint32(a + 8, !d));
                let l = h + 2 + 12 * i + 4,
                  m = [];
                for (let a = l; a < l + 16 * k; a += 16) {
                  let b = {
                    MPType: f.getUint32(a, !d),
                    size: f.getUint32(a + 4, !d),
                    dataOffset: f.getUint32(a + 8, !d),
                    dependantImages: f.getUint32(a + 12, !d),
                    start: -1,
                    end: -1,
                    isFII: !1,
                  };
                  (b.dataOffset
                    ? ((b.start = e + b.dataOffset), (b.isFII = !1))
                    : ((b.start = 0), (b.isFII = !0)),
                    (b.end = b.start + b.size),
                    m.push(b));
                }
                if (this.options.extractNonFII && m.length) {
                  let a = new Blob([f]),
                    c = [];
                  for (let b of m) {
                    if (b.isFII && !this.options.extractFII) continue;
                    let d = a.slice(b.start, b.end + 1, 'image/jpeg');
                    c.push(d);
                  }
                  b(c);
                }
              }
            }
            h += 2 + f.getUint16(h + 2);
          }
        });
      }
    }
    let nO = async (a) => {
        let b = ((a) => {
          let b,
            c = (b =
              'u' > typeof TextDecoder
                ? new TextDecoder().decode(a)
                : a.toString()).indexOf('<x:xmpmeta');
          for (; -1 !== c; ) {
            let a = b.indexOf('x:xmpmeta>', c),
              d = b.slice(c, a + 10);
            try {
              let a = nM(d, 'hdrgm:GainMapMin', '0'),
                b = nM(d, 'hdrgm:GainMapMax'),
                c = nM(d, 'hdrgm:Gamma', '1'),
                e = nM(d, 'hdrgm:OffsetSDR', '0.015625'),
                f = nM(d, 'hdrgm:OffsetHDR', '0.015625'),
                g = /hdrgm:HDRCapacityMin="([^"]*)"/.exec(d),
                h = g ? g[1] : '0',
                i = /hdrgm:HDRCapacityMax="([^"]*)"/.exec(d);
              if (!i) throw Error('Incomplete gainmap metadata');
              let j = i[1];
              return {
                gainMapMin: Array.isArray(a)
                  ? a.map((a) => parseFloat(a))
                  : [parseFloat(a), parseFloat(a), parseFloat(a)],
                gainMapMax: Array.isArray(b)
                  ? b.map((a) => parseFloat(a))
                  : [parseFloat(b), parseFloat(b), parseFloat(b)],
                gamma: Array.isArray(c)
                  ? c.map((a) => parseFloat(a))
                  : [parseFloat(c), parseFloat(c), parseFloat(c)],
                offsetSdr: Array.isArray(e)
                  ? e.map((a) => parseFloat(a))
                  : [parseFloat(e), parseFloat(e), parseFloat(e)],
                offsetHdr: Array.isArray(f)
                  ? f.map((a) => parseFloat(a))
                  : [parseFloat(f), parseFloat(f), parseFloat(f)],
                hdrCapacityMin: parseFloat(h),
                hdrCapacityMax: parseFloat(j),
              };
            } catch (a) {}
            c = b.indexOf('<x:xmpmeta', a);
          }
        })(a);
        if (!b) throw new nL('Gain map XMP metadata not found');
        let c = new nN({ extractFII: !0, extractNonFII: !0 }),
          d = await c.extract(a);
        if (2 !== d.length) throw new nK('Gain map recovery image not found');
        return {
          sdr: new Uint8Array(await d[0].arrayBuffer()),
          gainMap: new Uint8Array(await d[1].arrayBuffer()),
          metadata: b,
        };
      },
      nP = (a) =>
        new Promise((b, c) => {
          let d = document.createElement('img');
          ((d.onload = () => {
            b(d);
          }),
            (d.onerror = (a) => {
              c(a);
            }),
            (d.src = URL.createObjectURL(a)));
        });
    class nQ extends ga {
      _renderer;
      _renderTargetOptions;
      _internalLoadingManager;
      _config;
      constructor(a, b) {
        (super(b),
          (this._config = a),
          a.renderer && (this._renderer = a.renderer),
          (this._internalLoadingManager = new f8()));
      }
      setRenderer(a) {
        return ((this._renderer = a), this);
      }
      setRenderTargetOptions(a) {
        return ((this._renderTargetOptions = a), this);
      }
      prepareQuadRenderer() {
        this._renderer ||
          console.warn(
            'WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.'
          );
        let a = this._config.createMaterial({
          gainMapMax: [1, 1, 1],
          gainMapMin: [0, 0, 0],
          gamma: [1, 1, 1],
          offsetHdr: [1, 1, 1],
          offsetSdr: [1, 1, 1],
          hdrCapacityMax: 1,
          hdrCapacityMin: 0,
          maxDisplayBoost: 1,
          gainMap: new aG(),
          sdr: new aG(),
        });
        return this._config.createQuadRenderer({
          width: 16,
          height: 16,
          type: 1016,
          colorSpace: J,
          material: a,
          renderer: this._renderer,
          renderTargetOptions: this._renderTargetOptions,
        });
      }
      async processImages(a, b, c) {
        let d,
          e,
          f = b ? new Blob([b], { type: 'image/jpeg' }) : void 0,
          g = new Blob([a], { type: 'image/jpeg' }),
          h = !1;
        if ('u' < typeof createImageBitmap) {
          let a = await Promise.all([
            f ? nP(f) : Promise.resolve(void 0),
            nP(g),
          ]);
          ((e = a[0]), (d = a[1]), (h = 'flipY' === c));
        } else {
          let a = await Promise.all([
            f
              ? createImageBitmap(f, { imageOrientation: c || 'flipY' })
              : Promise.resolve(void 0),
            createImageBitmap(g, { imageOrientation: c || 'flipY' }),
          ]);
          ((e = a[0]), (d = a[1]));
        }
        return { sdrImage: d, gainMapImage: e, needsFlip: h };
      }
      createTextures(a, b, c) {
        let d = new aG(
          b || new ImageData(2, 2),
          300,
          1001,
          1001,
          1006,
          1008,
          1023,
          1009,
          1,
          J
        );
        ((d.flipY = c), (d.needsUpdate = !0));
        let e = new aG(a, 300, 1001, 1001, 1006, 1008, 1023, 1009, 1, I);
        return ((e.flipY = c), (e.needsUpdate = !0), { gainMap: d, sdr: e });
      }
      updateQuadRenderer(a, b, c, d, e) {
        ((a.width = b.width),
          (a.height = b.height),
          (a.material.gainMap = c),
          (a.material.sdr = d),
          (a.material.gainMapMin = e.gainMapMin),
          (a.material.gainMapMax = e.gainMapMax),
          (a.material.offsetHdr = e.offsetHdr),
          (a.material.offsetSdr = e.offsetSdr),
          (a.material.gamma = e.gamma),
          (a.material.hdrCapacityMin = e.hdrCapacityMin),
          (a.material.hdrCapacityMax = e.hdrCapacityMax),
          (a.material.maxDisplayBoost = Math.pow(2, e.hdrCapacityMax)),
          (a.material.needsUpdate = !0));
      }
    }
    let nR = `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,
      nS = `
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;
    class nT extends cH {
      _maxDisplayBoost;
      _hdrCapacityMin;
      _hdrCapacityMax;
      constructor({
        gamma: a,
        offsetHdr: b,
        offsetSdr: c,
        gainMapMin: d,
        gainMapMax: e,
        maxDisplayBoost: f,
        hdrCapacityMin: g,
        hdrCapacityMax: h,
        sdr: i,
        gainMap: j,
      }) {
        (super({
          name: 'GainMapDecoderMaterial',
          vertexShader: nR,
          fragmentShader: nS,
          uniforms: {
            sdr: { value: i },
            gainMap: { value: j },
            gamma: { value: new aq(1 / a[0], 1 / a[1], 1 / a[2]) },
            offsetHdr: { value: new aq().fromArray(b) },
            offsetSdr: { value: new aq().fromArray(c) },
            gainMapMin: { value: new aq().fromArray(d) },
            gainMapMax: { value: new aq().fromArray(e) },
            weightFactor: { value: (Math.log2(f) - g) / (h - g) },
          },
          blending: 0,
          depthTest: !1,
          depthWrite: !1,
        }),
          (this._maxDisplayBoost = f),
          (this._hdrCapacityMin = g),
          (this._hdrCapacityMax = h),
          (this.needsUpdate = !0),
          (this.uniformsNeedUpdate = !0));
      }
      get sdr() {
        return this.uniforms.sdr.value;
      }
      set sdr(a) {
        this.uniforms.sdr.value = a;
      }
      get gainMap() {
        return this.uniforms.gainMap.value;
      }
      set gainMap(a) {
        this.uniforms.gainMap.value = a;
      }
      get offsetHdr() {
        return this.uniforms.offsetHdr.value.toArray();
      }
      set offsetHdr(a) {
        this.uniforms.offsetHdr.value.fromArray(a);
      }
      get offsetSdr() {
        return this.uniforms.offsetSdr.value.toArray();
      }
      set offsetSdr(a) {
        this.uniforms.offsetSdr.value.fromArray(a);
      }
      get gainMapMin() {
        return this.uniforms.gainMapMin.value.toArray();
      }
      set gainMapMin(a) {
        this.uniforms.gainMapMin.value.fromArray(a);
      }
      get gainMapMax() {
        return this.uniforms.gainMapMax.value.toArray();
      }
      set gainMapMax(a) {
        this.uniforms.gainMapMax.value.fromArray(a);
      }
      get gamma() {
        let a = this.uniforms.gamma.value;
        return [1 / a.x, 1 / a.y, 1 / a.z];
      }
      set gamma(a) {
        let b = this.uniforms.gamma.value;
        ((b.x = 1 / a[0]), (b.y = 1 / a[1]), (b.z = 1 / a[2]));
      }
      get hdrCapacityMin() {
        return this._hdrCapacityMin;
      }
      set hdrCapacityMin(a) {
        ((this._hdrCapacityMin = a), this.calculateWeight());
      }
      get hdrCapacityMax() {
        return this._hdrCapacityMax;
      }
      set hdrCapacityMax(a) {
        ((this._hdrCapacityMax = a), this.calculateWeight());
      }
      get maxDisplayBoost() {
        return this._maxDisplayBoost;
      }
      set maxDisplayBoost(a) {
        ((this._maxDisplayBoost = Math.max(1, Math.min(65504, a))),
          this.calculateWeight());
      }
      calculateWeight() {
        let a =
          (Math.log2(this._maxDisplayBoost) - this._hdrCapacityMin) /
          (this._hdrCapacityMax - this._hdrCapacityMin);
        this.uniforms.weightFactor.value = Math.max(0, Math.min(1, a));
      }
    }
    class nU extends nQ {
      constructor(a, b) {
        super(
          {
            renderer: a,
            createMaterial: (a) => new nT(a),
            createQuadRenderer: (a) => new nJ(a),
          },
          b
        );
      }
      async render(a, b, c, d) {
        let {
            sdrImage: e,
            gainMapImage: f,
            needsFlip: g,
          } = await this.processImages(c, d, 'flipY'),
          { gainMap: h, sdr: i } = this.createTextures(e, f, g);
        (this.updateQuadRenderer(a, e, h, i, b), a.render());
      }
    }
    class nV extends nU {
      load([a, b, c], d, e, f) {
        let g,
          h,
          i,
          j = this.prepareQuadRenderer(),
          k = async () => {
            if (g && h && i) {
              try {
                await this.render(j, i, g, h);
              } catch (d) {
                (this.manager.itemError(a),
                  this.manager.itemError(b),
                  this.manager.itemError(c),
                  'function' == typeof f && f(d),
                  j.disposeOnDemandRenderer());
                return;
              }
              ('function' == typeof d && d(j),
                this.manager.itemEnd(a),
                this.manager.itemEnd(b),
                this.manager.itemEnd(c),
                j.disposeOnDemandRenderer());
            }
          },
          l = !0,
          m = 0,
          n = 0,
          o = !0,
          p = 0,
          q = 0,
          r = !0,
          s = 0,
          t = 0,
          u = () => {
            'function' == typeof e &&
              e(
                new ProgressEvent('progress', {
                  lengthComputable: l && o && r,
                  loaded: n + q + t,
                  total: m + p + s,
                })
              );
          };
        (this.manager.itemStart(a),
          this.manager.itemStart(b),
          this.manager.itemStart(c));
        let v = new gd(this._internalLoadingManager);
        (v.setResponseType('arraybuffer'),
          v.setRequestHeader(this.requestHeader),
          v.setPath(this.path),
          v.setWithCredentials(this.withCredentials),
          v.load(
            a,
            async (a) => {
              if ('string' == typeof a) throw Error('Invalid sdr buffer');
              ((g = a), await k());
            },
            (a) => {
              ((l = a.lengthComputable), (n = a.loaded), (m = a.total), u());
            },
            (b) => {
              (this.manager.itemError(a), 'function' == typeof f && f(b));
            }
          ));
        let w = new gd(this._internalLoadingManager);
        (w.setResponseType('arraybuffer'),
          w.setRequestHeader(this.requestHeader),
          w.setPath(this.path),
          w.setWithCredentials(this.withCredentials),
          w.load(
            b,
            async (a) => {
              if ('string' == typeof a) throw Error('Invalid gainmap buffer');
              ((h = a), await k());
            },
            (a) => {
              ((o = a.lengthComputable), (q = a.loaded), (p = a.total), u());
            },
            (a) => {
              (this.manager.itemError(b), 'function' == typeof f && f(a));
            }
          ));
        let x = new gd(this._internalLoadingManager);
        return (
          x.setRequestHeader(this.requestHeader),
          x.setPath(this.path),
          x.setWithCredentials(this.withCredentials),
          x.load(
            c,
            async (a) => {
              if ('string' != typeof a) throw Error('Invalid metadata string');
              ((i = JSON.parse(a)), await k());
            },
            (a) => {
              ((r = a.lengthComputable), (t = a.loaded), (s = a.total), u());
            },
            (a) => {
              (this.manager.itemError(c), 'function' == typeof f && f(a));
            }
          ),
          j
        );
      }
    }
    class nW extends nU {
      load(a, b, c, d) {
        let e = this.prepareQuadRenderer(),
          f = new gd(this._internalLoadingManager);
        return (
          f.setResponseType('arraybuffer'),
          f.setRequestHeader(this.requestHeader),
          f.setPath(this.path),
          f.setWithCredentials(this.withCredentials),
          this.manager.itemStart(a),
          f.load(
            a,
            async (c) => {
              let f, g, h;
              if ('string' == typeof c)
                throw Error(
                  'Invalid buffer, received [string], was expecting [ArrayBuffer]'
                );
              let i = new Uint8Array(c);
              try {
                let a = await nO(i);
                ((f = a.sdr), (g = a.gainMap), (h = a.metadata));
              } catch (b) {
                if (b instanceof nL || b instanceof nK)
                  (console.warn(
                    `Failure to reconstruct an HDR image from ${a}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`
                  ),
                    (h = {
                      gainMapMin: [0, 0, 0],
                      gainMapMax: [1, 1, 1],
                      gamma: [1, 1, 1],
                      hdrCapacityMin: 0,
                      hdrCapacityMax: 1,
                      offsetHdr: [0, 0, 0],
                      offsetSdr: [0, 0, 0],
                    }),
                    (f = i));
                else throw b;
              }
              try {
                await this.render(e, h, f.buffer, g?.buffer);
              } catch (b) {
                (this.manager.itemError(a),
                  'function' == typeof d && d(b),
                  e.disposeOnDemandRenderer());
                return;
              }
              ('function' == typeof b && b(e),
                this.manager.itemEnd(a),
                e.disposeOnDemandRenderer());
            },
            c,
            (b) => {
              (this.manager.itemError(a), 'function' == typeof d && d(b));
            }
          ),
          e
        );
      }
    }
    let nX = {
        apartment: 'lebombo_1k.hdr',
        city: 'potsdamer_platz_1k.hdr',
        dawn: 'kiara_1_dawn_1k.hdr',
        forest: 'forest_slope_1k.hdr',
        lobby: 'st_fagans_interior_1k.hdr',
        night: 'dikhololo_night_1k.hdr',
        park: 'rooitou_park_1k.hdr',
        studio: 'studio_small_03_1k.hdr',
        sunset: 'venice_sunset_1k.hdr',
        warehouse: 'empty_warehouse_01_1k.hdr',
      },
      nY =
        'https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/',
      nZ = ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'];
    function n$({
      files: a = nZ,
      path: b = '',
      preset: c,
      colorSpace: d,
      extensions: e,
    } = {}) {
      c && (n1(c), (a = nX[c]), (b = nY));
      let f = Array.isArray(a),
        { extension: g, isCubemap: h } = n2(a),
        i = n3(g);
      if (!i) throw Error('useEnvironment: Unrecognized file extension: ' + a);
      let j = li((a) => a.gl);
      (0, z.useLayoutEffect)(() => {
        ('webp' === g || 'jpg' === g || 'jpeg' === g) &&
          j.domElement.addEventListener(
            'webglcontextlost',
            function () {
              lm.clear(i, f ? [a] : a);
            },
            { once: !0 }
          );
      }, [a, j.domElement]);
      let k = lm(i, f ? [a] : a, (a) => {
          (('webp' === g || 'jpg' === g || 'jpeg' === g) && a.setRenderer(j),
            null == a.setPath || a.setPath(b),
            e && e(a));
        }),
        l = f ? k[0] : k;
      if ('jpg' === g || 'jpeg' === g || 'webp' === g) {
        var m;
        l = null == (m = l.renderTarget) ? void 0 : m.texture;
      }
      return (
        (l.mapping = h ? 301 : 303),
        (l.colorSpace = null != d ? d : h ? 'srgb' : 'srgb-linear'),
        l
      );
    }
    let n_ = { files: nZ, path: '', preset: void 0, extensions: void 0 };
    n$.preload = (a) => {
      let b = { ...n_, ...a },
        { files: c, path: d = '' } = b,
        { preset: e, extensions: f } = b;
      e && (n1(e), (c = nX[e]), (d = nY));
      let { extension: g } = n2(c);
      if ('webp' === g || 'jpg' === g || 'jpeg' === g)
        throw Error('useEnvironment: Preloading gainmaps is not supported');
      let h = n3(g);
      if (!h) throw Error('useEnvironment: Unrecognized file extension: ' + c);
      lm.preload(h, Array.isArray(c) ? [c] : c, (a) => {
        (null == a.setPath || a.setPath(d), f && f(a));
      });
    };
    let n0 = { files: nZ, preset: void 0 };
    function n1(a) {
      if (!(a in nX))
        throw Error('Preset must be one of: ' + Object.keys(nX).join(', '));
    }
    function n2(a) {
      var b;
      let c = Array.isArray(a) && 6 === a.length,
        d =
          Array.isArray(a) &&
          3 === a.length &&
          a.some((a) => a.endsWith('json')),
        e = Array.isArray(a) ? a[0] : a;
      return {
        extension: c
          ? 'cube'
          : d
            ? 'webp'
            : e.startsWith('data:application/exr')
              ? 'exr'
              : e.startsWith('data:application/hdr')
                ? 'hdr'
                : e.startsWith('data:image/jpeg')
                  ? 'jpg'
                  : null == (b = e.split('.').pop()) ||
                      null == (b = b.split('?')) ||
                      null == (b = b.shift())
                    ? void 0
                    : b.toLowerCase(),
        isCubemap: c,
        isGainmap: d,
      };
    }
    function n3(a) {
      return 'cube' === a
        ? gi
        : 'hdr' === a
          ? l5
          : 'exr' === a
            ? nH
            : 'jpg' === a || 'jpeg' === a
              ? nW
              : 'webp' === a
                ? nV
                : null;
    }
    function n4(a, b, c, d, e = {}) {
      var f, g, h, i, j;
      let k;
      e = {
        backgroundBlurriness: 0,
        backgroundIntensity: 1,
        backgroundRotation: [0, 0, 0],
        environmentIntensity: 1,
        environmentRotation: [0, 0, 0],
        ...e,
      };
      let l = (k = j = b || c).current && k.current.isScene ? j.current : j,
        m = l.background,
        n = l.environment,
        o = {
          backgroundBlurriness: l.backgroundBlurriness,
          backgroundIntensity: l.backgroundIntensity,
          backgroundRotation:
            null !=
            (f =
              null == (g = l.backgroundRotation) || null == g.clone
                ? void 0
                : g.clone())
              ? f
              : [0, 0, 0],
          environmentIntensity: l.environmentIntensity,
          environmentRotation:
            null !=
            (h =
              null == (i = l.environmentRotation) || null == i.clone
                ? void 0
                : i.clone())
              ? h
              : [0, 0, 0],
        };
      return (
        'only' !== a && (l.environment = d),
        a && (l.background = d),
        k9(l, e),
        () => {
          ('only' !== a && (l.environment = n),
            a && (l.background = m),
            k9(l, o));
        }
      );
    }
    function n5({ scene: a, background: b = !1, map: c, ...d }) {
      let e = li((a) => a.scene);
      return (
        z.useLayoutEffect(() => {
          if (c) return n4(b, a, e, c, d);
        }),
        null
      );
    }
    function n6({
      background: a = !1,
      scene: b,
      blur: c,
      backgroundBlurriness: d,
      backgroundIntensity: e,
      backgroundRotation: f,
      environmentIntensity: g,
      environmentRotation: h,
      ...i
    }) {
      let j = n$(i),
        k = li((a) => a.scene);
      return (
        z.useLayoutEffect(() =>
          n4(a, b, k, j, {
            backgroundBlurriness: null != c ? c : d,
            backgroundIntensity: e,
            backgroundRotation: f,
            environmentIntensity: g,
            environmentRotation: h,
          })
        ),
        z.useEffect(
          () => () => {
            j.dispose();
          },
          [j]
        ),
        null
      );
    }
    function n7({
      children: a,
      near: b = 0.1,
      far: c = 1e3,
      resolution: d = 256,
      frames: e = 1,
      map: f,
      background: g = !1,
      blur: h,
      backgroundBlurriness: i,
      backgroundIntensity: j,
      backgroundRotation: k,
      environmentIntensity: l,
      environmentRotation: m,
      scene: n,
      files: o,
      path: p,
      preset: q,
      extensions: r,
    }) {
      var s;
      let t = li((a) => a.gl),
        u = li((a) => a.scene),
        v = z.useRef(null),
        [w] = z.useState(() => new cV()),
        x = z.useMemo(() => {
          let a = new cP(d);
          return ((a.texture.type = 1016), a);
        }, [d]);
      (z.useEffect(
        () => () => {
          x.dispose();
        },
        [x]
      ),
        z.useLayoutEffect(() => {
          if (1 === e) {
            let a = t.autoClear;
            ((t.autoClear = !0), v.current.update(t, w), (t.autoClear = a));
          }
          return n4(g, n, u, x.texture, {
            backgroundBlurriness: null != h ? h : i,
            backgroundIntensity: j,
            backgroundRotation: k,
            environmentIntensity: l,
            environmentRotation: m,
          });
        }, [a, w, x.texture, n, u, g, e, t]));
      let A = 1;
      return (
        lj(() => {
          if (e === 1 / 0 || A < e) {
            let a = t.autoClear;
            ((t.autoClear = !0),
              v.current.update(t, w),
              (t.autoClear = a),
              A++);
          }
        }),
        z.createElement(
          z.Fragment,
          null,
          ((s = z.createElement(
            z.Fragment,
            null,
            a,
            z.createElement('cubeCamera', { ref: v, args: [b, c, x] }),
            o || q
              ? z.createElement(n6, {
                  background: !0,
                  files: o,
                  preset: q,
                  path: p,
                  extensions: r,
                })
              : f
                ? z.createElement(n5, { background: !0, map: f, extensions: r })
                : null
          )),
          (0, y.jsx)(lL, { children: s, container: w, state: void 0 }))
        )
      );
    }
    function n8(a) {
      var b, c, d, e;
      let f = n$(a),
        g = a.map || f;
      (z.useMemo(() => lu({ GroundProjectedEnvImpl: l4 }), []),
        z.useEffect(
          () => () => {
            f.dispose();
          },
          [f]
        ));
      let h = z.useMemo(() => [g], [g]),
        i = null == (b = a.ground) ? void 0 : b.height,
        j = null == (c = a.ground) ? void 0 : c.radius,
        k = null != (d = null == (e = a.ground) ? void 0 : e.scale) ? d : 1e3;
      return z.createElement(
        z.Fragment,
        null,
        z.createElement(n5, l2({}, a, { map: g })),
        z.createElement('groundProjectedEnvImpl', {
          args: h,
          scale: k,
          height: i,
          radius: j,
        })
      );
    }
    function n9(a) {
      return a.ground
        ? z.createElement(n8, a)
        : a.map
          ? z.createElement(n5, a)
          : a.children
            ? z.createElement(n7, a)
            : z.createElement(n6, a);
    }
    n$.clear = (a) => {
      let b = { ...n0, ...a },
        { files: c } = b,
        { preset: d } = b;
      d && (n1(d), (c = nX[d]));
      let { extension: e } = n2(c),
        f = n3(e);
      if (!f) throw Error('useEnvironment: Unrecognized file extension: ' + c);
      lm.clear(f, Array.isArray(c) ? [c] : c);
    };
    var oa = a.i(29474);
    let ob = (0, A.cubicBezier)(0.22, 1, 0.36, 1),
      oc = ({ line: a, index: b, scrollYProgress: c, animationRange: d }) => {
        let e = (0, C.useTransform)(
          c,
          [d[0] + 0.02 * b, d[1] + 0.02 * b],
          ['-100%', '0%'],
          { ease: ob }
        );
        return (0, y.jsx)('div', {
          className: 'overflow-visible mb-1 md:mb-2 w-full',
          children: (0, y.jsx)(oa.motion.span, {
            style: { x: e },
            className:
              'block text-white font-h2 text-4xl md:text-6xl lg:text-[5.5vw] xl:text-[6.5vw] leading-none tracking-[-0.04em] text-left whitespace-pre-line select-none font-black italic max-w-fit pr-[0.15em] py-2',
            children: a,
          }),
        });
      },
      od = ({ text: a, bgColor: b, isFirst: c = !1 }) => {
        let d = (0, z.useRef)(null),
          { scrollYProgress: e } = (0, B.useScroll)({
            target: d,
            offset: ['start end', 'end start'],
          }),
          f = c ? [0, 0.3] : [0.22, 0.45],
          g = c ? [0.9, 1] : [0.8, 0.95],
          h = (0, C.useTransform)(e, [f[0], f[1], g[0], g[1]], [0, 1, 1, 0]),
          i = (0, C.useTransform)(e, [0.7, 0.95], ['0vh', '-100vh']),
          j = a.split('\n');
        return (0, y.jsx)(oa.motion.section, {
          ref: d,
          'aria-label': a.replace(/\n/g, ' '),
          style: { backgroundColor: b },
          className: `relative w-full h-screen flex justify-start overflow-hidden ${c ? 'items-center pt-0' : 'items-start pt-[20vh] md:pt-[20vh] lg:pt-[15vh]'}`,
          children: (0, y.jsx)('div', {
            className: 'std-grid max-w-none',
            children: (0, y.jsx)(oa.motion.div, {
              style: { y: i, opacity: h },
              className: 'relative z-30 w-full flex flex-col justify-start',
              children: j.map((a, b) =>
                (0, y.jsx)(
                  oc,
                  { line: a, index: b, scrollYProgress: e, animationRange: f },
                  b
                )
              ),
            }),
          }),
        });
      },
      oe = ({ bgColor: a, scrollProgress: b }) => {
        let c = (0, z.useRef)(null),
          d = (0, C.useTransform)(b, [0.85, 0.95], [0, 1]),
          e = (0, C.useTransform)(b, [0.85, 0.95], [0.95, 1]),
          f = (0, C.useTransform)(b, [0.85, 0.95], ['blur(10px)', 'blur(0px)']);
        return (0, y.jsx)(oa.motion.section, {
          ref: c,
          className: 'w-full h-screen overflow-hidden',
          style: { backgroundColor: a },
          children: (0, y.jsx)(oa.motion.div, {
            style: { opacity: d, scale: e, filter: f },
            className:
              'std-grid relative flex h-full w-full flex-col justify-center pointer-events-none z-20',
            children: (0, y.jsxs)('div', {
              className:
                'w-full flex flex-col space-y-0 md:-space-y-4 lg:-space-y-8 font-display font-black uppercase text-white leading-none',
              children: [
                (0, y.jsxs)('div', {
                  className:
                    'w-full flex justify-between items-center text-[18vw] md:text-[14vw] tracking-tighter',
                  children: [
                    (0, y.jsx)('span', { children: 'I' }),
                    (0, y.jsx)('span', { children: 'S' }),
                    (0, y.jsx)('span', { children: 'S' }),
                    (0, y.jsx)('span', { children: 'O' }),
                    (0, y.jsx)('span', { className: 'w-[0.5em] inline-block' }),
                    ' ',
                    (0, y.jsx)('span', { children: 'É' }),
                  ],
                }),
                (0, y.jsxs)('div', {
                  className:
                    'w-full flex justify-between items-center text-[18vw] md:text-[14vw] tracking-tighter',
                  children: [
                    (0, y.jsx)('span', { children: 'G' }),
                    (0, y.jsx)('span', { children: 'H' }),
                    (0, y.jsx)('span', { children: 'O' }),
                    (0, y.jsx)('span', { children: 'S' }),
                    (0, y.jsx)('span', { children: 'T' }),
                  ],
                }),
                (0, y.jsxs)('div', {
                  className:
                    'w-full flex justify-between items-center text-[18vw] md:text-[14vw] tracking-tighter',
                  children: [
                    (0, y.jsx)('span', { children: 'D' }),
                    (0, y.jsx)('span', { children: 'E' }),
                    (0, y.jsx)('span', { children: 'S' }),
                    (0, y.jsx)('span', { children: 'I' }),
                    (0, y.jsx)('span', { children: 'G' }),
                    (0, y.jsx)('span', { children: 'N' }),
                    (0, y.jsx)('span', { children: '.' }),
                  ],
                }),
              ],
            }),
          }),
        });
      },
      of = ({ children: a, progress: b, range: c, className: d }) => {
        let e = (0, A.cubicBezier)(0.22, 1, 0.36, 1),
          f = (0, C.useTransform)(b, c, ['blur(12px)', 'blur(0px)'], {
            ease: e,
          }),
          g = (0, C.useTransform)(b, c, [0, 1], { ease: e }),
          h = (0, C.useTransform)(b, c, [40, 0], { ease: e });
        return (0, y.jsx)(oa.motion.span, {
          style: { filter: f, opacity: g, y: h },
          className: `block ${d || ''}`,
          children: a,
        });
      },
      og = ({ opacity: a, progress: b }) =>
        (0, y.jsx)(oa.motion.header, {
          style: { opacity: a },
          className:
            'sticky top-0 z-30 flex h-screen items-center pointer-events-none',
          children: (0, y.jsx)('div', {
            className: 'std-grid w-full flex justify-end',
            children: (0, y.jsxs)('div', {
              className:
                'flex flex-col items-end text-right w-full max-w-[320px] md:max-w-[500px] lg:max-w-[750px]',
              children: [
                (0, y.jsxs)('h1', {
                  className:
                    'text-white text-3xl md:text-5xl lg:text-7xl xl:text-8xl font-display leading-[1.1] tracking-tighter mb-8 uppercase font-black mix-blend-difference whitespace-nowrap',
                  children: [
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.1, 0.2],
                        children: 'Acredito no',
                      }),
                    }),
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.12, 0.22],
                        children: 'design que',
                      }),
                    }),
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.14, 0.24],
                        children: 'muda o dia',
                      }),
                    }),
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.16, 0.26],
                        children: 'de alguém.',
                      }),
                    }),
                  ],
                }),
                (0, y.jsxs)('div', {
                  className:
                    'flex flex-col items-end gap-1 text-white text-sm md:text-2xl lg:text-4xl font-h2 leading-[1.2] tracking-normal font-bold whitespace-nowrap',
                  children: [
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.22, 0.32],
                        children: 'Não pelo choque,',
                      }),
                    }),
                    (0, y.jsx)('div', {
                      className: 'overflow-visible',
                      children: (0, y.jsx)(of, {
                        progress: b,
                        range: [0.24, 0.34],
                        children: 'mas pela conexão.',
                      }),
                    }),
                  ],
                }),
              ],
            }),
          }),
        });
    function oh(a, b) {
      if (0 === b)
        return (
          console.warn(
            'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.'
          ),
          a
        );
      if (2 !== b && 1 !== b)
        return (
          console.error(
            'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:',
            b
          ),
          a
        );
      {
        let c = a.getIndex();
        if (null === c) {
          let b = [],
            d = a.getAttribute('position');
          if (void 0 === d)
            return (
              console.error(
                'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.'
              ),
              a
            );
          for (let a = 0; a < d.count; a++) b.push(a);
          (a.setIndex(b), (c = a.getIndex()));
        }
        let d = c.count - 2,
          e = [];
        if (c)
          if (2 === b)
            for (let a = 1; a <= d; a++)
              (e.push(c.getX(0)), e.push(c.getX(a)), e.push(c.getX(a + 1)));
          else
            for (let a = 0; a < d; a++)
              a % 2 == 0
                ? (e.push(c.getX(a)),
                  e.push(c.getX(a + 1)),
                  e.push(c.getX(a + 2)))
                : (e.push(c.getX(a + 2)),
                  e.push(c.getX(a + 1)),
                  e.push(c.getX(a)));
        e.length / 3 !== d &&
          console.error(
            'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.'
          );
        let f = a.clone();
        return (f.setIndex(e), f.clearGroups(), f);
      }
    }
    function oi(a) {
      if ('u' > typeof TextDecoder) return new TextDecoder().decode(a);
      let b = '';
      for (let c = 0, d = a.length; c < d; c++) b += String.fromCharCode(a[c]);
      try {
        return decodeURIComponent(escape(b));
      } catch (a) {
        return b;
      }
    }
    let oj = 'srgb',
      ok = 'srgb-linear';
    class ol extends ga {
      constructor(a) {
        (super(a),
          (this.dracoLoader = null),
          (this.ktx2Loader = null),
          (this.meshoptDecoder = null),
          (this.pluginCallbacks = []),
          this.register(function (a) {
            return new or(a);
          }),
          this.register(function (a) {
            return new os(a);
          }),
          this.register(function (a) {
            return new oB(a);
          }),
          this.register(function (a) {
            return new oC(a);
          }),
          this.register(function (a) {
            return new oD(a);
          }),
          this.register(function (a) {
            return new ou(a);
          }),
          this.register(function (a) {
            return new ov(a);
          }),
          this.register(function (a) {
            return new ow(a);
          }),
          this.register(function (a) {
            return new ox(a);
          }),
          this.register(function (a) {
            return new oq(a);
          }),
          this.register(function (a) {
            return new oy(a);
          }),
          this.register(function (a) {
            return new ot(a);
          }),
          this.register(function (a) {
            return new oA(a);
          }),
          this.register(function (a) {
            return new oz(a);
          }),
          this.register(function (a) {
            return new oo(a);
          }),
          this.register(function (a) {
            return new oE(a);
          }),
          this.register(function (a) {
            return new oF(a);
          }));
      }
      load(a, b, c, d) {
        let e,
          f = this;
        if ('' !== this.resourcePath) e = this.resourcePath;
        else if ('' !== this.path) {
          let b = gD.extractUrlBase(a);
          e = gD.resolveURL(b, this.path);
        } else e = gD.extractUrlBase(a);
        this.manager.itemStart(a);
        let g = function (b) {
            (d ? d(b) : console.error(b),
              f.manager.itemError(a),
              f.manager.itemEnd(a));
          },
          h = new gd(this.manager);
        (h.setPath(this.path),
          h.setResponseType('arraybuffer'),
          h.setRequestHeader(this.requestHeader),
          h.setWithCredentials(this.withCredentials),
          h.load(
            a,
            function (c) {
              try {
                f.parse(
                  c,
                  e,
                  function (c) {
                    (b(c), f.manager.itemEnd(a));
                  },
                  g
                );
              } catch (a) {
                g(a);
              }
            },
            c,
            g
          ));
      }
      setDRACOLoader(a) {
        return ((this.dracoLoader = a), this);
      }
      setDDSLoader() {
        throw Error(
          'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
        );
      }
      setKTX2Loader(a) {
        return ((this.ktx2Loader = a), this);
      }
      setMeshoptDecoder(a) {
        return ((this.meshoptDecoder = a), this);
      }
      register(a) {
        return (
          -1 === this.pluginCallbacks.indexOf(a) &&
            this.pluginCallbacks.push(a),
          this
        );
      }
      unregister(a) {
        return (
          -1 !== this.pluginCallbacks.indexOf(a) &&
            this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a), 1),
          this
        );
      }
      parse(a, b, c, d) {
        let e,
          f = {},
          g = {};
        if ('string' == typeof a) e = JSON.parse(a);
        else if (a instanceof ArrayBuffer)
          if (oi(new Uint8Array(a.slice(0, 4))) === oG) {
            try {
              f[on.KHR_BINARY_GLTF] = new oH(a);
            } catch (a) {
              d && d(a);
              return;
            }
            e = JSON.parse(f[on.KHR_BINARY_GLTF].content);
          } else e = JSON.parse(oi(new Uint8Array(a)));
        else e = a;
        if (void 0 === e.asset || e.asset.version[0] < 2) {
          d &&
            d(
              Error(
                'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'
              )
            );
          return;
        }
        let h = new o_(e, {
          path: b || this.resourcePath || '',
          crossOrigin: this.crossOrigin,
          requestHeader: this.requestHeader,
          manager: this.manager,
          ktx2Loader: this.ktx2Loader,
          meshoptDecoder: this.meshoptDecoder,
        });
        h.fileLoader.setRequestHeader(this.requestHeader);
        for (let a = 0; a < this.pluginCallbacks.length; a++) {
          let b = this.pluginCallbacks[a](h);
          (b.name ||
            console.error(
              'THREE.GLTFLoader: Invalid plugin found: missing name'
            ),
            (g[b.name] = b),
            (f[b.name] = !0));
        }
        if (e.extensionsUsed)
          for (let a = 0; a < e.extensionsUsed.length; ++a) {
            let b = e.extensionsUsed[a],
              c = e.extensionsRequired || [];
            switch (b) {
              case on.KHR_MATERIALS_UNLIT:
                f[b] = new op();
                break;
              case on.KHR_DRACO_MESH_COMPRESSION:
                f[b] = new oI(e, this.dracoLoader);
                break;
              case on.KHR_TEXTURE_TRANSFORM:
                f[b] = new oJ();
                break;
              case on.KHR_MESH_QUANTIZATION:
                f[b] = new oK();
                break;
              default:
                c.indexOf(b) >= 0 &&
                  void 0 === g[b] &&
                  console.warn(
                    'THREE.GLTFLoader: Unknown extension "' + b + '".'
                  );
            }
          }
        (h.setExtensions(f), h.setPlugins(g), h.parse(c, d));
      }
      parseAsync(a, b) {
        let c = this;
        return new Promise(function (d, e) {
          c.parse(a, b, d, e);
        });
      }
    }
    function om() {
      let a = {};
      return {
        get: function (b) {
          return a[b];
        },
        add: function (b, c) {
          a[b] = c;
        },
        remove: function (b) {
          delete a[b];
        },
        removeAll: function () {
          a = {};
        },
      };
    }
    let on = {
      KHR_BINARY_GLTF: 'KHR_binary_glTF',
      KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',
      KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',
      KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',
      KHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',
      KHR_MATERIALS_IOR: 'KHR_materials_ior',
      KHR_MATERIALS_SHEEN: 'KHR_materials_sheen',
      KHR_MATERIALS_SPECULAR: 'KHR_materials_specular',
      KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',
      KHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',
      KHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',
      KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',
      KHR_MATERIALS_VOLUME: 'KHR_materials_volume',
      KHR_TEXTURE_BASISU: 'KHR_texture_basisu',
      KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',
      KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',
      KHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',
      EXT_MATERIALS_BUMP: 'EXT_materials_bump',
      EXT_TEXTURE_WEBP: 'EXT_texture_webp',
      EXT_TEXTURE_AVIF: 'EXT_texture_avif',
      EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',
      EXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing',
    };
    class oo {
      constructor(a) {
        ((this.parser = a),
          (this.name = on.KHR_LIGHTS_PUNCTUAL),
          (this.cache = { refs: {}, uses: {} }));
      }
      _markDefs() {
        let a = this.parser,
          b = this.parser.json.nodes || [];
        for (let c = 0, d = b.length; c < d; c++) {
          let d = b[c];
          d.extensions &&
            d.extensions[this.name] &&
            void 0 !== d.extensions[this.name].light &&
            a._addNodeRef(this.cache, d.extensions[this.name].light);
        }
      }
      _loadLight(a) {
        let b,
          c = this.parser,
          d = 'light:' + a,
          e = c.cache.get(d);
        if (e) return e;
        let f = c.json,
          g = (((f.extensions && f.extensions[this.name]) || {}).lights || [])[
            a
          ],
          h = new bX(0xffffff);
        void 0 !== g.color && h.setRGB(g.color[0], g.color[1], g.color[2], ok);
        let i = void 0 !== g.range ? g.range : 0;
        switch (g.type) {
          case 'directional':
            ((b = new gx(h)).target.position.set(0, 0, -1), b.add(b.target));
            break;
          case 'point':
            (b = new gu(h)).distance = i;
            break;
          case 'spot':
            (((b = new gs(h)).distance = i),
              (g.spot = g.spot || {}),
              (g.spot.innerConeAngle =
                void 0 !== g.spot.innerConeAngle ? g.spot.innerConeAngle : 0),
              (g.spot.outerConeAngle =
                void 0 !== g.spot.outerConeAngle
                  ? g.spot.outerConeAngle
                  : Math.PI / 4),
              (b.angle = g.spot.outerConeAngle),
              (b.penumbra = 1 - g.spot.innerConeAngle / g.spot.outerConeAngle),
              b.target.position.set(0, 0, -1),
              b.add(b.target));
            break;
          default:
            throw Error('THREE.GLTFLoader: Unexpected light type: ' + g.type);
        }
        return (
          b.position.set(0, 0, 0),
          (b.decay = 2),
          oX(b, g),
          void 0 !== g.intensity && (b.intensity = g.intensity),
          (b.name = c.createUniqueName(g.name || 'light_' + a)),
          (e = Promise.resolve(b)),
          c.cache.add(d, e),
          e
        );
      }
      getDependency(a, b) {
        if ('light' === a) return this._loadLight(b);
      }
      createNodeAttachment(a) {
        let b = this,
          c = this.parser,
          d = c.json.nodes[a],
          e = ((d.extensions && d.extensions[this.name]) || {}).light;
        return void 0 === e
          ? null
          : this._loadLight(e).then(function (a) {
              return c._getNodeRef(b.cache, e, a);
            });
      }
    }
    class op {
      constructor() {
        this.name = on.KHR_MATERIALS_UNLIT;
      }
      getMaterialType() {
        return b_;
      }
      extendParams(a, b, c) {
        let d = [];
        ((a.color = new bX(1, 1, 1)), (a.opacity = 1));
        let e = b.pbrMetallicRoughness;
        if (e) {
          if (Array.isArray(e.baseColorFactor)) {
            let b = e.baseColorFactor;
            (a.color.setRGB(b[0], b[1], b[2], ok), (a.opacity = b[3]));
          }
          void 0 !== e.baseColorTexture &&
            d.push(c.assignTexture(a, 'map', e.baseColorTexture, oj));
        }
        return Promise.all(d);
      }
    }
    class oq {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_EMISSIVE_STRENGTH));
      }
      extendMaterialParams(a, b) {
        let c = this.parser.json.materials[a];
        if (!c.extensions || !c.extensions[this.name]) return Promise.resolve();
        let d = c.extensions[this.name].emissiveStrength;
        return (void 0 !== d && (b.emissiveIntensity = d), Promise.resolve());
      }
    }
    class or {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_CLEARCOAT));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        if (
          (void 0 !== f.clearcoatFactor && (b.clearcoat = f.clearcoatFactor),
          void 0 !== f.clearcoatTexture &&
            e.push(c.assignTexture(b, 'clearcoatMap', f.clearcoatTexture)),
          void 0 !== f.clearcoatRoughnessFactor &&
            (b.clearcoatRoughness = f.clearcoatRoughnessFactor),
          void 0 !== f.clearcoatRoughnessTexture &&
            e.push(
              c.assignTexture(
                b,
                'clearcoatRoughnessMap',
                f.clearcoatRoughnessTexture
              )
            ),
          void 0 !== f.clearcoatNormalTexture &&
            (e.push(
              c.assignTexture(b, 'clearcoatNormalMap', f.clearcoatNormalTexture)
            ),
            void 0 !== f.clearcoatNormalTexture.scale))
        ) {
          let a = f.clearcoatNormalTexture.scale;
          b.clearcoatNormalScale = new ao(a, a);
        }
        return Promise.all(e);
      }
    }
    class os {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_DISPERSION));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser.json.materials[a];
        if (!c.extensions || !c.extensions[this.name]) return Promise.resolve();
        let d = c.extensions[this.name];
        return (
          (b.dispersion = void 0 !== d.dispersion ? d.dispersion : 0),
          Promise.resolve()
        );
      }
    }
    class ot {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_IRIDESCENCE));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        return (
          void 0 !== f.iridescenceFactor &&
            (b.iridescence = f.iridescenceFactor),
          void 0 !== f.iridescenceTexture &&
            e.push(c.assignTexture(b, 'iridescenceMap', f.iridescenceTexture)),
          void 0 !== f.iridescenceIor && (b.iridescenceIOR = f.iridescenceIor),
          void 0 === b.iridescenceThicknessRange &&
            (b.iridescenceThicknessRange = [100, 400]),
          void 0 !== f.iridescenceThicknessMinimum &&
            (b.iridescenceThicknessRange[0] = f.iridescenceThicknessMinimum),
          void 0 !== f.iridescenceThicknessMaximum &&
            (b.iridescenceThicknessRange[1] = f.iridescenceThicknessMaximum),
          void 0 !== f.iridescenceThicknessTexture &&
            e.push(
              c.assignTexture(
                b,
                'iridescenceThicknessMap',
                f.iridescenceThicknessTexture
              )
            ),
          Promise.all(e)
        );
      }
    }
    class ou {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_SHEEN));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [];
        ((b.sheenColor = new bX(0, 0, 0)),
          (b.sheenRoughness = 0),
          (b.sheen = 1));
        let f = d.extensions[this.name];
        if (void 0 !== f.sheenColorFactor) {
          let a = f.sheenColorFactor;
          b.sheenColor.setRGB(a[0], a[1], a[2], ok);
        }
        return (
          void 0 !== f.sheenRoughnessFactor &&
            (b.sheenRoughness = f.sheenRoughnessFactor),
          void 0 !== f.sheenColorTexture &&
            e.push(
              c.assignTexture(b, 'sheenColorMap', f.sheenColorTexture, oj)
            ),
          void 0 !== f.sheenRoughnessTexture &&
            e.push(
              c.assignTexture(b, 'sheenRoughnessMap', f.sheenRoughnessTexture)
            ),
          Promise.all(e)
        );
      }
    }
    class ov {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_TRANSMISSION));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        return (
          void 0 !== f.transmissionFactor &&
            (b.transmission = f.transmissionFactor),
          void 0 !== f.transmissionTexture &&
            e.push(
              c.assignTexture(b, 'transmissionMap', f.transmissionTexture)
            ),
          Promise.all(e)
        );
      }
    }
    class ow {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_VOLUME));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        ((b.thickness = void 0 !== f.thicknessFactor ? f.thicknessFactor : 0),
          void 0 !== f.thicknessTexture &&
            e.push(c.assignTexture(b, 'thicknessMap', f.thicknessTexture)),
          (b.attenuationDistance = f.attenuationDistance || 1 / 0));
        let g = f.attenuationColor || [1, 1, 1];
        return (
          (b.attenuationColor = new bX().setRGB(g[0], g[1], g[2], ok)),
          Promise.all(e)
        );
      }
    }
    class ox {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_IOR));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser.json.materials[a];
        if (!c.extensions || !c.extensions[this.name]) return Promise.resolve();
        let d = c.extensions[this.name];
        return ((b.ior = void 0 !== d.ior ? d.ior : 1.5), Promise.resolve());
      }
    }
    class oy {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_SPECULAR));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        ((b.specularIntensity =
          void 0 !== f.specularFactor ? f.specularFactor : 1),
          void 0 !== f.specularTexture &&
            e.push(
              c.assignTexture(b, 'specularIntensityMap', f.specularTexture)
            ));
        let g = f.specularColorFactor || [1, 1, 1];
        return (
          (b.specularColor = new bX().setRGB(g[0], g[1], g[2], ok)),
          void 0 !== f.specularColorTexture &&
            e.push(
              c.assignTexture(b, 'specularColorMap', f.specularColorTexture, oj)
            ),
          Promise.all(e)
        );
      }
    }
    class oz {
      constructor(a) {
        ((this.parser = a), (this.name = on.EXT_MATERIALS_BUMP));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        return (
          (b.bumpScale = void 0 !== f.bumpFactor ? f.bumpFactor : 1),
          void 0 !== f.bumpTexture &&
            e.push(c.assignTexture(b, 'bumpMap', f.bumpTexture)),
          Promise.all(e)
        );
      }
    }
    class oA {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_MATERIALS_ANISOTROPY));
      }
      getMaterialType(a) {
        let b = this.parser.json.materials[a];
        return b.extensions && b.extensions[this.name] ? fI : null;
      }
      extendMaterialParams(a, b) {
        let c = this.parser,
          d = c.json.materials[a];
        if (!d.extensions || !d.extensions[this.name]) return Promise.resolve();
        let e = [],
          f = d.extensions[this.name];
        return (
          void 0 !== f.anisotropyStrength &&
            (b.anisotropy = f.anisotropyStrength),
          void 0 !== f.anisotropyRotation &&
            (b.anisotropyRotation = f.anisotropyRotation),
          void 0 !== f.anisotropyTexture &&
            e.push(c.assignTexture(b, 'anisotropyMap', f.anisotropyTexture)),
          Promise.all(e)
        );
      }
    }
    class oB {
      constructor(a) {
        ((this.parser = a), (this.name = on.KHR_TEXTURE_BASISU));
      }
      loadTexture(a) {
        let b = this.parser,
          c = b.json,
          d = c.textures[a];
        if (!d.extensions || !d.extensions[this.name]) return null;
        let e = d.extensions[this.name],
          f = b.options.ktx2Loader;
        if (!f)
          if (
            !(
              c.extensionsRequired &&
              c.extensionsRequired.indexOf(this.name) >= 0
            )
          )
            return null;
          else
            throw Error(
              'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures'
            );
        return b.loadTextureImage(a, e.source, f);
      }
    }
    class oC {
      constructor(a) {
        ((this.parser = a),
          (this.name = on.EXT_TEXTURE_WEBP),
          (this.isSupported = null));
      }
      loadTexture(a) {
        let b = this.name,
          c = this.parser,
          d = c.json,
          e = d.textures[a];
        if (!e.extensions || !e.extensions[b]) return null;
        let f = e.extensions[b],
          g = d.images[f.source],
          h = c.textureLoader;
        if (g.uri) {
          let a = c.options.manager.getHandler(g.uri);
          null !== a && (h = a);
        }
        return this.detectSupport().then(function (e) {
          if (e) return c.loadTextureImage(a, f.source, h);
          if (d.extensionsRequired && d.extensionsRequired.indexOf(b) >= 0)
            throw Error(
              'THREE.GLTFLoader: WebP required by asset but unsupported.'
            );
          return c.loadTexture(a);
        });
      }
      detectSupport() {
        return (
          this.isSupported ||
            (this.isSupported = new Promise(function (a) {
              let b = new Image();
              ((b.src =
                'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA'),
                (b.onload = b.onerror =
                  function () {
                    a(1 === b.height);
                  }));
            })),
          this.isSupported
        );
      }
    }
    class oD {
      constructor(a) {
        ((this.parser = a),
          (this.name = on.EXT_TEXTURE_AVIF),
          (this.isSupported = null));
      }
      loadTexture(a) {
        let b = this.name,
          c = this.parser,
          d = c.json,
          e = d.textures[a];
        if (!e.extensions || !e.extensions[b]) return null;
        let f = e.extensions[b],
          g = d.images[f.source],
          h = c.textureLoader;
        if (g.uri) {
          let a = c.options.manager.getHandler(g.uri);
          null !== a && (h = a);
        }
        return this.detectSupport().then(function (e) {
          if (e) return c.loadTextureImage(a, f.source, h);
          if (d.extensionsRequired && d.extensionsRequired.indexOf(b) >= 0)
            throw Error(
              'THREE.GLTFLoader: AVIF required by asset but unsupported.'
            );
          return c.loadTexture(a);
        });
      }
      detectSupport() {
        return (
          this.isSupported ||
            (this.isSupported = new Promise(function (a) {
              let b = new Image();
              ((b.src =
                'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI='),
                (b.onload = b.onerror =
                  function () {
                    a(1 === b.height);
                  }));
            })),
          this.isSupported
        );
      }
    }
    class oE {
      constructor(a) {
        ((this.name = on.EXT_MESHOPT_COMPRESSION), (this.parser = a));
      }
      loadBufferView(a) {
        let b = this.parser.json,
          c = b.bufferViews[a];
        if (!c.extensions || !c.extensions[this.name]) return null;
        {
          let a = c.extensions[this.name],
            d = this.parser.getDependency('buffer', a.buffer),
            e = this.parser.options.meshoptDecoder;
          if (!e || !e.supported)
            if (
              !(
                b.extensionsRequired &&
                b.extensionsRequired.indexOf(this.name) >= 0
              )
            )
              return null;
            else
              throw Error(
                'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files'
              );
          return d.then(function (b) {
            let c = a.byteOffset || 0,
              d = a.byteLength || 0,
              f = a.count,
              g = a.byteStride,
              h = new Uint8Array(b, c, d);
            return e.decodeGltfBufferAsync
              ? e
                  .decodeGltfBufferAsync(f, g, h, a.mode, a.filter)
                  .then(function (a) {
                    return a.buffer;
                  })
              : e.ready.then(function () {
                  let b = new ArrayBuffer(f * g);
                  return (
                    e.decodeGltfBuffer(
                      new Uint8Array(b),
                      f,
                      g,
                      h,
                      a.mode,
                      a.filter
                    ),
                    b
                  );
                });
          });
        }
      }
    }
    class oF {
      constructor(a) {
        ((this.name = on.EXT_MESH_GPU_INSTANCING), (this.parser = a));
      }
      createNodeMesh(a) {
        let b = this.parser.json,
          c = b.nodes[a];
        if (!c.extensions || !c.extensions[this.name] || void 0 === c.mesh)
          return null;
        for (let a of b.meshes[c.mesh].primitives)
          if (
            a.mode !== oO.TRIANGLES &&
            a.mode !== oO.TRIANGLE_STRIP &&
            a.mode !== oO.TRIANGLE_FAN &&
            void 0 !== a.mode
          )
            return null;
        let d = c.extensions[this.name].attributes,
          e = [],
          f = {};
        for (let a in d)
          e.push(
            this.parser
              .getDependency('accessor', d[a])
              .then((b) => ((f[a] = b), f[a]))
          );
        return e.length < 1
          ? null
          : (e.push(this.parser.createNodeMesh(a)),
            Promise.all(e).then((a) => {
              let b = a.pop(),
                c = b.isGroup ? b.children : [b],
                d = a[0].count,
                e = [];
              for (let a of c) {
                let b = new bd(),
                  c = new aq(),
                  g = new ap(),
                  h = new aq(1, 1, 1),
                  i = new dD(a.geometry, a.material, d);
                for (let a = 0; a < d; a++)
                  (f.TRANSLATION && c.fromBufferAttribute(f.TRANSLATION, a),
                    f.ROTATION && g.fromBufferAttribute(f.ROTATION, a),
                    f.SCALE && h.fromBufferAttribute(f.SCALE, a),
                    i.setMatrixAt(a, b.compose(c, g, h)));
                for (let b in f)
                  if ('_COLOR_0' === b) {
                    let a = f[b];
                    i.instanceColor = new dv(a.array, a.itemSize, a.normalized);
                  } else
                    'TRANSLATION' !== b &&
                      'ROTATION' !== b &&
                      'SCALE' !== b &&
                      a.geometry.setAttribute(b, f[b]);
                (bE.prototype.copy.call(i, a),
                  this.parser.assignFinalMaterial(i),
                  e.push(i));
              }
              return b.isGroup ? (b.clear(), b.add(...e), b) : e[0];
            }));
      }
    }
    let oG = 'glTF';
    class oH {
      constructor(a) {
        ((this.name = on.KHR_BINARY_GLTF),
          (this.content = null),
          (this.body = null));
        const b = new DataView(a, 0, 12);
        if (
          ((this.header = {
            magic: oi(new Uint8Array(a.slice(0, 4))),
            version: b.getUint32(4, !0),
            length: b.getUint32(8, !0),
          }),
          this.header.magic !== oG)
        )
          throw Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');
        if (this.header.version < 2)
          throw Error('THREE.GLTFLoader: Legacy binary file detected.');
        const c = this.header.length - 12,
          d = new DataView(a, 12);
        let e = 0;
        for (; e < c; ) {
          const b = d.getUint32(e, !0);
          e += 4;
          const c = d.getUint32(e, !0);
          if (((e += 4), 0x4e4f534a === c)) {
            const c = new Uint8Array(a, 12 + e, b);
            this.content = oi(c);
          } else if (5130562 === c) {
            const c = 12 + e;
            this.body = a.slice(c, c + b);
          }
          e += b;
        }
        if (null === this.content)
          throw Error('THREE.GLTFLoader: JSON content not found.');
      }
    }
    class oI {
      constructor(a, b) {
        if (!b)
          throw Error('THREE.GLTFLoader: No DRACOLoader instance provided.');
        ((this.name = on.KHR_DRACO_MESH_COMPRESSION),
          (this.json = a),
          (this.dracoLoader = b),
          this.dracoLoader.preload());
      }
      decodePrimitive(a, b) {
        let c = this.json,
          d = this.dracoLoader,
          e = a.extensions[this.name].bufferView,
          f = a.extensions[this.name].attributes,
          g = {},
          h = {},
          i = {};
        for (let a in f) g[oT[a] || a.toLowerCase()] = f[a];
        for (let b in a.attributes) {
          let d = oT[b] || b.toLowerCase();
          if (void 0 !== f[b]) {
            let e = c.accessors[a.attributes[b]],
              f = oP[e.componentType];
            ((i[d] = f.name), (h[d] = !0 === e.normalized));
          }
        }
        return b.getDependency('bufferView', e).then(function (a) {
          return new Promise(function (b, c) {
            d.decodeDracoFile(
              a,
              function (a) {
                for (let b in a.attributes) {
                  let c = a.attributes[b],
                    d = h[b];
                  void 0 !== d && (c.normalized = d);
                }
                b(a);
              },
              g,
              i,
              ok,
              c
            );
          });
        });
      }
    }
    class oJ {
      constructor() {
        this.name = on.KHR_TEXTURE_TRANSFORM;
      }
      extendTexture(a, b) {
        return (
          ((void 0 === b.texCoord || b.texCoord === a.channel) &&
            void 0 === b.offset &&
            void 0 === b.rotation &&
            void 0 === b.scale) ||
            ((a = a.clone()),
            void 0 !== b.texCoord && (a.channel = b.texCoord),
            void 0 !== b.offset && a.offset.fromArray(b.offset),
            void 0 !== b.rotation && (a.rotation = b.rotation),
            void 0 !== b.scale && a.repeat.fromArray(b.scale),
            (a.needsUpdate = !0)),
          a
        );
      }
    }
    class oK {
      constructor() {
        this.name = on.KHR_MESH_QUANTIZATION;
      }
    }
    class oL extends fW {
      constructor(a, b, c, d) {
        super(a, b, c, d);
      }
      copySampleValue_(a) {
        let b = this.resultBuffer,
          c = this.sampleValues,
          d = this.valueSize,
          e = a * d * 3 + d;
        for (let a = 0; a !== d; a++) b[a] = c[e + a];
        return b;
      }
      interpolate_(a, b, c, d) {
        let e = this.resultBuffer,
          f = this.sampleValues,
          g = this.valueSize,
          h = 2 * g,
          i = 3 * g,
          j = d - b,
          k = (c - b) / j,
          l = k * k,
          m = l * k,
          n = a * i,
          o = n - i,
          p = -2 * m + 3 * l,
          q = m - l,
          r = 1 - p,
          s = q - l + k;
        for (let a = 0; a !== g; a++) {
          let b = f[o + a + g],
            c = f[o + a + h] * j,
            d = f[n + a + g],
            i = f[n + a] * j;
          e[a] = r * b + s * c + p * d + q * i;
        }
        return e;
      }
    }
    let oM = new ap();
    class oN extends oL {
      interpolate_(a, b, c, d) {
        let e = super.interpolate_(a, b, c, d);
        return (oM.fromArray(e).normalize().toArray(e), e);
      }
    }
    let oO = {
        POINTS: 0,
        LINES: 1,
        LINE_LOOP: 2,
        LINE_STRIP: 3,
        TRIANGLES: 4,
        TRIANGLE_STRIP: 5,
        TRIANGLE_FAN: 6,
      },
      oP = {
        5120: Int8Array,
        5121: Uint8Array,
        5122: Int16Array,
        5123: Uint16Array,
        5125: Uint32Array,
        5126: Float32Array,
      },
      oQ = {
        9728: 1003,
        9729: 1006,
        9984: 1004,
        9985: 1007,
        9986: 1005,
        9987: 1008,
      },
      oR = { 33071: 1001, 33648: 1002, 10497: 1e3 },
      oS = { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 },
      oT = {
        POSITION: 'position',
        NORMAL: 'normal',
        TANGENT: 'tangent',
        ...(l3 >= 152
          ? {
              TEXCOORD_0: 'uv',
              TEXCOORD_1: 'uv1',
              TEXCOORD_2: 'uv2',
              TEXCOORD_3: 'uv3',
            }
          : { TEXCOORD_0: 'uv', TEXCOORD_1: 'uv2' }),
        COLOR_0: 'color',
        WEIGHTS_0: 'skinWeight',
        JOINTS_0: 'skinIndex',
      },
      oU = {
        scale: 'scale',
        translation: 'position',
        rotation: 'quaternion',
        weights: 'morphTargetInfluences',
      },
      oV = { CUBICSPLINE: void 0, LINEAR: 2301, STEP: 2300 };
    function oW(a, b, c) {
      for (let d in c.extensions)
        void 0 === a[d] &&
          ((b.userData.gltfExtensions = b.userData.gltfExtensions || {}),
          (b.userData.gltfExtensions[d] = c.extensions[d]));
    }
    function oX(a, b) {
      void 0 !== b.extras &&
        ('object' == typeof b.extras
          ? Object.assign(a.userData, b.extras)
          : console.warn(
              'THREE.GLTFLoader: Ignoring primitive type .extras, ' + b.extras
            ));
    }
    function oY(a) {
      let b = '',
        c = Object.keys(a).sort();
      for (let d = 0, e = c.length; d < e; d++) b += c[d] + ':' + a[c[d]] + ';';
      return b;
    }
    function oZ(a) {
      switch (a) {
        case Int8Array:
          return 1 / 127;
        case Uint8Array:
          return 1 / 255;
        case Int16Array:
          return 1 / 32767;
        case Uint16Array:
          return 1 / 65535;
        default:
          throw Error(
            'THREE.GLTFLoader: Unsupported normalized accessor component type.'
          );
      }
    }
    let o$ = new bd();
    class o_ {
      constructor(a = {}, b = {}) {
        ((this.json = a),
          (this.extensions = {}),
          (this.plugins = {}),
          (this.options = b),
          (this.cache = new om()),
          (this.associations = new Map()),
          (this.primitiveCache = {}),
          (this.nodeCache = {}),
          (this.meshCache = { refs: {}, uses: {} }),
          (this.cameraCache = { refs: {}, uses: {} }),
          (this.lightCache = { refs: {}, uses: {} }),
          (this.sourceCache = {}),
          (this.textureCache = {}),
          (this.nodeNamesUsed = {}));
        let c = !1,
          d = !1,
          e = -1;
        ('u' > typeof navigator &&
          void 0 !== navigator.userAgent &&
          ((c =
            !0 === /^((?!chrome|android).)*safari/i.test(navigator.userAgent)),
          (e = (d = navigator.userAgent.indexOf('Firefox') > -1)
            ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]
            : -1)),
          'u' < typeof createImageBitmap || c || (d && e < 98)
            ? (this.textureLoader = new gk(this.options.manager))
            : (this.textureLoader = new gL(this.options.manager)),
          this.textureLoader.setCrossOrigin(this.options.crossOrigin),
          this.textureLoader.setRequestHeader(this.options.requestHeader),
          (this.fileLoader = new gd(this.options.manager)),
          this.fileLoader.setResponseType('arraybuffer'),
          'use-credentials' === this.options.crossOrigin &&
            this.fileLoader.setWithCredentials(!0));
      }
      setExtensions(a) {
        this.extensions = a;
      }
      setPlugins(a) {
        this.plugins = a;
      }
      parse(a, b) {
        let c = this,
          d = this.json,
          e = this.extensions;
        (this.cache.removeAll(),
          (this.nodeCache = {}),
          this._invokeAll(function (a) {
            return a._markDefs && a._markDefs();
          }),
          Promise.all(
            this._invokeAll(function (a) {
              return a.beforeRoot && a.beforeRoot();
            })
          )
            .then(function () {
              return Promise.all([
                c.getDependencies('scene'),
                c.getDependencies('animation'),
                c.getDependencies('camera'),
              ]);
            })
            .then(function (b) {
              let f = {
                scene: b[0][d.scene || 0],
                scenes: b[0],
                animations: b[1],
                cameras: b[2],
                asset: d.asset,
                parser: c,
                userData: {},
              };
              return (
                oW(e, f, d),
                oX(f, d),
                Promise.all(
                  c._invokeAll(function (a) {
                    return a.afterRoot && a.afterRoot(f);
                  })
                ).then(function () {
                  for (let a of f.scenes) a.updateMatrixWorld();
                  a(f);
                })
              );
            })
            .catch(b));
      }
      _markDefs() {
        let a = this.json.nodes || [],
          b = this.json.skins || [],
          c = this.json.meshes || [];
        for (let c = 0, d = b.length; c < d; c++) {
          let d = b[c].joints;
          for (let b = 0, c = d.length; b < c; b++) a[d[b]].isBone = !0;
        }
        for (let b = 0, d = a.length; b < d; b++) {
          let d = a[b];
          (void 0 !== d.mesh &&
            (this._addNodeRef(this.meshCache, d.mesh),
            void 0 !== d.skin && (c[d.mesh].isSkinnedMesh = !0)),
            void 0 !== d.camera &&
              this._addNodeRef(this.cameraCache, d.camera));
        }
      }
      _addNodeRef(a, b) {
        void 0 !== b &&
          (void 0 === a.refs[b] && (a.refs[b] = a.uses[b] = 0), a.refs[b]++);
      }
      _getNodeRef(a, b, c) {
        if (a.refs[b] <= 1) return c;
        let d = c.clone(),
          e = (a, b) => {
            let c = this.associations.get(a);
            for (let [d, f] of (null != c && this.associations.set(b, c),
            a.children.entries()))
              e(f, b.children[d]);
          };
        return (e(c, d), (d.name += '_instance_' + a.uses[b]++), d);
      }
      _invokeOne(a) {
        let b = Object.values(this.plugins);
        b.push(this);
        for (let c = 0; c < b.length; c++) {
          let d = a(b[c]);
          if (d) return d;
        }
        return null;
      }
      _invokeAll(a) {
        let b = Object.values(this.plugins);
        b.unshift(this);
        let c = [];
        for (let d = 0; d < b.length; d++) {
          let e = a(b[d]);
          e && c.push(e);
        }
        return c;
      }
      getDependency(a, b) {
        let c = a + ':' + b,
          d = this.cache.get(c);
        if (!d) {
          switch (a) {
            case 'scene':
              d = this.loadScene(b);
              break;
            case 'node':
              d = this._invokeOne(function (a) {
                return a.loadNode && a.loadNode(b);
              });
              break;
            case 'mesh':
              d = this._invokeOne(function (a) {
                return a.loadMesh && a.loadMesh(b);
              });
              break;
            case 'accessor':
              d = this.loadAccessor(b);
              break;
            case 'bufferView':
              d = this._invokeOne(function (a) {
                return a.loadBufferView && a.loadBufferView(b);
              });
              break;
            case 'buffer':
              d = this.loadBuffer(b);
              break;
            case 'material':
              d = this._invokeOne(function (a) {
                return a.loadMaterial && a.loadMaterial(b);
              });
              break;
            case 'texture':
              d = this._invokeOne(function (a) {
                return a.loadTexture && a.loadTexture(b);
              });
              break;
            case 'skin':
              d = this.loadSkin(b);
              break;
            case 'animation':
              d = this._invokeOne(function (a) {
                return a.loadAnimation && a.loadAnimation(b);
              });
              break;
            case 'camera':
              d = this.loadCamera(b);
              break;
            default:
              if (
                !(d = this._invokeOne(function (c) {
                  return c != this && c.getDependency && c.getDependency(a, b);
                }))
              )
                throw Error('Unknown type: ' + a);
          }
          this.cache.add(c, d);
        }
        return d;
      }
      getDependencies(a) {
        let b = this.cache.get(a);
        if (!b) {
          let c = this;
          ((b = Promise.all(
            (this.json[a + ('mesh' === a ? 'es' : 's')] || []).map(
              function (b, d) {
                return c.getDependency(a, d);
              }
            )
          )),
            this.cache.add(a, b));
        }
        return b;
      }
      loadBuffer(a) {
        let b = this.json.buffers[a],
          c = this.fileLoader;
        if (b.type && 'arraybuffer' !== b.type)
          throw Error(
            'THREE.GLTFLoader: ' + b.type + ' buffer type is not supported.'
          );
        if (void 0 === b.uri && 0 === a)
          return Promise.resolve(this.extensions[on.KHR_BINARY_GLTF].body);
        let d = this.options;
        return new Promise(function (a, e) {
          c.load(gD.resolveURL(b.uri, d.path), a, void 0, function () {
            e(
              Error('THREE.GLTFLoader: Failed to load buffer "' + b.uri + '".')
            );
          });
        });
      }
      loadBufferView(a) {
        let b = this.json.bufferViews[a];
        return this.getDependency('buffer', b.buffer).then(function (a) {
          let c = b.byteLength || 0,
            d = b.byteOffset || 0;
          return a.slice(d, d + c);
        });
      }
      loadAccessor(a) {
        let b = this,
          c = this.json,
          d = this.json.accessors[a];
        if (void 0 === d.bufferView && void 0 === d.sparse) {
          let a = oS[d.type],
            b = oP[d.componentType],
            c = !0 === d.normalized;
          return Promise.resolve(new b7(new b(d.count * a), a, c));
        }
        let e = [];
        return (
          void 0 !== d.bufferView
            ? e.push(this.getDependency('bufferView', d.bufferView))
            : e.push(null),
          void 0 !== d.sparse &&
            (e.push(
              this.getDependency('bufferView', d.sparse.indices.bufferView)
            ),
            e.push(
              this.getDependency('bufferView', d.sparse.values.bufferView)
            )),
          Promise.all(e).then(function (a) {
            let e,
              f = a[0],
              g = oS[d.type],
              h = oP[d.componentType],
              i = h.BYTES_PER_ELEMENT,
              j = i * g,
              k = d.byteOffset || 0,
              l =
                void 0 !== d.bufferView
                  ? c.bufferViews[d.bufferView].byteStride
                  : void 0,
              m = !0 === d.normalized;
            if (l && l !== j) {
              let a = Math.floor(k / l),
                c =
                  'InterleavedBuffer:' +
                  d.bufferView +
                  ':' +
                  d.componentType +
                  ':' +
                  a +
                  ':' +
                  d.count,
                j = b.cache.get(c);
              (j ||
                ((j = new cW(new h(f, a * l, (d.count * l) / i), l / i)),
                b.cache.add(c, j)),
                (e = new cY(j, g, (k % l) / i, m)));
            } else
              e = new b7(
                null === f ? new h(d.count * g) : new h(f, k, d.count * g),
                g,
                m
              );
            if (void 0 !== d.sparse) {
              let b = oS.SCALAR,
                c = oP[d.sparse.indices.componentType],
                i = d.sparse.indices.byteOffset || 0,
                j = d.sparse.values.byteOffset || 0,
                k = new c(a[1], i, d.sparse.count * b),
                l = new h(a[2], j, d.sparse.count * g);
              null !== f &&
                (e = new b7(e.array.slice(), e.itemSize, e.normalized));
              for (let a = 0, b = k.length; a < b; a++) {
                let b = k[a];
                if (
                  (e.setX(b, l[a * g]),
                  g >= 2 && e.setY(b, l[a * g + 1]),
                  g >= 3 && e.setZ(b, l[a * g + 2]),
                  g >= 4 && e.setW(b, l[a * g + 3]),
                  g >= 5)
                )
                  throw Error(
                    'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.'
                  );
              }
            }
            return e;
          })
        );
      }
      loadTexture(a) {
        let b = this.json,
          c = this.options,
          d = b.textures[a].source,
          e = b.images[d],
          f = this.textureLoader;
        if (e.uri) {
          let a = c.manager.getHandler(e.uri);
          null !== a && (f = a);
        }
        return this.loadTextureImage(a, d, f);
      }
      loadTextureImage(a, b, c) {
        let d = this,
          e = this.json,
          f = e.textures[a],
          g = e.images[b],
          h = (g.uri || g.bufferView) + ':' + f.sampler;
        if (this.textureCache[h]) return this.textureCache[h];
        let i = this.loadImageSource(b, c)
          .then(function (b) {
            ((b.flipY = !1),
              (b.name = f.name || g.name || ''),
              '' === b.name &&
                'string' == typeof g.uri &&
                !1 === g.uri.startsWith('data:image/') &&
                (b.name = g.uri));
            let c = (e.samplers || {})[f.sampler] || {};
            return (
              (b.magFilter = oQ[c.magFilter] || 1006),
              (b.minFilter = oQ[c.minFilter] || 1008),
              (b.wrapS = oR[c.wrapS] || 1e3),
              (b.wrapT = oR[c.wrapT] || 1e3),
              d.associations.set(b, { textures: a }),
              b
            );
          })
          .catch(function () {
            return null;
          });
        return ((this.textureCache[h] = i), i);
      }
      loadImageSource(a, b) {
        let c = this.json,
          d = this.options;
        if (void 0 !== this.sourceCache[a])
          return this.sourceCache[a].then((a) => a.clone());
        let e = c.images[a],
          f = self.URL || self.webkitURL,
          g = e.uri || '',
          h = !1;
        if (void 0 !== e.bufferView)
          g = this.getDependency('bufferView', e.bufferView).then(function (a) {
            h = !0;
            let b = new Blob([a], { type: e.mimeType });
            return (g = f.createObjectURL(b));
          });
        else if (void 0 === e.uri)
          throw Error(
            'THREE.GLTFLoader: Image ' + a + ' is missing URI and bufferView'
          );
        let i = Promise.resolve(g)
          .then(function (a) {
            return new Promise(function (c, e) {
              let f = c;
              (!0 === b.isImageBitmapLoader &&
                (f = function (a) {
                  let b = new aG(a);
                  ((b.needsUpdate = !0), c(b));
                }),
                b.load(gD.resolveURL(a, d.path), f, void 0, e));
            });
          })
          .then(function (a) {
            var b;
            return (
              !0 === h && f.revokeObjectURL(g),
              oX(a, e),
              (a.userData.mimeType =
                e.mimeType ||
                ((b = e.uri).search(/\.jpe?g($|\?)/i) > 0 ||
                0 === b.search(/^data\:image\/jpeg/)
                  ? 'image/jpeg'
                  : b.search(/\.webp($|\?)/i) > 0 ||
                      0 === b.search(/^data\:image\/webp/)
                    ? 'image/webp'
                    : 'image/png')),
              a
            );
          })
          .catch(function (a) {
            throw (
              console.error("THREE.GLTFLoader: Couldn't load texture", g),
              a
            );
          });
        return ((this.sourceCache[a] = i), i);
      }
      assignTexture(a, b, c, d) {
        let e = this;
        return this.getDependency('texture', c.index).then(function (f) {
          if (!f) return null;
          if (
            (void 0 !== c.texCoord &&
              c.texCoord > 0 &&
              ((f = f.clone()).channel = c.texCoord),
            e.extensions[on.KHR_TEXTURE_TRANSFORM])
          ) {
            let a =
              void 0 !== c.extensions
                ? c.extensions[on.KHR_TEXTURE_TRANSFORM]
                : void 0;
            if (a) {
              let b = e.associations.get(f);
              ((f = e.extensions[on.KHR_TEXTURE_TRANSFORM].extendTexture(f, a)),
                e.associations.set(f, b));
            }
          }
          return (
            void 0 !== d &&
              ('number' == typeof d && (d = 3001 === d ? oj : ok),
              'colorSpace' in f
                ? (f.colorSpace = d)
                : (f.encoding = d === oj ? 3001 : 3e3)),
            (a[b] = f),
            f
          );
        });
      }
      assignFinalMaterial(a) {
        let b = a.geometry,
          c = a.material,
          d = void 0 === b.attributes.tangent,
          e = void 0 !== b.attributes.color,
          f = void 0 === b.attributes.normal;
        if (a.isPoints) {
          let a = 'PointsMaterial:' + c.uuid,
            b = this.cache.get(a);
          (b ||
            ((b = new ei()),
            b$.prototype.copy.call(b, c),
            b.color.copy(c.color),
            (b.map = c.map),
            (b.sizeAttenuation = !1),
            this.cache.add(a, b)),
            (c = b));
        } else if (a.isLine) {
          let a = 'LineBasicMaterial:' + c.uuid,
            b = this.cache.get(a);
          (b ||
            ((b = new d4()),
            b$.prototype.copy.call(b, c),
            b.color.copy(c.color),
            (b.map = c.map),
            this.cache.add(a, b)),
            (c = b));
        }
        if (d || e || f) {
          let a = 'ClonedMaterial:' + c.uuid + ':';
          (d && (a += 'derivative-tangents:'),
            e && (a += 'vertex-colors:'),
            f && (a += 'flat-shading:'));
          let b = this.cache.get(a);
          (b ||
            ((b = c.clone()),
            e && (b.vertexColors = !0),
            f && (b.flatShading = !0),
            d &&
              (b.normalScale && (b.normalScale.y *= -1),
              b.clearcoatNormalScale && (b.clearcoatNormalScale.y *= -1)),
            this.cache.add(a, b),
            this.associations.set(b, this.associations.get(c))),
            (c = b));
        }
        a.material = c;
      }
      getMaterialType() {
        return fH;
      }
      loadMaterial(a) {
        let b,
          c = this,
          d = this.json,
          e = this.extensions,
          f = d.materials[a],
          g = {},
          h = f.extensions || {},
          i = [];
        if (h[on.KHR_MATERIALS_UNLIT]) {
          let a = e[on.KHR_MATERIALS_UNLIT];
          ((b = a.getMaterialType()), i.push(a.extendParams(g, f, c)));
        } else {
          let d = f.pbrMetallicRoughness || {};
          if (
            ((g.color = new bX(1, 1, 1)),
            (g.opacity = 1),
            Array.isArray(d.baseColorFactor))
          ) {
            let a = d.baseColorFactor;
            (g.color.setRGB(a[0], a[1], a[2], ok), (g.opacity = a[3]));
          }
          (void 0 !== d.baseColorTexture &&
            i.push(c.assignTexture(g, 'map', d.baseColorTexture, oj)),
            (g.metalness = void 0 !== d.metallicFactor ? d.metallicFactor : 1),
            (g.roughness =
              void 0 !== d.roughnessFactor ? d.roughnessFactor : 1),
            void 0 !== d.metallicRoughnessTexture &&
              (i.push(
                c.assignTexture(g, 'metalnessMap', d.metallicRoughnessTexture)
              ),
              i.push(
                c.assignTexture(g, 'roughnessMap', d.metallicRoughnessTexture)
              )),
            (b = this._invokeOne(function (b) {
              return b.getMaterialType && b.getMaterialType(a);
            })),
            i.push(
              Promise.all(
                this._invokeAll(function (b) {
                  return b.extendMaterialParams && b.extendMaterialParams(a, g);
                })
              )
            ));
        }
        !0 === f.doubleSided && (g.side = 2);
        let j = f.alphaMode || 'OPAQUE';
        if (
          ('BLEND' === j
            ? ((g.transparent = !0), (g.depthWrite = !1))
            : ((g.transparent = !1),
              'MASK' === j &&
                (g.alphaTest = void 0 !== f.alphaCutoff ? f.alphaCutoff : 0.5)),
          void 0 !== f.normalTexture &&
            b !== b_ &&
            (i.push(c.assignTexture(g, 'normalMap', f.normalTexture)),
            (g.normalScale = new ao(1, 1)),
            void 0 !== f.normalTexture.scale))
        ) {
          let a = f.normalTexture.scale;
          g.normalScale.set(a, a);
        }
        if (
          (void 0 !== f.occlusionTexture &&
            b !== b_ &&
            (i.push(c.assignTexture(g, 'aoMap', f.occlusionTexture)),
            void 0 !== f.occlusionTexture.strength &&
              (g.aoMapIntensity = f.occlusionTexture.strength)),
          void 0 !== f.emissiveFactor && b !== b_)
        ) {
          let a = f.emissiveFactor;
          g.emissive = new bX().setRGB(a[0], a[1], a[2], ok);
        }
        return (
          void 0 !== f.emissiveTexture &&
            b !== b_ &&
            i.push(c.assignTexture(g, 'emissiveMap', f.emissiveTexture, oj)),
          Promise.all(i).then(function () {
            let d = new b(g);
            return (
              f.name && (d.name = f.name),
              oX(d, f),
              c.associations.set(d, { materials: a }),
              f.extensions && oW(e, d, f),
              d
            );
          })
        );
      }
      createUniqueName(a) {
        let b = hc.sanitizeNodeName(a || '');
        return b in this.nodeNamesUsed
          ? b + '_' + ++this.nodeNamesUsed[b]
          : ((this.nodeNamesUsed[b] = 0), b);
      }
      loadGeometries(a) {
        let b = this,
          c = this.extensions,
          d = this.primitiveCache,
          e = [];
        for (let f = 0, g = a.length; f < g; f++) {
          let g = a[f],
            h = (function (a) {
              let b,
                c = a.extensions && a.extensions[on.KHR_DRACO_MESH_COMPRESSION];
              if (
                ((b = c
                  ? 'draco:' +
                    c.bufferView +
                    ':' +
                    c.indices +
                    ':' +
                    oY(c.attributes)
                  : a.indices + ':' + oY(a.attributes) + ':' + a.mode),
                void 0 !== a.targets)
              )
                for (let c = 0, d = a.targets.length; c < d; c++)
                  b += ':' + oY(a.targets[c]);
              return b;
            })(g),
            i = d[h];
          if (i) e.push(i.promise);
          else {
            let a;
            ((a =
              g.extensions && g.extensions[on.KHR_DRACO_MESH_COMPRESSION]
                ? (function (a) {
                    return c[on.KHR_DRACO_MESH_COMPRESSION]
                      .decodePrimitive(a, b)
                      .then(function (c) {
                        return o0(c, a, b);
                      });
                  })(g)
                : o0(new co(), g, b)),
              (d[h] = { primitive: g, promise: a }),
              e.push(a));
          }
        }
        return Promise.all(e);
      }
      loadMesh(a) {
        let b = this,
          c = this.json,
          d = this.extensions,
          e = c.meshes[a],
          f = e.primitives,
          g = [];
        for (let a = 0, b = f.length; a < b; a++) {
          var h;
          let b =
            void 0 === f[a].material
              ? (void 0 === (h = this.cache).DefaultMaterial &&
                  (h.DefaultMaterial = new fH({
                    color: 0xffffff,
                    emissive: 0,
                    metalness: 1,
                    roughness: 1,
                    transparent: !1,
                    depthTest: !0,
                    side: 0,
                  })),
                h.DefaultMaterial)
              : this.getDependency('material', f[a].material);
          g.push(b);
        }
        return (
          g.push(b.loadGeometries(f)),
          Promise.all(g).then(function (c) {
            let g = c.slice(0, c.length - 1),
              h = c[c.length - 1],
              i = [];
            for (let c = 0, j = h.length; c < j; c++) {
              let j,
                k = h[c],
                l = f[c],
                m = g[c];
              if (
                l.mode === oO.TRIANGLES ||
                l.mode === oO.TRIANGLE_STRIP ||
                l.mode === oO.TRIANGLE_FAN ||
                void 0 === l.mode
              )
                (!0 ===
                  (j = !0 === e.isSkinnedMesh ? new dp(k, m) : new cA(k, m))
                    .isSkinnedMesh && j.normalizeSkinWeights(),
                  l.mode === oO.TRIANGLE_STRIP
                    ? (j.geometry = oh(j.geometry, 1))
                    : l.mode === oO.TRIANGLE_FAN &&
                      (j.geometry = oh(j.geometry, 2)));
              else if (l.mode === oO.LINES) j = new eg(k, m);
              else if (l.mode === oO.LINE_STRIP) j = new ec(k, m);
              else if (l.mode === oO.LINE_LOOP) j = new eh(k, m);
              else if (l.mode === oO.POINTS) j = new en(k, m);
              else
                throw Error(
                  'THREE.GLTFLoader: Primitive mode unsupported: ' + l.mode
                );
              (Object.keys(j.geometry.morphAttributes).length > 0 &&
                (function (a, b) {
                  if ((a.updateMorphTargets(), void 0 !== b.weights))
                    for (let c = 0, d = b.weights.length; c < d; c++)
                      a.morphTargetInfluences[c] = b.weights[c];
                  if (b.extras && Array.isArray(b.extras.targetNames)) {
                    let c = b.extras.targetNames;
                    if (a.morphTargetInfluences.length === c.length) {
                      a.morphTargetDictionary = {};
                      for (let b = 0, d = c.length; b < d; b++)
                        a.morphTargetDictionary[c[b]] = b;
                    } else
                      console.warn(
                        'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.'
                      );
                  }
                })(j, e),
                (j.name = b.createUniqueName(e.name || 'mesh_' + a)),
                oX(j, e),
                l.extensions && oW(d, j, l),
                b.assignFinalMaterial(j),
                i.push(j));
            }
            for (let c = 0, d = i.length; c < d; c++)
              b.associations.set(i[c], { meshes: a, primitives: c });
            if (1 === i.length) return (e.extensions && oW(d, i[0], e), i[0]);
            let j = new cQ();
            (e.extensions && oW(d, j, e), b.associations.set(j, { meshes: a }));
            for (let a = 0, b = i.length; a < b; a++) j.add(i[a]);
            return j;
          })
        );
      }
      loadCamera(a) {
        let b,
          c = this.json.cameras[a],
          d = c[c.type];
        return d
          ? ('perspective' === c.type
              ? (b = new cM(
                  an.radToDeg(d.yfov),
                  d.aspectRatio || 1,
                  d.znear || 1,
                  d.zfar || 2e6
                ))
              : 'orthographic' === c.type &&
                (b = new gv(-d.xmag, d.xmag, d.ymag, -d.ymag, d.znear, d.zfar)),
            c.name && (b.name = this.createUniqueName(c.name)),
            oX(b, c),
            Promise.resolve(b))
          : void console.warn('THREE.GLTFLoader: Missing camera parameters.');
      }
      loadSkin(a) {
        let b = this.json.skins[a],
          c = [];
        for (let a = 0, d = b.joints.length; a < d; a++)
          c.push(this._loadNodeShallow(b.joints[a]));
        return (
          void 0 !== b.inverseBindMatrices
            ? c.push(this.getDependency('accessor', b.inverseBindMatrices))
            : c.push(null),
          Promise.all(c).then(function (a) {
            let c = a.pop(),
              d = [],
              e = [];
            for (let f = 0, g = a.length; f < g; f++) {
              let g = a[f];
              if (g) {
                d.push(g);
                let a = new bd();
                (null !== c && a.fromArray(c.array, 16 * f), e.push(a));
              } else
                console.warn(
                  'THREE.GLTFLoader: Joint "%s" could not be found.',
                  b.joints[f]
                );
            }
            return new du(d, e);
          })
        );
      }
      loadAnimation(a) {
        let b = this.json,
          c = this,
          d = b.animations[a],
          e = d.name ? d.name : 'animation_' + a,
          f = [],
          g = [],
          h = [],
          i = [],
          j = [];
        for (let a = 0, b = d.channels.length; a < b; a++) {
          let b = d.channels[a],
            c = d.samplers[b.sampler],
            e = b.target,
            k = e.node,
            l = void 0 !== d.parameters ? d.parameters[c.input] : c.input,
            m = void 0 !== d.parameters ? d.parameters[c.output] : c.output;
          void 0 !== e.node &&
            (f.push(this.getDependency('node', k)),
            g.push(this.getDependency('accessor', l)),
            h.push(this.getDependency('accessor', m)),
            i.push(c),
            j.push(e));
        }
        return Promise.all([
          Promise.all(f),
          Promise.all(g),
          Promise.all(h),
          Promise.all(i),
          Promise.all(j),
        ]).then(function (a) {
          let b = a[0],
            d = a[1],
            f = a[2],
            g = a[3],
            h = a[4],
            i = [];
          for (let a = 0, e = b.length; a < e; a++) {
            let e = b[a],
              j = d[a],
              k = f[a],
              l = g[a],
              m = h[a];
            if (void 0 === e) continue;
            e.updateMatrix && e.updateMatrix();
            let n = c._createAnimationTracks(e, j, k, l, m);
            if (n) for (let a = 0; a < n.length; a++) i.push(n[a]);
          }
          return new f6(e, void 0, i);
        });
      }
      createNodeMesh(a) {
        let b = this.json,
          c = this,
          d = b.nodes[a];
        return void 0 === d.mesh
          ? null
          : c.getDependency('mesh', d.mesh).then(function (a) {
              let b = c._getNodeRef(c.meshCache, d.mesh, a);
              return (
                void 0 !== d.weights &&
                  b.traverse(function (a) {
                    if (a.isMesh)
                      for (let b = 0, c = d.weights.length; b < c; b++)
                        a.morphTargetInfluences[b] = d.weights[b];
                  }),
                b
              );
            });
      }
      loadNode(a) {
        let b = this.json.nodes[a],
          c = this._loadNodeShallow(a),
          d = [],
          e = b.children || [];
        for (let a = 0, b = e.length; a < b; a++)
          d.push(this.getDependency('node', e[a]));
        let f =
          void 0 === b.skin
            ? Promise.resolve(null)
            : this.getDependency('skin', b.skin);
        return Promise.all([c, Promise.all(d), f]).then(function (a) {
          let b = a[0],
            c = a[1],
            d = a[2];
          null !== d &&
            b.traverse(function (a) {
              a.isSkinnedMesh && a.bind(d, o$);
            });
          for (let a = 0, d = c.length; a < d; a++) b.add(c[a]);
          return b;
        });
      }
      _loadNodeShallow(a) {
        let b = this.json,
          c = this.extensions,
          d = this;
        if (void 0 !== this.nodeCache[a]) return this.nodeCache[a];
        let e = b.nodes[a],
          f = e.name ? d.createUniqueName(e.name) : '',
          g = [],
          h = d._invokeOne(function (b) {
            return b.createNodeMesh && b.createNodeMesh(a);
          });
        return (
          h && g.push(h),
          void 0 !== e.camera &&
            g.push(
              d.getDependency('camera', e.camera).then(function (a) {
                return d._getNodeRef(d.cameraCache, e.camera, a);
              })
            ),
          d
            ._invokeAll(function (b) {
              return b.createNodeAttachment && b.createNodeAttachment(a);
            })
            .forEach(function (a) {
              g.push(a);
            }),
          (this.nodeCache[a] = Promise.all(g).then(function (b) {
            let g;
            if (
              (g =
                !0 === e.isBone
                  ? new dq()
                  : b.length > 1
                    ? new cQ()
                    : 1 === b.length
                      ? b[0]
                      : new bE()) !== b[0]
            )
              for (let a = 0, c = b.length; a < c; a++) g.add(b[a]);
            if (
              (e.name && ((g.userData.name = e.name), (g.name = f)),
              oX(g, e),
              e.extensions && oW(c, g, e),
              void 0 !== e.matrix)
            ) {
              let a = new bd();
              (a.fromArray(e.matrix), g.applyMatrix4(a));
            } else
              (void 0 !== e.translation && g.position.fromArray(e.translation),
                void 0 !== e.rotation && g.quaternion.fromArray(e.rotation),
                void 0 !== e.scale && g.scale.fromArray(e.scale));
            return (
              d.associations.has(g) || d.associations.set(g, {}),
              (d.associations.get(g).nodes = a),
              g
            );
          })),
          this.nodeCache[a]
        );
      }
      loadScene(a) {
        let b = this.extensions,
          c = this.json.scenes[a],
          d = this,
          e = new cQ();
        (c.name && (e.name = d.createUniqueName(c.name)),
          oX(e, c),
          c.extensions && oW(b, e, c));
        let f = c.nodes || [],
          g = [];
        for (let a = 0, b = f.length; a < b; a++)
          g.push(d.getDependency('node', f[a]));
        return Promise.all(g).then(function (a) {
          for (let b = 0, c = a.length; b < c; b++) e.add(a[b]);
          return (
            (d.associations = ((a) => {
              let b = new Map();
              for (let [a, c] of d.associations)
                (a instanceof b$ || a instanceof aG) && b.set(a, c);
              return (
                a.traverse((a) => {
                  let c = d.associations.get(a);
                  null != c && b.set(a, c);
                }),
                b
              );
            })(e)),
            e
          );
        });
      }
      _createAnimationTracks(a, b, c, d, e) {
        let f,
          g = [],
          h = a.name ? a.name : a.uuid,
          i = [];
        switch (
          (oU[e.path] === oU.weights
            ? a.traverse(function (a) {
                a.morphTargetInfluences && i.push(a.name ? a.name : a.uuid);
              })
            : i.push(h),
          oU[e.path])
        ) {
          case oU.weights:
            f = f1;
            break;
          case oU.rotation:
            f = f3;
            break;
          case oU.position:
          case oU.scale:
            f = f5;
            break;
          default:
            f = 1 === c.itemSize ? f1 : f5;
        }
        let j = void 0 !== d.interpolation ? oV[d.interpolation] : 2301,
          k = this._getArrayFromAccessor(c);
        for (let a = 0, c = i.length; a < c; a++) {
          let c = new f(i[a] + '.' + oU[e.path], b.array, k, j);
          ('CUBICSPLINE' === d.interpolation &&
            this._createCubicSplineTrackInterpolant(c),
            g.push(c));
        }
        return g;
      }
      _getArrayFromAccessor(a) {
        let b = a.array;
        if (a.normalized) {
          let a = oZ(b.constructor),
            c = new Float32Array(b.length);
          for (let d = 0, e = b.length; d < e; d++) c[d] = b[d] * a;
          b = c;
        }
        return b;
      }
      _createCubicSplineTrackInterpolant(a) {
        ((a.createInterpolant = function (a) {
          return new (this instanceof f3 ? oN : oL)(
            this.times,
            this.values,
            this.getValueSize() / 3,
            a
          );
        }),
          (a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0));
      }
    }
    function o0(a, b, c) {
      let d = b.attributes,
        e = [];
      for (let b in d) {
        let f = oT[b] || b.toLowerCase();
        f in a.attributes ||
          e.push(
            (function (b, d) {
              return c.getDependency('accessor', b).then(function (b) {
                a.setAttribute(d, b);
              });
            })(d[b], f)
          );
      }
      if (void 0 !== b.indices && !a.index) {
        let d = c.getDependency('accessor', b.indices).then(function (b) {
          a.setIndex(b);
        });
        e.push(d);
      }
      return (
        oX(a, b),
        !(function (a, b, c) {
          let d = b.attributes,
            e = new aO();
          if (void 0 === d.POSITION) return;
          {
            let a = c.json.accessors[d.POSITION],
              b = a.min,
              f = a.max;
            if (void 0 === b || void 0 === f)
              return console.warn(
                'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.'
              );
            if (
              (e.set(new aq(b[0], b[1], b[2]), new aq(f[0], f[1], f[2])),
              a.normalized)
            ) {
              let b = oZ(oP[a.componentType]);
              (e.min.multiplyScalar(b), e.max.multiplyScalar(b));
            }
          }
          let f = b.targets;
          if (void 0 !== f) {
            let a = new aq(),
              b = new aq();
            for (let d = 0, e = f.length; d < e; d++) {
              let e = f[d];
              if (void 0 !== e.POSITION) {
                let d = c.json.accessors[e.POSITION],
                  f = d.min,
                  g = d.max;
                if (void 0 !== f && void 0 !== g) {
                  if (
                    (b.setX(Math.max(Math.abs(f[0]), Math.abs(g[0]))),
                    b.setY(Math.max(Math.abs(f[1]), Math.abs(g[1]))),
                    b.setZ(Math.max(Math.abs(f[2]), Math.abs(g[2]))),
                    d.normalized)
                  ) {
                    let a = oZ(oP[d.componentType]);
                    b.multiplyScalar(a);
                  }
                  a.max(b);
                } else
                  console.warn(
                    'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.'
                  );
              }
            }
            e.expandByVector(a);
          }
          a.boundingBox = e;
          let g = new a4();
          (e.getCenter(g.center),
            (g.radius = e.min.distanceTo(e.max) / 2),
            (a.boundingSphere = g));
        })(a, b, c),
        Promise.all(e).then(function () {
          return void 0 !== b.targets
            ? (function (a, b, c) {
                let d = !1,
                  e = !1,
                  f = !1;
                for (let a = 0, c = b.length; a < c; a++) {
                  let c = b[a];
                  if (
                    (void 0 !== c.POSITION && (d = !0),
                    void 0 !== c.NORMAL && (e = !0),
                    void 0 !== c.COLOR_0 && (f = !0),
                    d && e && f)
                  )
                    break;
                }
                if (!d && !e && !f) return Promise.resolve(a);
                let g = [],
                  h = [],
                  i = [];
                for (let j = 0, k = b.length; j < k; j++) {
                  let k = b[j];
                  if (d) {
                    let b =
                      void 0 !== k.POSITION
                        ? c.getDependency('accessor', k.POSITION)
                        : a.attributes.position;
                    g.push(b);
                  }
                  if (e) {
                    let b =
                      void 0 !== k.NORMAL
                        ? c.getDependency('accessor', k.NORMAL)
                        : a.attributes.normal;
                    h.push(b);
                  }
                  if (f) {
                    let b =
                      void 0 !== k.COLOR_0
                        ? c.getDependency('accessor', k.COLOR_0)
                        : a.attributes.color;
                    i.push(b);
                  }
                }
                return Promise.all([
                  Promise.all(g),
                  Promise.all(h),
                  Promise.all(i),
                ]).then(function (b) {
                  let c = b[0],
                    g = b[1],
                    h = b[2];
                  return (
                    d && (a.morphAttributes.position = c),
                    e && (a.morphAttributes.normal = g),
                    f && (a.morphAttributes.color = h),
                    (a.morphTargetsRelative = !0),
                    a
                  );
                });
              })(a, b.targets, c)
            : a;
        })
      );
    }
    let o1 = new WeakMap();
    class o2 extends ga {
      constructor(a) {
        (super(a),
          (this.decoderPath = ''),
          (this.decoderConfig = {}),
          (this.decoderBinary = null),
          (this.decoderPending = null),
          (this.workerLimit = 4),
          (this.workerPool = []),
          (this.workerNextTaskID = 1),
          (this.workerSourceURL = ''),
          (this.defaultAttributeIDs = {
            position: 'POSITION',
            normal: 'NORMAL',
            color: 'COLOR',
            uv: 'TEX_COORD',
          }),
          (this.defaultAttributeTypes = {
            position: 'Float32Array',
            normal: 'Float32Array',
            color: 'Float32Array',
            uv: 'Float32Array',
          }));
      }
      setDecoderPath(a) {
        return ((this.decoderPath = a), this);
      }
      setDecoderConfig(a) {
        return ((this.decoderConfig = a), this);
      }
      setWorkerLimit(a) {
        return ((this.workerLimit = a), this);
      }
      load(a, b, c, d) {
        let e = new gd(this.manager);
        (e.setPath(this.path),
          e.setResponseType('arraybuffer'),
          e.setRequestHeader(this.requestHeader),
          e.setWithCredentials(this.withCredentials),
          e.load(
            a,
            (a) => {
              let c = {
                attributeIDs: this.defaultAttributeIDs,
                attributeTypes: this.defaultAttributeTypes,
                useUniqueIDs: !1,
              };
              this.decodeGeometry(a, c).then(b).catch(d);
            },
            c,
            d
          ));
      }
      decodeDracoFile(a, b, c, d) {
        let e = {
          attributeIDs: c || this.defaultAttributeIDs,
          attributeTypes: d || this.defaultAttributeTypes,
          useUniqueIDs: !!c,
        };
        this.decodeGeometry(a, e).then(b);
      }
      decodeGeometry(a, b) {
        let c;
        for (let a in b.attributeTypes) {
          let c = b.attributeTypes[a];
          void 0 !== c.BYTES_PER_ELEMENT && (b.attributeTypes[a] = c.name);
        }
        let d = JSON.stringify(b);
        if (o1.has(a)) {
          let b = o1.get(a);
          if (b.key === d) return b.promise;
          if (0 === a.byteLength)
            throw Error(
              'THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.'
            );
        }
        let e = this.workerNextTaskID++,
          f = a.byteLength,
          g = this._getWorker(e, f)
            .then(
              (d) => (
                (c = d),
                new Promise((d, f) => {
                  ((c._callbacks[e] = { resolve: d, reject: f }),
                    c.postMessage(
                      { type: 'decode', id: e, taskConfig: b, buffer: a },
                      [a]
                    ));
                })
              )
            )
            .then((a) => this._createGeometry(a.geometry));
        return (
          g
            .catch(() => !0)
            .then(() => {
              c && e && this._releaseTask(c, e);
            }),
          o1.set(a, { key: d, promise: g }),
          g
        );
      }
      _createGeometry(a) {
        let b = new co();
        a.index && b.setIndex(new b7(a.index.array, 1));
        for (let c = 0; c < a.attributes.length; c++) {
          let d = a.attributes[c],
            e = d.name,
            f = d.array,
            g = d.itemSize;
          b.setAttribute(e, new b7(f, g));
        }
        return b;
      }
      _loadLibrary(a, b) {
        let c = new gd(this.manager);
        return (
          c.setPath(this.decoderPath),
          c.setResponseType(b),
          c.setWithCredentials(this.withCredentials),
          new Promise((b, d) => {
            c.load(a, b, void 0, d);
          })
        );
      }
      preload() {
        return (this._initDecoder(), this);
      }
      _initDecoder() {
        if (this.decoderPending) return this.decoderPending;
        let a =
            'object' != typeof WebAssembly || 'js' === this.decoderConfig.type,
          b = [];
        return (
          a
            ? b.push(this._loadLibrary('draco_decoder.js', 'text'))
            : (b.push(this._loadLibrary('draco_wasm_wrapper.js', 'text')),
              b.push(this._loadLibrary('draco_decoder.wasm', 'arraybuffer'))),
          (this.decoderPending = Promise.all(b).then((b) => {
            let c = b[0];
            a || (this.decoderConfig.wasmBinary = b[1]);
            let d = o3.toString(),
              e = [
                '/* draco decoder */',
                c,
                '\n/* worker */',
                d.substring(d.indexOf('{') + 1, d.lastIndexOf('}')),
              ].join('\n');
            this.workerSourceURL = URL.createObjectURL(new Blob([e]));
          })),
          this.decoderPending
        );
      }
      _getWorker(a, b) {
        return this._initDecoder().then(() => {
          if (this.workerPool.length < this.workerLimit) {
            let a = new Worker(this.workerSourceURL);
            ((a._callbacks = {}),
              (a._taskCosts = {}),
              (a._taskLoad = 0),
              a.postMessage({
                type: 'init',
                decoderConfig: this.decoderConfig,
              }),
              (a.onmessage = function (b) {
                let c = b.data;
                switch (c.type) {
                  case 'decode':
                    a._callbacks[c.id].resolve(c);
                    break;
                  case 'error':
                    a._callbacks[c.id].reject(c);
                    break;
                  default:
                    console.error(
                      'THREE.DRACOLoader: Unexpected message, "' + c.type + '"'
                    );
                }
              }),
              this.workerPool.push(a));
          } else
            this.workerPool.sort(function (a, b) {
              return a._taskLoad > b._taskLoad ? -1 : 1;
            });
          let c = this.workerPool[this.workerPool.length - 1];
          return ((c._taskCosts[a] = b), (c._taskLoad += b), c);
        });
      }
      _releaseTask(a, b) {
        ((a._taskLoad -= a._taskCosts[b]),
          delete a._callbacks[b],
          delete a._taskCosts[b]);
      }
      debug() {
        console.log(
          'Task load: ',
          this.workerPool.map((a) => a._taskLoad)
        );
      }
      dispose() {
        for (let a = 0; a < this.workerPool.length; ++a)
          this.workerPool[a].terminate();
        return ((this.workerPool.length = 0), this);
      }
    }
    function o3() {
      let a, b;
      onmessage = function (c) {
        let d = c.data;
        switch (d.type) {
          case 'init':
            ((a = d.decoderConfig),
              (b = new Promise(function (b) {
                ((a.onModuleLoaded = function (a) {
                  b({ draco: a });
                }),
                  DracoDecoderModule(a));
              })));
            break;
          case 'decode':
            let e = d.buffer,
              f = d.taskConfig;
            b.then((a) => {
              let b = a.draco,
                c = new b.Decoder(),
                g = new b.DecoderBuffer();
              g.Init(new Int8Array(e), e.byteLength);
              try {
                let a = (function (a, b, c, d) {
                    var e, f, g;
                    let h,
                      i,
                      j,
                      k,
                      l,
                      m,
                      n = d.attributeIDs,
                      o = d.attributeTypes,
                      p = b.GetEncodedGeometryType(c);
                    if (p === a.TRIANGULAR_MESH)
                      ((l = new a.Mesh()), (m = b.DecodeBufferToMesh(c, l)));
                    else if (p === a.POINT_CLOUD)
                      ((l = new a.PointCloud()),
                        (m = b.DecodeBufferToPointCloud(c, l)));
                    else
                      throw Error(
                        'THREE.DRACOLoader: Unexpected geometry type.'
                      );
                    if (!m.ok() || 0 === l.ptr)
                      throw Error(
                        'THREE.DRACOLoader: Decoding failed: ' + m.error_msg()
                      );
                    let q = { index: null, attributes: [] };
                    for (let c in n) {
                      let e,
                        f,
                        g = self[o[c]];
                      if (d.useUniqueIDs)
                        ((f = n[c]), (e = b.GetAttributeByUniqueId(l, f)));
                      else {
                        if (-1 === (f = b.GetAttributeId(l, a[n[c]]))) continue;
                        e = b.GetAttribute(l, f);
                      }
                      q.attributes.push(
                        (function (a, b, c, d, e, f) {
                          let g = f.num_components(),
                            h = c.num_points() * g,
                            i = h * e.BYTES_PER_ELEMENT,
                            j = (function (a, b) {
                              switch (b) {
                                case Float32Array:
                                  return a.DT_FLOAT32;
                                case Int8Array:
                                  return a.DT_INT8;
                                case Int16Array:
                                  return a.DT_INT16;
                                case Int32Array:
                                  return a.DT_INT32;
                                case Uint8Array:
                                  return a.DT_UINT8;
                                case Uint16Array:
                                  return a.DT_UINT16;
                                case Uint32Array:
                                  return a.DT_UINT32;
                              }
                            })(a, e),
                            k = a._malloc(i);
                          b.GetAttributeDataArrayForAllPoints(c, f, j, i, k);
                          let l = new e(a.HEAPF32.buffer, k, h).slice();
                          return (
                            a._free(k),
                            { name: d, array: l, itemSize: g }
                          );
                        })(a, b, l, c, g, e)
                      );
                    }
                    return (
                      p === a.TRIANGULAR_MESH &&
                        ((e = a),
                        (f = b),
                        (g = l),
                        (h = 3 * g.num_faces()),
                        (i = 4 * h),
                        (j = e._malloc(i)),
                        f.GetTrianglesUInt32Array(g, i, j),
                        (k = new Uint32Array(e.HEAPF32.buffer, j, h).slice()),
                        e._free(j),
                        (q.index = { array: k, itemSize: 1 })),
                      a.destroy(l),
                      q
                    );
                  })(b, c, g, f),
                  e = a.attributes.map((a) => a.array.buffer);
                (a.index && e.push(a.index.array.buffer),
                  self.postMessage(
                    { type: 'decode', id: d.id, geometry: a },
                    e
                  ));
              } catch (a) {
                (console.error(a),
                  self.postMessage({
                    type: 'error',
                    id: d.id,
                    error: a.message,
                  }));
              } finally {
                (b.destroy(g), b.destroy(c));
              }
            });
        }
      };
    }
    let o4 = function (a) {
        let b = new Map(),
          c = new Map(),
          d = a.clone();
        return (
          (function a(b, c, d) {
            d(b, c);
            for (let e = 0; e < b.children.length; e++)
              a(b.children[e], c.children[e], d);
          })(a, d, function (a, d) {
            (b.set(d, a), c.set(a, d));
          }),
          d.traverse(function (a) {
            if (!a.isSkinnedMesh) return;
            let d = b.get(a),
              e = d.skeleton.bones;
            ((a.skeleton = d.skeleton.clone()),
              a.bindMatrix.copy(d.bindMatrix),
              (a.skeleton.bones = e.map(function (a) {
                return c.get(a);
              })),
              a.bind(a.skeleton, a.bindMatrix));
          }),
          d
        );
      },
      o5 = z.forwardRef(
        (
          {
            isChild: a = !1,
            object: b,
            children: c,
            deep: d,
            castShadow: e,
            receiveShadow: f,
            inject: g,
            keys: h,
            ...i
          },
          j
        ) => {
          let k = {
            keys: h,
            deep: d,
            inject: g,
            castShadow: e,
            receiveShadow: f,
          };
          if (
            Array.isArray(
              (b = z.useMemo(() => {
                if (!1 === a && !Array.isArray(b)) {
                  let a = !1;
                  if (
                    (b.traverse((b) => {
                      b.isSkinnedMesh && (a = !0);
                    }),
                    a)
                  )
                    return o4(b);
                }
                return b;
              }, [b, a]))
            )
          )
            return z.createElement(
              'group',
              l2({}, i, { ref: j }),
              b.map((a) =>
                z.createElement(o5, l2({ key: a.uuid, object: a }, k))
              ),
              c
            );
          let { children: l, ...m } = (function (
              a,
              {
                keys: b = [
                  'near',
                  'far',
                  'color',
                  'distance',
                  'decay',
                  'penumbra',
                  'angle',
                  'intensity',
                  'skeleton',
                  'visible',
                  'castShadow',
                  'receiveShadow',
                  'morphTargetDictionary',
                  'morphTargetInfluences',
                  'name',
                  'geometry',
                  'material',
                  'position',
                  'rotation',
                  'scale',
                  'up',
                  'userData',
                  'bindMode',
                  'bindMatrix',
                  'bindMatrixInverse',
                  'skeleton',
                ],
                deep: c,
                inject: d,
                castShadow: e,
                receiveShadow: f,
              }
            ) {
              let g = {};
              for (let c of b) g[c] = a[c];
              return (
                c &&
                  (g.geometry &&
                    'materialsOnly' !== c &&
                    (g.geometry = g.geometry.clone()),
                  g.material &&
                    'geometriesOnly' !== c &&
                    (g.material = g.material.clone())),
                d &&
                  (g =
                    'function' == typeof d
                      ? { ...g, children: d(a) }
                      : z.isValidElement(d)
                        ? { ...g, children: d }
                        : { ...g, ...d }),
                a instanceof cA &&
                  (e && (g.castShadow = !0), f && (g.receiveShadow = !0)),
                g
              );
            })(b, k),
            n = b.type[0].toLowerCase() + b.type.slice(1);
          return z.createElement(
            n,
            l2({}, m, i, { ref: j }),
            b.children.map((a) =>
              'Bone' === a.type
                ? z.createElement(
                    'primitive',
                    l2({ key: a.uuid, object: a }, k)
                  )
                : z.createElement(
                    o5,
                    l2({ key: a.uuid, object: a }, k, { isChild: !0 })
                  )
            ),
            c,
            l
          );
        }
      ),
      o6 = null,
      o7 = 'https://www.gstatic.com/draco/versioned/decoders/1.5.5/';
    function o8(a = !0, b = !0, c) {
      return (d) => {
        (c && c(d),
          a &&
            (o6 || (o6 = new o2()),
            o6.setDecoderPath('string' == typeof a ? a : o7),
            d.setDRACOLoader(o6)),
          b &&
            d.setMeshoptDecoder(
              (() => {
                let a;
                if (m) return m;
                let b = new Uint8Array([
                    0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 3, 2, 0,
                    0, 5, 3, 1, 0, 1, 12, 1, 0, 10, 22, 2, 12, 0, 65, 0, 65, 0,
                    65, 0, 252, 10, 0, 0, 11, 7, 0, 65, 0, 253, 15, 26, 11,
                  ]),
                  c = new Uint8Array([
                    32, 0, 65, 253, 3, 1, 2, 34, 4, 106, 6, 5, 11, 8, 7, 20, 13,
                    33, 12, 16, 128, 9, 116, 64, 19, 113, 127, 15, 10, 21, 22,
                    14, 255, 66, 24, 54, 136, 107, 18, 23, 192, 26, 114, 118,
                    132, 17, 77, 101, 130, 144, 27, 87, 131, 44, 45, 74, 156,
                    154, 70, 167,
                  ]);
                if ('object' != typeof WebAssembly) return { supported: !1 };
                let d =
                  'B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB';
                WebAssembly.validate(b) &&
                  (d =
                    'B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB');
                let e = WebAssembly.instantiate(
                  (function (a) {
                    let b = new Uint8Array(a.length);
                    for (let c = 0; c < a.length; ++c) {
                      let d = a.charCodeAt(c);
                      b[c] =
                        d > 96
                          ? d - 71
                          : d > 64
                            ? d - 65
                            : d > 47
                              ? d + 4
                              : d > 46
                                ? 63
                                : 62;
                    }
                    let d = 0;
                    for (let e = 0; e < a.length; ++e)
                      b[d++] = b[e] < 60 ? c[b[e]] : (b[e] - 60) * 64 + b[++e];
                    return b.buffer.slice(0, d);
                  })(d),
                  {}
                ).then((b) => {
                  (a = b.instance).exports.__wasm_call_ctors();
                });
                function f(b, c, d, e, f, g) {
                  let h = a.exports.sbrk,
                    i = (d + 3) & -4,
                    j = h(i * e),
                    k = h(f.length),
                    l = new Uint8Array(a.exports.memory.buffer);
                  l.set(f, k);
                  let m = b(j, d, e, k, f.length);
                  if (
                    (0 === m && g && g(j, i, e),
                    c.set(l.subarray(j, j + d * e)),
                    h(j - h(0)),
                    0 !== m)
                  )
                    throw Error(`Malformed buffer data: ${m}`);
                }
                let g = {
                    0: '',
                    1: 'meshopt_decodeFilterOct',
                    2: 'meshopt_decodeFilterQuat',
                    3: 'meshopt_decodeFilterExp',
                    NONE: '',
                    OCTAHEDRAL: 'meshopt_decodeFilterOct',
                    QUATERNION: 'meshopt_decodeFilterQuat',
                    EXPONENTIAL: 'meshopt_decodeFilterExp',
                  },
                  h = {
                    0: 'meshopt_decodeVertexBuffer',
                    1: 'meshopt_decodeIndexBuffer',
                    2: 'meshopt_decodeIndexSequence',
                    ATTRIBUTES: 'meshopt_decodeVertexBuffer',
                    TRIANGLES: 'meshopt_decodeIndexBuffer',
                    INDICES: 'meshopt_decodeIndexSequence',
                  };
                return (m = {
                  ready: e,
                  supported: !0,
                  decodeVertexBuffer(b, c, d, e, h) {
                    f(
                      a.exports.meshopt_decodeVertexBuffer,
                      b,
                      c,
                      d,
                      e,
                      a.exports[g[h]]
                    );
                  },
                  decodeIndexBuffer(b, c, d, e) {
                    f(a.exports.meshopt_decodeIndexBuffer, b, c, d, e);
                  },
                  decodeIndexSequence(b, c, d, e) {
                    f(a.exports.meshopt_decodeIndexSequence, b, c, d, e);
                  },
                  decodeGltfBuffer(b, c, d, e, i, j) {
                    f(a.exports[h[i]], b, c, d, e, a.exports[g[j]]);
                  },
                });
              })()
            ));
      };
    }
    let o9 = (a, b, c, d) => lm(ol, a, o8(b, c, d));
    ((o9.preload = (a, b, c, d) => lm.preload(ol, a, o8(b, c, d))),
      (o9.clear = (a) => lm.clear(ol, a)),
      (o9.setDecoderPath = (a) => {
        o7 = a;
      }));
    let pa = z.forwardRef(
      (
        {
          children: a,
          enabled: b = !0,
          speed: c = 1,
          rotationIntensity: d = 1,
          floatIntensity: e = 1,
          floatingRange: f = [-0.1, 0.1],
          autoInvalidate: g = !1,
          ...h
        },
        i
      ) => {
        let j = z.useRef(null);
        z.useImperativeHandle(i, () => j.current, []);
        let k = z.useRef(1e4 * Math.random());
        return (
          lj((a) => {
            var h, i;
            if (!b || 0 === c) return;
            g && a.invalidate();
            let l = k.current + a.clock.elapsedTime;
            ((j.current.rotation.x = (Math.cos((l / 4) * c) / 8) * d),
              (j.current.rotation.y = (Math.sin((l / 4) * c) / 8) * d),
              (j.current.rotation.z = (Math.sin((l / 4) * c) / 20) * d));
            let m = Math.sin((l / 4) * c) / 10;
            ((m = an.mapLinear(
              m,
              -0.1,
              0.1,
              null != (h = null == f ? void 0 : f[0]) ? h : -0.1,
              null != (i = null == f ? void 0 : f[1]) ? i : 0.1
            )),
              (j.current.position.y = m * e),
              j.current.updateMatrix());
          }),
          z.createElement(
            'group',
            h,
            z.createElement('group', { ref: j, matrixAutoUpdate: !1 }, a)
          )
        );
      }
    );
    function pb({ scrollProgress: a, ...b }) {
      let { nodes: c, materials: d } = o9(
          'https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/about/beliefs/ghost-transformed.glb'
        ),
        { gl: e, viewport: f } = li(),
        g = (0, z.useRef)(null),
        h = (0, z.useRef)(null),
        i = (0, z.useRef)({ x: 0, y: 0 }),
        j = (0, z.useMemo)(() => {
          if (Array.isArray(b.position)) {
            let [a = 0, c = 0, d = 0] = b.position;
            return new aq(a, c, d);
          }
          return b.position instanceof aq
            ? b.position.clone()
            : new aq(0, 0, 0);
        }, [b.position]);
      ((0, z.useEffect)(() => {
        let a = (a) => {
            if (e.domElement) {
              let b = e.domElement.getBoundingClientRect();
              i.current = {
                x: ((a.clientX - b.left) / b.width) * 2 - 1,
                y: -(2 * ((a.clientY - b.top) / b.height)) + 1,
              };
            }
          },
          b = e.domElement;
        return (
          b.addEventListener('mousemove', a),
          () => b.removeEventListener('mousemove', a)
        );
      }, [e]),
        (0, z.useEffect)(() => {
          g.current && g.current.position.copy(j);
        }, [j]));
      let k = f.width < 5 ? 0.18 * f.width : 0.6;
      return (
        lj((b) => {
          if (!h.current || !a || !g.current) return;
          let c = a.get(),
            d = i.current;
          ((g.current.position.x = an.lerp(
            g.current.position.x,
            j.x + 0,
            0.05
          )),
            (h.current.rotation.y = -c * Math.PI * 2),
            (h.current.position.x = an.lerp(
              h.current.position.x,
              0.1 * d.x,
              0.05
            )),
            (h.current.position.y = an.lerp(
              h.current.position.y,
              0.1 * d.y,
              0.05
            )),
            (h.current.rotation.x = an.lerp(
              h.current.rotation.x,
              -(0.5 * (0.1 * d.y)),
              0.05
            )));
          let e = 0.1 * d.x * 0.5,
            f = 1;
          if (c > 0.8) {
            let a = Math.min(1, (c - 0.8) * 5);
            ((h.current.position.z = an.lerp(h.current.position.z, +a, 0.05)),
              (e +=
                0.1 * Math.sin(6 * b.clock.elapsedTime) * a + (c - 0.8) * 0.2),
              (f = 1 + 0.1 * a));
          } else h.current.position.z = an.lerp(h.current.position.z, 0, 0.05);
          ((h.current.rotation.z = an.lerp(h.current.rotation.z, e, 0.05)),
            h.current.scale.setScalar(f));
        }),
        (0, y.jsx)(pa, {
          speed: 2,
          rotationIntensity: 0.5,
          floatIntensity: 0.5,
          floatingRange: [-0.1, 0.1],
          children: (0, y.jsx)('group', {
            ref: g,
            ...b,
            scale: k,
            dispose: null,
            children: (0, y.jsxs)('group', {
              ref: h,
              children: [
                (0, y.jsx)('mesh', {
                  name: 'Body_Ghost_White_0',
                  castShadow: !0,
                  receiveShadow: !0,
                  geometry: c.Body_Ghost_White_0.geometry,
                  material: d.Ghost_White,
                  position: [0, 1.5578, 0],
                  rotation: [-Math.PI / 2, 0, 0],
                }),
                (0, y.jsx)('mesh', {
                  name: 'Eyes_Eyes_0',
                  castShadow: !0,
                  receiveShadow: !0,
                  geometry: c.Eyes_Eyes_0.geometry,
                  material: d.Eyes,
                  position: [0, 1.5578, 0],
                  rotation: [-Math.PI / 2, 0, 0],
                }),
                (0, y.jsx)('mesh', {
                  name: 'Hat_Hat_Black_0',
                  castShadow: !0,
                  receiveShadow: !0,
                  geometry: c.Hat_Hat_Black_0.geometry,
                  material: d.Hat_Black,
                  position: [0, 2.9913, 0],
                  rotation: [-Math.PI / 2, 0, 0],
                }),
                (0, y.jsx)('mesh', {
                  name: 'Rim_Rim_Red_0',
                  castShadow: !0,
                  receiveShadow: !0,
                  geometry: c.Rim_Rim_Red_0.geometry,
                  material: d.Rim_Red,
                  position: [0, 2.3541, 0],
                  rotation: [-Math.PI / 2, 0, 0],
                }),
              ],
            }),
          }),
        })
      );
    }
    var pc = a.i(37916);
    let pd = [
        'Um\nvídeo\nque\nrespira.',
        'Uma\nmarca\nque se\nreconhece.',
        'Um\ndetalhe\nque\nfica.',
        'Crio\npara\ngerar\npresença.',
        'Mesmo\nquando\nnão\nestou\nali.',
        'Mesmo\nquando\nninguém\npercebe\no esforço.',
      ],
      pe = [
        pc.BRAND.colors.bluePrimary,
        pc.BRAND.colors.purpleDetails,
        pc.BRAND.colors.pinkDetails,
        pc.BRAND.colors.bluePrimary,
        pc.BRAND.colors.purpleDetails,
        pc.BRAND.colors.pinkDetails,
      ],
      pf = pc.BRAND.colors.bluePrimary,
      pg = () => {
        let a = z.default.useRef(null),
          { scrollYProgress: b } = (0, B.useScroll)({
            target: a,
            offset: ['start end', 'end end'],
          }),
          c = (0, A.cubicBezier)(0.22, 1, 0.36, 1),
          d = (0, C.useTransform)(b, [0.05, 0.12, 0.85, 0.95], [0, 1, 1, 0], {
            ease: c,
          });
        return (0, y.jsxs)('section', {
          ref: a,
          className: 'relative w-full',
          children: [
            (0, y.jsxs)('div', {
              className: 'relative pointer-events-none z-20',
              children: [
                (0, y.jsx)(og, { opacity: d, progress: b }),
                pd.map((a, b) =>
                  (0, y.jsx)(
                    od,
                    { text: a, bgColor: pe[b] || pe[0], isFirst: 0 === b },
                    b
                  )
                ),
                (0, y.jsx)(oe, { bgColor: pf, scrollProgress: b }),
              ],
            }),
            (0, y.jsx)('div', {
              className:
                'absolute inset-0 w-full h-full pointer-events-none z-30',
              children: (0, y.jsx)('div', {
                className:
                  'sticky top-0 w-full h-screen overflow-hidden pointer-events-auto',
                children: (0, y.jsxs)(l1, {
                  shadows: !0,
                  dpr: [1, 2],
                  camera: { position: [0, 0, 8], fov: 35 },
                  gl: { alpha: !0, antialias: !0 },
                  className: 'w-full h-full',
                  children: [
                    (0, y.jsx)(n9, { preset: 'city' }),
                    (0, y.jsx)('ambientLight', { intensity: 0.8 }),
                    (0, y.jsx)('spotLight', {
                      position: [10, 10, 10],
                      angle: 0.15,
                      penumbra: 1,
                      intensity: 1,
                    }),
                    (0, y.jsx)(z.Suspense, {
                      fallback: null,
                      children: (0, y.jsx)(pb, {
                        scrollProgress: b,
                        position: [0, -1, 0],
                        rotation: [0, 0, 0],
                      }),
                    }),
                  ],
                }),
              }),
            }),
          ],
        });
      };
    a.s(['AboutBeliefs', 0, pg, 'default', 0, pg], 30717);
  },
  17315,
  (a) => {
    'use strict';
    var b = a.i(59465),
      c = a.i(29474),
      d = a.i(26118),
      e = a.i(29172),
      f = a.i(57283),
      g = a.i(43230);
    function h() {
      let a = (0, d.useReducedMotion)();
      return (0, b.jsx)('section', {
        className: 'std-grid bg-background py-20 md:py-32',
        'aria-label': 'Fechamento do Manifesto',
        children: (0, b.jsxs)(c.motion.div, {
          variants: g.motionTokens.fadeGhost,
          initial: a ? 'visible' : 'hidden',
          whileInView: 'visible',
          viewport: { once: !0, margin: '-80px' },
          className: 'w-full flex-col items-center text-center',
          children: [
            (0, b.jsxs)('div', {
              className: 'w-full',
              children: [
                (0, b.jsx)('div', {
                  className: 'mb-10 h-px w-full bg-blueAccent/30',
                }),
                (0, b.jsxs)('h2', {
                  className:
                    'text-display font-bold leading-tight text-white md:leading-[1.1]',
                  children: [
                    'Hoje sou',
                    ' ',
                    (0, b.jsx)('span', {
                      className: 'text-bluePrimary',
                      children: 'Diretor de Criação',
                    }),
                    ',',
                    (0, b.jsx)('br', {}),
                    'com mais de',
                    ' ',
                    (0, b.jsx)('span', {
                      className: 'text-bluePrimary',
                      children: '12 anos de estrada.',
                    }),
                  ],
                }),
                (0, b.jsx)('div', {
                  className: 'mt-10 h-px w-full bg-blueAccent/30',
                }),
              ],
            }),
            (0, b.jsxs)('div', {
              className: 'mt-16 md:mt-20 flex flex-col items-center',
              children: [
                (0, b.jsxs)('p', {
                  className:
                    'text-h2 text-white max-w-200 leading-snug mx-auto text-center',
                  children: [
                    'Já liderei marcas, agências, eventos e',
                    ' ',
                    (0, b.jsx)('span', {
                      className: 'text-bluePrimary',
                      children: 'criei experiências',
                    }),
                    ' para todos os canais.',
                  ],
                }),
                (0, b.jsxs)('div', {
                  className:
                    'mt-12 w-full overflow-hidden rounded-xl shadow-2xl md:mt-11',
                  children: [
                    (0, b.jsx)('video', {
                      className: 'hidden md:block w-full h-auto',
                      src: 'https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/about/beliefs/VIDEO-SKILLS-FINAL_compressed.mp4',
                      autoPlay: !0,
                      loop: !0,
                      muted: !0,
                      playsInline: !0,
                      preload: 'auto',
                      'aria-label': 'Demonstração visual de experiências',
                    }),
                    (0, b.jsx)('video', {
                      className: 'md:hidden w-full h-auto',
                      src: 'https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/about/beliefs/VIDEO-SKILLS-MOBILE-FINAL.mp4',
                      autoPlay: !0,
                      loop: !0,
                      muted: !0,
                      playsInline: !0,
                      preload: 'auto',
                      'aria-label': 'Demonstração visual de experiências',
                    }),
                  ],
                }),
              ],
            }),
            (0, b.jsxs)('div', {
              className: 'mt-16 md:mt-20 flex flex-col items-center',
              children: [
                (0, b.jsxs)('p', {
                  className: 'text-h2 text-white leading-snug',
                  children: [
                    'Agora, quero criar algo que permaneça —',
                    ' ',
                    (0, b.jsx)('span', {
                      className: 'text-bluePrimary',
                      children: 'com você.',
                    }),
                  ],
                }),
                (0, b.jsx)('div', {
                  className:
                    'mt-12 flex flex-row flex-wrap items-center justify-center gap-6 md:mt-16 md:gap-8',
                  children: f.ABOUT_CONTENT.closing.ctas.map((a, c) =>
                    (0, b.jsx)(
                      e.default,
                      {
                        href: a.href,
                        text: a.label,
                        className: 'relative min-w-50',
                      },
                      c
                    )
                  ),
                }),
              ],
            }),
          ],
        }),
      });
    }
    a.s(['AboutClosing', () => h]);
  },
];

//# sourceMappingURL=%5Broot-of-the-server%5D__a6b8163f._.js.map

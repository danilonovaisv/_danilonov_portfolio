{"version":3,"sources":["../../../../src/app/admin/%28protected%29/landing-pages/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { createClientComponentClient } from '@/lib/supabase/client';\nimport { Plus, Edit, Trash2, ExternalLink } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface LandingPage {\n  id: string;\n  title: string;\n  slug: string;\n  created_at: string;\n}\n\nexport default function LandingPagesListPage() {\n  const supabase = createClientComponentClient();\n  const [pages, setPages] = useState<LandingPage[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchPages();\n  }, []);\n\n  async function fetchPages() {\n    try {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('landing_pages')\n        .select('id, title, slug, created_at')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setPages(data || []);\n    } catch (err) {\n      console.error('Error fetching landing pages:', err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleDelete(id: string) {\n    if (!confirm('Tem certeza que deseja excluir esta página?')) return;\n\n    try {\n      const { error } = await supabase\n        .from('landing_pages')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      setPages(pages.filter((p) => p.id !== id));\n    } catch (err) {\n      console.error('Error deleting landing page:', err);\n      alert('Erro ao excluir página.');\n    }\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-sm uppercase tracking-[0.25em] text-slate-400\">\n            Gerenciamento\n          </p>\n          <h1 className=\"text-3xl font-semibold\">Landing Pages de Projetos</h1>\n        </div>\n        <Link\n          href=\"/admin/landing-pages/new\"\n          className=\"flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 transition-all\"\n        >\n          <Plus size={18} />\n          Nova Página\n        </Link>\n      </div>\n\n      <div className=\"overflow-hidden rounded-xl border border-white/10 bg-slate-900/40 backdrop-blur-sm\">\n        {loading ? (\n          <div className=\"p-12 text-center text-slate-400\">Carregando...</div>\n        ) : pages.length > 0 ? (\n          <table className=\"min-w-full text-sm text-left\">\n            <thead>\n              <tr className=\"border-b border-white/10 text-slate-400\">\n                <th className=\"px-6 py-4 font-medium uppercase tracking-wider\">\n                  Título\n                </th>\n                <th className=\"px-6 py-4 font-medium uppercase tracking-wider\">\n                  Slug\n                </th>\n                <th className=\"px-6 py-4 font-medium uppercase tracking-wider\">\n                  Criação\n                </th>\n                <th className=\"px-6 py-4 font-medium uppercase tracking-wider text-right\">\n                  Ações\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-white/5\">\n              <AnimatePresence>\n                {pages.map((page) => (\n                  <motion.tr\n                    key={page.id}\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    className=\"hover:bg-white/2 transition-colors group\"\n                  >\n                    <td className=\"px-6 py-4 text-white font-medium\">\n                      {page.title}\n                    </td>\n                    <td className=\"px-6 py-4 text-slate-400 font-mono text-xs\">\n                      /{page.slug}\n                    </td>\n                    <td className=\"px-6 py-4 text-slate-500\">\n                      {new Date(page.created_at).toLocaleDateString('pt-BR')}\n                    </td>\n                    <td className=\"px-6 py-4 text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Link\n                          href={`/projects/${page.slug}`}\n                          target=\"_blank\"\n                          className=\"p-2 text-slate-400 hover:text-white transition-colors\"\n                          title=\"Ver página pública\"\n                        >\n                          <ExternalLink size={18} />\n                        </Link>\n                        <Link\n                          href={`/admin/landing-pages/${page.id}`}\n                          className=\"p-2 text-slate-400 hover:text-blue-400 transition-colors\"\n                          title=\"Editar\"\n                        >\n                          <Edit size={18} />\n                        </Link>\n                        <button\n                          onClick={() => handleDelete(page.id)}\n                          className=\"p-2 text-slate-400 hover:text-red-400 transition-colors\"\n                          title=\"Excluir\"\n                        >\n                          <Trash2 size={18} />\n                        </button>\n                      </div>\n                    </td>\n                  </motion.tr>\n                ))}\n              </AnimatePresence>\n            </tbody>\n          </table>\n        ) : (\n          <div className=\"p-12 text-center\">\n            <p className=\"text-slate-400 mb-4\">Nenhuma landing page criada.</p>\n            <Link\n              href=\"/admin/landing-pages/new\"\n              className=\"text-blue-400 hover:underline text-sm\"\n            >\n              Criar minha primeira página\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"iDAEA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA"}
{"version":3,"sources":["../../../../src/lib/supabase/storage.ts","../../../../src/lib/supabase/asset-paths.ts","../../../../node_modules/.pnpm/lucide-react%400.563.0_react%4019.2.4/node_modules/lucide-react/src/icons/arrow-left.ts","../../../../node_modules/.pnpm/lucide-react%400.563.0_react%4019.2.4/node_modules/lucide-react/src/icons/trash-2.ts","../../../../node_modules/.pnpm/lucide-react%400.563.0_react%4019.2.4/node_modules/lucide-react/src/icons/plus.ts","../../../../src/app/admin/%28protected%29/landing-pages/%5Bid%5D/page.tsx"],"sourcesContent":["import { createClientComponentClient } from '@/lib/supabase/client';\nimport { buildAssetFilePath } from '@/lib/supabase/asset-paths';\nimport { normalizeStoragePath } from '@/lib/supabase/urls';\n\ntype UploadBucket = 'portfolio-media' | 'site-assets';\n\nfunction buildPath(base: string, slug: string) {\n  const sanitizedBase = base.replace(/\\/+$/g, '').replace(/^\\/+/g, '');\n  const basePath = sanitizedBase ? `${sanitizedBase}` : '';\n  return basePath ? `${basePath}/${slug}` : slug;\n}\n\nexport async function uploadToBucket(\n  bucket: UploadBucket,\n  basePath: string,\n  identifier: string,\n  file: File\n) {\n  const supabase = createClientComponentClient();\n  const ext = file.name.split('.').pop();\n  const name = ext ? `${identifier}.${ext}` : identifier;\n  const path = buildPath(basePath, name);\n  const { data, error } = await supabase.storage\n    .from(bucket)\n    .upload(path, file, { cacheControl: '3600', upsert: true });\n\n  if (error) throw error;\n  return normalizeStoragePath(data.path, bucket);\n}\n\nexport async function uploadSiteAsset({\n  file,\n  key,\n  page,\n  subPath,\n  bucket = 'site-assets',\n}: {\n  file: File;\n  key: string;\n  page?: string | null;\n  subPath?: string;\n  bucket?: UploadBucket;\n}) {\n  const supabase = createClientComponentClient();\n  const extension = file.name.split('.').pop() ?? 'bin';\n  const path = buildAssetFilePath({\n    page,\n    key,\n    subPath,\n    extension,\n  });\n\n  const { data, error } = await supabase.storage\n    .from(bucket)\n    .upload(path, file, { cacheControl: '3600', upsert: true });\n\n  if (error) throw error;\n  return normalizeStoragePath(data.path, bucket);\n}\n","const VALID_KEY_CHARS = /[^a-z0-9._-]/g;\n\nexport function sanitizeAssetKey(key: string) {\n  return key\n    .trim()\n    .toLowerCase()\n    .replace(/\\s+/g, '_')\n    .replace(VALID_KEY_CHARS, '');\n}\n\nexport function normalizePage(page?: string | null) {\n  return page && page.trim().length > 0 ? page.trim() : 'global';\n}\n\nexport function buildAssetFilePath({\n  page,\n  key,\n  subPath,\n  extension,\n}: {\n  page?: string | null;\n  key: string;\n  subPath?: string;\n  extension: string;\n}) {\n  const targetPage = normalizePage(page);\n  const segments = [targetPage];\n  if (subPath) {\n    segments.push(subPath.trim().replace(/^\\/+|\\/+$/g, ''));\n  }\n\n  const sanitizedKey = sanitizeAssetKey(key);\n  const normalizedExtension =\n    extension.toLowerCase().replace(/^\\.+/, '') || 'bin';\n  const fileName = `${sanitizedKey}.${normalizedExtension}`;\n  return `${segments.join('/')}/${fileName}`;\n}\n\nexport function getFileExtension(filePath: string | null | undefined) {\n  if (!filePath) return '';\n  const parts = filePath.split('.');\n  if (parts.length <= 1) return '';\n  return parts.pop() ?? '';\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n","'use client';\n\nimport { useEffect, useState, use } from 'react';\n\nimport { createClientComponentClient } from '@/lib/supabase/client';\nimport LandingPageForm from '@/components/admin/LandingPageForm';\n\ninterface Props {\n  params: Promise<{ id: string }>;\n}\n\nexport default function EditLandingPage({ params }: Props) {\n  const { id } = use(params);\n  const supabase = createClientComponentClient();\n  const [data, setData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchData() {\n      const { data } = await supabase\n        .from('landing_pages')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (data) setData(data);\n      setLoading(false);\n    }\n    fetchData();\n  }, [id, supabase]);\n\n  if (loading)\n    return <div className=\"p-10 text-center\">Carregando dados...</div>;\n  if (!data)\n    return <div className=\"p-10 text-center\">Página não encontrada.</div>;\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <p className=\"text-sm uppercase tracking-[0.25em] text-slate-400\">\n          Projetos\n        </p>\n        <h1 className=\"text-3xl font-semibold\">Editar Landing Page</h1>\n      </div>\n\n      <LandingPageForm initialData={data} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[2,3,4]}
{"version":3,"sources":["../../../../src/lib/supabase/server.ts","../../../../src/app/instruments/page.tsx"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\n\n// Brittle import removed\n// import { ReadonlyRequestCookies } from 'next/dist/server/web/spec-extension/adapters/request-cookies';\n\n// Fallback credentials (hardcoded for production reliability)\nconst FALLBACK_SUPABASE_URL = 'https://umkmwbkwvulxtdodzmzf.supabase.co';\nconst FALLBACK_SUPABASE_ANON_KEY =\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVta213Ymt3dnVseHRkb2R6bXpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDE4MzcsImV4cCI6MjA4MzkxNzgzN30.wssvD9W-yzRyLpq8aMCw57E4wNz7OnQ58ujLzYmF6CA';\n\nexport async function createClient() {\n  let cookieStore: Awaited<ReturnType<typeof cookies>> | undefined;\n  try {\n    cookieStore = await cookies();\n  } catch {\n    // During build/static generation, cookies() might not be available\n  }\n\n  const supabaseUrl =\n    process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseKey =\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY ??\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ??\n    FALLBACK_SUPABASE_ANON_KEY;\n\n  return createServerClient(supabaseUrl, supabaseKey, {\n    cookieOptions: {\n      // Firebase Hosting (Functions/Frameworks) sÃ³ encaminha \"__session\"\n      name: '__session',\n      sameSite: 'lax',\n      secure: true,\n    },\n    cookies: {\n      getAll() {\n        return cookieStore?.getAll() ?? [];\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore?.set(name, value, options)\n          );\n        } catch {\n          // The `setAll` method was called from a Server Component.\n        }\n      },\n    },\n  });\n}\n","import { createClient } from '@/lib/supabase/server';\nimport { Suspense } from 'react';\n\nasync function InstrumentsData() {\n  const supabase = await createClient();\n  const { data: instruments } = await supabase.from('instruments').select();\n\n  return <pre>{JSON.stringify(instruments, null, 2)}</pre>;\n}\n\nexport default function Instruments() {\n  return (\n    <Suspense fallback={<div>Loading instruments...</div>}>\n      <InstrumentsData />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"uCAAA,EAAA,CAAA,CAAA,MAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUO,eAAe,IACpB,IAAI,EACJ,GAAI,CACF,EAAc,MAAM,CAAA,EAAA,EAAA,OAAO,AAAP,GACtB,CAAE,KAAM,CAER,CASA,MAAO,CAAA,EAAA,EAAA,kBAAA,AAAkB,EANvB,AAMwB,aAAa,8BAJrC,IAFwC,6CAMU,CAClD,cAAe,CAEb,KAAM,YACN,SAAU,MACV,QAAQ,CACV,EACA,QAAS,QACP,IACS,GAAa,UAAY,EAAE,CAEpC,OAAO,CAAY,EACjB,GAAI,CACF,EAAa,OAAO,CAAC,CAAC,MAAE,CAAI,OAAE,CAAK,SAAE,CAAO,CAAE,GAC5C,GAAa,IAAI,EAAM,EAAO,GAElC,CAAE,KAAM,CAER,CACF,CACF,CACF,EACF,6EAxBI,yUCxBJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,eAAe,IACb,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CAAE,KAAM,CAAW,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,eAAe,MAAM,GAEvE,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,KAAK,SAAS,CAAC,EAAa,KAAM,IACjD,CAEe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,SAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,oCACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP"}
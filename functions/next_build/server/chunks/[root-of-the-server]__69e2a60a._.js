module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},83195,e=>{"use strict";function t(e,t){if(!e)return null;let r=t?.replace(/^\/+|\/+$/g,""),a=e.trim();return a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/^file_path:\s*/i,"")).replace(/^key:\s*/i,"")).replace(/^"+|"+$/g,"")).replace(/^'+|'+$/g,"")).replace(/,+$/g,"")).replace(/\s+$/g,"")).replace(/^https?:\/\/[^/]+\/storage\/v1\/(?:render\/image|object)\/public\//,"")).replace(/^\/?storage\/v1\/(?:render\/image|object)\/public\//,"")).replace(/^\/+/,""),r&&a.startsWith(`${r}/`)&&(a=a.slice(r.length+1)),a}function r(e,r){if(!r)return null;let a=r.startsWith("http://")||r.startsWith("https://"),n=r.includes("/storage/v1/");if(a&&!n)try{let e=new URL(r);if("https:"!==e.protocol)return console.warn(`Protocolo inseguro detectado: ${r}`),null;return r}catch{return console.error(`URL inv\xe1lida: ${r}`),null}let s=e.replace(/^\/+|\/+$/g,""),i=t(r,s);if(!i)return r.startsWith("http")?r:null;if(a&&n)try{let e=new URL(r),t=`${e.protocol}//${e.host}`;return`${t}/storage/v1/object/public/${s}/${i}`}catch{}let l=function(){let e="https://umkmwbkwvulxtdodzmzf.supabase.co";try{return e.replace(/\/+$/,"")}catch{return e}}();return l?`${l}/storage/v1/object/public/${s}/${i}`:r.startsWith("http")?r:null}function a(e){if(!e)return null;let t=e.trim();if(!t)return null;try{let r=new URL(t);if(["https:","http:"].includes(r.protocol))return r.toString();return console.warn(`Link externo inseguro bloqueado: ${e}`),null}catch{if(t.startsWith("/")||t.startsWith("#"))return t;if(t.startsWith("//"))try{return new URL(`https:${t}`).toString()}catch{}return console.error(`URL externa inv\xe1lida: ${e}`),null}}e.s(["buildSupabaseStorageUrl",()=>r,"normalizeStoragePath",()=>t,"validateExternalUrl",()=>a])},96479,e=>{"use strict";var t=e.i(62518),r=e.i(6046),a=e.i(27041),n=e.i(10162),s=e.i(27381),i=e.i(40467),l=e.i(45995),o=e.i(58846),u=e.i(869),p=e.i(15216),c=e.i(95872),d=e.i(9783),h=e.i(41979),f=e.i(1557),g=e.i(88107),v=e.i(93695);e.i(90799);var x=e.i(77645),R=e.i(69343),m=e.i(2124),y=e.i(83195);async function E(){let e="https://umkmwbkwvulxtdodzmzf.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY??process.env.SUPABASE_SERVICE_KEY;if(!e||!t)return m.NextResponse.json({error:"Missing Supabase credentials"},{status:500});let r=(0,R.createClient)(e,t,{auth:{persistSession:!1}}),{data:a,error:n}=await r.from("site_assets").select("*").order("page",{ascending:!0}).order("sort_order",{ascending:!0,nullsFirst:!1});if(n)return console.error("Supabase error:",n),m.NextResponse.json({error:n.message},{status:500});let s=function(e,t={}){let{onlyActive:r=!1,dropInvalid:a=!0}=t,n=new Map,s=new Map,i=e=>{if(!e)return!0;let t=e.trim().toLowerCase();return!t||t.startsWith("updated_at:")||t.startsWith("key:")||t.startsWith("file_path:")||".keep"===t||".emptyfolderplaceholder"===t},l=e=>{if(!e)return e;let t=e.trim();if(!t)return e;let r=t.includes("/")?"/":".",a=t.split(r).filter(Boolean);if(a.length<4)return e;let n=Math.min(3,Math.floor(a.length/2));for(let e=1;e<=n;e++)if(a.slice(0,e).join("|").toLowerCase()===a.slice(e,2*e).join("|").toLowerCase())return[...a.slice(0,e),...a.slice(2*e)].join(r);return e},o=e=>4*!!e.is_active+2*!!e.publicUrl+ +!!e.file_path?.includes("/")-.01*Math.min(e.key?.length??0,60);for(let t of e){let e=function(e){let t=(e.bucket||"site-assets").replace(/^bucket:\s*/i,"").replace(/^"+|"+$/g,"").replace(/^'+|'+$/g,"").replace(/^\/+|\/+$/g,""),r=e.key?.replace(/^key:\s*/i,"").replace(/^"+|"+$/g,"").replace(/^'+|'+$/g,"").replace(/,+$/g,"").trim(),a=(0,y.normalizeStoragePath)(e.file_path,t),n=a?/^clients\.clients\.strip\./.test(a)?a.replace(/^clients\.clients\.strip\./,"clients/clients.strip."):/^clients\.strip\./.test(a)?a.replace(/^clients\.strip\./,"clients/clients.strip."):a:a,s="site-assets"===t&&n?.startsWith("projects/")?"portfolio-media":t,i=e=>{if(!e)return;let t=e.replace(/^page:\s*/i,"").replace(/^"+|"+$/g,"").replace(/^'+|'+$/g,"").replace(/,+$/g,"").trim();if(!t||/^updated_at:/i.test(t)||/^key:/i.test(t))return;let r=t.includes("/")?"/":".",a=t.split(r)[0];return a?.toLowerCase()},l=i(e.page)||i(n)||i(r)||"global",o=(0,y.buildSupabaseStorageUrl)(s,n)||(e.file_path?.startsWith("http")?e.file_path:"")||"",u={...e,key:r??e.key,bucket:s,file_path:a??"",page:l,resolvedPage:l,publicUrl:o};if(e.href){let t=(0,y.validateExternalUrl)(e.href);t&&(u={...u,href:t})}return u}({...t,key:l(t.key)??t.key,file_path:l(t.file_path)??t.file_path}),u=e.key?.trim();if(!u||a&&(i(u)||i(e.file_path))||r&&!e.is_active)continue;let p=!!(e.publicUrl||"font"===e.asset_type||e.href);if(a&&!p)continue;let c=(e,t)=>{if(!e)return t;let r=o(e),a=o(t);return a>r||a===r&&t.key.length<e.key.length?t:e},d=c(n.get(u),e);n.set(u,d);let h=e.file_path||"";if(h){let t=c(s.get(h),e);s.set(h,t)}}let u=new Map;for(let e of n.values())u.set(e.id,e);for(let e of s.values())u.set(e.id,e);return Array.from(u.values()).sort((e,t)=>{let r=e.page??"",a=t.page??"";if(r===a){let r=e.sort_order??Number.MAX_SAFE_INTEGER,a=t.sort_order??Number.MAX_SAFE_INTEGER;return r===a?e.key.localeCompare(t.key):r-a}return r.localeCompare(a)})}(a??[],{onlyActive:!0});return m.NextResponse.json(s,{status:200})}e.s(["GET",()=>E,"dynamic",0,"force-static","revalidate",0,3600],18022);var w=e.i(18022);let b=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/site-assets/route",pathname:"/api/site-assets",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/site-assets/route.ts",nextConfigOutput:"",userland:w}),{workAsyncStorage:_,workUnitAsyncStorage:k,serverHooks:C}=b;function A(){return(0,a.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:k})}async function $(e,t,a){b.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let R="/api/site-assets/route";R=R.replace(/\/index$/,"")||"/";let m=await b.prepare(e,t,{srcPage:R,multiZoneDraftMode:!1});if(!m)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:y,params:E,nextConfig:w,parsedUrl:_,isDraftMode:k,prerenderManifest:C,routerServerContext:A,isOnDemandRevalidate:$,revalidateOnlyGenerated:S,resolvedPathname:N,clientReferenceManifest:U,serverActionsManifest:j}=m,P=(0,l.normalizeAppPath)(R),T=!!(C.dynamicRoutes[P]||C.routes[N]),O=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,_,!1):t.end("This page could not be found"),null);if(T&&!k){let e=!!C.routes[N],t=C.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await O();throw new v.NoFallbackError}}let M=null;!T||b.isDev||k||(M="/index"===(M=N)?"/":M);let q=!0===b.isDev||!T,I=T&&!q;j&&U&&(0,i.setManifestsSingleton)({page:R,clientReferenceManifest:U,serverActionsManifest:j});let H=e.method||"GET",L=(0,s.getTracer)(),W=L.getActiveScopeSpan(),D={params:E,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>b.onRequestError(e,t,a,n,A)},sharedContext:{buildId:y}},F=new o.NodeNextRequest(e),K=new o.NodeNextResponse(t),B=u.NextRequestAdapter.fromNodeNextRequest(F,(0,u.signalFromNodeResponse)(t));try{let i=async e=>b.handle(B,D).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${R}`)}),l=!!(0,n.getRequestMeta)(e,"minimalMode"),o=async n=>{var s,o;let u=async({previousCacheEntry:r})=>{try{if(!l&&$&&S&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(n);e.fetchMetrics=D.renderOpts.fetchMetrics;let o=D.renderOpts.pendingWaitUntil;o&&a.waitUntil&&(a.waitUntil(o),o=void 0);let u=D.renderOpts.collectedTags;if(!T)return await (0,d.sendResponse)(F,K,s,D.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);u&&(t[g.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==D.renderOpts.collectedRevalidate&&!(D.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&D.renderOpts.collectedRevalidate,a=void 0===D.renderOpts.collectedExpire||D.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:D.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await b.onRequestError(e,t,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:$})},!1,A),t}},p=await b.handleResponse({req:e,nextConfig:w,cacheKey:M,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:$,revalidateOnlyGenerated:S,responseGenerator:u,waitUntil:a.waitUntil,isMinimalMode:l});if(!T)return null;if((null==p||null==(s=p.value)?void 0:s.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(o=p.value)?void 0:o.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",$?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),k&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let v=(0,h.fromNodeOutgoingHttpHeaders)(p.value.headers);return l&&T||v.delete(g.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||v.get("Cache-Control")||v.set("Cache-Control",(0,f.getCacheControlHeader)(p.cacheControl)),await (0,d.sendResponse)(F,K,new Response(p.value.body,{headers:v,status:p.value.status||200})),null};W?await o(W):await L.withPropagatedContext(e.headers,()=>L.trace(p.BaseServerSpan.handleRequest,{spanName:`${H} ${R}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},o))}catch(t){if(t instanceof v.NoFallbackError||await b.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:$})},!1,A),T)throw t;return await (0,d.sendResponse)(F,K,new Response(null,{status:500})),null}}e.s(["handler",()=>$,"patchFetch",()=>A,"routeModule",()=>b,"serverHooks",()=>C,"workAsyncStorage",()=>_,"workUnitAsyncStorage",()=>k],96479)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__69e2a60a._.js.map
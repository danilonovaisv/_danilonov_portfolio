{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\n\n// Brittle import removed\n// import { ReadonlyRequestCookies } from 'next/dist/server/web/spec-extension/adapters/request-cookies';\n\n// Fallback credentials (hardcoded for production reliability)\nconst FALLBACK_SUPABASE_URL = 'https://umkmwbkwvulxtdodzmzf.supabase.co';\nconst FALLBACK_SUPABASE_ANON_KEY =\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVta213Ymt3dnVseHRkb2R6bXpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDE4MzcsImV4cCI6MjA4MzkxNzgzN30.wssvD9W-yzRyLpq8aMCw57E4wNz7OnQ58ujLzYmF6CA';\n\nexport async function createClient() {\n  let cookieStore: Awaited<ReturnType<typeof cookies>> | undefined;\n  try {\n    cookieStore = await cookies();\n  } catch {\n    // During build/static generation, cookies() might not be available\n  }\n\n  const supabaseUrl =\n    process.env.NEXT_PUBLIC_SUPABASE_URL || FALLBACK_SUPABASE_URL;\n  const supabaseKey =\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY ??\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ??\n    FALLBACK_SUPABASE_ANON_KEY;\n\n  return createServerClient(supabaseUrl, supabaseKey, {\n    cookieOptions: {\n      // Firebase Hosting (Functions/Frameworks) sÃ³ encaminha \"__session\"\n      name: '__session',\n      sameSite: 'lax',\n      secure: true,\n    },\n    cookies: {\n      getAll() {\n        return cookieStore?.getAll() ?? [];\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore?.set(name, value, options)\n          );\n        } catch {\n          // The `setAll` method was called from a Server Component.\n        }\n      },\n    },\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEA,yBAAyB;AACzB,yGAAyG;AAEzG,8DAA8D;AAC9D,MAAM,wBAAwB;AAC9B,MAAM,6BACJ;AAEK,eAAe;IACpB,IAAI;IACJ,IAAI;QACF,cAAc,MAAM,IAAA,yVAAO;IAC7B,EAAE,OAAM;IACN,mEAAmE;IACrE;IAEA,MAAM,cACJ,gFAAwC;IAC1C,MAAM,cACJ,8UAEA;IAEF,OAAO,IAAA,4SAAkB,EAAC,aAAa,aAAa;QAClD,eAAe;YACb,mEAAmE;YACnE,MAAM;YACN,UAAU;YACV,QAAQ;QACV;QACA,SAAS;YACP;gBACE,OAAO,aAAa,YAAY,EAAE;YACpC;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,aAAa,IAAI,MAAM,OAAO;gBAElC,EAAE,OAAM;gBACN,0DAA0D;gBAC5D;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/lib/supabase/queries/projects.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/server';\nimport type { DbProject, DbTag } from '@/types/admin';\nimport type { SupabaseClient } from '@supabase/supabase-js';\n\ntype ProjectFilters = {\n  tagSlug?: string;\n  year?: number;\n  search?: string;\n  includeUnpublished?: boolean;\n  featuredOnHome?: boolean;\n  featuredOnPortfolio?: boolean;\n};\n\nexport type DbProjectWithTags = DbProject & {\n  tags?: Array<{ tag: DbTag } | null> | null;\n  landing_page?: { slug: string } | null;\n};\n\nexport async function listProjects(\n  filters: ProjectFilters = {},\n  supabaseClient?: SupabaseClient\n) {\n  const supabase = supabaseClient ?? (await createClient());\n\n  let query = supabase\n    .from('portfolio_projects')\n    .select(\n      '*, tags:portfolio_project_tags(tag:portfolio_tags(id, slug, label, kind)), landing_page:landing_pages(slug)'\n    )\n    .order('featured_portfolio_order', { ascending: true, nullsFirst: false });\n\n  if (!filters.includeUnpublished) {\n    query = query.eq('is_published', true);\n  }\n\n  if (filters.tagSlug) {\n    query = query.eq('tags.tag.slug', filters.tagSlug);\n  }\n\n  if (filters.year) {\n    query = query.eq('year', filters.year);\n  }\n\n  if (filters.search) {\n    query = query.or(\n      `title.ilike.%${filters.search}%,client_name.ilike.%${filters.search}%`\n    );\n  }\n\n  if (filters.featuredOnHome) {\n    query = query.eq('featured_on_home', true);\n  }\n\n  if (filters.featuredOnPortfolio) {\n    query = query.eq('featured_on_portfolio', true);\n  }\n\n  const { data, error } = await query.returns<DbProjectWithTags[]>();\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProject(id: string) {\n  const supabase = await createClient();\n  const { data, error } = await supabase\n    .from('portfolio_projects')\n    .select(\n      '*, tags:portfolio_project_tags(tag:portfolio_tags(id, slug, label, kind))'\n    )\n    .eq('id', id)\n    .single();\n\n  if (error) throw error;\n  return data as DbProject;\n}\n\nexport async function upsertProject(\n  payload: Partial<DbProject> & { id?: string; tagIds?: string[] }\n) {\n  const supabase = await createClient();\n\n  const { tagIds, ...projectData } = payload;\n\n  const { data, error } = await supabase\n    .from('portfolio_projects')\n    .upsert(projectData, { onConflict: 'id' })\n    .select()\n    .single();\n\n  if (error) throw error;\n\n  if (tagIds && data?.id) {\n    await supabase\n      .from('portfolio_project_tags')\n      .delete()\n      .eq('project_id', data.id);\n    if (tagIds.length > 0) {\n      const relations = tagIds.map((tagId) => ({\n        project_id: data.id,\n        tag_id: tagId,\n      }));\n      const { error: relError } = await supabase\n        .from('portfolio_project_tags')\n        .insert(relations);\n      if (relError) throw relError;\n    }\n  }\n\n  return data as DbProject;\n}\n\nexport async function togglePublish(formData: FormData) {\n  'use server';\n  const projectId = formData.get('id') as string;\n  const nextStatus = (formData.get('nextStatus') as string) === 'true';\n  const supabase = await createClient();\n  const { error } = await supabase\n    .from('portfolio_projects')\n    .update({ is_published: nextStatus })\n    .eq('id', projectId);\n  if (error) throw error;\n}\n\nexport async function deleteProject(projectId: string) {\n  const supabase = await createClient();\n  const { error } = await supabase\n    .from('portfolio_projects')\n    .delete()\n    .eq('id', projectId);\n  if (error) throw error;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;+HAAA;;;AAkBO,eAAe,aACpB,UAA0B,CAAC,CAAC,EAC5B,cAA+B;IAE/B,MAAM,WAAW,kBAAmB,MAAM,IAAA,gJAAY;IAEtD,IAAI,QAAQ,SACT,IAAI,CAAC,sBACL,MAAM,CACL,+GAED,KAAK,CAAC,4BAA4B;QAAE,WAAW;QAAM,YAAY;IAAM;IAE1E,IAAI,CAAC,QAAQ,kBAAkB,EAAE;QAC/B,QAAQ,MAAM,EAAE,CAAC,gBAAgB;IACnC;IAEA,IAAI,QAAQ,OAAO,EAAE;QACnB,QAAQ,MAAM,EAAE,CAAC,iBAAiB,QAAQ,OAAO;IACnD;IAEA,IAAI,QAAQ,IAAI,EAAE;QAChB,QAAQ,MAAM,EAAE,CAAC,QAAQ,QAAQ,IAAI;IACvC;IAEA,IAAI,QAAQ,MAAM,EAAE;QAClB,QAAQ,MAAM,EAAE,CACd,CAAC,aAAa,EAAE,QAAQ,MAAM,CAAC,qBAAqB,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;IAE3E;IAEA,IAAI,QAAQ,cAAc,EAAE;QAC1B,QAAQ,MAAM,EAAE,CAAC,oBAAoB;IACvC;IAEA,IAAI,QAAQ,mBAAmB,EAAE;QAC/B,QAAQ,MAAM,EAAE,CAAC,yBAAyB;IAC5C;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,OAAO;IAC3C,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,WAAW,EAAU;IACzC,MAAM,WAAW,MAAM,IAAA,gJAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,sBACL,MAAM,CACL,6EAED,EAAE,CAAC,MAAM,IACT,MAAM;IAET,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,cACpB,OAAgE;IAEhE,MAAM,WAAW,MAAM,IAAA,gJAAY;IAEnC,MAAM,EAAE,MAAM,EAAE,GAAG,aAAa,GAAG;IAEnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,sBACL,MAAM,CAAC,aAAa;QAAE,YAAY;IAAK,GACvC,MAAM,GACN,MAAM;IAET,IAAI,OAAO,MAAM;IAEjB,IAAI,UAAU,MAAM,IAAI;QACtB,MAAM,SACH,IAAI,CAAC,0BACL,MAAM,GACN,EAAE,CAAC,cAAc,KAAK,EAAE;QAC3B,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,MAAM,YAAY,OAAO,GAAG,CAAC,CAAC,QAAU,CAAC;oBACvC,YAAY,KAAK,EAAE;oBACnB,QAAQ;gBACV,CAAC;YACD,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,0BACL,MAAM,CAAC;YACV,IAAI,UAAU,MAAM;QACtB;IACF;IAEA,OAAO;AACT;MAEO,wBAAA,eAAe,cAAc,QAAkB;IAEpD,MAAM,YAAY,SAAS,GAAG,CAAC;IAC/B,MAAM,aAAa,AAAC,SAAS,GAAG,CAAC,kBAA6B;IAC9D,MAAM,WAAW,MAAM,IAAA,gJAAY;IACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,sBACL,MAAM,CAAC;QAAE,cAAc;IAAW,GAClC,EAAE,CAAC,MAAM;IACZ,IAAI,OAAO,MAAM;AACnB;8bAVO;IAAe,gBAAf;AAYA,eAAe,cAAc,SAAiB;IACnD,MAAM,WAAW,MAAM,IAAA,gJAAY;IACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,sBACL,MAAM,GACN,EAAE,CAAC,MAAM;IACZ,IAAI,OAAO,MAAM;AACnB"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/.next-internal/server/app/portfolio/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_0 as '405e27b487dec532f4064e409ab8c6fe42f2313931'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}
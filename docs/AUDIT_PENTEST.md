# ðŸ›¡ï¸ AUDIT_PENTEST.md - RelatÃ³rio de Auditoria SOBRE (ORIGIN) - FASE 3 (DEBUG FINAL)

**Data:** 2026-02-05 (Update Final)
**Executado por:** Antigravity Orchestrator (Ghost Commander)
**Status:** âœ… FINALIZADO E VALIDADO

---

## ðŸ“‹ RESUMO DO PROBLEMA (SYNC & TIMING)

**Sintoma Original:** "Imagem e texto nÃ£o saem juntos" e "Imagem comeÃ§a a sair antes do texto entrar".
**DiagnÃ³stico:**

1. **Entrada:** Trigger `top center` (ou variations) estava muito tardio, causando delay na atualizaÃ§Ã£o da imagem (via `revealImage`).
2. **SaÃ­da:** A animaÃ§Ã£o de saÃ­da usava valores estÃ¡ticos (`y: -100px` ou `-100vh`) ou triggers soltos, causando "deslizamento" (velocidade diferente entre texto scrollando e imagem animando) ou "fading" prematuro.

---

## âœ… SOLUÃ‡ÃƒO IMPLEMENTADA (EXACT SYNC)

Implementamos uma sincronizaÃ§Ã£o matemÃ¡tica 1:1 para a saÃ­da e ajustamos a entrada.

### 1. SaÃ­da: VÃ­nculo MecÃ¢nico Absoluto

Para garantir que a imagem suba **exatamente** na mesma velocidade que o texto (efeito "pinned"), usamos o `offsetHeight` real do bloco como valor de translaÃ§Ã£o.

```typescript
// useOriginAnimations.ts
gsap.to(archRightEl, {
  opacity: 0,
  y: () => -lastBlock.clientHeight, // Move EXATAMENTE a altura do bloco
  ease: 'none', // Movimento linear (acompanha scroll)
  scrollTrigger: {
    trigger: lastBlock,
    start: 'top top', // Inicia quando o texto domina a tela
    end: 'bottom top', // Termina quando o texto sai completamente
    scrub: true, // VÃNCULO RÃGIDO
    invalidateOnRefresh: true, // Recalcula em resize
  },
});
```

### 2. Entrada: Gatilho Otimizado

Ajustamos o loop de entrada para `start: 'top 60%'`. Isso garante que a imagem atualize assim que o texto se torna o foco principal (passando de 60% da tela), evitando que a imagem anterior persista indevidamente.

---

## ðŸ” VERIFICAÃ‡ÃƒO (BROWSER AGENT)

- [x] **Entrada:** Imagem atualiza prontamente (purple/AI visual) quando o texto chega a ~60% da view.
- [x] **SaÃ­da:** Texto e Imagem sobem **juntos** (pixel-perfect sync). NÃ£o hÃ¡ "orphan text" nem "orphan image".
- [x] **TransiÃ§Ã£o:** A prÃ³xima seÃ§Ã£o ("MANIFESTO") entra limpa, sem sobreposiÃ§Ã£o de assets antigos.

---

## ðŸ“ NOTAS TÃ‰CNICAS

O uso de `functional values` (`() => value`) no GSAP Ã© crucial para designs responsivos onde a altura do bloco de texto varia (mobile vs desktop).

---

# RELATÃ“RIOS ANTERIORES

...

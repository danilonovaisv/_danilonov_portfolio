(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5028],{1083:(e,s,r)=>{Promise.resolve().then(r.bind(r,74496))},28713:(e,s,r)=>{"use strict";r.d(s,{i:()=>i});var t=r(57716),l=r(87358);let a=null;function i(){if(l.env.PLAYWRIGHT_TEST){let e={eq:()=>e,order:()=>e,limit:()=>e,returns:()=>Promise.resolve({data:[],error:null}),select:()=>e,single:()=>Promise.resolve({data:null,error:null})};return{from:()=>e,auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{from:()=>({getPublicUrl:()=>({data:{publicUrl:""}})})}}}if(a)return a;let e="https://umkmwbkwvulxtdodzmzf.supabase.co",s=l.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY??"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVta213Ymt3dnVseHRkb2R6bXpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDE4MzcsImV4cCI6MjA4MzkxNzgzN30.wssvD9W-yzRyLpq8aMCw57E4wNz7OnQ58ujLzYmF6CA";if(!e)throw Error("NEXT_PUBLIC_SUPABASE_URL n\xe3o est\xe1 definida.");if(!s)throw Error("Defina NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY ou NEXT_PUBLIC_SUPABASE_ANON_KEY.");return a=(0,t.createBrowserClient)(e,s,{cookieOptions:{name:"__session",sameSite:"lax",secure:!0}})}},74496:(e,s,r)=>{"use strict";r.d(s,{TagForm:()=>m});var t=r(95155),l=r(12115),a=r(73321),i=r(33546),n=r(99003),o=r(86443),d=r(28713);let c=o.Ikc({label:o.YjP().min(2),slug:o.YjP().min(2),kind:o.YjP().default("category"),description:o.YjP().optional(),sort_order:o.auy.number().int().optional()});function m({tag:e,onSaved:s}){let[r,o]=(0,l.useState)(null),[m,u]=(0,l.useTransition)(),x=(0,a.useRouter)(),p=(0,n.mN)({resolver:(0,i.u)(c),defaultValues:{label:e?.label??"",slug:e?.slug??"",kind:e?.kind??"category",description:e?.description??"",sort_order:e?.sort_order??void 0}});return(0,t.jsxs)("form",{className:"space-y-4",onSubmit:p.handleSubmit(r=>{o(null),u(async()=>{try{let t=(0,d.i)(),{error:l}=await t.from("portfolio_tags").upsert({id:e?.id,...r},{onConflict:"id"});if(l)throw l;x.refresh(),s?.()}catch(e){o(e instanceof Error?e.message:"Ocorreu um erro desconhecido")}})}),children:[(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Label"}),(0,t.jsx)("input",{className:"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm",...p.register("label")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Slug"}),(0,t.jsx)("input",{className:"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm",...p.register("slug")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Tipo"}),(0,t.jsxs)("select",{className:"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm",...p.register("kind"),children:[(0,t.jsx)("option",{value:"category",children:"Categoria"}),(0,t.jsx)("option",{value:"discipline",children:"Disciplina"}),(0,t.jsx)("option",{value:"industry",children:"Ind\xfastria"})]})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Ordem"}),(0,t.jsx)("input",{type:"number",className:"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm",...p.register("sort_order")})]})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{rows:3,className:"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm",...p.register("description")})]}),r&&(0,t.jsx)("div",{className:"text-sm text-red-400",children:r}),(0,t.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-blue-500 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-600 disabled:opacity-50",disabled:m,children:m?"Salvando...":"Salvar tag"})]})}}},e=>{e.O(0,[7716,7366,8441,3794,7358],()=>e(e.s=1083)),_N_E=e.O()}]);
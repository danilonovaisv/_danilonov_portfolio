(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{3091:(e,t,r)=>{"use strict";r.d(t,{_8:()=>i,nJ:()=>n,rK:()=>s});let s="legacy-blocks",i="master-project-v1",n="master-project-v2"},25598:(e,t,r)=>{Promise.resolve().then(r.bind(r,87670))},28713:(e,t,r)=>{"use strict";r.d(t,{i:()=>a});var s=r(57716),i=r(87358);let n=null;function a(){if(i.env.PLAYWRIGHT_TEST){let e={eq:()=>e,order:()=>e,limit:()=>e,returns:()=>Promise.resolve({data:[],error:null}),select:()=>e,single:()=>Promise.resolve({data:null,error:null})};return{from:()=>e,auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{from:()=>({getPublicUrl:()=>({data:{publicUrl:""}})})}}}if(n)return n;let e="https://umkmwbkwvulxtdodzmzf.supabase.co",t=i.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY??"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVta213Ymt3dnVseHRkb2R6bXpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDE4MzcsImV4cCI6MjA4MzkxNzgzN30.wssvD9W-yzRyLpq8aMCw57E4wNz7OnQ58ujLzYmF6CA";if(!e)throw Error("NEXT_PUBLIC_SUPABASE_URL n\xe3o est\xe1 definida.");if(!t)throw Error("Defina NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY ou NEXT_PUBLIC_SUPABASE_ANON_KEY.");return n=(0,s.createBrowserClient)(e,t,{cookieOptions:{name:"__session",sameSite:"lax",secure:!0}})}},51914:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(90425).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},68459:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(90425).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},80642:(e,t,r)=>{"use strict";r.d(t,{N:()=>b});var s=r(95155),i=r(12115),n=r(39551),a=r(28819),l=r(4524),o=r(15131),c=r(78757),d=r(24866);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,s=(0,c.s)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=s-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:r,anchorY:n,root:a,pop:l}){let o=(0,i.useId)(),c=(0,i.useRef)(null),h=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=(0,i.useContext)(d.Q),f=function(...e){return i.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=u(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(c,e.props?.ref??e?.ref);return(0,i.useInsertionEffect)(()=>{let{width:e,height:s,top:i,left:d,right:u,bottom:p}=h.current;if(t||!1===l||!c.current||!e||!s)return;let f="left"===r?`left: ${d}`:`right: ${u}`,x="bottom"===n?`bottom: ${p}`:`top: ${i}`;c.current.dataset.motionPopId=o;let g=document.createElement("style");m&&(g.nonce=m);let j=a??document.head;return j.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${f}px !important;
            ${x}px !important;
          }
        `),()=>{j.contains(g)&&j.removeChild(g)}},[t]),(0,s.jsx)(p,{isPresent:t,childRef:c,sizeRef:h,pop:l,children:!1===l?e:i.cloneElement(e,{ref:f})})}let m=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:l,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:p,root:m})=>{let x=(0,a.M)(f),g=(0,i.useId)(),j=!0,b=(0,i.useMemo)(()=>(j=!1,{id:g,initial:t,isPresent:r,custom:l,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;n&&n()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[r,x,n]);return c&&j&&(b={...b}),(0,i.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[r]),i.useEffect(()=>{r||x.size||!n||n()},[r]),e=(0,s.jsx)(h,{pop:"popLayout"===d,isPresent:r,anchorX:u,anchorY:p,root:m,children:e}),(0,s.jsx)(o.t.Provider,{value:b,children:e})};function f(){return new Map}var x=r(79196);let g=e=>e.key||"";function j(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:t,initial:r=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:p="left",anchorY:h="top",root:f})=>{let[b,y]=(0,x.xQ)(u),w=(0,i.useMemo)(()=>j(e),[e]),v=u&&!b?[]:w.map(g),N=(0,i.useRef)(!0),E=(0,i.useRef)(w),k=(0,a.M)(()=>new Map),_=(0,i.useRef)(new Set),[A,C]=(0,i.useState)(w),[P,I]=(0,i.useState)(w);(0,l.E)(()=>{N.current=!1,E.current=w;for(let e=0;e<P.length;e++){let t=g(P[e]);v.includes(t)?(k.delete(t),_.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[P,v.length,v.join("-")]);let M=[];if(w!==A){let e=[...w];for(let t=0;t<P.length;t++){let r=P[t],s=g(r);v.includes(s)||(e.splice(t,0,r),M.push(r))}return"wait"===d&&M.length&&(e=M),I(j(e)),C(w),null}let{forceRender:L}=(0,i.useContext)(n.L);return(0,s.jsx)(s.Fragment,{children:P.map(e=>{let i=g(e),n=(!u||!!b)&&(w===P||v.includes(i));return(0,s.jsx)(m,{isPresent:n,initial:(!N.current||!!r)&&void 0,custom:t,presenceAffectsLayout:c,mode:d,root:f,onExitComplete:n?void 0:()=>{if(_.current.has(i)||(_.current.add(i),!k.has(i)))return;k.set(i,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(L?.(),I(E.current),u&&y?.(),o&&o())},anchorX:p,anchorY:h,children:e},i)})})}},87670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(95155),i=r(12115),n=r(98500),a=r.n(n),l=r(28713),o=r(51914),c=r(90425);let d=(0,c.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),u=(0,c.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=r(68459),h=r(80642),m=r(28160),f=r(3091);function x(){let e=(0,l.i)(),[t,r]=(0,i.useState)([]),[n,c]=(0,i.useState)(!0);async function x(){try{c(!0);let{data:t,error:s}=await e.from("landing_pages").select("id, title, slug, created_at, content").order("created_at",{ascending:!1});if(s)throw s;let i=t?.map(e=>({id:e.id,title:e.title,slug:e.slug,created_at:e.created_at,template:function(e){if(Array.isArray(e))return f.rK;if(e&&"object"==typeof e&&"template"in e){let t=e.template;if(t===f._8)return f._8;if(t===f.nJ)return f.nJ}return f.rK}(e.content)}));r(i||[])}catch(e){console.error("Error fetching landing pages:",e)}finally{c(!1)}}async function g(s){if(confirm("Tem certeza que deseja excluir esta p\xe1gina?"))try{let{error:i}=await e.from("landing_pages").delete().eq("id",s);if(i)throw i;r(t.filter(e=>e.id!==s))}catch(e){console.error("Error deleting landing page:",e),alert("Erro ao excluir p\xe1gina.")}}return(0,i.useEffect)(()=>{x()},[]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm uppercase tracking-[0.25em] text-slate-400",children:"Gerenciamento"}),(0,s.jsx)("h1",{className:"text-3xl font-semibold",children:"Portfolio Projects"})]}),(0,s.jsxs)(a(),{href:"/admin/landing-pages/new",className:"flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition-all hover:bg-blue-700",children:[(0,s.jsx)(o.A,{size:18}),"Novo Projeto"]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-xl border border-white/10 bg-slate-900/40 backdrop-blur-sm",children:n?(0,s.jsx)("div",{className:"p-12 text-center text-slate-400",children:"Carregando..."}):t.length>0?(0,s.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-white/10 text-slate-400",children:[(0,s.jsx)("th",{className:"px-6 py-4 font-medium uppercase tracking-wider",children:"T\xedtulo"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium uppercase tracking-wider",children:"Slug"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium uppercase tracking-wider",children:"Template"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium uppercase tracking-wider",children:"Cria\xe7\xe3o"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right font-medium uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-white/5",children:(0,s.jsx)(h.N,{children:t.map(e=>(0,s.jsxs)(m.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"group transition-colors hover:bg-white/2",children:[(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-white",children:e.title}),(0,s.jsxs)("td",{className:"px-6 py-4 font-mono text-xs text-slate-400",children:["/",e.slug]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.12em] ${e.template===f._8||e.template===f.nJ?"bg-blue-500/15 text-blue-200 border border-blue-400/30":"bg-slate-700/50 text-slate-300 border border-white/10"}`,children:e.template===f._8?"Template Mestre V1":e.template===f.nJ?"Template Mestre V2":"Legacy"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-slate-500",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(a(),{href:`/projects/${e.slug}`,target:"_blank",className:"p-2 text-slate-400 transition-colors hover:text-white",title:"Ver p\xe1gina p\xfablica",children:(0,s.jsx)(d,{size:18})}),(0,s.jsx)(a(),{href:`/admin/landing-pages/${e.id}`,className:"p-2 text-slate-400 transition-colors hover:text-blue-400",title:"Editar",children:(0,s.jsx)(u,{size:18})}),(0,s.jsx)("button",{onClick:()=>g(e.id),className:"p-2 text-slate-400 transition-colors hover:text-red-400",title:"Excluir",type:"button",children:(0,s.jsx)(p.A,{size:18})})]})})]},e.id))})})]}):(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)("p",{className:"mb-4 text-slate-400",children:"Nenhum projeto criado."}),(0,s.jsx)(a(),{href:"/admin/landing-pages/new",className:"text-sm text-blue-400 hover:underline",children:"Criar meu primeiro projeto"})]})})]})}},90425:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:o,iconNode:c,...d},u)=>(0,s.createElement)("svg",{ref:u,...a,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:i("lucide",l),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...a},o)=>(0,s.createElement)(l,{ref:o,iconNode:t,className:i(`lucide-${n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a}));return r.displayName=n(e),r}}},e=>{e.O(0,[8500,8160,7716,8441,3794,7358],()=>e(e.s=25598)),_N_E=e.O()}]);
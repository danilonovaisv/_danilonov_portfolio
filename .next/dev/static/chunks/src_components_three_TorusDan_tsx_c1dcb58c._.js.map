{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/components/three/TorusDan.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef } from 'react';\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { Float, MeshTransmissionMaterial, useGLTF } from '@react-three/drei';\nimport * as THREE from 'three';\n\ntype TorusDanProps = {\n  /** 0..1 vindo do scroll do hero – se não usar ainda, deixa default */\n  scrollIntensity?: number;\n};\n\ntype GLTFResult = {\n  nodes: Record<string, THREE.Mesh>;\n};\n\nconst MODEL_PATH = '/media/torus_dan.glb';\n\nconst TorusDan: React.FC<TorusDanProps> = ({ scrollIntensity = 1 }) => {\n  const group = useRef<THREE.Group>(null);\n  const { viewport } = useThree();\n\n  // Carrega o GLB da orb\n  const { nodes } = useGLTF(MODEL_PATH) as unknown as GLTFResult;\n  const baseMesh = nodes.Torus || Object.values(nodes)[0];\n\n  // Animação: rotação contínua + resposta ao mouse + leve respiro\n  useFrame((state, delta) => {\n    if (!group.current || !baseMesh) return;\n\n    const t = state.clock.getElapsedTime();\n    const { x, y } = state.pointer; // -1..1 normalizado pelo R3F\n\n    // spin base\n    group.current.rotation.z += delta * 0.15 * scrollIntensity;\n\n    // tilt controlado pelo mouse\n    const targetRotX = y * 0.3 * scrollIntensity;\n    const targetRotY = x * 0.4 * scrollIntensity + t * 0.1;\n\n    group.current.rotation.x = THREE.MathUtils.damp(\n      group.current.rotation.x,\n      targetRotX,\n      4,\n      delta\n    );\n    group.current.rotation.y = THREE.MathUtils.damp(\n      group.current.rotation.y,\n      targetRotY,\n      4,\n      delta\n    );\n\n    // escala responsiva (viewport.width vem do R3F)\n    const baseScale = viewport.width < 6 ? 1.6 : 2.1;\n    const targetScale = baseScale * (0.9 + 0.15 * scrollIntensity);\n    const s = THREE.MathUtils.damp(\n      group.current.scale.x || 1,\n      targetScale,\n      4,\n      delta\n    );\n    group.current.scale.setScalar(s);\n  });\n\n  if (!baseMesh) return null;\n\n  return (\n    <group ref={group}>\n      {/* Float dá o “respiro” vertical/rotacional suave */}\n      <Float\n        speed={1.2}\n        floatIntensity={0.6}\n        rotationIntensity={0.4}\n        floatingRange={[-0.15, 0.15]}\n      >\n        <mesh geometry={baseMesh.geometry} castShadow receiveShadow>\n          {/* Glass effect estilo MeshTransmissionMaterial (Olivier) */}\n          <MeshTransmissionMaterial\n            // look físico\n            transmission={1}\n            ior={1.25}\n            thickness={2}\n            roughness={0.1}\n            chromaticAberration={0.04}\n            anisotropy={0.12}\n            distortion={0.3}\n            distortionScale={0.4}\n            temporalDistortion={0.2}\n            // amostra/qualidade\n            samples={10}\n            resolution={256}\n            // cor / tint\n            color=\"#ffffff\"\n            attenuationColor=\"#9ab5ff\"\n            attenuationDistance={1.5}\n            backside\n          />\n        </mesh>\n      </Float>\n    </group>\n  );\n};\n\n// Preload ajuda a orb aparecer instantâneo no hero\nuseGLTF.preload(MODEL_PATH);\n\nexport default TorusDan;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AALA;;;;;AAgBA,MAAM,aAAa;AAEnB,MAAM,WAAoC,CAAC,EAAE,kBAAkB,CAAC,EAAE;;IAChE,MAAM,QAAQ,IAAA,uKAAM,EAAc;IAClC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,8NAAQ;IAE7B,uBAAuB;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,sKAAO,EAAC;IAC1B,MAAM,WAAW,MAAM,KAAK,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE;IAEvD,gEAAgE;IAChE,IAAA,8NAAQ;6BAAC,CAAC,OAAO;YACf,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC,UAAU;YAEjC,MAAM,IAAI,MAAM,KAAK,CAAC,cAAc;YACpC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,MAAM,OAAO,EAAE,6BAA6B;YAE7D,YAAY;YACZ,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,OAAO;YAE3C,6BAA6B;YAC7B,MAAM,aAAa,IAAI,MAAM;YAC7B,MAAM,aAAa,IAAI,MAAM,kBAAkB,IAAI;YAEnD,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,+JAAe,CAAC,IAAI,CAC7C,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,EACxB,YACA,GACA;YAEF,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,+JAAe,CAAC,IAAI,CAC7C,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,EACxB,YACA,GACA;YAGF,gDAAgD;YAChD,MAAM,YAAY,SAAS,KAAK,GAAG,IAAI,MAAM;YAC7C,MAAM,cAAc,YAAY,CAAC,MAAM,OAAO,eAAe;YAC7D,MAAM,IAAI,+JAAe,CAAC,IAAI,CAC5B,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,GACzB,aACA,GACA;YAEF,MAAM,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC;QAChC;;IAEA,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,6LAAC;QAAM,KAAK;kBAEV,cAAA,6LAAC,qKAAK;YACJ,OAAO;YACP,gBAAgB;YAChB,mBAAmB;YACnB,eAAe;gBAAC,CAAC;gBAAM;aAAK;sBAE5B,cAAA,6LAAC;gBAAK,UAAU,SAAS,QAAQ;gBAAE,UAAU;gBAAC,aAAa;0BAEzD,cAAA,6LAAC,2MAAwB;oBACvB,cAAc;oBACd,cAAc;oBACd,KAAK;oBACL,WAAW;oBACX,WAAW;oBACX,qBAAqB;oBACrB,YAAY;oBACZ,YAAY;oBACZ,iBAAiB;oBACjB,oBAAoB;oBACpB,oBAAoB;oBACpB,SAAS;oBACT,YAAY;oBACZ,aAAa;oBACb,OAAM;oBACN,kBAAiB;oBACjB,qBAAqB;oBACrB,QAAQ;;;;;;;;;;;;;;;;;;;;;AAMpB;GApFM;;QAEiB,8NAAQ;QAGX,sKAAO;QAIzB,8NAAQ;;;KATJ;AAsFN,mDAAmD;AACnD,sKAAO,CAAC,OAAO,CAAC;uCAED"}}]
}